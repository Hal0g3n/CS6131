(self["webpackChunkChessible"]=self["webpackChunkChessible"]||[]).push([[443],{4444:function(t,e,i){"use strict";i.d(e,{BH:function(){return T},DV:function(){return W},GJ:function(){return H},L:function(){return c},LL:function(){return O},P0:function(){return I},Sg:function(){return E},UI:function(){return Y},US:function(){return l},Wl:function(){return z},Yr:function(){return b},ZR:function(){return M},aH:function(){return P},b$:function(){return v},cI:function(){return N},dS:function(){return U},eu:function(){return y},g5:function(){return a},gK:function(){return q},gQ:function(){return j},h$:function(){return h},hl:function(){return x},hu:function(){return n},m9:function(){return Q},p$:function(){return u},r3:function(){return $},uI:function(){return m},ug:function(){return K},vZ:function(){return V},w9:function(){return B},xO:function(){return G},xb:function(){return X}});
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const s={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},n=function(t,e){if(!t)throw a(e)},a=function(t){return new Error("Firebase Database ("+s.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},r=function(t){const e=[];let i=0;for(let s=0;s<t.length;s++){let n=t.charCodeAt(s);n<128?e[i++]=n:n<2048?(e[i++]=n>>6|192,e[i++]=63&n|128):55296===(64512&n)&&s+1<t.length&&56320===(64512&t.charCodeAt(s+1))?(n=65536+((1023&n)<<10)+(1023&t.charCodeAt(++s)),e[i++]=n>>18|240,e[i++]=n>>12&63|128,e[i++]=n>>6&63|128,e[i++]=63&n|128):(e[i++]=n>>12|224,e[i++]=n>>6&63|128,e[i++]=63&n|128)}return e},o=function(t){const e=[];let i=0,s=0;while(i<t.length){const n=t[i++];if(n<128)e[s++]=String.fromCharCode(n);else if(n>191&&n<224){const a=t[i++];e[s++]=String.fromCharCode((31&n)<<6|63&a)}else if(n>239&&n<365){const a=t[i++],r=t[i++],o=t[i++],l=((7&n)<<18|(63&a)<<12|(63&r)<<6|63&o)-65536;e[s++]=String.fromCharCode(55296+(l>>10)),e[s++]=String.fromCharCode(56320+(1023&l))}else{const a=t[i++],r=t[i++];e[s++]=String.fromCharCode((15&n)<<12|(63&a)<<6|63&r)}}return e.join("")},l={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let n=0;n<t.length;n+=3){const e=t[n],a=n+1<t.length,r=a?t[n+1]:0,o=n+2<t.length,l=o?t[n+2]:0,h=e>>2,c=(3&e)<<4|r>>4;let d=(15&r)<<2|l>>6,u=63&l;o||(u=64,a||(d=64)),s.push(i[h],i[c],i[d],i[u])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(r(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):o(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const i=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let n=0;n<t.length;){const e=i[t.charAt(n++)],a=n<t.length,r=a?i[t.charAt(n)]:0;++n;const o=n<t.length,l=o?i[t.charAt(n)]:64;++n;const h=n<t.length,c=h?i[t.charAt(n)]:64;if(++n,null==e||null==r||null==l||null==c)throw Error();const d=e<<2|r>>4;if(s.push(d),64!==l){const t=r<<4&240|l>>2;if(s.push(t),64!==c){const t=l<<6&192|c;s.push(t)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},h=function(t){const e=r(t);return l.encodeByteArray(e,!0)},c=function(t){return h(t).replace(/\./g,"")},d=function(t){try{return l.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function u(t){return p(void 0,t)}function p(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const i=e;return new Date(i.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(const i in e)e.hasOwnProperty(i)&&g(i)&&(t[i]=p(t[i],e[i]));return t}function g(t){return"__proto__"!==t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f(){return"undefined"!==typeof navigator&&"string"===typeof navigator["userAgent"]?navigator["userAgent"]:""}function m(){return"undefined"!==typeof window&&!!(window["cordova"]||window["phonegap"]||window["PhoneGap"])&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())}function v(){return"object"===typeof navigator&&"ReactNative"===navigator["product"]}function b(){return!0===s.NODE_CLIENT||!0===s.NODE_ADMIN}function x(){try{return"object"===typeof indexedDB}catch(t){return!1}}function y(){return new Promise(((t,e)=>{try{let i=!0;const s="validate-browser-context-for-indexeddb-analytics-module",n=self.indexedDB.open(s);n.onsuccess=()=>{n.result.close(),i||self.indexedDB.deleteDatabase(s),t(!0)},n.onupgradeneeded=()=>{i=!1},n.onerror=()=>{var t;e((null===(t=n.error)||void 0===t?void 0:t.message)||"")}}catch(i){e(i)}}))}function w(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof i.g)return i.g;throw new Error("Unable to locate global object.")}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k=()=>w().__FIREBASE_DEFAULTS__,C=()=>{if("undefined"===typeof process)return;const t={NODE_ENV:"production",BASE_URL:"/CS6131/"}.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0},S=()=>{if("undefined"===typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(i){return}const e=t&&d(t[1]);return e&&JSON.parse(e)},_=()=>{try{return k()||C()||S()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},A=t=>{var e,i;return null===(i=null===(e=_())||void 0===e?void 0:e.emulatorHosts)||void 0===i?void 0:i[t]},I=t=>{const e=A(t);if(!e)return;const i=e.lastIndexOf(":");if(i<=0||i+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(i+1),10);return"["===e[0]?[e.substring(1,i-1),s]:[e.substring(0,i),s]},P=()=>{var t;return null===(t=_())||void 0===t?void 0:t.config};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class T{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),"function"===typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,i))}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},s=e||"demo-project",n=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const r=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:n,exp:n+3600,auth_time:n,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t),o="";return[c(JSON.stringify(i)),c(JSON.stringify(r)),o].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L="FirebaseError";class M extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=L,Object.setPrototypeOf(this,M.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,O.prototype.create)}}class O{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},s=`${this.service}/${t}`,n=this.errors[t],a=n?D(n,i):"Error",r=`${this.serviceName}: ${a} (${s}).`,o=new M(s,r,i);return o}}function D(t,e){return t.replace(R,((t,i)=>{const s=e[i];return null!=s?String(s):`<${i}?>`}))}const R=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N(t){return JSON.parse(t)}function z(t){return JSON.stringify(t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F=function(t){let e={},i={},s={},n="";try{const a=t.split(".");e=N(d(a[0])||""),i=N(d(a[1])||""),n=a[2],s=i["d"]||{},delete i["d"]}catch(a){}return{header:e,claims:i,data:s,signature:n}},B=function(t){const e=F(t),i=e.claims;return!!i&&"object"===typeof i&&i.hasOwnProperty("iat")},H=function(t){const e=F(t).claims;return"object"===typeof e&&!0===e["admin"]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function $(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function W(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function X(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Y(t,e,i){const s={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=e.call(i,t[n],n,t));return s}function V(t,e){if(t===e)return!0;const i=Object.keys(t),s=Object.keys(e);for(const n of i){if(!s.includes(n))return!1;const i=t[n],a=e[n];if(Z(i)&&Z(a)){if(!V(i,a))return!1}else if(i!==a)return!1}for(const n of s)if(!i.includes(n))return!1;return!0}function Z(t){return null!==t&&"object"===typeof t}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function G(t){const e=[];for(const[i,s]of Object.entries(t))Array.isArray(s)?s.forEach((t=>{e.push(encodeURIComponent(i)+"="+encodeURIComponent(t))})):e.push(encodeURIComponent(i)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class j{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,e){e||(e=0);const i=this.W_;if("string"===typeof t)for(let c=0;c<16;c++)i[c]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(let c=0;c<16;c++)i[c]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(let c=16;c<80;c++){const t=i[c-3]^i[c-8]^i[c-14]^i[c-16];i[c]=4294967295&(t<<1|t>>>31)}let s,n,a=this.chain_[0],r=this.chain_[1],o=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(let c=0;c<80;c++){c<40?c<20?(s=l^r&(o^l),n=1518500249):(s=r^o^l,n=1859775393):c<60?(s=r&o|l&(r|o),n=2400959708):(s=r^o^l,n=3395469782);const t=(a<<5|a>>>27)+s+h+n+i[c]&4294967295;h=l,l=o,o=4294967295&(r<<30|r>>>2),r=a,a=t}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+r&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295}update(t,e){if(null==t)return;void 0===e&&(e=t.length);const i=e-this.blockSize;let s=0;const n=this.buf_;let a=this.inbuf_;while(s<e){if(0===a)while(s<=i)this.compress_(t,s),s+=this.blockSize;if("string"===typeof t){while(s<e)if(n[a]=t.charCodeAt(s),++a,++s,a===this.blockSize){this.compress_(n),a=0;break}}else while(s<e)if(n[a]=t[s],++a,++s,a===this.blockSize){this.compress_(n),a=0;break}}this.inbuf_=a,this.total_+=e}digest(){const t=[];let e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=255&e,e/=256;this.compress_(this.buf_);let i=0;for(let s=0;s<5;s++)for(let e=24;e>=0;e-=8)t[i]=this.chain_[s]>>e&255,++i;return t}}function q(t,e){return`${t} failed: ${e} argument `}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const U=function(t){const e=[];let i=0;for(let s=0;s<t.length;s++){let a=t.charCodeAt(s);if(a>=55296&&a<=56319){const e=a-55296;s++,n(s<t.length,"Surrogate pair missing trail surrogate.");const i=t.charCodeAt(s)-56320;a=65536+(e<<10)+i}a<128?e[i++]=a:a<2048?(e[i++]=a>>6|192,e[i++]=63&a|128):a<65536?(e[i++]=a>>12|224,e[i++]=a>>6&63|128,e[i++]=63&a|128):(e[i++]=a>>18|240,e[i++]=a>>12&63|128,e[i++]=a>>6&63|128,e[i++]=63&a|128)}return e},K=function(t){let e=0;for(let i=0;i<t.length;i++){const s=t.charCodeAt(i);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,i++):e+=3}return e};
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Q(t){return t&&t._delegate?t._delegate:t}},5413:function(t,e,i){"use strict";i.d(e,{Z:function(){return v}});var s=i(9396),n=i(3816),a=i(5255),r=i(9657),o=i(9088),l=i(1584),h=i(2515),c=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(r.Z,{scopedSlots:t._u([{key:"default",fn:function({hover:i}){return[e(n.Z,{staticClass:"rounded-xl hover-card",class:{"on-hover":i&&t.hoverAnim},attrs:{outlined:"",tile:"",height:"100%",width:"100%",elevation:i&&t.hoverAnim?24:6},on:{click:function(e){return t.$emit("click",t.player)}}},[e("div",{staticClass:"d-flex flex-no-wrap justify-right align-center",staticStyle:{height:"100%",width:"100%"}},[e(s.Z,{staticClass:"mx-3 my-auto",attrs:{size:"72px",tile:""}},[t.player.avatar?e(l.Z,{attrs:{size:"72px",src:t.player.avatar}}):e(o.Z,{attrs:{size:"72px"}},[t._v("mdi-account-circle")])],1),e("div",{attrs:{align:"left"}},[e(a.EB,{staticClass:"font-weight-medium"},[t._v(t._s(t.player.username))]),e(a.ZB,[t._v(t._s(t.player.about_me))])],1),e(h.Z),e("div",{staticClass:"ma-4 d-flex"},[t._v(" "+t._s(t.player.rating)+" "),e(o.Z,[t._v("mdi-chess-pawn")])],1)],1)])]}}])})},d=[],u=i(144),p=u["default"].extend({name:"PlayerCard",props:{player:{type:Object,required:!0},hoverAnim:{type:Boolean,default:!0,required:!1}}}),g=p,f=i(3736),m=(0,f.Z)(g,c,d,!1,null,null,null),v=m.exports},1157:function(t,e,i){"use strict";i.d(e,{Z:function(){return v}});var s=i(9396),n=i(3816),a=i(5255),r=i(9657),o=i(9088),l=i(1584),h=i(2515),c=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(r.Z,{scopedSlots:t._u([{key:"default",fn:function({hover:i}){return[e(n.Z,{staticClass:"rounded-xl hover-card",class:{"on-hover":i&&t.hoverAnim},attrs:{outlined:"",tile:"",height:"100%",width:"100%",elevation:i&&t.hoverAnim?24:6},on:{click:function(e){return t.$emit("click",t.team)}}},[e("div",{staticClass:"d-flex flex-no-wrap justify-right align-center",staticStyle:{height:"100%",width:"100%"}},[e(s.Z,{staticClass:"mx-3 my-auto",attrs:{size:"72px",tile:""}},[t.team.icon?e(l.Z,{attrs:{size:"72px",src:t.team.icon}}):e(o.Z,{attrs:{size:"72px"}},[t._v("mdi-forum")])],1),e("div",{attrs:{align:"left"}},[e(a.EB,{staticClass:"font-weight-medium"},[t._v(t._s(t.team.team_name))]),e(a.ZB,[t._v(t._s(t.team.about_team))])],1),e(h.Z),e("div",{staticClass:"ma-4 d-flex"},[e(o.Z,[t._v("mdi-account-multiple")]),t._v(" "+t._s(t.team.member_count)+" ")],1)],1)])]}}])})},d=[],u=i(144),p=u["default"].extend({name:"TeamCard",props:{team:{type:Object,required:!0},hoverAnim:{type:Boolean,default:!0,required:!1}}}),g=p,f=i(3736),m=(0,f.Z)(g,c,d,!1,null,"4d69a0b0",null),v=m.exports},4182:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return l}});var s=function(){var t=this;t._self._c;return t._m(0)},n=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"about"},[e("h1",[t._v("This is an about page")])])}],a=i(3736),r={},o=(0,a.Z)(r,s,n,!1,null,null,null),l=o.exports},1379:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return y}});var s=i(3381),n=i(3816),a=i(5255),r=i(7024),o=i(6530),l=i(3240),h=i(7894),c=i(2515),d=i(9007),u=i(2379),p=i(2732),g=function(){var t=this,e=t._self._c;return e(o.Z,{staticClass:"register-page",attrs:{"fill-width":"","fill-height":""}},[e(h.Z,{attrs:{align:"center",justify:"center"}},[e(r.Z,{attrs:{xs:"12",sm:"10",md:"8"}},[e(n.Z,{staticClass:"pb-4 rounded-xl",attrs:{elevation:"12"}},[e(p.Z,{staticClass:"my-4",attrs:{dark:"",color:"primary"}},[e(c.Z),e("h1",[t._v("Contact Us!")]),e(c.Z)],1),e(a.ZB,{staticClass:"pa-5"},[e(l.Z,[e(d.Z,{staticClass:"input-group--focused",attrs:{outlined:"",clearable:"","prepend-inner-icon":"mdi-account-circle",rules:[""!=t.name||"This field is required"],name:"name",label:"Name",type:"text"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),e(d.Z,{staticClass:"input-group--focused",attrs:{outlined:"",clearable:"","prepend-inner-icon":"mdi-email",rules:[t=>!t||/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(t)||"E-mail must be valid"],name:"email",label:"Email",type:"text"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),e(u.Z,{staticClass:"input-group--focused",attrs:{name:"content",label:"What do you want to tell us?",clearable:"",counter:"","auto-grow":"",outlined:""},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)],1),e(a.h7,{staticClass:"mx-5"},[e(c.Z),e(s.Z,{staticClass:"px-5",attrs:{color:"primary"},on:{click:t.feedback}},[t._v("Submit")])],1)],1)],1)],1)],1)},f=[],m={name:"App",data(){return{name:"",email:"",content:""}},methods:{feedback(){}}},v=m,b=i(3736),x=(0,b.Z)(v,g,f,!1,null,null,null),y=x.exports},4751:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return B}});var s,n,a=i(9396),r=i(3381),o=i(3816),l=i(5255),h=i(7024),c=i(6530),d=i(3749),u=i(7690),p=i(1584),g=i(7894),f=i(2515),m=i(2732),v=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(c.Z,{staticClass:"Game",attrs:{fluid:"","fill-height":"","fill-width":""}},[e(g.Z,{attrs:{justify:"center"}},[""!=t.ori&&t.$vuetify.breakpoint.mdAndUp?e(h.Z,{attrs:{md:"5"}},[e(o.Z,{staticClass:"pb-4",staticStyle:{"margin-top":"3vh"},attrs:{elevation:"12",color:"primary lighten-2",height:"25vh",width:"100%",shaped:""}},[e("div",{staticClass:"d-flex flex-no-wrap justify-space-between align-center",staticStyle:{height:"100%",width:"100%"}},[e("div",[e(l.EB,{staticClass:"text-h3 font-weight-medium mb-auto",staticStyle:{"text-align":"left"},domProps:{textContent:t._s(t.opponent.username)}}),e(l.EB,{staticClass:"text-h5 font-weight-bold mt-auto",staticStyle:{"text-align":"left"},domProps:{textContent:t._s(t.opponent.rating)}})],1),e(a.Z,{staticClass:"ma-3",attrs:{size:"15vh",tile:""}},[e(p.Z,{staticStyle:{border:"2px solid"},attrs:{src:t.opponent.avatar}})],1)],1)]),e("div",{staticStyle:{height:"25vmin"}}),e(o.Z,{staticClass:"pb-4",attrs:{elevation:"12",shaped:"",color:"primary lighten-2",height:"25vh",width:"100%"}},[e("div",{staticClass:"d-flex flex-no-wrap justify-space-between align-center",staticStyle:{height:"100%",width:"100%"}},[e("div",[e(l.EB,{staticClass:"text-h3 font-weight-medium mb-auto",staticStyle:{"text-align":"left"},domProps:{textContent:t._s(t.player.username)}}),e(l.EB,{staticClass:"text-h5 font-weight-bold mt-auto",staticStyle:{"text-align":"left"},domProps:{textContent:t._s(t.player.rating)}})],1),e(a.Z,{staticClass:"ma-3",attrs:{size:"15vh",tile:""}},[e(p.Z,{staticStyle:{border:"2px solid"},attrs:{src:t.player.avatar}})],1)],1)])],1):t._e(),""==t.ori?e(h.Z,{staticClass:"d-flex flex-column",attrs:{md:"5"}},[e(o.Z,{staticStyle:{"margin-top":"auto","margin-bottom":"auto"},attrs:{elevation:"12",color:"primary lighten-2",height:"25vh",width:"100%",shaped:""}},[e("div",{staticClass:"d-flex flex-column"},[e("div",{staticStyle:{"text-align":"center","font-size":"1.5rem","margin-top":"3%"}},[t._v("Play As?")]),e("div",{staticClass:"d-flex flex-strech justify-center align-center",staticStyle:{"flex-grow":"2"}},[e(r.Z,{staticClass:"whiteBtn ma-5",attrs:{color:"transparent",elevation:"0"},on:{click:function(e){return t.startGame("white")}}}),e(r.Z,{staticClass:"blackBtn ma-5",attrs:{color:"transparent",elevation:"0"},on:{click:function(e){return t.startGame("black")}}})],1)])])],1):t._e(),e(h.Z,{attrs:{lg:"6",md:"7",cols:"12",align:"center"}},[e("Chessboard",{ref:"board",on:{onEnd:t.onEnd}})],1)],1),e(d.Z,{attrs:{width:"500"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(o.Z,[e(m.Z,{staticClass:"text-h3 lighten-2",attrs:{color:""+(1==t.won?"green":0==t.won?"grey":"red")}},[e(f.Z),t._v(" "+t._s(1==t.won?"Win":0==t.won?"Draw":"Lose")+" "),e(f.Z)],1),e(l.ZB,{staticClass:"my-5 text-h6",staticStyle:{"text-align":"center"}},[t._v(" "+t._s(1==t.won?"+100 rating points":0==t.won?"+50 rating points":"-10 rating points")+" ")]),e(u.Z)],1)],1)],1)},b=[],x=i(3977),y=i(9355),w=i(144),k=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("chessboard",{ref:"__board",attrs:{fen:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"},on:{onMove:t.onMove}})},C=[],S=i(4910),_={name:"chessboard",extends:S.chessboard,methods:{undo(){this.game.undo(),this.board.set({fen:this.game.fen()})},userPlay(){return(t,e)=>{this.isPromotion(t,e)&&(this.promoteTo=this.onPromotion()),this.game.move({from:t,to:e,promotion:this.promoteTo}),this.board.set({fen:this.game.fen()}),this.afterMove(),this.calculatePromotions(),this.aiNextMove()}},aiNextMove(){let t=this.game.moves({verbose:!0}),e=t[Math.floor(Math.random()*t.length)];this.game.move(e),this.board.set({fen:this.game.fen(),turnColor:this.toColor(),movable:{color:this.toColor(),dests:this.possibleMoves(),events:{after:this.userPlay()}}})}},mounted(){this.board.set({movable:{events:{after:this.userPlay()}}})},created(){}},A=_,I=i(3736),P=(0,I.Z)(A,s,n,!1,null,null,null),T=P.exports,E=w["default"].extend({name:"Chessboard",components:{chessboard:T},methods:{onMove(t){console.log(t),console.log(this.$refs.__board.game.game_over()),"turn"in t||this.forceEnd()},forceEnd(){console.log(this.$refs.__board.game),this.$emit("onEnd",this.$refs.__board.game.in_draw()?"draw":"w"==this.$refs.__board.game.turn()?"black":"white")},restartBoard(t){this.$refs.__board.game.reset(),"black"==t?this.$refs.__board.aiNextMove():this.$refs.__board.board.set({fen:this.$refs.__board.game.fen(),turnColor:"white",movable:{color:"white",dests:this.$refs.__board.possibleMoves(),events:{after:this.$refs.__board.userPlay()}}}),this.$refs.__board.board.state.orientation!=t&&this.$refs.__board.board.toggleOrientation()},onResize(){document.body.dispatchEvent(new Event("chessground.resize"))}},mounted(){this.$refs.__board.board.set({fen:this.$refs.__board.game.fen(),turnColor:"white",movable:{color:"white",dests:[]}}),window.addEventListener("resize",this.onResize)},unmounted(){window.removeEventListener("resize",this.onResize)}}),L=E,M=(0,I.Z)(L,k,C,!1,null,null,null),O=M.exports;const D={databaseURL:"https://chessible-34200-default-rtdb.asia-southeast1.firebasedatabase.app/"},R=(0,x.ZF)(D);(0,y.N8)(R);var N=w["default"].extend({name:"GameView",components:{Chessboard:O},data:()=>({dialog:!1,won:-1,ori:"",opponent:{username:"AI",rating:200,avatar:"https://thumbs.dreamstime.com/z/gear-smart-ai-icon-outline-style-vector-web-design-isolated-white-background-153382060.jpg"},player:{username:"Halogen",rating:100,avatar:"https://cdn.discordapp.com/avatars/340785972545454080/6cf1fe5e726470b1903236d2638d5a58.png?size=1024"}}),methods:{onEnd(t){console.log(t),console.log(this.ori),console.log(this.won),console.log(this.dialog),t==this.ori?this.won=1:this.won="draw"==t?0:-1,this.dialog=!0,this.ori=""},startGame(t){this.ori=t,this.$refs.board.restartBoard(t)}}}),z=N,F=(0,I.Z)(z,v,b,!1,null,"5d2b0d64",null),B=F.exports},7378:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return x}});var s=i(3381),n=i(3816),a=i(5255),r=i(7024),o=i(6530),l=i(3240),h=i(7894),c=i(2515),d=i(9007),u=i(2732),p=function(){var t=this,e=t._self._c;return e(o.Z,{staticClass:"login-page",attrs:{"fill-width":"","fill-height":""}},[e(h.Z,{attrs:{align:"center",justify:"center"}},[e(r.Z,{attrs:{xs:"12",sm:"10",md:"8"}},[e(n.Z,{staticClass:"pb-4 rounded-xl",attrs:{elevation:"12"}},[e(u.Z,{staticClass:"my-4",attrs:{dark:"",color:"primary"}},[e(c.Z),e("h1",[t._v("Welcome")]),e(c.Z)],1),e(a.ZB,{staticClass:"pa-4"},[e(l.Z,[e(d.Z,{attrs:{id:"username",outlined:"",clearable:"","prepend-inner-icon":"mdi-account-circle",rules:[""!=t.username||"This field is required"],name:"username",label:"Username",type:"text"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login.apply(null,arguments)}},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),e(d.Z,{staticClass:"input-group--focused",attrs:{id:"password",name:"password",label:"Password",outlined:"","prepend-inner-icon":"mdi-lock","append-icon":t.showPw?"mdi-eye":"mdi-eye-off",type:t.showPw?"text":"password"},on:{"click:append":function(e){t.showPw=!t.showPw},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login.apply(null,arguments)}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),e(a.h7,[e(c.Z),e(s.Z,{staticClass:"px-5",attrs:{color:"primary"},on:{click:t.login}},[t._v("Login")])],1),e("br"),e("h3",{attrs:{align:"center"}},[t._v(" New here? "),e("router-link",{attrs:{to:"/register"}},[t._v("Sign up now!")])],1)],1)],1)],1)],1)},g=[],f={name:"Login",data:()=>({source:String,username:"",password:"",showPw:!1}),methods:{async login(){""!=this.username&&""!=this.password?await this.$store.dispatch("loginPlayer",{username:this.username,password:this.password})?this.$router.push("/player/"+this.username):this.$notify({type:"error",title:"Authorisation Failed",text:"Incorrect Username/Password!"}):this.$notify("Please enter a username and password")}}},m=f,v=i(3736),b=(0,v.Z)(m,p,g,!1,null,null,null),x=b.exports},2043:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return l}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"404"},[e("center",{staticClass:"text-h1"},[t._v("Oops, nothing here :/")])],1)},n=[],a=i(3736),r={},o=(0,a.Z)(r,s,n,!1,null,null,null),l=o.exports},4246:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return Ka}});var s=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("PuzzleBoard")},n=[],a=i(3977),r=i(9355),o=i(144),l=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"blue merida"},[e("div",{ref:"board",staticClass:"cg-board-wrap"}),t._v(" "),e("br")])},h=[];const c=["a","b","c","d","e","f","g","h"],d=["1","2","3","4","5","6","7","8"],u=["white","black"],p=["pawn","knight","bishop","rook","queen","king"],g=["a","h"],f=t=>"role"in t,m=t=>void 0!==t,v=t=>"white"===t?"black":"white",b=t=>t>>3,x=t=>7&t,y=t=>{switch(t){case"pawn":return"p";case"knight":return"n";case"bishop":return"b";case"rook":return"r";case"queen":return"q";case"king":return"k"}};function w(t){switch(t.toLowerCase()){case"p":return"pawn";case"n":return"knight";case"b":return"bishop";case"r":return"rook";case"q":return"queen";case"k":return"king";default:return}}function k(t){if(2!==t.length)return;const e=t.charCodeAt(0)-"a".charCodeAt(0),i=t.charCodeAt(1)-"1".charCodeAt(0);return e<0||e>=8||i<0||i>=8?void 0:e+8*i}const C=t=>c[x(t)]+d[b(t)],S=t=>f(t)?`${y(t.role).toUpperCase()}@${C(t.to)}`:C(t.from)+C(t.to)+(t.promotion?y(t.promotion):""),_=(t,e)=>"white"===t?"a"===e?2:6:"a"===e?58:62,A=(t,e)=>"white"===t?"a"===e?3:5:"a"===e?59:61;function I(t){return e=>t&&t(e)||P(e)}const P=t=>T[t],T={flipTheBoard:"Flip the board",analysisBoard:"Analysis board",practiceWithComputer:"Practice with computer",getPgn:"Get PGN",download:"Download",viewOnLichess:"View on Lichess",viewOnSite:"View on site"},E=["white","black"],L=["a","b","c","d","e","f","g","h"],M=["1","2","3","4","5","6","7","8"],O=[...M].reverse(),D=Array.prototype.concat(...L.map((t=>M.map((e=>t+e))))),R=t=>D[8*t[0]+t[1]],N=t=>[t.charCodeAt(0)-97,t.charCodeAt(1)-49],z=t=>{if(t)return"@"===t[1]?[t.slice(2,4)]:[t.slice(0,2),t.slice(2,4)]},F=D.map(N);function B(t){let e;const i=()=>(void 0===e&&(e=t()),e);return i.clear=()=>{e=void 0},i}const H=()=>{let t;return{start(){t=performance.now()},cancel(){t=void 0},stop(){if(!t)return 0;const e=performance.now()-t;return t=void 0,e}}},$=t=>"white"===t?"black":"white",W=(t,e)=>{const i=t[0]-e[0],s=t[1]-e[1];return i*i+s*s},X=(t,e)=>t.role===e.role&&t.color===e.color,Y=t=>(e,i)=>[(i?e[0]:7-e[0])*t.width/8,(i?7-e[1]:e[1])*t.height/8],V=(t,e)=>{t.style.transform=`translate(${e[0]}px,${e[1]}px)`},Z=(t,e,i=1)=>{t.style.transform=`translate(${e[0]}px,${e[1]}px) scale(${i})`},G=(t,e)=>{t.style.visibility=e?"visible":"hidden"},j=t=>{var e;return t.clientX||0===t.clientX?[t.clientX,t.clientY]:(null===(e=t.targetTouches)||void 0===e?void 0:e[0])?[t.targetTouches[0].clientX,t.targetTouches[0].clientY]:void 0},q=t=>2===t.buttons||2===t.button,U=(t,e)=>{const i=document.createElement(t);return e&&(i.className=e),i};function K(t,e,i){const s=N(t);return e||(s[0]=7-s[0],s[1]=7-s[1]),[i.left+i.width*s[0]/8+i.width/16,i.top+i.height*(7-s[1])/8+i.height/16]}class Q{constructor(t){this.path=t,this.size=()=>this.path.length/2,this.head=()=>this.path.slice(0,2),this.tail=()=>new Q(this.path.slice(2)),this.init=()=>new Q(this.path.slice(0,-2)),this.last=()=>this.path.slice(-2),this.empty=()=>""==this.path,this.contains=t=>this.path.startsWith(t.path),this.isChildOf=t=>this.init()===t,this.append=t=>new Q(this.path+t),this.equals=t=>this.path==t.path}}Q.root=new Q("");class J{constructor(t,e,i,s){this.initial=t,this.moves=e,this.players=i,this.metadata=s,this.nodeAt=t=>et(this.moves,t),this.dataAt=t=>{const e=this.nodeAt(t);return e?it(e)?e.data:this.initial:void 0},this.title=()=>this.players.white.name?[this.players.white.title,this.players.white.name,"vs",this.players.black.title,this.players.black.name].filter((t=>t&&!!t.trim())).join("_").replace(" ","-"):"lichess-pgn-viewer",this.pathAtMainlinePly=t=>{var e;return 0==t?Q.root:(null===(e=this.mainline[Math.max(0,Math.min(this.mainline.length-1,"last"==t?9999:t-1))])||void 0===e?void 0:e.path)||Q.root},this.hasPlayerName=()=>{var t,e;return!(!(null===(t=this.players.white)||void 0===t?void 0:t.name)&&!(null===(e=this.players.black)||void 0===e?void 0:e.name))},this.mainline=Array.from(this.moves.mainline())}}const tt=(t,e)=>t.children.find((t=>t.data.path.last()==e)),et=(t,e)=>{if(e.empty())return t;const i=tt(t,e.head());return i?et(i,e.tail()):void 0},it=t=>"data"in t,st=t=>"uci"in t,nt=t=>f(t)?String.fromCharCode(35+t.to,139+["queen","rook","bishop","knight","pawn"].indexOf(t.role)):String.fromCharCode(35+t.from,t.promotion?99+8*["queen","rook","bishop","knight","king"].indexOf(t.promotion)+x(t.to):35+t.to);class at{unwrap(t,e){const i=this._chain((e=>lt.ok(t?t(e):e)),(t=>e?lt.ok(e(t)):lt.err(t)));if(i.isErr)throw i.error;return i.value}map(t,e){return this._chain((e=>lt.ok(t(e))),(t=>lt.err(e?e(t):t)))}chain(t,e){return this._chain(t,e||(t=>lt.err(t)))}}class rt extends at{constructor(t){super(),this.value=void 0,this.isOk=!0,this.isErr=!1,this.value=t}_chain(t,e){return t(this.value)}}class ot extends at{constructor(t){super(),this.error=void 0,this.isOk=!1,this.isErr=!0,this.error=t}_chain(t,e){return e(this.error)}}var lt;!function(t){t.ok=function(t){return new rt(t)},t.err=function(t){return new ot(t||new Error)},t.all=function(e){if(Array.isArray(e)){const i=[];for(let t=0;t<e.length;t++){const s=e[t];if(s.isErr)return s;i.push(s.value)}return t.ok(i)}const i={},s=Object.keys(e);for(let t=0;t<s.length;t++){const n=e[s[t]];if(n.isErr)return n;i[s[t]]=n.value}return t.ok(i)}}(lt||(lt={}));const ht=t=>(t-=t>>>1&1431655765,t=(858993459&t)+(t>>>2&858993459),Math.imul(t+(t>>>4)&252645135,16843009)>>24),ct=t=>(t=t>>>8&16711935|(16711935&t)<<8,t>>>16&65535|(65535&t)<<16),dt=t=>(t=t>>>1&1431655765|(1431655765&t)<<1,t=t>>>2&858993459|(858993459&t)<<2,t=t>>>4&252645135|(252645135&t)<<4,ct(t));class ut{constructor(t,e){this.lo=0|t,this.hi=0|e}static fromSquare(t){return t>=32?new ut(0,1<<t-32):new ut(1<<t,0)}static fromRank(t){return new ut(255,0).shl64(8*t)}static fromFile(t){return new ut(16843009<<t,16843009<<t)}static empty(){return new ut(0,0)}static full(){return new ut(4294967295,4294967295)}static corners(){return new ut(129,2164260864)}static center(){return new ut(402653184,24)}static backranks(){return new ut(255,4278190080)}static backrank(t){return"white"===t?new ut(255,0):new ut(0,4278190080)}static lightSquares(){return new ut(1437226410,1437226410)}static darkSquares(){return new ut(2857740885,2857740885)}complement(){return new ut(~this.lo,~this.hi)}xor(t){return new ut(this.lo^t.lo,this.hi^t.hi)}union(t){return new ut(this.lo|t.lo,this.hi|t.hi)}intersect(t){return new ut(this.lo&t.lo,this.hi&t.hi)}diff(t){return new ut(this.lo&~t.lo,this.hi&~t.hi)}intersects(t){return this.intersect(t).nonEmpty()}isDisjoint(t){return this.intersect(t).isEmpty()}supersetOf(t){return t.diff(this).isEmpty()}subsetOf(t){return this.diff(t).isEmpty()}shr64(t){return t>=64?ut.empty():t>=32?new ut(this.hi>>>t-32,0):t>0?new ut(this.lo>>>t^this.hi<<32-t,this.hi>>>t):this}shl64(t){return t>=64?ut.empty():t>=32?new ut(0,this.lo<<t-32):t>0?new ut(this.lo<<t,this.hi<<t^this.lo>>>32-t):this}bswap64(){return new ut(ct(this.hi),ct(this.lo))}rbit64(){return new ut(dt(this.hi),dt(this.lo))}minus64(t){const e=this.lo-t.lo,i=(e&t.lo&1)+(t.lo>>>1)+(e>>>1)>>>31;return new ut(e,this.hi-(t.hi+i))}equals(t){return this.lo===t.lo&&this.hi===t.hi}size(){return ht(this.lo)+ht(this.hi)}isEmpty(){return 0===this.lo&&0===this.hi}nonEmpty(){return 0!==this.lo||0!==this.hi}has(t){return 0!==(t>=32?this.hi&1<<t-32:this.lo&1<<t)}set(t,e){return e?this.with(t):this.without(t)}with(t){return t>=32?new ut(this.lo,this.hi|1<<t-32):new ut(this.lo|1<<t,this.hi)}without(t){return t>=32?new ut(this.lo,this.hi&~(1<<t-32)):new ut(this.lo&~(1<<t),this.hi)}toggle(t){return t>=32?new ut(this.lo,this.hi^1<<t-32):new ut(this.lo^1<<t,this.hi)}last(){return 0!==this.hi?63-Math.clz32(this.hi):0!==this.lo?31-Math.clz32(this.lo):void 0}first(){return 0!==this.lo?31-Math.clz32(this.lo&-this.lo):0!==this.hi?63-Math.clz32(this.hi&-this.hi):void 0}withoutFirst(){return 0!==this.lo?new ut(this.lo&this.lo-1,this.hi):new ut(0,this.hi&this.hi-1)}moreThanOne(){return 0!==this.hi&&0!==this.lo||0!==(this.lo&this.lo-1)||0!==(this.hi&this.hi-1)}singleSquare(){return this.moreThanOne()?void 0:this.last()}*[Symbol.iterator](){let t=this.lo,e=this.hi;while(0!==t){const e=31-Math.clz32(t&-t);t^=1<<e,yield e}while(0!==e){const t=31-Math.clz32(e&-e);e^=1<<t,yield 32+t}}*reversed(){let t=this.lo,e=this.hi;while(0!==e){const t=31-Math.clz32(e);e^=1<<t,yield 32+t}while(0!==t){const e=31-Math.clz32(t);t^=1<<e,yield e}}}class pt{constructor(){}static default(){const t=new pt;return t.reset(),t}reset(){this.occupied=new ut(65535,4294901760),this.promoted=ut.empty(),this.white=new ut(65535,0),this.black=new ut(0,4294901760),this.pawn=new ut(65280,16711680),this.knight=new ut(66,1107296256),this.bishop=new ut(36,603979776),this.rook=new ut(129,2164260864),this.queen=new ut(8,134217728),this.king=new ut(16,268435456)}static empty(){const t=new pt;return t.clear(),t}clear(){this.occupied=ut.empty(),this.promoted=ut.empty();for(const t of u)this[t]=ut.empty();for(const t of p)this[t]=ut.empty()}clone(){const t=new pt;t.occupied=this.occupied,t.promoted=this.promoted;for(const e of u)t[e]=this[e];for(const e of p)t[e]=this[e];return t}getColor(t){return this.white.has(t)?"white":this.black.has(t)?"black":void 0}getRole(t){for(const e of p)if(this[e].has(t))return e}get(t){const e=this.getColor(t);if(!e)return;const i=this.getRole(t),s=this.promoted.has(t);return{color:e,role:i,promoted:s}}take(t){const e=this.get(t);return e&&(this.occupied=this.occupied.without(t),this[e.color]=this[e.color].without(t),this[e.role]=this[e.role].without(t),e.promoted&&(this.promoted=this.promoted.without(t))),e}set(t,e){const i=this.take(t);return this.occupied=this.occupied.with(t),this[e.color]=this[e.color].with(t),this[e.role]=this[e.role].with(t),e.promoted&&(this.promoted=this.promoted.with(t)),i}has(t){return this.occupied.has(t)}*[Symbol.iterator](){for(const t of this.occupied)yield[t,this.get(t)]}pieces(t,e){return this[t].intersect(this[e])}rooksAndQueens(){return this.rook.union(this.queen)}bishopsAndQueens(){return this.bishop.union(this.queen)}kingOf(t){return this.pieces(t,"king").singleSquare()}}class gt{constructor(){}static empty(){const t=new gt;for(const e of p)t[e]=0;return t}static fromBoard(t,e){const i=new gt;for(const s of p)i[s]=t.pieces(e,s).size();return i}clone(){const t=new gt;for(const e of p)t[e]=this[e];return t}equals(t){return p.every((e=>this[e]===t[e]))}add(t){const e=new gt;for(const i of p)e[i]=this[i]+t[i];return e}nonEmpty(){return p.some((t=>this[t]>0))}isEmpty(){return!this.nonEmpty()}hasPawns(){return this.pawn>0}hasNonPawns(){return this.knight>0||this.bishop>0||this.rook>0||this.queen>0||this.king>0}size(){return this.pawn+this.knight+this.bishop+this.rook+this.queen+this.king}}class ft{constructor(t,e){this.white=t,this.black=e}static empty(){return new ft(gt.empty(),gt.empty())}static fromBoard(t){return new ft(gt.fromBoard(t,"white"),gt.fromBoard(t,"black"))}clone(){return new ft(this.white.clone(),this.black.clone())}equals(t){return this.white.equals(t.white)&&this.black.equals(t.black)}add(t){return new ft(this.white.add(t.white),this.black.add(t.black))}count(t){return this.white[t]+this.black[t]}size(){return this.white.size()+this.black.size()}isEmpty(){return this.white.isEmpty()&&this.black.isEmpty()}nonEmpty(){return!this.isEmpty()}hasPawns(){return this.white.hasPawns()||this.black.hasPawns()}hasNonPawns(){return this.white.hasNonPawns()||this.black.hasNonPawns()}}class mt{constructor(t,e){this.white=t,this.black=e}static default(){return new mt(3,3)}clone(){return new mt(this.white,this.black)}equals(t){return this.white===t.white&&this.black===t.black}}var vt;(function(t){t["Fen"]="ERR_FEN",t["Board"]="ERR_BOARD",t["Pockets"]="ERR_POCKETS",t["Turn"]="ERR_TURN",t["Castling"]="ERR_CASTLING",t["EpSquare"]="ERR_EP_SQUARE",t["RemainingChecks"]="ERR_REMAINING_CHECKS",t["Halfmoves"]="ERR_HALFMOVES",t["Fullmoves"]="ERR_FULLMOVES"})(vt||(vt={}));class bt extends Error{}const xt=(t,e,i)=>{let s=t.indexOf(e);while(i-- >0){if(-1===s)break;s=t.indexOf(e,s+e.length)}return s},yt=t=>/^\d{1,4}$/.test(t)?parseInt(t,10):void 0,wt=t=>{const e=w(t);return e&&{role:e,color:t.toLowerCase()===t?"black":"white"}},kt=t=>{const e=pt.empty();let i=7,s=0;for(let n=0;n<t.length;n++){const a=t[n];if("/"===a&&8===s)s=0,i--;else{const r=parseInt(a,10);if(r>0)s+=r;else{if(s>=8||i<0)return lt.err(new bt(vt.Board));const r=s+8*i,o=wt(a);if(!o)return lt.err(new bt(vt.Board));"~"===t[n+1]&&(o.promoted=!0,n++),e.set(r,o),s++}}}return 0!==i||8!==s?lt.err(new bt(vt.Board)):lt.ok(e)},Ct=t=>{if(t.length>64)return lt.err(new bt(vt.Pockets));const e=ft.empty();for(const i of t){const t=wt(i);if(!t)return lt.err(new bt(vt.Pockets));e[t.color][t.role]++}return lt.ok(e)},St=(t,e)=>{let i=ut.empty();if("-"===e)return lt.ok(i);for(const s of e){const e=s.toLowerCase(),n=s===e?"black":"white",a=ut.backrank(n).intersect(t[n]);let r;if("q"===e)r=a;else if("k"===e)r=a.reversed();else{if(!("a"<=e&&e<="h"))return lt.err(new bt(vt.Castling));r=ut.fromFile(e.charCodeAt(0)-"a".charCodeAt(0)).intersect(a)}for(const s of r){if(t.king.has(s))break;if(t.rook.has(s)){i=i.with(s);break}}}return u.some((t=>ut.backrank(t).intersect(i).size()>2))?lt.err(new bt(vt.Castling)):lt.ok(i)},_t=t=>{const e=t.split("+");if(3===e.length&&""===e[0]){const t=yt(e[1]),i=yt(e[2]);return!m(t)||t>3||!m(i)||i>3?lt.err(new bt(vt.RemainingChecks)):lt.ok(new mt(3-t,3-i))}if(2===e.length){const t=yt(e[0]),i=yt(e[1]);return!m(t)||t>3||!m(i)||i>3?lt.err(new bt(vt.RemainingChecks)):lt.ok(new mt(t,i))}return lt.err(new bt(vt.RemainingChecks))},At=t=>{const e=t.split(/[\s_]+/),i=e.shift();let s,n,a=lt.ok(void 0);if(i.endsWith("]")){const t=i.indexOf("[");if(-1===t)return lt.err(new bt(vt.Fen));s=kt(i.slice(0,t)),a=Ct(i.slice(t+1,-1))}else{const t=xt(i,"/",7);-1===t?s=kt(i):(s=kt(i.slice(0,t)),a=Ct(i.slice(t+1)))}const r=e.shift();if(m(r)&&"w"!==r){if("b"!==r)return lt.err(new bt(vt.Turn));n="black"}else n="white";return s.chain((t=>{const i=e.shift(),s=m(i)?St(t,i):lt.ok(ut.empty()),r=e.shift();let o;if(m(r)&&"-"!==r&&(o=k(r),!m(o)))return lt.err(new bt(vt.EpSquare));let l,h=e.shift();m(h)&&h.includes("+")&&(l=_t(h),h=e.shift());const c=m(h)?yt(h):0;if(!m(c))return lt.err(new bt(vt.Halfmoves));const d=e.shift(),u=m(d)?yt(d):1;if(!m(u))return lt.err(new bt(vt.Fullmoves));const p=e.shift();let g=lt.ok(void 0);if(m(p)){if(m(l))return lt.err(new bt(vt.RemainingChecks));g=_t(p)}else m(l)&&(g=l);return e.length>0?lt.err(new bt(vt.Fen)):a.chain((e=>s.chain((i=>g.map((s=>({board:t,pockets:e,turn:n,unmovedRooks:i,remainingChecks:s,epSquare:o,halfmoves:c,fullmoves:Math.max(1,u)})))))))}))},It=t=>{let e=y(t.role);return"white"===t.color&&(e=e.toUpperCase()),t.promoted&&(e+="~"),e},Pt=t=>{let e="",i=0;for(let s=7;s>=0;s--)for(let n=0;n<8;n++){const a=n+8*s,r=t.get(a);r?(i>0&&(e+=i,i=0),e+=It(r)):i++,7===n&&(i>0&&(e+=i,i=0),0!==s&&(e+="/"))}return e},Tt=t=>p.map((e=>y(e).repeat(t[e]))).join(""),Et=t=>Tt(t.white).toUpperCase()+Tt(t.black),Lt=(t,e)=>{let i="";for(const s of u){const n=ut.backrank(s);let a=t.kingOf(s);m(a)&&!n.has(a)&&(a=void 0);const r=t.pieces(s,"rook").intersect(n);for(const t of e.intersect(r).reversed())if(t===r.first()&&m(a)&&t<a)i+="white"===s?"Q":"q";else if(t===r.last()&&m(a)&&a<t)i+="white"===s?"K":"k";else{const e=c[x(t)];i+="white"===s?e.toUpperCase():e}}return i||"-"},Mt=t=>`${t.white}+${t.black}`,Ot=(t,e)=>[Pt(t.board)+(t.pockets?`[${Et(t.pockets)}]`:""),t.turn[0],Lt(t.board,t.unmovedRooks),m(t.epSquare)?C(t.epSquare):"-",...t.remainingChecks?[Mt(t.remainingChecks)]:[],...(null===e||void 0===e?void 0:e.epd)?[]:[Math.max(0,Math.min(t.halfmoves,9999)),Math.max(1,Math.min(t.fullmoves,9999))]].join(" "),Dt=(t,e)=>{let i=ut.empty();for(const s of e){const e=t+s;0<=e&&e<64&&Math.abs(x(t)-x(e))<=2&&(i=i.with(e))}return i},Rt=t=>{const e=[];for(let i=0;i<64;i++)e[i]=t(i);return e},Nt=Rt((t=>Dt(t,[-9,-8,-7,-1,1,7,8,9]))),zt=Rt((t=>Dt(t,[-17,-15,-10,-6,6,10,15,17]))),Ft={white:Rt((t=>Dt(t,[7,9]))),black:Rt((t=>Dt(t,[-7,-9])))},Bt=t=>Nt[t],Ht=t=>zt[t],$t=(t,e)=>Ft[t][e],Wt=Rt((t=>ut.fromFile(x(t)).without(t))),Xt=Rt((t=>ut.fromRank(b(t)).without(t))),Yt=Rt((t=>{const e=new ut(134480385,2151686160),i=8*(b(t)-x(t));return(i>=0?e.shl64(i):e.shr64(-i)).without(t)})),Vt=Rt((t=>{const e=new ut(270549120,16909320),i=8*(b(t)+x(t)-7);return(i>=0?e.shl64(i):e.shr64(-i)).without(t)})),Zt=(t,e,i)=>{let s=i.intersect(e),n=s.bswap64();return s=s.minus64(t),n=n.minus64(t.bswap64()),s.xor(n.bswap64()).intersect(e)},Gt=(t,e)=>Zt(ut.fromSquare(t),Wt[t],e),jt=(t,e)=>{const i=Xt[t];let s=e.intersect(i),n=s.rbit64();return s=s.minus64(ut.fromSquare(t)),n=n.minus64(ut.fromSquare(63-t)),s.xor(n.rbit64()).intersect(i)},qt=(t,e)=>{const i=ut.fromSquare(t);return Zt(i,Yt[t],e).xor(Zt(i,Vt[t],e))},Ut=(t,e)=>Gt(t,e).xor(jt(t,e)),Kt=(t,e)=>qt(t,e).xor(Ut(t,e)),Qt=(t,e,i)=>{switch(t.role){case"pawn":return $t(t.color,e);case"knight":return Ht(e);case"bishop":return qt(e,i);case"rook":return Ut(e,i);case"queen":return Kt(e,i);case"king":return Bt(e)}},Jt=(t,e)=>{const i=ut.fromSquare(e);return Xt[t].intersects(i)?Xt[t].with(t):Vt[t].intersects(i)?Vt[t].with(t):Yt[t].intersects(i)?Yt[t].with(t):Wt[t].intersects(i)?Wt[t].with(t):ut.empty()},te=(t,e)=>Jt(t,e).intersect(ut.full().shl64(t).xor(ut.full().shl64(e))).withoutFirst();var ee;(function(t){t["Empty"]="ERR_EMPTY",t["OppositeCheck"]="ERR_OPPOSITE_CHECK",t["ImpossibleCheck"]="ERR_IMPOSSIBLE_CHECK",t["PawnsOnBackrank"]="ERR_PAWNS_ON_BACKRANK",t["Kings"]="ERR_KINGS",t["Variant"]="ERR_VARIANT"})(ee||(ee={}));class ie extends Error{}const se=(t,e,i,s)=>i[e].intersect(Ut(t,s).intersect(i.rooksAndQueens()).union(qt(t,s).intersect(i.bishopsAndQueens())).union(Ht(t).intersect(i.knight)).union(Bt(t).intersect(i.king)).union($t(v(e),t).intersect(i.pawn)));class ne{constructor(){}static default(){const t=new ne;return t.unmovedRooks=ut.corners(),t.rook={white:{a:0,h:7},black:{a:56,h:63}},t.path={white:{a:new ut(14,0),h:new ut(96,0)},black:{a:new ut(0,234881024),h:new ut(0,1610612736)}},t}static empty(){const t=new ne;return t.unmovedRooks=ut.empty(),t.rook={white:{a:void 0,h:void 0},black:{a:void 0,h:void 0}},t.path={white:{a:ut.empty(),h:ut.empty()},black:{a:ut.empty(),h:ut.empty()}},t}clone(){const t=new ne;return t.unmovedRooks=this.unmovedRooks,t.rook={white:{a:this.rook.white.a,h:this.rook.white.h},black:{a:this.rook.black.a,h:this.rook.black.h}},t.path={white:{a:this.path.white.a,h:this.path.white.h},black:{a:this.path.black.a,h:this.path.black.h}},t}add(t,e,i,s){const n=_(t,e),a=A(t,e);this.unmovedRooks=this.unmovedRooks.with(s),this.rook[t][e]=s,this.path[t][e]=te(s,a).with(a).union(te(i,n).with(n)).without(i).without(s)}static fromSetup(t){const e=ne.empty(),i=t.unmovedRooks.intersect(t.board.rook);for(const s of u){const n=ut.backrank(s),a=t.board.kingOf(s);if(!m(a)||!n.has(a))continue;const r=i.intersect(t.board[s]).intersect(n),o=r.first();m(o)&&o<a&&e.add(s,"a",a,o);const l=r.last();m(l)&&a<l&&e.add(s,"h",a,l)}return e}discardRook(t){if(this.unmovedRooks.has(t)){this.unmovedRooks=this.unmovedRooks.without(t);for(const e of u)for(const i of g)this.rook[e][i]===t&&(this.rook[e][i]=void 0)}}discardColor(t){this.unmovedRooks=this.unmovedRooks.diff(ut.backrank(t)),this.rook[t].a=void 0,this.rook[t].h=void 0}}class ae{constructor(t){this.rules=t}reset(){this.board=pt["default"](),this.pockets=void 0,this.turn="white",this.castles=ne.default(),this.epSquare=void 0,this.remainingChecks=void 0,this.halfmoves=0,this.fullmoves=1}setupUnchecked(t){this.board=t.board.clone(),this.board.promoted=ut.empty(),this.pockets=void 0,this.turn=t.turn,this.castles=ne.fromSetup(t),this.epSquare=oe(this,t.epSquare),this.remainingChecks=void 0,this.halfmoves=t.halfmoves,this.fullmoves=t.fullmoves}kingAttackers(t,e,i){return se(t,e,this.board,i)}playCaptureAt(t,e){this.halfmoves=0,"rook"===e.role&&this.castles.discardRook(t),this.pockets&&this.pockets[v(e.color)][e.promoted?"pawn":e.role]++}ctx(){const t=this.isVariantEnd(),e=this.board.kingOf(this.turn);if(!m(e))return{king:e,blockers:ut.empty(),checkers:ut.empty(),variantEnd:t,mustCapture:!1};const i=Ut(e,ut.empty()).intersect(this.board.rooksAndQueens()).union(qt(e,ut.empty()).intersect(this.board.bishopsAndQueens())).intersect(this.board[v(this.turn)]);let s=ut.empty();for(const a of i){const t=te(e,a).intersect(this.board.occupied);t.moreThanOne()||(s=s.union(t))}const n=this.kingAttackers(e,v(this.turn),this.board.occupied);return{king:e,blockers:s,checkers:n,variantEnd:t,mustCapture:!1}}clone(){var t,e;const i=new this.constructor;return i.board=this.board.clone(),i.pockets=null===(t=this.pockets)||void 0===t?void 0:t.clone(),i.turn=this.turn,i.castles=this.castles.clone(),i.epSquare=this.epSquare,i.remainingChecks=null===(e=this.remainingChecks)||void 0===e?void 0:e.clone(),i.halfmoves=this.halfmoves,i.fullmoves=this.fullmoves,i}validate(t){if(this.board.occupied.isEmpty())return lt.err(new ie(ee.Empty));if(2!==this.board.king.size())return lt.err(new ie(ee.Kings));if(!m(this.board.kingOf(this.turn)))return lt.err(new ie(ee.Kings));const e=this.board.kingOf(v(this.turn));return m(e)?this.kingAttackers(e,this.turn,this.board.occupied).nonEmpty()?lt.err(new ie(ee.OppositeCheck)):ut.backranks().intersects(this.board.pawn)?lt.err(new ie(ee.PawnsOnBackrank)):(null===t||void 0===t?void 0:t.ignoreImpossibleCheck)?lt.ok(void 0):this.validateCheckers():lt.err(new ie(ee.Kings))}validateCheckers(){const t=this.board.kingOf(this.turn);if(m(t)){const e=this.kingAttackers(t,v(this.turn),this.board.occupied);if(e.nonEmpty())if(m(this.epSquare)){const i=8^this.epSquare,s=24^this.epSquare;if(e.moreThanOne()||e.first()!==i&&this.kingAttackers(t,v(this.turn),this.board.occupied.without(i).with(s)).nonEmpty())return lt.err(new ie(ee.ImpossibleCheck))}else if(e.size()>2||2===e.size()&&Jt(e.first(),e.last()).has(t))return lt.err(new ie(ee.ImpossibleCheck))}return lt.ok(void 0)}dropDests(t){return ut.empty()}dests(t,e){if(e=e||this.ctx(),e.variantEnd)return ut.empty();const i=this.board.get(t);if(!i||i.color!==this.turn)return ut.empty();let s,n;if("pawn"===i.role){s=$t(this.turn,t).intersect(this.board[v(this.turn)]);const i="white"===this.turn?8:-8,a=t+i;if(0<=a&&a<64&&!this.board.occupied.has(a)){s=s.with(a);const e="white"===this.turn?t<16:t>=48,n=a+i;e&&!this.board.occupied.has(n)&&(s=s.with(n))}if(m(this.epSquare)&&he(this,t,e)){const t=this.epSquare-i;(e.checkers.isEmpty()||e.checkers.singleSquare()===t)&&(n=ut.fromSquare(this.epSquare))}}else s="bishop"===i.role?qt(t,this.board.occupied):"knight"===i.role?Ht(t):"rook"===i.role?Ut(t,this.board.occupied):"queen"===i.role?Kt(t,this.board.occupied):Bt(t);if(s=s.diff(this.board[this.turn]),m(e.king)){if("king"===i.role){const i=this.board.occupied.without(t);for(const t of s)this.kingAttackers(t,v(this.turn),i).nonEmpty()&&(s=s.without(t));return s.union(ce(this,"a",e)).union(ce(this,"h",e))}if(e.checkers.nonEmpty()){const t=e.checkers.singleSquare();if(!m(t))return ut.empty();s=s.intersect(te(t,e.king).with(t))}e.blockers.has(t)&&(s=s.intersect(Jt(t,e.king)))}return n&&(s=s.union(n)),s}isVariantEnd(){return!1}variantOutcome(t){}hasInsufficientMaterial(t){if(this.board[t].intersect(this.board.pawn.union(this.board.rooksAndQueens())).nonEmpty())return!1;if(this.board[t].intersects(this.board.knight))return this.board[t].size()<=2&&this.board[v(t)].diff(this.board.king).diff(this.board.queen).isEmpty();if(this.board[t].intersects(this.board.bishop)){const t=!this.board.bishop.intersects(ut.darkSquares())||!this.board.bishop.intersects(ut.lightSquares());return t&&this.board.pawn.isEmpty()&&this.board.knight.isEmpty()}return!0}toSetup(){var t,e;return{board:this.board.clone(),pockets:null===(t=this.pockets)||void 0===t?void 0:t.clone(),turn:this.turn,unmovedRooks:this.castles.unmovedRooks,epSquare:le(this),remainingChecks:null===(e=this.remainingChecks)||void 0===e?void 0:e.clone(),halfmoves:Math.min(this.halfmoves,150),fullmoves:Math.min(Math.max(this.fullmoves,1),9999)}}isInsufficientMaterial(){return u.every((t=>this.hasInsufficientMaterial(t)))}hasDests(t){t=t||this.ctx();for(const e of this.board[this.turn])if(this.dests(e,t).nonEmpty())return!0;return this.dropDests(t).nonEmpty()}isLegal(t,e){if(f(t))return!(!this.pockets||this.pockets[this.turn][t.role]<=0)&&(("pawn"!==t.role||!ut.backranks().has(t.to))&&this.dropDests(e).has(t.to));{if("pawn"===t.promotion)return!1;if("king"===t.promotion&&"antichess"!==this.rules)return!1;if(!!t.promotion!==(this.board.pawn.has(t.from)&&ut.backranks().has(t.to)))return!1;const i=this.dests(t.from,e);return i.has(t.to)||i.has(pe(this,t).to)}}isCheck(){const t=this.board.kingOf(this.turn);return m(t)&&this.kingAttackers(t,v(this.turn),this.board.occupied).nonEmpty()}isEnd(t){return!!(t?t.variantEnd:this.isVariantEnd())||(this.isInsufficientMaterial()||!this.hasDests(t))}isCheckmate(t){return t=t||this.ctx(),!t.variantEnd&&t.checkers.nonEmpty()&&!this.hasDests(t)}isStalemate(t){return t=t||this.ctx(),!t.variantEnd&&t.checkers.isEmpty()&&!this.hasDests(t)}outcome(t){const e=this.variantOutcome(t);return e||(t=t||this.ctx(),this.isCheckmate(t)?{winner:v(this.turn)}:this.isInsufficientMaterial()||this.isStalemate(t)?{winner:void 0}:void 0)}allDests(t){t=t||this.ctx();const e=new Map;if(t.variantEnd)return e;for(const i of this.board[this.turn])e.set(i,this.dests(i,t));return e}play(t){const e=this.turn,i=this.epSquare,s=ue(this,t);if(this.epSquare=void 0,this.halfmoves+=1,"black"===e&&(this.fullmoves+=1),this.turn=v(e),f(t))this.board.set(t.to,{role:t.role,color:e}),this.pockets&&this.pockets[e][t.role]--,"pawn"===t.role&&(this.halfmoves=0);else{const n=this.board.take(t.from);if(!n)return;let a;if("pawn"===n.role){this.halfmoves=0,t.to===i&&(a=this.board.take(t.to+("white"===e?-8:8)));const s=t.from-t.to;16===Math.abs(s)&&8<=t.from&&t.from<=55&&(this.epSquare=t.from+t.to>>1),t.promotion&&(n.role=t.promotion,n.promoted=!!this.pockets)}else if("rook"===n.role)this.castles.discardRook(t.from);else if("king"===n.role){if(s){const t=this.castles.rook[e][s];if(m(t)){const i=this.board.take(t);this.board.set(_(e,s),n),i&&this.board.set(A(e,s),i)}}this.castles.discardColor(e)}if(!s){const e=this.board.set(t.to,n)||a;e&&this.playCaptureAt(t.to,e)}}this.remainingChecks&&this.isCheck()&&(this.remainingChecks[e]=Math.max(this.remainingChecks[e]-1,0))}}class re extends ae{constructor(){super("chess")}static default(){const t=new this;return t.reset(),t}static fromSetup(t,e){const i=new this;return i.setupUnchecked(t),i.validate(e).map((t=>i))}clone(){return super.clone()}}const oe=(t,e)=>{if(!m(e))return;const i="white"===t.turn?5:2,s="white"===t.turn?8:-8;if(b(e)!==i)return;if(t.board.occupied.has(e+s))return;const n=e-s;return t.board.pawn.has(n)&&t.board[v(t.turn)].has(n)?e:void 0},le=t=>{if(!m(t.epSquare))return;const e=t.ctx(),i=t.board.pieces(t.turn,"pawn"),s=i.intersect($t(v(t.turn),t.epSquare));for(const n of s)if(t.dests(n,e).has(t.epSquare))return t.epSquare},he=(t,e,i)=>{if(!m(t.epSquare))return!1;if(!$t(t.turn,e).has(t.epSquare))return!1;if(!m(i.king))return!0;const s=t.epSquare+("white"===t.turn?-8:8),n=t.board.occupied.toggle(e).toggle(t.epSquare).toggle(s);return!t.kingAttackers(i.king,v(t.turn),n).intersects(n)},ce=(t,e,i)=>{if(!m(i.king)||i.checkers.nonEmpty())return ut.empty();const s=t.castles.rook[t.turn][e];if(!m(s))return ut.empty();if(t.castles.path[t.turn][e].intersects(t.board.occupied))return ut.empty();const n=_(t.turn,e),a=te(i.king,n),r=t.board.occupied.without(i.king);for(const h of a)if(t.kingAttackers(h,v(t.turn),r).nonEmpty())return ut.empty();const o=A(t.turn,e),l=t.board.occupied.toggle(i.king).toggle(s).toggle(o);return t.kingAttackers(n,v(t.turn),l).nonEmpty()?ut.empty():ut.fromSquare(s)},de=(t,e,i)=>{if(i.variantEnd)return ut.empty();const s=t.board.get(e);if(!s||s.color!==t.turn)return ut.empty();let n=Qt(s,e,t.board.occupied);if("pawn"===s.role){let i=t.board[v(t.turn)];m(t.epSquare)&&(i=i.with(t.epSquare)),n=n.intersect(i);const s="white"===t.turn?8:-8,a=e+s;if(0<=a&&a<64&&!t.board.occupied.has(a)){n=n.with(a);const i="white"===t.turn?e<16:e>=48,r=a+s;i&&!t.board.occupied.has(r)&&(n=n.with(r))}return n}return n=n.diff(t.board[t.turn]),e===i.king?n.union(ce(t,"a",i)).union(ce(t,"h",i)):n},ue=(t,e)=>{if(f(e))return;const i=e.to-e.from;return(2===Math.abs(i)||t.board[t.turn].has(e.to))&&t.board.king.has(e.from)?i>0?"h":"a":void 0},pe=(t,e)=>{const i=ue(t,e);if(!i)return e;const s=t.castles.rook[t.turn][i];return{from:e.from,to:m(s)?s:e.to}};class ge extends ae{constructor(){super("crazyhouse")}reset(){super.reset(),this.pockets=ft.empty()}setupUnchecked(t){super.setupUnchecked(t),this.board.promoted=t.board.promoted.intersect(t.board.occupied).diff(t.board.king).diff(t.board.pawn),this.pockets=t.pockets?t.pockets.clone():ft.empty()}static default(){const t=new this;return t.reset(),t}static fromSetup(t,e){const i=new this;return i.setupUnchecked(t),i.validate(e).map((t=>i))}clone(){return super.clone()}validate(t){return super.validate(t).chain((t=>{var e,i;return(null===(e=this.pockets)||void 0===e?void 0:e.count("king"))?lt.err(new ie(ee.Kings)):((null===(i=this.pockets)||void 0===i?void 0:i.size())||0)+this.board.occupied.size()>64?lt.err(new ie(ee.Variant)):lt.ok(void 0)}))}hasInsufficientMaterial(t){return this.pockets?this.board.occupied.size()+this.pockets.size()<=3&&this.board.pawn.isEmpty()&&this.board.promoted.isEmpty()&&this.board.rooksAndQueens().isEmpty()&&this.pockets.count("pawn")<=0&&this.pockets.count("rook")<=0&&this.pockets.count("queen")<=0:super.hasInsufficientMaterial(t)}dropDests(t){var e,i;const s=this.board.occupied.complement().intersect((null===(e=this.pockets)||void 0===e?void 0:e[this.turn].hasNonPawns())?ut.full():(null===(i=this.pockets)||void 0===i?void 0:i[this.turn].hasPawns())?ut.backranks().complement():ut.empty());if(t=t||this.ctx(),m(t.king)&&t.checkers.nonEmpty()){const e=t.checkers.singleSquare();return m(e)?s.intersect(te(e,t.king)):ut.empty()}return s}}class fe extends ae{constructor(){super("atomic")}static default(){const t=new this;return t.reset(),t}static fromSetup(t,e){const i=new this;return i.setupUnchecked(t),i.validate(e).map((t=>i))}clone(){return super.clone()}validate(t){if(this.board.occupied.isEmpty())return lt.err(new ie(ee.Empty));if(this.board.king.size()>2)return lt.err(new ie(ee.Kings));const e=this.board.kingOf(v(this.turn));return m(e)?this.kingAttackers(e,this.turn,this.board.occupied).nonEmpty()?lt.err(new ie(ee.OppositeCheck)):ut.backranks().intersects(this.board.pawn)?lt.err(new ie(ee.PawnsOnBackrank)):(null===t||void 0===t?void 0:t.ignoreImpossibleCheck)?lt.ok(void 0):this.validateCheckers():lt.err(new ie(ee.Kings))}validateCheckers(){return m(this.epSquare)?lt.ok(void 0):super.validateCheckers()}kingAttackers(t,e,i){const s=this.board.pieces(e,"king");return s.isEmpty()||Bt(t).intersects(s)?ut.empty():super.kingAttackers(t,e,i)}playCaptureAt(t,e){super.playCaptureAt(t,e),this.board.take(t);for(const i of Bt(t).intersect(this.board.occupied).diff(this.board.pawn)){const t=this.board.take(i);"rook"===(null===t||void 0===t?void 0:t.role)&&this.castles.discardRook(i),"king"===(null===t||void 0===t?void 0:t.role)&&this.castles.discardColor(t.color)}}hasInsufficientMaterial(t){if(this.board.pieces(v(t),"king").isEmpty())return!1;if(this.board[t].diff(this.board.king).isEmpty())return!0;if(this.board[v(t)].diff(this.board.king).nonEmpty()){if(this.board.occupied.equals(this.board.bishop.union(this.board.king))){if(!this.board.bishop.intersect(this.board.white).intersects(ut.darkSquares()))return!this.board.bishop.intersect(this.board.black).intersects(ut.lightSquares());if(!this.board.bishop.intersect(this.board.white).intersects(ut.lightSquares()))return!this.board.bishop.intersect(this.board.black).intersects(ut.darkSquares())}return!1}return!this.board.queen.nonEmpty()&&!this.board.pawn.nonEmpty()&&(1===this.board.knight.union(this.board.bishop).union(this.board.rook).size()||!!this.board.occupied.equals(this.board.knight.union(this.board.king))&&this.board.knight.size()<=2)}dests(t,e){e=e||this.ctx();let i=ut.empty();for(const s of de(this,t,e)){const e=this.clone();e.play({from:t,to:s});const n=e.board.kingOf(this.turn);!m(n)||m(e.board.kingOf(e.turn))&&!e.kingAttackers(n,e.turn,e.board.occupied).isEmpty()||(i=i.with(s))}return i}isVariantEnd(){return!!this.variantOutcome()}variantOutcome(t){for(const e of u)if(this.board.pieces(e,"king").isEmpty())return{winner:v(e)}}}class me extends ae{constructor(){super("antichess")}reset(){super.reset(),this.castles=ne.empty()}setupUnchecked(t){super.setupUnchecked(t),this.castles=ne.empty()}static default(){const t=new this;return t.reset(),t}static fromSetup(t,e){const i=new this;return i.setupUnchecked(t),i.validate(e).map((t=>i))}clone(){return super.clone()}validate(t){return this.board.occupied.isEmpty()?lt.err(new ie(ee.Empty)):ut.backranks().intersects(this.board.pawn)?lt.err(new ie(ee.PawnsOnBackrank)):lt.ok(void 0)}kingAttackers(t,e,i){return ut.empty()}ctx(){const t=super.ctx();if(m(this.epSquare)&&$t(v(this.turn),this.epSquare).intersects(this.board.pieces(this.turn,"pawn")))return t.mustCapture=!0,t;const e=this.board[v(this.turn)];for(const i of this.board[this.turn])if(de(this,i,t).intersects(e))return t.mustCapture=!0,t;return t}dests(t,e){e=e||this.ctx();const i=de(this,t,e),s=this.board[v(this.turn)];return i.intersect(e.mustCapture?m(this.epSquare)&&"pawn"===this.board.getRole(t)?s.with(this.epSquare):s:ut.full())}hasInsufficientMaterial(t){if(this.board[t].isEmpty())return!1;if(this.board[v(t)].isEmpty())return!0;if(this.board.occupied.equals(this.board.bishop)){const e=this.board[t].intersects(ut.lightSquares()),i=this.board[t].intersects(ut.darkSquares()),s=this.board[v(t)].isDisjoint(ut.lightSquares()),n=this.board[v(t)].isDisjoint(ut.darkSquares());return e&&s||i&&n}return!(!this.board.occupied.equals(this.board.knight)||2!==this.board.occupied.size())&&this.board.white.intersects(ut.lightSquares())!==this.board.black.intersects(ut.darkSquares())!==(this.turn===t)}isVariantEnd(){return this.board[this.turn].isEmpty()}variantOutcome(t){if(t=t||this.ctx(),t.variantEnd||this.isStalemate(t))return{winner:this.turn}}}class ve extends ae{constructor(){super("kingofthehill")}static default(){const t=new this;return t.reset(),t}static fromSetup(t,e){const i=new this;return i.setupUnchecked(t),i.validate(e).map((t=>i))}clone(){return super.clone()}hasInsufficientMaterial(t){return!1}isVariantEnd(){return this.board.king.intersects(ut.center())}variantOutcome(t){for(const e of u)if(this.board.pieces(e,"king").intersects(ut.center()))return{winner:e}}}class be extends ae{constructor(){super("3check")}reset(){super.reset(),this.remainingChecks=mt["default"]()}setupUnchecked(t){var e;super.setupUnchecked(t),this.remainingChecks=(null===(e=t.remainingChecks)||void 0===e?void 0:e.clone())||mt["default"]()}static default(){const t=new this;return t.reset(),t}static fromSetup(t,e){const i=new this;return i.setupUnchecked(t),i.validate(e).map((t=>i))}clone(){return super.clone()}hasInsufficientMaterial(t){return this.board.pieces(t,"king").equals(this.board[t])}isVariantEnd(){return!!this.remainingChecks&&(this.remainingChecks.white<=0||this.remainingChecks.black<=0)}variantOutcome(t){if(this.remainingChecks)for(const e of u)if(this.remainingChecks[e]<=0)return{winner:e}}}const xe=()=>{const t=pt.empty();return t.occupied=new ut(65535,0),t.promoted=ut.empty(),t.white=new ut(61680,0),t.black=new ut(3855,0),t.pawn=ut.empty(),t.knight=new ut(6168,0),t.bishop=new ut(9252,0),t.rook=new ut(16962,0),t.queen=new ut(129,0),t.king=new ut(33024,0),t};class ye extends ae{constructor(){super("racingkings")}reset(){this.board=xe(),this.pockets=void 0,this.turn="white",this.castles=ne.empty(),this.epSquare=void 0,this.remainingChecks=void 0,this.halfmoves=0,this.fullmoves=1}setupUnchecked(t){super.setupUnchecked(t),this.castles=ne.empty()}static default(){const t=new this;return t.reset(),t}static fromSetup(t,e){const i=new this;return i.setupUnchecked(t),i.validate(e).map((t=>i))}clone(){return super.clone()}validate(t){return this.isCheck()||this.board.pawn.nonEmpty()?lt.err(new ie(ee.Variant)):super.validate(t)}dests(t,e){if(e=e||this.ctx(),t===e.king)return super.dests(t,e);let i=ut.empty();for(const s of super.dests(t,e)){const e={from:t,to:s},n=this.clone();n.play(e),n.isCheck()||(i=i.with(s))}return i}hasInsufficientMaterial(t){return!1}isVariantEnd(){const t=ut.fromRank(7),e=this.board.king.intersect(t);if(e.isEmpty())return!1;if("white"===this.turn||e.intersects(this.board.black))return!0;const i=this.board.kingOf("black");if(m(i)){const e=this.board.occupied.without(i);for(const s of Bt(i).intersect(t).diff(this.board.black))if(this.kingAttackers(s,"white",e).isEmpty())return!1}return!0}variantOutcome(t){if(t?!t.variantEnd:!this.isVariantEnd())return;const e=ut.fromRank(7),i=this.board.pieces("black","king").intersects(e),s=this.board.pieces("white","king").intersects(e);return i&&!s?{winner:"black"}:s&&!i?{winner:"white"}:{winner:void 0}}}const we=()=>{const t=pt.empty();return t.occupied=new ut(4294967295,4294901862),t.promoted=ut.empty(),t.white=new ut(4294967295,102),t.black=new ut(0,4294901760),t.pawn=new ut(4294967295,16711782),t.knight=new ut(0,1107296256),t.bishop=new ut(0,603979776),t.rook=new ut(0,2164260864),t.queen=new ut(0,134217728),t.king=new ut(0,268435456),t};class ke extends ae{constructor(){super("horde")}reset(){this.board=we(),this.pockets=void 0,this.turn="white",this.castles=ne["default"](),this.castles.discardColor("white"),this.epSquare=void 0,this.remainingChecks=void 0,this.halfmoves=0,this.fullmoves=1}static default(){const t=new this;return t.reset(),t}static fromSetup(t,e){const i=new this;return i.setupUnchecked(t),i.validate(e).map((t=>i))}clone(){return super.clone()}validate(t){if(this.board.occupied.isEmpty())return lt.err(new ie(ee.Empty));if(1!==this.board.king.size())return lt.err(new ie(ee.Kings));const e=this.board.kingOf(v(this.turn));if(m(e)&&this.kingAttackers(e,this.turn,this.board.occupied).nonEmpty())return lt.err(new ie(ee.OppositeCheck));for(const i of u){const t=this.board.pieces(i,"king").isEmpty()?ut.backrank(v(i)):ut.backranks();if(this.board.pieces(i,"pawn").intersects(t))return lt.err(new ie(ee.PawnsOnBackrank))}return(null===t||void 0===t?void 0:t.ignoreImpossibleCheck)?lt.ok(void 0):this.validateCheckers()}hasInsufficientMaterial(t){if(this.board.pieces(t,"king").nonEmpty())return!1;const e=t=>"light"===t?"dark":"light",i=t=>"light"===t?ut.lightSquares():ut.darkSquares(),s=t=>{const e=this.board.pieces(t,"bishop");return e.intersects(ut.darkSquares())&&e.intersects(ut.lightSquares())},n=gt.fromBoard(this.board,t),a=e=>i(e).intersect(this.board.pieces(t,"bishop")).size(),r=a("light")>=1?"light":"dark",o=n.pawn+n.knight+n.rook+n.queen+Math.min(a("dark"),2)+Math.min(a("light"),2),l=gt.fromBoard(this.board,v(t)),h=e=>i(e).intersect(this.board.pieces(v(t),"bishop")).size(),c=l.size(),d=t=>c-t;if(0===o)return!0;if(o>=4)return!1;if((n.pawn>=1||n.queen>=1)&&o>=2)return!1;if(n.rook>=1&&o>=2&&(2!==o||1!==n.rook||1!==n.bishop||1!==d(h(r))))return!1;if(1===o){if(1===c)return!0;if(1===n.queen)return!(l.pawn>=1||l.rook>=1||h("light")>=2||h("dark")>=2);if(1===n.pawn){const e=this.board.pieces(t,"pawn").last(),i=this.clone();i.board.set(e,{color:t,role:"queen"});const s=this.clone();return s.board.set(e,{color:t,role:"knight"}),i.hasInsufficientMaterial(t)&&s.hasInsufficientMaterial(t)}if(1===n.rook)return!(l.pawn>=2||l.rook>=1&&l.pawn>=1||l.rook>=1&&l.knight>=1||l.pawn>=1&&l.knight>=1);if(1===n.bishop)return!(h(e(r))>=2||h(e(r))>=1&&l.pawn>=1||l.pawn>=2);if(1===n.knight)return!(c>=4&&(l.knight>=2||l.pawn>=2||l.rook>=1&&l.knight>=1||l.rook>=1&&l.bishop>=1||l.knight>=1&&l.bishop>=1||l.rook>=1&&l.pawn>=1||l.knight>=1&&l.pawn>=1||l.bishop>=1&&l.pawn>=1||s(v(t))&&l.pawn>=1)&&(h("dark")<2||d(h("dark"))>=3)&&(h("light")<2||d(h("light"))>=3))}else{if(2===o)return 1===c||(2===n.knight?l.pawn+l.bishop+l.knight<1:s(t)?!(l.pawn>=1||l.bishop>=1||l.knight>=1&&l.rook+l.queen>=1):n.bishop>=1&&n.knight>=1?!(l.pawn>=1||h(e(r))>=1||d(h(r))>=3):!(l.pawn>=1&&h(e(r))>=1||l.pawn>=1&&l.knight>=1||h(e(r))>=1&&l.knight>=1||h(e(r))>=2||l.knight>=2||l.pawn>=2));if(3===o)return!(2===n.knight&&1===n.bishop||3===n.knight||s(t))&&1===c}return!0}isVariantEnd(){return this.board.white.isEmpty()||this.board.black.isEmpty()}variantOutcome(t){return this.board.white.isEmpty()?{winner:"black"}:this.board.black.isEmpty()?{winner:"white"}:void 0}}const Ce=t=>{switch(t){case"chess":return re["default"]();case"antichess":return me.default();case"atomic":return fe.default();case"horde":return ke.default();case"racingkings":return ye.default();case"kingofthehill":return ve.default();case"3check":return be.default();case"crazyhouse":return ge.default()}},Se=(t,e,i)=>{switch(t){case"chess":return re.fromSetup(e,i);case"antichess":return me.fromSetup(e,i);case"atomic":return fe.fromSetup(e,i);case"horde":return ke.fromSetup(e,i);case"racingkings":return ye.fromSetup(e,i);case"kingofthehill":return ve.fromSetup(e,i);case"3check":return be.fromSetup(e,i);case"crazyhouse":return ge.fromSetup(e,i)}},_e=(t=Te)=>({headers:t(),moves:new Ae});class Ae{constructor(){this.children=[]}*mainline(){let t=this;while(t.children.length){const e=t.children[0];yield e.data,t=e}}}class Ie extends Ae{constructor(t){super(),this.data=t}}const Pe=(t,e,i)=>{const s=new Ae,n=[{before:t,after:s,ctx:e}];let a;while(a=n.pop())for(let t=0;t<a.before.children.length;t++){const e=t<a.before.children.length-1?a.ctx.clone():a.ctx,s=a.before.children[t],r=i(e,s.data,t);if(m(r)){const t=new Ie(r);a.after.children.push(t),n.push({before:s,after:t,ctx:e})}}return s},Te=()=>new Map([["Event","?"],["Site","?"],["Date","????.??.??"],["Round","?"],["White","?"],["Black","?"],["Result","*"]]),Ee="\ufeff",Le=t=>/^\s*$/.test(t),Me=t=>t.startsWith("%");class Oe extends Error{}class De{constructor(t,e=Te,i=1e6){this.emitGame=t,this.initHeaders=e,this.maxBudget=i,this.lineBuf=[],this.resetGame(),this.state=0}resetGame(){this.budget=this.maxBudget,this.found=!1,this.state=1,this.game=_e(this.initHeaders),this.stack=[{parent:this.game.moves,root:!0}],this.commentBuf=[]}consumeBudget(t){if(this.budget-=t,this.budget<0)throw new Oe("ERR_PGN_BUDGET")}parse(t,e){if(!(this.budget<0))try{let i=0;for(;;){const e=t.indexOf("\n",i);if(-1===e)break;const s=e>i&&"\r"===t[e-1]?e-1:e;this.consumeBudget(e-i),this.lineBuf.push(t.slice(i,s)),i=e+1,this.handleLine()}this.consumeBudget(t.length-i),this.lineBuf.push(t.slice(i)),(null===e||void 0===e?void 0:e.stream)||(this.handleLine(),this.emit(void 0))}catch(i){this.emit(i)}}handleLine(){let t=!0,e=this.lineBuf.join("");this.lineBuf=[];t:for(;;)switch(this.state){case 0:e.startsWith(Ee)&&(e=e.slice(Ee.length)),this.state=1;case 1:if(Le(e)||Me(e))return;this.found=!0,this.state=2;case 2:{if(Me(e))return;let i=!0;while(i)i=!1,e=e.replace(/^\s*\[([A-Za-z0-9][A-Za-z0-9_+#=:-]*)\s+"((?:[^"\\]|\\"|\\\\)*)"\]/,((e,s,n)=>(this.consumeBudget(200),this.game.headers.set(s,n.replace(/\\"/g,'"').replace(/\\\\/g,"\\")),i=!0,t=!1,"")));if(Le(e))return;this.state=3}case 3:{if(t){if(Me(e))return;if(Le(e))return this.emit(void 0)}const i=/(?:[NBKRQ]?[a-h]?[1-8]?[-x]?[a-h][1-8](?:=?[nbrqkNBRQK])?|[pnbrqkPNBRQK]?@[a-h][1-8]|O-O-O|0-0-0|O-O|0-0)[+#]?|--|Z0|0000|@@@@|{|;|\$\d{1,4}|[?!]{1,2}|\(|\)|\*|1-0|0-1|1\/2-1\/2/g;let s;while(s=i.exec(e)){const t=this.stack[this.stack.length-1];let n=s[0];if(";"===n)return;if(n.startsWith("$"))this.handleNag(parseInt(n.slice(1),10));else if("!"===n)this.handleNag(1);else if("?"===n)this.handleNag(2);else if("!!"===n)this.handleNag(3);else if("??"===n)this.handleNag(4);else if("!?"===n)this.handleNag(5);else if("?!"===n)this.handleNag(6);else if("1-0"===n||"0-1"===n||"1/2-1/2"===n||"*"===n)1===this.stack.length&&"*"!==n&&this.game.headers.set("Result",n);else if("("===n)this.consumeBudget(100),this.stack.push({parent:t.parent,root:!1});else if(")"===n)this.stack.length>1&&this.stack.pop();else{if("{"===n){const t=i.lastIndex,s=" "===e[t]?t+1:t;e=e.slice(s),this.state=4;continue t}this.consumeBudget(100),"Z0"===n||"0000"===n||"@@@@"===n?n="--":n.startsWith("0")&&(n=n.replace(/0/g,"O")),t.node&&(t.parent=t.node),t.node=new Ie({san:n,startingComments:t.startingComments}),t.startingComments=void 0,t.root=!1,t.parent.children.push(t.node)}}return}case 4:{const i=e.indexOf("}");if(-1===i)return void this.commentBuf.push(e);{const s=i>0&&" "===e[i-1]?i-1:i;this.commentBuf.push(e.slice(0,s)),this.handleComment(),e=e.slice(i),this.state=3,t=!1}}}}handleNag(t){var e;this.consumeBudget(50);const i=this.stack[this.stack.length-1];i.node&&((e=i.node.data).nags||(e.nags=[]),i.node.data.nags.push(t))}handleComment(){var t,e;this.consumeBudget(100);const i=this.stack[this.stack.length-1],s=this.commentBuf.join("\n");this.commentBuf=[],i.node?((t=i.node.data).comments||(t.comments=[]),i.node.data.comments.push(s)):i.root?((e=this.game).comments||(e.comments=[]),this.game.comments.push(s)):(i.startingComments||(i.startingComments=[]),i.startingComments.push(s))}emit(t){if(4===this.state&&this.handleComment(),t)return this.emitGame(this.game,t);this.found&&this.emitGame(this.game,void 0),this.resetGame()}}const Re=(t,e=Te)=>{const i=[];return new De((t=>i.push(t)),e,NaN).parse(t),i},Ne=t=>{switch((t||"chess").toLowerCase()){case"chess":case"chess960":case"chess 960":case"standard":case"from position":case"classical":case"normal":case"fischerandom":case"fischerrandom":case"fischer random":case"wild/0":case"wild/1":case"wild/2":case"wild/3":case"wild/4":case"wild/5":case"wild/6":case"wild/7":case"wild/8":case"wild/8a":return"chess";case"crazyhouse":case"crazy house":case"house":case"zh":return"crazyhouse";case"king of the hill":case"koth":case"kingofthehill":return"kingofthehill";case"three-check":case"three check":case"threecheck":case"three check chess":case"3-check":case"3 check":case"3check":return"3check";case"antichess":case"anti chess":case"anti":return"antichess";case"atomic":case"atom":case"atomic chess":return"atomic";case"horde":case"horde chess":return"horde";case"racing kings":case"racingkings":case"racing":case"race":return"racingkings";default:return}},ze=(t,e)=>{const i=Ne(t.get("Variant"));if(!i)return lt.err(new ie(ee.Variant));const s=t.get("FEN");return s?At(s).chain((t=>Se(i,t,e))):lt.ok(Ce(i))};function Fe(t){switch(t){case"G":return"green";case"R":return"red";case"Y":return"yellow";case"B":return"blue";default:return}}const Be=t=>{const e=Fe(t.slice(0,1)),i=k(t.slice(1,3)),s=k(t.slice(3,5));if(e&&m(i))return 3===t.length?{color:e,from:i,to:i}:5===t.length&&m(s)?{color:e,from:i,to:s}:void 0},He=t=>{let e,i,s;const n=[],a=t.replace(/\s?\[%(emt|clk)\s(\d{1,5}):(\d{1,2}):(\d{1,2}(?:\.\d{0,3})?)\]\s?/g,((t,s,n,a,r)=>{const o=3600*parseInt(n,10)+60*parseInt(a,10)+parseFloat(r);return"emt"===s?e=o:"clk"===s&&(i=o),"  "})).replace(/\s?\[%(?:csl|cal)\s([RGYB][a-h][1-8](?:[a-h][1-8])?(?:,[RGYB][a-h][1-8](?:[a-h][1-8])?)*)\]\s?/g,((t,e)=>{for(const i of e.split(","))n.push(Be(i));return"  "})).replace(/\s?\[%eval\s(?:#([+-]?\d{1,5})|([+-]?(?:\d{1,5}|\d{0,5}\.\d{1,2})))(?:,(\d{1,5}))?\]\s?/g,((t,e,i,n)=>{const a=n&&parseInt(n,10);return s=e?{mate:parseInt(e,10),depth:a}:{pawns:parseFloat(i),depth:a},"  "})).trim();return{text:a,shapes:n,emt:e,clock:i,evaluation:s}},$e=(t,e)=>{let i="";if(f(e))"pawn"!==e.role&&(i=y(e.role).toUpperCase()),i+="@"+C(e.to);else{const s=t.board.getRole(e.from);if(!s)return"--";if("king"!==s||!t.board[t.turn].has(e.to)&&2!==Math.abs(e.to-e.from)){const n=t.board.occupied.has(e.to)||"pawn"===s&&x(e.from)!==x(e.to);if("pawn"!==s){let n;if(i=y(s).toUpperCase(),n="king"===s?Bt(e.to).intersect(t.board.king):"queen"===s?Kt(e.to,t.board.occupied).intersect(t.board.queen):"rook"===s?Ut(e.to,t.board.occupied).intersect(t.board.rook):"bishop"===s?qt(e.to,t.board.occupied).intersect(t.board.bishop):Ht(e.to).intersect(t.board.knight),n=n.intersect(t.board[t.turn]).without(e.from),n.nonEmpty()){const s=t.ctx();for(const i of n)t.dests(i,s).has(e.to)||(n=n.without(i));if(n.nonEmpty()){let t=!1,s=n.intersects(ut.fromRank(b(e.from)));n.intersects(ut.fromFile(x(e.from)))?t=!0:s=!0,s&&(i+=c[x(e.from)]),t&&(i+=d[b(e.from)])}}}else n&&(i=c[x(e.from)]);n&&(i+="x"),i+=C(e.to),e.promotion&&(i+="="+y(e.promotion).toUpperCase())}else i=e.to>e.from?"O-O":"O-O-O"}return i},We=(t,e)=>{var i;const s=$e(t,e);return t.play(e),(null===(i=t.outcome())||void 0===i?void 0:i.winner)?s+"#":t.isCheck()?s+"+":s},Xe=(t,e)=>{const i=t.ctx(),s=e.match(/^([NBRQK])?([a-h])?([1-8])?[-x]?([a-h][1-8])(?:=?([nbrqkNBRQK]))?[+#]?$/);if(!s){let s;if("O-O"===e||"O-O+"===e||"O-O#"===e?s="h":"O-O-O"!==e&&"O-O-O+"!==e&&"O-O-O#"!==e||(s="a"),s){const e=t.castles.rook[t.turn][s];if(!m(i.king)||!m(e)||!t.dests(i.king,i).has(e))return;return{from:i.king,to:e}}const n=e.match(/^([pnbrqkPNBRQK])?@([a-h][1-8])[+#]?$/);if(!n)return;const a={role:n[1]?w(n[1]):"pawn",to:k(n[2])};return t.isLegal(a,i)?a:void 0}const n=s[1]?w(s[1]):"pawn",a=k(s[4]),r=s[5]?w(s[5]):void 0;if(!!r!==("pawn"===n&&ut.backranks().has(a)))return;if("king"===r&&"antichess"!==t.rules)return;let o=t.board.pieces(t.turn,n);"pawn"!==n||s[2]?s[2]&&(o=o.intersect(ut.fromFile(s[2].charCodeAt(0)-"a".charCodeAt(0)))):o=o.intersect(ut.fromFile(x(a))),s[3]&&(o=o.intersect(ut.fromRank(s[3].charCodeAt(0)-"1".charCodeAt(0))));const l="pawn"===n?ut.fromFile(x(a)):ut.empty();let h;o=o.intersect(l.union(Qt({color:v(t.turn),role:n},a,t.board.occupied)));for(const c of o)if(t.dests(c,i).has(a)){if(m(h))return;h=c}return m(h)?{from:h,to:a,promotion:r}:void 0};class Ye{constructor(t,e,i){this.pos=t,this.path=e,this.clocks=i,this.clone=()=>new Ye(this.pos.clone(),this.path,{...this.clocks})}}const Ve=t=>{const e=t.map(He),i=t=>t.reduce(((t,e)=>void 0==typeof e?t:e),void 0);return{texts:e.map((t=>t.text)).filter((t=>!!t)),shapes:e.flatMap((t=>t.shapes)),clock:i(e.map((t=>t.clock))),emt:i(e.map((t=>t.emt)))}},Ze=(t,e=!1)=>{var i,s;const n=Re(t)[0]||Re("*")[0],a=ze(n.headers).unwrap(),r=Ot(a.toSetup()),o=Ve(n.comments||[]),l=new Map(Array.from(n.headers,(([t,e])=>[t.toLowerCase(),e]))),h=Ue(l,e),c={fen:r,turn:a.turn,check:a.isCheck(),pos:a.clone(),comments:o.texts,shapes:o.shapes,clocks:{white:(null===(i=h.timeControl)||void 0===i?void 0:i.initial)||o.clock,black:(null===(s=h.timeControl)||void 0===s?void 0:s.initial)||o.clock}},d=Ge(a,n.moves,h),u=qe(l,h);return new J(c,d,u,h)},Ge=(t,e,i)=>Pe(e,new Ye(t,Q.root,{}),((t,e,s)=>{const n=Xe(t.pos,e.san);if(!n)return;const a=nt(n),r=t.path.append(a),o=We(t.pos,n);t.path=r;const l=t.pos.toSetup(),h=Ve(e.comments||[]),c=Ve(e.startingComments||[]),d=[...h.shapes,...c.shapes],u=2*(l.fullmoves-1)+("white"===t.pos.turn?0:1);let p=t.clocks=je(t.clocks,t.pos.turn,h.clock);u<2&&i.timeControl&&(p={white:i.timeControl.initial,black:i.timeControl.initial,...p});const g={path:r,ply:u,move:n,san:o,uci:S(n),fen:Ot(t.pos.toSetup()),turn:t.pos.turn,check:t.pos.isCheck(),comments:h.texts,startingComments:c.texts,nags:e.nags||[],shapes:d,clocks:p,emt:h.emt};return g})),je=(t,e,i)=>"white"==e?{...t,black:i}:{...t,white:i};function qe(t,e){const i=(e,i)=>{const s=t.get(`${e}${i}`);return"?"==s||""==s?void 0:s},s=t=>{const s=i(t,"");return{name:s,title:i(t,"title"),rating:parseInt(i(t,"elo")||"")||void 0,isLichessUser:e.isLichess&&!!(null===s||void 0===s?void 0:s.match(/^[a-z0-9][a-z0-9_-]{0,28}[a-z0-9]$/i))}};return{white:s("white"),black:s("black")}}function Ue(t,e){var i;const s=t.get("site"),n=null===(i=t.get("timecontrol"))||void 0===i?void 0:i.split("+").map((t=>parseInt(t))),a=n&&n[0]?{initial:n[0],increment:n[1]||0}:void 0;return{externalLink:s&&s.match(/^https?:\/\//)?s:void 0,isLichess:!(!e||!(null===s||void 0===s?void 0:s.startsWith(e))),timeControl:a}}class Ke{constructor(t,e){this.opts=t,this.redraw=e,this.flipped=!1,this.pane="board",this.autoScrollRequested=!1,this.curNode=()=>this.game.nodeAt(this.path)||this.game.moves,this.curData=()=>this.game.dataAt(this.path)||this.game.initial,this.goTo=(t,e=!0)=>{var i,s;const n="first"==t?Q.root:"prev"==t?this.path.init():"next"==t?null===(s=null===(i=this.game.nodeAt(this.path))||void 0===i?void 0:i.children[0])||void 0===s?void 0:s.data.path:this.game.pathAtMainlinePly("last");this.toPath(n||this.path,e)},this.canGoTo=t=>"prev"==t||"first"==t?!this.path.empty():!!this.curNode().children[0],this.toPath=(t,e=!0)=>{this.path=t,this.pane="board",this.autoScrollRequested=!0,this.redrawGround(),this.redraw(),e&&this.focus()},this.focus=()=>{var t;return null===(t=this.div)||void 0===t?void 0:t.focus()},this.toggleMenu=()=>{this.pane="board"==this.pane?"menu":"board",this.redraw()},this.togglePgn=()=>{this.pane="pgn"==this.pane?"board":"pgn",this.redraw()},this.orientation=()=>{const t=this.opts.orientation||"white";return this.flipped?v(t):t},this.flip=()=>{this.flipped=!this.flipped,this.pane="board",this.redrawGround(),this.redraw()},this.cgState=()=>{var t;const e=this.curData(),i=st(e)?z(e.uci):null===(t=this.opts.chessground)||void 0===t?void 0:t.lastMove;return{fen:this.curData().fen,orientation:this.orientation(),check:this.curData().check,lastMove:i,turnColor:e.turn}},this.analysisUrl=()=>this.game.metadata.isLichess&&this.game.metadata.externalLink||`https://lichess.org/analysis/${this.curData().fen.replace(" ","_")}?color=${this.orientation()}`,this.practiceUrl=()=>`${this.analysisUrl()}#practice`,this.setGround=t=>{this.ground=t,this.redrawGround()},this.redrawGround=()=>this.withGround((t=>{t.set(this.cgState()),t.setShapes(this.curData().shapes.map((t=>({orig:C(t.from),dest:C(t.to),brush:t.color}))))})),this.withGround=t=>this.ground&&t(this.ground),this.game=Ze(t.pgn,t.lichess),this.translate=I(t.translate),this.path=this.game.pathAtMainlinePly(t.initialPly)}}const Qe=(t,e)=>Math.abs(t-e),Je=t=>(e,i,s,n)=>Qe(e,s)<2&&("white"===t?n===i+1||i<=1&&n===i+2&&e===s:n===i-1||i>=6&&n===i-2&&e===s),ti=(t,e,i,s)=>{const n=Qe(t,i),a=Qe(e,s);return 1===n&&2===a||2===n&&1===a},ei=(t,e,i,s)=>Qe(t,i)===Qe(e,s),ii=(t,e,i,s)=>t===i||e===s,si=(t,e,i,s)=>ei(t,e,i,s)||ii(t,e,i,s),ni=(t,e,i)=>(s,n,a,r)=>Qe(s,a)<2&&Qe(n,r)<2||i&&n===r&&n===("white"===t?0:7)&&(4===s&&(2===a&&e.includes(0)||6===a&&e.includes(7))||e.includes(a));function ai(t,e){const i="white"===e?"1":"8",s=[];for(const[n,a]of t)n[1]===i&&a.color===e&&"rook"===a.role&&s.push(N(n)[0]);return s}function ri(t,e,i){const s=t.get(e);if(!s)return[];const n=N(e),a=s.role,r="pawn"===a?Je(s.color):"knight"===a?ti:"bishop"===a?ei:"rook"===a?ii:"queen"===a?si:ni(s.color,ai(t,s.color),i);return F.filter((t=>(n[0]!==t[0]||n[1]!==t[1])&&r(n[0],n[1],t[0],t[1]))).map(R)}function oi(t,...e){t&&setTimeout((()=>t(...e)),1)}function li(t){t.orientation=$(t.orientation),t.animation.current=t.draggable.current=t.selected=void 0}function hi(t,e){for(const[i,s]of e)s?t.pieces.set(i,s):t.pieces.delete(i)}function ci(t,e){if(t.check=void 0,!0===e&&(e=t.turnColor),e)for(const[i,s]of t.pieces)"king"===s.role&&s.color===e&&(t.check=i)}function di(t,e,i,s){gi(t),t.premovable.current=[e,i],oi(t.premovable.events.set,e,i,s)}function ui(t){t.premovable.current&&(t.premovable.current=void 0,oi(t.premovable.events.unset))}function pi(t,e,i){ui(t),t.predroppable.current={role:e,key:i},oi(t.predroppable.events.set,e,i)}function gi(t){const e=t.predroppable;e.current&&(e.current=void 0,oi(e.events.unset))}function fi(t,e,i){if(!t.autoCastle)return!1;const s=t.pieces.get(e);if(!s||"king"!==s.role)return!1;const n=N(e),a=N(i);if(0!==n[1]&&7!==n[1]||n[1]!==a[1])return!1;4!==n[0]||t.pieces.has(i)||(6===a[0]?i=R([7,a[1]]):2===a[0]&&(i=R([0,a[1]])));const r=t.pieces.get(i);return!(!r||r.color!==s.color||"rook"!==r.role)&&(t.pieces.delete(e),t.pieces.delete(i),n[0]<a[0]?(t.pieces.set(R([6,a[1]]),s),t.pieces.set(R([5,a[1]]),r)):(t.pieces.set(R([2,a[1]]),s),t.pieces.set(R([3,a[1]]),r)),!0)}function mi(t,e,i){const s=t.pieces.get(e),n=t.pieces.get(i);if(e===i||!s)return!1;const a=n&&n.color!==s.color?n:void 0;return i===t.selected&&Ci(t),oi(t.events.move,e,i,a),fi(t,e,i)||(t.pieces.set(i,s),t.pieces.delete(e)),t.lastMove=[e,i],t.check=void 0,oi(t.events.change),a||!0}function vi(t,e,i,s){if(t.pieces.has(i)){if(!s)return!1;t.pieces.delete(i)}return oi(t.events.dropNewPiece,e,i),t.pieces.set(i,e),t.lastMove=[i],t.check=void 0,oi(t.events.change),t.movable.dests=void 0,t.turnColor=$(t.turnColor),!0}function bi(t,e,i){const s=mi(t,e,i);return s&&(t.movable.dests=void 0,t.turnColor=$(t.turnColor),t.animation.current=void 0),s}function xi(t,e,i){if(_i(t,e,i)){const s=bi(t,e,i);if(s){const n=t.hold.stop();Ci(t);const a={premove:!1,ctrlKey:t.stats.ctrlKey,holdTime:n};return!0!==s&&(a.captured=s),oi(t.movable.events.after,e,i,a),!0}}else if(Pi(t,e,i))return di(t,e,i,{ctrlKey:t.stats.ctrlKey}),Ci(t),!0;return Ci(t),!1}function yi(t,e,i,s){const n=t.pieces.get(e);n&&(Ai(t,e,i)||s)?(t.pieces.delete(e),vi(t,n,i,s),oi(t.movable.events.afterNewPiece,n.role,i,{premove:!1,predrop:!1})):n&&Ti(t,e,i)?pi(t,n.role,i):(ui(t),gi(t)),t.pieces.delete(e),Ci(t)}function wi(t,e,i){if(oi(t.events.select,e),t.selected){if(t.selected===e&&!t.draggable.enabled)return Ci(t),void t.hold.cancel();if((t.selectable.enabled||i)&&t.selected!==e&&xi(t,t.selected,e))return void(t.stats.dragged=!1)}(t.selectable.enabled||t.draggable.enabled)&&(Si(t,e)||Ii(t,e))&&(ki(t,e),t.hold.start())}function ki(t,e){t.selected=e,Ii(t,e)?t.premovable.dests=ri(t.pieces,e,t.premovable.castle):t.premovable.dests=void 0}function Ci(t){t.selected=void 0,t.premovable.dests=void 0,t.hold.cancel()}function Si(t,e){const i=t.pieces.get(e);return!!i&&("both"===t.movable.color||t.movable.color===i.color&&t.turnColor===i.color)}const _i=(t,e,i)=>{var s,n;return e!==i&&Si(t,e)&&(t.movable.free||!!(null===(n=null===(s=t.movable.dests)||void 0===s?void 0:s.get(e))||void 0===n?void 0:n.includes(i)))};function Ai(t,e,i){const s=t.pieces.get(e);return!!s&&(e===i||!t.pieces.has(i))&&("both"===t.movable.color||t.movable.color===s.color&&t.turnColor===s.color)}function Ii(t,e){const i=t.pieces.get(e);return!!i&&t.premovable.enabled&&t.movable.color===i.color&&t.turnColor!==i.color}const Pi=(t,e,i)=>e!==i&&Ii(t,e)&&ri(t.pieces,e,t.premovable.castle).includes(i);function Ti(t,e,i){const s=t.pieces.get(e),n=t.pieces.get(i);return!!s&&(!n||n.color!==t.movable.color)&&t.predroppable.enabled&&("pawn"!==s.role||"1"!==i[1]&&"8"!==i[1])&&t.movable.color===s.color&&t.turnColor!==s.color}function Ei(t,e){const i=t.pieces.get(e);return!!i&&t.draggable.enabled&&("both"===t.movable.color||t.movable.color===i.color&&(t.turnColor===i.color||t.premovable.enabled))}function Li(t){const e=t.premovable.current;if(!e)return!1;const i=e[0],s=e[1];let n=!1;if(_i(t,i,s)){const e=bi(t,i,s);if(e){const a={premove:!0};!0!==e&&(a.captured=e),oi(t.movable.events.after,i,s,a),n=!0}}return ui(t),n}function Mi(t,e){const i=t.predroppable.current;let s=!1;if(!i)return!1;if(e(i)){const e={role:i.role,color:t.movable.color};vi(t,e,i.key)&&(oi(t.movable.events.afterNewPiece,i.role,i.key,{premove:!1,predrop:!0}),s=!0)}return gi(t),s}function Oi(t){ui(t),gi(t),Ci(t)}function Di(t){t.movable.color=t.movable.dests=t.animation.current=void 0,Oi(t)}function Ri(t,e,i){let s=Math.floor(8*(t[0]-i.left)/i.width);e||(s=7-s);let n=7-Math.floor(8*(t[1]-i.top)/i.height);return e||(n=7-n),s>=0&&s<8&&n>=0&&n<8?R([s,n]):void 0}function Ni(t,e,i,s){const n=N(t),a=F.filter((t=>si(n[0],n[1],t[0],t[1])||ti(n[0],n[1],t[0],t[1]))),r=a.map((t=>K(R(t),i,s))),o=r.map((t=>W(e,t))),[,l]=o.reduce(((t,e,i)=>t[0]<e?t:[e,i]),[o[0],0]);return R(a[l])}const zi=t=>"white"===t.orientation,Fi="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR",Bi={p:"pawn",r:"rook",n:"knight",b:"bishop",q:"queen",k:"king"},Hi={pawn:"p",rook:"r",knight:"n",bishop:"b",queen:"q",king:"k"};function $i(t){"start"===t&&(t=Fi);const e=new Map;let i=7,s=0;for(const n of t)switch(n){case" ":case"[":return e;case"/":if(--i,i<0)return e;s=0;break;case"~":{const t=e.get(R([s-1,i]));t&&(t.promoted=!0);break}default:{const t=n.charCodeAt(0);if(t<57)s+=t-48;else{const t=n.toLowerCase();e.set(R([s,i]),{role:Bi[t],color:n===t?"black":"white"}),++s}}}return e}function Wi(t){return O.map((e=>L.map((i=>{const s=t.get(i+e);if(s){let t=Hi[s.role];return"white"===s.color&&(t=t.toUpperCase()),s.promoted&&(t+="~"),t}return"1"})).join(""))).join("/").replace(/1{2,}/g,(t=>t.length.toString()))}function Xi(t,e){e.animation&&(Vi(t.animation,e.animation),(t.animation.duration||0)<70&&(t.animation.enabled=!1))}function Yi(t,e){var i,s,n;if((null===(i=e.movable)||void 0===i?void 0:i.dests)&&(t.movable.dests=void 0),(null===(s=e.drawable)||void 0===s?void 0:s.autoShapes)&&(t.drawable.autoShapes=[]),Vi(t,e),e.fen&&(t.pieces=$i(e.fen),t.drawable.shapes=(null===(n=e.drawable)||void 0===n?void 0:n.shapes)||[]),"check"in e&&ci(t,e.check||!1),"lastMove"in e&&!e.lastMove?t.lastMove=void 0:e.lastMove&&(t.lastMove=e.lastMove),t.selected&&ki(t,t.selected),Xi(t,e),!t.movable.rookCastle&&t.movable.dests){const e="white"===t.movable.color?"1":"8",i="e"+e,s=t.movable.dests.get(i),n=t.pieces.get(i);if(!s||!n||"king"!==n.role)return;t.movable.dests.set(i,s.filter((t=>!(t==="a"+e&&s.includes("c"+e))&&!(t==="h"+e&&s.includes("g"+e)))))}}function Vi(t,e){for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(Object.prototype.hasOwnProperty.call(t,i)&&Zi(t[i])&&Zi(e[i])?Vi(t[i],e[i]):t[i]=e[i])}function Zi(t){if("object"!==typeof t||null===t)return!1;const e=Object.getPrototypeOf(t);return e===Object.prototype||null===e}const Gi=(t,e)=>e.animation.enabled?Ji(t,e):ji(t,e);function ji(t,e){const i=t(e);return e.dom.redraw(),i}const qi=(t,e)=>({key:t,pos:N(t),piece:e}),Ui=(t,e)=>e.sort(((e,i)=>W(t.pos,e.pos)-W(t.pos,i.pos)))[0];function Ki(t,e){const i=new Map,s=[],n=new Map,a=[],r=[],o=new Map;let l,h,c;for(const[d,u]of t)o.set(d,qi(d,u));for(const d of D)l=e.pieces.get(d),h=o.get(d),l?h?X(l,h.piece)||(a.push(h),r.push(qi(d,l))):r.push(qi(d,l)):h&&a.push(h);for(const d of r)h=Ui(d,a.filter((t=>X(d.piece,t.piece)))),h&&(c=[h.pos[0]-d.pos[0],h.pos[1]-d.pos[1]],i.set(d.key,c.concat(c)),s.push(h.key));for(const d of a)s.includes(d.key)||n.set(d.key,d.piece);return{anims:i,fadings:n}}function Qi(t,e){const i=t.animation.current;if(void 0===i)return void(t.dom.destroyed||t.dom.redrawNow());const s=1-(e-i.start)*i.frequency;if(s<=0)t.animation.current=void 0,t.dom.redrawNow();else{const e=ts(s);for(const t of i.plan.anims.values())t[2]=t[0]*e,t[3]=t[1]*e;t.dom.redrawNow(!0),requestAnimationFrame(((e=performance.now())=>Qi(t,e)))}}function Ji(t,e){const i=new Map(e.pieces),s=t(e),n=Ki(i,e);if(n.anims.size||n.fadings.size){const t=e.animation.current&&e.animation.current.start;e.animation.current={start:performance.now(),frequency:1/e.animation.duration,plan:n},t||Qi(e,performance.now())}else e.dom.redraw();return s}const ts=t=>t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1,es=["green","red","blue","yellow"];function is(t,e){if(e.touches&&e.touches.length>1)return;e.stopPropagation(),e.preventDefault(),e.ctrlKey?Ci(t):Oi(t);const i=j(e),s=Ri(i,zi(t),t.dom.bounds());s&&(t.drawable.current={orig:s,pos:i,brush:ls(e),snapToValidMove:t.drawable.defaultSnapToValidMove},ss(t))}function ss(t){requestAnimationFrame((()=>{const e=t.drawable.current;if(e){const i=Ri(e.pos,zi(t),t.dom.bounds());i||(e.snapToValidMove=!1);const s=e.snapToValidMove?Ni(e.orig,e.pos,zi(t),t.dom.bounds()):i;s!==e.mouseSq&&(e.mouseSq=s,e.dest=s!==e.orig?s:void 0,t.dom.redrawNow()),ss(t)}}))}function ns(t,e){t.drawable.current&&(t.drawable.current.pos=j(e))}function as(t){const e=t.drawable.current;e&&(e.mouseSq&&hs(t.drawable,e),rs(t))}function rs(t){t.drawable.current&&(t.drawable.current=void 0,t.dom.redraw())}function os(t){t.drawable.shapes.length&&(t.drawable.shapes=[],t.dom.redraw(),cs(t.drawable))}function ls(t){var e;const i=(t.shiftKey||t.ctrlKey)&&q(t),s=t.altKey||t.metaKey||(null===(e=t.getModifierState)||void 0===e?void 0:e.call(t,"AltGraph"));return es[(i?1:0)+(s?2:0)]}function hs(t,e){const i=t=>t.orig===e.orig&&t.dest===e.dest,s=t.shapes.find(i);s&&(t.shapes=t.shapes.filter((t=>!i(t)))),s&&s.brush===e.brush||t.shapes.push({orig:e.orig,dest:e.dest,brush:e.brush}),cs(t)}function cs(t){t.onChange&&t.onChange(t.shapes)}function ds(t,e){if(!e.isTrusted||void 0!==e.button&&0!==e.button)return;if(e.touches&&e.touches.length>1)return;const i=t.dom.bounds(),s=j(e),n=Ri(s,zi(t),i);if(!n)return;const a=t.pieces.get(n),r=t.selected;r||!t.drawable.enabled||!t.drawable.eraseOnClick&&a&&a.color===t.turnColor||os(t),!1!==e.cancelable&&(!e.touches||t.blockTouchScroll||a||r||us(t,s))&&e.preventDefault();const o=!!t.premovable.current,l=!!t.predroppable.current;t.stats.ctrlKey=e.ctrlKey,t.selected&&_i(t,t.selected,n)?Gi((t=>wi(t,n)),t):wi(t,n);const h=t.selected===n,c=xs(t,n);if(a&&c&&h&&Ei(t,n)){t.draggable.current={orig:n,piece:a,origPos:s,pos:s,started:t.draggable.autoDistance&&t.stats.dragged,element:c,previouslySelected:r,originTarget:e.target,keyHasChanged:!1},c.cgDragging=!0,c.classList.add("dragging");const o=t.dom.elements.ghost;o&&(o.className=`ghost ${a.color} ${a.role}`,V(o,Y(i)(N(n),zi(t))),G(o,!0)),gs(t)}else o&&ui(t),l&&gi(t);t.dom.redraw()}function us(t,e){const i=zi(t),s=t.dom.bounds(),n=Math.pow(s.width/8,2);for(const a of t.pieces.keys()){const t=K(a,i,s);if(W(t,e)<=n)return!0}return!1}function ps(t,e,i,s){const n="a0";t.pieces.set(n,e),t.dom.redraw();const a=j(i);t.draggable.current={orig:n,piece:e,origPos:a,pos:a,started:!0,element:()=>xs(t,n),originTarget:i.target,newPiece:!0,force:!!s,keyHasChanged:!1},gs(t)}function gs(t){requestAnimationFrame((()=>{var e;const i=t.draggable.current;if(!i)return;(null===(e=t.animation.current)||void 0===e?void 0:e.plan.anims.has(i.orig))&&(t.animation.current=void 0);const s=t.pieces.get(i.orig);if(s&&X(s,i.piece)){if(!i.started&&W(i.pos,i.origPos)>=Math.pow(t.draggable.distance,2)&&(i.started=!0),i.started){if("function"===typeof i.element){const t=i.element();if(!t)return;t.cgDragging=!0,t.classList.add("dragging"),i.element=t}const e=t.dom.bounds();V(i.element,[i.pos[0]-e.left-e.width/16,i.pos[1]-e.top-e.height/16]),i.keyHasChanged||(i.keyHasChanged=i.orig!==Ri(i.pos,zi(t),e))}}else vs(t);gs(t)}))}function fs(t,e){t.draggable.current&&(!e.touches||e.touches.length<2)&&(t.draggable.current.pos=j(e))}function ms(t,e){const i=t.draggable.current;if(!i)return;if("touchend"===e.type&&!1!==e.cancelable&&e.preventDefault(),"touchend"===e.type&&i.originTarget!==e.target&&!i.newPiece)return void(t.draggable.current=void 0);ui(t),gi(t);const s=j(e)||i.pos,n=Ri(s,zi(t),t.dom.bounds());n&&i.started&&i.orig!==n?i.newPiece?yi(t,i.orig,n,i.force):(t.stats.ctrlKey=e.ctrlKey,xi(t,i.orig,n)&&(t.stats.dragged=!0)):i.newPiece?t.pieces.delete(i.orig):t.draggable.deleteOnDropOff&&!n&&(t.pieces.delete(i.orig),oi(t.events.change)),(i.orig!==i.previouslySelected&&!i.keyHasChanged||i.orig!==n&&n)&&t.selectable.enabled||Ci(t),bs(t),t.draggable.current=void 0,t.dom.redraw()}function vs(t){const e=t.draggable.current;e&&(e.newPiece&&t.pieces.delete(e.orig),t.draggable.current=void 0,Ci(t),bs(t),t.dom.redraw())}function bs(t){const e=t.dom.elements;e.ghost&&G(e.ghost,!1)}function xs(t,e){let i=t.dom.elements.board.firstChild;while(i){if(i.cgKey===e&&"PIECE"===i.tagName)return i;i=i.nextSibling}}function ys(t,e){t.exploding={stage:1,keys:e},t.dom.redraw(),setTimeout((()=>{ws(t,2),setTimeout((()=>ws(t,void 0)),120)}),120)}function ws(t,e){t.exploding&&(e?t.exploding.stage=e:t.exploding=void 0,t.dom.redraw())}function ks(t,e){function i(){li(t),e()}return{set(e){e.orientation&&e.orientation!==t.orientation&&i(),Xi(t,e),(e.fen?Gi:ji)((t=>Yi(t,e)),t)},state:t,getFen:()=>Wi(t.pieces),toggleOrientation:i,setPieces(e){Gi((t=>hi(t,e)),t)},selectSquare(e,i){e?Gi((t=>wi(t,e,i)),t):t.selected&&(Ci(t),t.dom.redraw())},move(e,i){Gi((t=>mi(t,e,i)),t)},newPiece(e,i){Gi((t=>vi(t,e,i)),t)},playPremove(){if(t.premovable.current){if(Gi(Li,t))return!0;t.dom.redraw()}return!1},playPredrop(e){if(t.predroppable.current){const i=Mi(t,e);return t.dom.redraw(),i}return!1},cancelPremove(){ji(ui,t)},cancelPredrop(){ji(gi,t)},cancelMove(){ji((t=>{Oi(t),vs(t)}),t)},stop(){ji((t=>{Di(t),vs(t)}),t)},explode(e){ys(t,e)},setAutoShapes(e){ji((t=>t.drawable.autoShapes=e),t)},setShapes(e){ji((t=>t.drawable.shapes=e),t)},getKeyAtDomPos(e){return Ri(e,zi(t),t.dom.bounds())},redrawAll:e,dragNewPiece(e,i,s){ps(t,e,i,s)},destroy(){Di(t),t.dom.unbind&&t.dom.unbind(),t.dom.destroyed=!0}}}function Cs(){return{pieces:$i(Fi),orientation:"white",turnColor:"white",coordinates:!0,ranksPosition:"right",autoCastle:!0,viewOnly:!1,disableContextMenu:!1,addPieceZIndex:!1,blockTouchScroll:!1,pieceKey:!1,highlight:{lastMove:!0,check:!0},animation:{enabled:!0,duration:200},movable:{free:!0,color:"both",showDests:!0,events:{},rookCastle:!0},premovable:{enabled:!0,showDests:!0,castle:!0,events:{}},predroppable:{enabled:!1,events:{}},draggable:{enabled:!0,distance:3,autoDistance:!0,showGhost:!0,deleteOnDropOff:!1},dropmode:{active:!1},selectable:{enabled:!0},stats:{dragged:!("ontouchstart"in window)},events:{},drawable:{enabled:!0,visible:!0,defaultSnapToValidMove:!0,eraseOnClick:!0,shapes:[],autoShapes:[],brushes:{green:{key:"g",color:"#15781B",opacity:1,lineWidth:10},red:{key:"r",color:"#882020",opacity:1,lineWidth:10},blue:{key:"b",color:"#003088",opacity:1,lineWidth:10},yellow:{key:"y",color:"#e68f00",opacity:1,lineWidth:10},paleBlue:{key:"pb",color:"#003088",opacity:.4,lineWidth:15},paleGreen:{key:"pg",color:"#15781B",opacity:.4,lineWidth:15},paleRed:{key:"pr",color:"#882020",opacity:.4,lineWidth:15},paleGrey:{key:"pgr",color:"#4a4a4a",opacity:.35,lineWidth:15}},prevSvgHash:""},hold:H()}}function Ss(t,e,i){const s=new Map,n=[];for(const o of t)s.set(o.hash,!1);let a,r=e.firstChild;while(r)a=r.getAttribute("cgHash"),s.has(a)?s.set(a,!0):n.push(r),r=r.nextSibling;for(const o of n)e.removeChild(o);for(const o of t)s.get(o.hash)||e.appendChild(i(o))}function _s(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function As(t,e,i){const s=t.drawable,n=s.current,a=n&&n.mouseSq?n:void 0,r=new Map,o=t.dom.bounds(),l=s.autoShapes.filter((t=>!t.piece));for(const g of s.shapes.concat(l).concat(a?[a]:[]))g.dest&&r.set(g.dest,(r.get(g.dest)||0)+1);const h=s.shapes.concat(l).map((t=>({shape:t,current:!1,hash:Ps(t,r,!1,o)})));a&&h.push({shape:a,current:!0,hash:Ps(a,r,!0,o)});const c=h.map((t=>t.hash)).join(";");if(c===t.drawable.prevSvgHash)return;t.drawable.prevSvgHash=c;const d=e.querySelector("defs"),u=e.querySelector("g"),p=i.querySelector("g");Is(s,h,d),Ss(h.filter((t=>!t.shape.customSvg)),u,(e=>Ms(t,e,s.brushes,r,o))),Ss(h.filter((t=>t.shape.customSvg)),p,(e=>Ms(t,e,s.brushes,r,o)))}function Is(t,e,i){const s=new Map;let n;for(const o of e)o.shape.dest&&(n=t.brushes[o.shape.brush],o.shape.modifiers&&(n=Bs(n,o.shape.modifiers)),s.set(n.key,n));const a=new Set;let r=i.firstChild;while(r)a.add(r.getAttribute("cgKey")),r=r.nextSibling;for(const[o,l]of s.entries())a.has(o)||i.appendChild(Ns(l))}function Ps({orig:t,dest:e,brush:i,piece:s,modifiers:n,customSvg:a},r,o,l){return[l.width,l.height,o,t,e,i,e&&(r.get(e)||0)>1,s&&Ts(s),n&&Es(n),a&&Ls(a)].filter((t=>t)).join(",")}function Ts(t){return[t.color,t.role,t.scale].filter((t=>t)).join(",")}function Es(t){return""+(t.lineWidth||"")}function Ls(t){let e=0;for(let i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i)>>>0;return"custom-"+e.toString()}function Ms(t,{shape:e,current:i,hash:s},n,a,r){let o;const l=Fs(N(e.orig),t.orientation);if(e.customSvg)o=Os(e.customSvg,l,r);else if(e.dest){let s=n[e.brush];e.modifiers&&(s=Bs(s,e.modifiers)),o=Rs(s,l,Fs(N(e.dest),t.orientation),i,(a.get(e.dest)||0)>1,r)}else o=Ds(n[e.brush],l,i,r);return o.setAttribute("cgHash",s),o}function Os(t,e,i){const[s,n]=Ys(e,i),a=zs(_s("g"),{transform:`translate(${s},${n})`}),r=zs(_s("svg"),{width:1,height:1,viewBox:"0 0 100 100"});return a.appendChild(r),r.innerHTML=t,a}function Ds(t,e,i,s){const n=Ys(e,s),a=Hs(),r=(s.width+s.height)/(4*Math.max(s.width,s.height));return zs(_s("circle"),{stroke:t.color,"stroke-width":a[i?0:1],fill:"none",opacity:Ws(t,i),cx:n[0],cy:n[1],r:r-a[1]/2})}function Rs(t,e,i,s,n,a){const r=Xs(n&&!s),o=Ys(e,a),l=Ys(i,a),h=l[0]-o[0],c=l[1]-o[1],d=Math.atan2(c,h),u=Math.cos(d)*r,p=Math.sin(d)*r;return zs(_s("line"),{stroke:t.color,"stroke-width":$s(t,s),"stroke-linecap":"round","marker-end":"url(#arrowhead-"+t.key+")",opacity:Ws(t,s),x1:o[0],y1:o[1],x2:l[0]-u,y2:l[1]-p})}function Ns(t){const e=zs(_s("marker"),{id:"arrowhead-"+t.key,orient:"auto",markerWidth:4,markerHeight:8,refX:2.05,refY:2.01});return e.appendChild(zs(_s("path"),{d:"M0,0 V4 L3,2 Z",fill:t.color})),e.setAttribute("cgKey",t.key),e}function zs(t,e){for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.setAttribute(i,e[i]);return t}function Fs(t,e){return"white"===e?t:[7-t[0],7-t[1]]}function Bs(t,e){return{color:t.color,opacity:Math.round(10*t.opacity)/10,lineWidth:Math.round(e.lineWidth||t.lineWidth),key:[t.key,e.lineWidth].filter((t=>t)).join("")}}function Hs(){return[3/64,4/64]}function $s(t,e){return(t.lineWidth||10)*(e?.85:1)/64}function Ws(t,e){return(t.opacity||1)*(e?.9:1)}function Xs(t){return(t?20:10)/64}function Ys(t,e){const i=Math.min(1,e.width/e.height),s=Math.min(1,e.height/e.width);return[(t[0]-3.5)*i,(3.5-t[1])*s]}function Vs(t,e){t.innerHTML="",t.classList.add("cg-wrap");for(const l of E)t.classList.toggle("orientation-"+l,e.orientation===l);t.classList.toggle("manipulable",!e.viewOnly);const i=U("cg-container");t.appendChild(i);const s=U("cg-board");let n,a,r,o;if(i.appendChild(s),e.drawable.visible&&(n=zs(_s("svg"),{class:"cg-shapes",viewBox:"-4 -4 8 8",preserveAspectRatio:"xMidYMid slice"}),n.appendChild(_s("defs")),n.appendChild(_s("g")),a=zs(_s("svg"),{class:"cg-custom-svgs",viewBox:"-3.5 -3.5 8 8",preserveAspectRatio:"xMidYMid slice"}),a.appendChild(_s("g")),r=U("cg-auto-pieces"),i.appendChild(n),i.appendChild(a),i.appendChild(r)),e.coordinates){const t="black"===e.orientation?" black":"",s="left"===e.ranksPosition?" left":"";i.appendChild(Zs(M,"ranks"+t+s)),i.appendChild(Zs(L,"files"+t))}return e.draggable.enabled&&e.draggable.showGhost&&(o=U("piece","ghost"),G(o,!1),i.appendChild(o)),{board:s,container:i,wrap:t,ghost:o,svg:n,customSvg:a,autoPieces:r}}function Zs(t,e){const i=U("coords",e);let s;for(const n of t)s=U("coord"),s.textContent=n,i.appendChild(s);return i}function Gs(t,e){if(!t.dropmode.active)return;ui(t),gi(t);const i=t.dropmode.piece;if(i){t.pieces.set("a0",i);const s=j(e),n=s&&Ri(s,zi(t),t.dom.bounds());n&&yi(t,"a0",n)}t.dom.redraw()}function js(t,e){const i=t.dom.elements.board;if("ResizeObserver"in window&&new ResizeObserver(e).observe(t.dom.elements.wrap),(t.disableContextMenu||t.drawable.enabled)&&i.addEventListener("contextmenu",(t=>t.preventDefault())),t.viewOnly)return;const s=Ks(t);i.addEventListener("touchstart",s,{passive:!1}),i.addEventListener("mousedown",s,{passive:!1})}function qs(t,e){const i=[];if("ResizeObserver"in window||i.push(Us(document.body,"chessground.resize",e)),!t.viewOnly){const e=Qs(t,fs,ns),s=Qs(t,ms,as);for(const t of["touchmove","mousemove"])i.push(Us(document,t,e));for(const t of["touchend","mouseup"])i.push(Us(document,t,s));const n=()=>t.dom.bounds.clear();i.push(Us(document,"scroll",n,{capture:!0,passive:!0})),i.push(Us(window,"resize",n,{passive:!0}))}return()=>i.forEach((t=>t()))}function Us(t,e,i,s){return t.addEventListener(e,i,s),()=>t.removeEventListener(e,i,s)}const Ks=t=>e=>{t.draggable.current?vs(t):t.drawable.current?rs(t):e.shiftKey||q(e)?t.drawable.enabled&&is(t,e):t.viewOnly||(t.dropmode.active?Gs(t,e):ds(t,e))},Qs=(t,e,i)=>s=>{t.drawable.current?t.drawable.enabled&&i(t,s):t.viewOnly||e(t,s)};function Js(t){const e=zi(t),i=Y(t.dom.bounds()),s=t.dom.elements.board,n=t.pieces,a=t.animation.current,r=a?a.plan.anims:new Map,o=a?a.plan.fadings:new Map,l=t.draggable.current,h=ln(t),c=new Set,d=new Set,u=new Map,p=new Map;let g,f,m,v,b,x,y,w,k,C;f=s.firstChild;while(f){if(g=f.cgKey,sn(f))if(m=n.get(g),b=r.get(g),x=o.get(g),v=f.cgPiece,!f.cgDragging||l&&l.orig===g||(f.classList.remove("dragging"),V(f,i(N(g),e)),f.cgDragging=!1),!x&&f.cgFading&&(f.cgFading=!1,f.classList.remove("fading")),m){if(b&&f.cgAnimating&&v===on(m)){const t=N(g);t[0]+=b[2],t[1]+=b[3],f.classList.add("anim"),V(f,i(t,e))}else f.cgAnimating&&(f.cgAnimating=!1,f.classList.remove("anim"),V(f,i(N(g),e)),t.addPieceZIndex&&(f.style.zIndex=rn(N(g),e)));v!==on(m)||x&&f.cgFading?x&&v===on(x)?(f.classList.add("fading"),f.cgFading=!0):cn(u,v,f):c.add(g)}else cn(u,v,f);else if(nn(f)){const t=f.className;h.get(g)===t?d.add(g):cn(p,t,f)}f=f.nextSibling}for(const[S,_]of h)if(!d.has(S)){k=p.get(_),C=k&&k.pop();const t=i(N(S),e);if(C)C.cgKey=S,V(C,t);else{const e=U("square",_);e.cgKey=S,V(e,t),s.insertBefore(e,s.firstChild)}}for(const[S,_]of n)if(b=r.get(S),!c.has(S))if(y=u.get(on(_)),w=y&&y.pop(),w){w.cgKey=S,w.cgFading&&(w.classList.remove("fading"),w.cgFading=!1);const s=N(S);t.addPieceZIndex&&(w.style.zIndex=rn(s,e)),b&&(w.cgAnimating=!0,w.classList.add("anim"),s[0]+=b[2],s[1]+=b[3]),V(w,i(s,e))}else{const n=on(_),a=U("piece",n),r=N(S);a.cgPiece=n,a.cgKey=S,b&&(a.cgAnimating=!0,r[0]+=b[2],r[1]+=b[3]),V(a,i(r,e)),t.addPieceZIndex&&(a.style.zIndex=rn(r,e)),s.appendChild(a)}for(const S of u.values())an(t,S);for(const S of p.values())an(t,S)}function tn(t){const e=zi(t),i=Y(t.dom.bounds());let s=t.dom.elements.board.firstChild;while(s)(sn(s)&&!s.cgAnimating||nn(s))&&V(s,i(N(s.cgKey),e)),s=s.nextSibling}function en(t){var e,i;const s=t.dom.elements.wrap.getBoundingClientRect(),n=t.dom.elements.container,a=s.height/s.width,r=8*Math.floor(s.width*window.devicePixelRatio/8)/window.devicePixelRatio,o=r*a;n.style.width=r+"px",n.style.height=o+"px",t.dom.bounds.clear(),null===(e=t.addDimensionsCssVarsTo)||void 0===e||e.style.setProperty("--cg-width",r+"px"),null===(i=t.addDimensionsCssVarsTo)||void 0===i||i.style.setProperty("--cg-height",o+"px")}const sn=t=>"PIECE"===t.tagName,nn=t=>"SQUARE"===t.tagName;function an(t,e){for(const i of e)t.dom.elements.board.removeChild(i)}function rn(t,e){const i=3,s=t[1],n=e?i+7-s:i+s;return`${n}`}const on=t=>`${t.color} ${t.role}`;function ln(t){var e;const i=new Map;if(t.lastMove&&t.highlight.lastMove)for(const a of t.lastMove)hn(i,a,"last-move");if(t.check&&t.highlight.check&&hn(i,t.check,"check"),t.selected&&(hn(i,t.selected,"selected"),t.movable.showDests)){const s=null===(e=t.movable.dests)||void 0===e?void 0:e.get(t.selected);if(s)for(const e of s)hn(i,e,"move-dest"+(t.pieces.has(e)?" oc":""));const n=t.premovable.dests;if(n)for(const e of n)hn(i,e,"premove-dest"+(t.pieces.has(e)?" oc":""))}const s=t.premovable.current;if(s)for(const a of s)hn(i,a,"current-premove");else t.predroppable.current&&hn(i,t.predroppable.current.key,"current-premove");const n=t.exploding;if(n)for(const a of n.keys)hn(i,a,"exploding"+n.stage);return i}function hn(t,e,i){const s=t.get(e);s?t.set(e,`${s} ${i}`):t.set(e,i)}function cn(t,e,i){const s=t.get(e);s?s.push(i):t.set(e,[i])}function dn(t,e){const i=t.drawable.autoShapes.filter((t=>t.piece)),s=i.map((t=>({shape:t,hash:gn(t),current:!1})));Ss(s,e,(e=>pn(t,e,t.dom.bounds())))}function un(t){var e;const i=zi(t),s=Y(t.dom.bounds());let n=null===(e=t.dom.elements.autoPieces)||void 0===e?void 0:e.firstChild;while(n)Z(n,s(N(n.cgKey),i),n.cgScale),n=n.nextSibling}function pn(t,{shape:e,hash:i},s){var n,a,r;const o=e.orig,l=null===(n=e.piece)||void 0===n?void 0:n.role,h=null===(a=e.piece)||void 0===a?void 0:a.color,c=null===(r=e.piece)||void 0===r?void 0:r.scale,d=U("piece",`${l} ${h}`);return d.setAttribute("cgHash",i),d.cgKey=o,d.cgScale=c,Z(d,Y(s)(N(o),zi(t)),c),d}const gn=t=>{var e,i,s;return[t.orig,null===(e=t.piece)||void 0===e?void 0:e.role,null===(i=t.piece)||void 0===i?void 0:i.color,null===(s=t.piece)||void 0===s?void 0:s.scale].join(",")};function fn(t,e){const i=Cs();function s(){const e="dom"in i?i.dom.unbind:void 0,s=Vs(t,i),n=B((()=>s.board.getBoundingClientRect())),a=t=>{Js(o),s.autoPieces&&dn(o,s.autoPieces),!t&&s.svg&&As(o,s.svg,s.customSvg)},r=()=>{en(o),tn(o),s.autoPieces&&un(o)},o=i;return o.dom={elements:s,bounds:n,redraw:mn(a),redrawNow:a,unbind:e},o.drawable.prevSvgHash="",en(o),a(!1),js(o,r),e||(o.dom.unbind=qs(o,r)),o.events.insert&&o.events.insert(s),o}return Yi(i,e||{}),ks(s(),s)}function mn(t){let e=!1;return()=>{e||(e=!0,requestAnimationFrame((()=>{t(),e=!1})))}}function vn(t,e,i,s,n){const a=void 0===e?void 0:e.key;return{sel:t,data:e,children:i,text:s,elm:n,key:a}}const bn=Array.isArray;function xn(t){return"string"===typeof t||"number"===typeof t||t instanceof String||t instanceof Number}function yn(t,e,i){if(t.ns="http://www.w3.org/2000/svg","foreignObject"!==i&&void 0!==e)for(let s=0;s<e.length;++s){const t=e[s];if("string"===typeof t)continue;const i=t.data;void 0!==i&&yn(i,t.children,t.sel)}}function wn(t,e,i){let s,n,a,r={};if(void 0!==i?(null!==e&&(r=e),bn(i)?s=i:xn(i)?n=i.toString():i&&i.sel&&(s=[i])):void 0!==e&&null!==e&&(bn(e)?s=e:xn(e)?n=e.toString():e&&e.sel?s=[e]:r=e),void 0!==s)for(a=0;a<s.length;++a)xn(s[a])&&(s[a]=vn(void 0,void 0,void 0,s[a],void 0));return"s"!==t[0]||"v"!==t[1]||"g"!==t[2]||3!==t.length&&"."!==t[3]&&"#"!==t[3]||yn(r,s,t),vn(t,r,s,n,void 0)}function kn(t,e,i){for(const s of["touchstart","mousedown"])t.addEventListener(s,(t=>{e(t),t.preventDefault(),i&&i()}),{passive:!1})}const Cn=(t,e,i,s=!0)=>Sn((n=>n.addEventListener(t,(t=>{const s=e(t);return!1===s&&t.preventDefault(),null===i||void 0===i||i(),s}),{passive:s})));function Sn(t){return{insert:e=>t(e.elm)}}function _n(t){let e=0;return i=>{e+=i.deltaY*(i.deltaMode?40:1),Math.abs(e)>=4?(t(i,!0),e=0):t(i,!1)}}function An(t,e){const i=()=>{t(),s=Math.max(100,s-s/15),n=setTimeout(i,s)};let s=350,n=setTimeout(i,500);t();const a="touchstart"==e.type?"touchend":"mouseup";document.addEventListener(a,(()=>clearTimeout(n)),{once:!0})}const In=t=>t.altKey||t.ctrlKey||t.shiftKey||t.metaKey||document.activeElement instanceof HTMLInputElement||document.activeElement instanceof HTMLTextAreaElement,Pn=t=>e=>{In(e)||("ArrowLeft"==e.key?t.goTo("prev"):"ArrowRight"==e.key?t.goTo("next"):"f"==e.key&&t.flip())},Tn=t=>wn("div.lpv__menu.lpv__pane",[wn("button.lpv__menu__entry.lpv__menu__flip.lpv__fbt",{hook:Cn("click",t.flip)},t.translate("flipTheBoard")),wn("a.lpv__menu__entry.lpv__menu__analysis.lpv__fbt",{attrs:{href:t.analysisUrl(),target:"_blank"}},t.translate("analysisBoard")),wn("a.lpv__menu__entry.lpv__menu__practice.lpv__fbt",{attrs:{href:t.practiceUrl(),target:"_blank"}},t.translate("practiceWithComputer")),t.opts.menu.getPgn.enabled?wn("button.lpv__menu__entry.lpv__menu__pgn.lpv__fbt",{hook:Cn("click",t.togglePgn)},t.translate("getPgn")):void 0,En(t)]),En=t=>{const e=t.game.metadata.externalLink;return e&&wn("a.lpv__menu__entry.lpv__fbt",{attrs:{href:e,target:"_blank"}},t.translate(t.game.metadata.isLichess?"viewOnLichess":"viewOnSite"))},Ln=t=>wn("div.lpv__controls",["board"==t.pane?void 0:Mn(t,"first","step-backward"),Mn(t,"prev","left-open"),wn("button.lpv__fbt.lpv__controls__menu.lpv__icon",{class:{active:"board"!=t.pane,"lpv__icon-ellipsis-vert":"board"==t.pane},hook:Cn("click",t.toggleMenu)},"board"==t.pane?void 0:"X"),Mn(t,"next","right-open"),"board"==t.pane?void 0:Mn(t,"last","step-forward")]),Mn=(t,e,i)=>wn(`button.lpv__controls__goto.lpv__controls__goto--${e}.lpv__fbt.lpv__icon.lpv__icon-${i}`,{class:{disabled:"board"==t.pane&&!t.canGoTo(e)},hook:Sn((i=>kn(i,(i=>An((()=>t.goTo(e)),i)))))}),On=t=>wn("div.lpv__side",wn("div.lpv__moves",{hook:{insert:e=>{const i=e.elm;t.path.empty()||Yn(t,i),i.addEventListener("mousedown",(e=>{const i=e.target.getAttribute("p");i&&t.toPath(new Q(i))}),{passive:!0})},postpatch:(e,i)=>{t.autoScrollRequested&&(Yn(t,i.elm),t.autoScrollRequested=!1)}}},[...t.game.initial.comments.map(Nn),...Hn(t)])),Dn=()=>wn("move.empty","..."),Rn=t=>wn("index",[t,"."]),Nn=t=>wn("comment",t),zn=()=>wn("paren.open","("),Fn=()=>wn("paren.close",")"),Bn=t=>Math.floor((t.ply-1)/2)+1,Hn=t=>{const e=Xn(t),i=[];let s,n=t.game.moves.children.slice(1);"black"==t.game.initial.pos.turn&&t.game.mainline[0]&&i.push(Rn(t.game.initial.pos.fullmoves),Dn());while(s=(s||t.game.moves).children[0]){const t=s.data,a=t.ply%2==1;a&&i.push(Rn(Bn(t))),i.push(e(t));const r=a&&(n.length||t.comments.length)&&s.children.length;r&&i.push(Dn()),t.comments.forEach((t=>i.push(Nn(t)))),n.forEach((t=>i.push($n(e,t)))),r&&i.push(Rn(Bn(t)),Dn()),n=s.children.slice(1)}return i},$n=(t,e)=>wn("variation",[...e.data.startingComments.map(Nn),...Wn(t,e)]),Wn=(t,e)=>{let i=[],s=[];e.data.ply%2==0&&i.push(wn("index",[Bn(e.data),"..."]));do{const n=e.data;n.ply%2==1&&i.push(wn("index",[Bn(n),"."])),i.push(t(n)),n.comments.forEach((t=>i.push(Nn(t)))),s.forEach((e=>{i=[...i,zn(),...Wn(t,e),Fn()]})),s=e.children.slice(1),e=e.children[0]}while(e);return i},Xn=t=>e=>wn("move",{class:{current:t.path.equals(e.path),ancestor:t.path.contains(e.path),good:e.nags.includes(1),mistake:e.nags.includes(2),brilliant:e.nags.includes(3),blunder:e.nags.includes(4),interesting:e.nags.includes(5),inaccuracy:e.nags.includes(6)},attrs:{p:e.path.path}},e.san),Yn=(t,e)=>{const i=e.querySelector(".current");e.scrollTop=i?i.offsetTop-e.offsetHeight/2+i.offsetHeight:t.path.empty()?0:99999};function Vn(t,e){const i="bottom"==e?t.orientation():v(t.orientation()),s=t.game.players[i],n=[s.title?wn("span.lpv__player__title",s.title):void 0,wn("span.lpv__player__name",s.name),s.rating?wn("span.lpv__player__rating",["(",s.rating,")"]):void 0];return wn(`div.lpv__player.lpv__player--${e}`,[s.isLichessUser?wn("a.lpv__player__person.ulpt.user-link",{attrs:{href:`${t.opts.lichess}/@/${s.name}`}},n):wn("span.lpv__player__person",n),t.opts.showClocks?Zn(t,i):void 0])}const Zn=(t,e)=>{const i=t.curData(),s=i.clocks&&i.clocks[e];return void 0==typeof s?void 0:wn("div.lpv__player__clock",{class:{active:e==i.turn}},Gn(s))},Gn=t=>{if(!t&&0!==t)return["-"];const e=new Date(1e3*t),i=":",s=jn(e.getUTCMinutes())+i+jn(e.getUTCSeconds());return t>=3600?[Math.floor(t/3600)+i+s]:[s]},jn=t=>(t<10?"0":"")+t;function qn(t){const e=t.opts,i=`lpv.lpv--moves-${e.showMoves}.lpv--controls-${e.showControls}${e.classes?"."+e.classes.replace(" ","."):""}`;return wn(`div.${i}`,{class:{"lpv--menu":"board"!=t.pane,"lpv--players":"auto"==e.showPlayers?t.game.hasPlayerName():e.showPlayers},attrs:{tabindex:0},hook:Sn((e=>{t.setGround(fn(e.querySelector(".cg-wrap"),Qn(t,e))),e.addEventListener("keydown",Pn(t))}))},[e.showPlayers?Vn(t,"top"):void 0,Un(t),e.showPlayers?Vn(t,"bottom"):void 0,e.showControls?Ln(t):void 0,e.showMoves?On(t):void 0,"menu"==t.pane?Tn(t):"pgn"==t.pane?Kn(t):void 0])}const Un=t=>wn("div.lpv__board",{hook:Sn((e=>{e.addEventListener("click",t.focus),t.opts.scrollToMove&&!("ontouchstart"in window)&&e.addEventListener("wheel",_n(((e,i)=>{e.preventDefault(),e.deltaY>0&&i?t.goTo("next",!1):e.deltaY<0&&i&&t.goTo("prev",!1)})))}))},wn("div.cg-wrap")),Kn=t=>{const e=new Blob([t.opts.pgn],{type:"text/plain"});return wn("div.lpv__pgn.lpv__pane",[wn("a.lpv__pgn__download.lpv__fbt",{attrs:{href:window.URL.createObjectURL(e),download:t.opts.menu.getPgn.fileName||`${t.game.title()}.pgn`}},t.translate("download")),wn("textarea.lpv__pgn__text",t.opts.pgn)])},Qn=(t,e)=>({viewOnly:!t.opts.drawArrows,addDimensionsCssVarsTo:e,drawable:{enabled:t.opts.drawArrows,visible:!0},disableContextMenu:t.opts.drawArrows,...t.opts.chessground||{},movable:{free:!1},draggable:{enabled:!1},selectable:{enabled:!1},...t.cgState()});function Jn(t,e){return document.createElement(t,e)}function ta(t,e,i){return document.createElementNS(t,e,i)}function ea(){return ma(document.createDocumentFragment())}function ia(t){return document.createTextNode(t)}function sa(t){return document.createComment(t)}function na(t,e,i){if(fa(t)){let e=t;while(e&&fa(e)){const t=ma(e);e=t.parent}t=null!==e&&void 0!==e?e:t}fa(e)&&(e=ma(e,t)),i&&fa(i)&&(i=ma(i).firstChildNode),t.insertBefore(e,i)}function aa(t,e){t.removeChild(e)}function ra(t,e){fa(e)&&(e=ma(e,t)),t.appendChild(e)}function oa(t){if(fa(t)){while(t&&fa(t)){const e=ma(t);t=e.parent}return null!==t&&void 0!==t?t:null}return t.parentNode}function la(t){var e;if(fa(t)){const i=ma(t),s=oa(i);if(s&&i.lastChildNode){const t=Array.from(s.childNodes),n=t.indexOf(i.lastChildNode);return null!==(e=t[n+1])&&void 0!==e?e:null}return null}return t.nextSibling}function ha(t){return t.tagName}function ca(t,e){t.textContent=e}function da(t){return t.textContent}function ua(t){return 1===t.nodeType}function pa(t){return 3===t.nodeType}function ga(t){return 8===t.nodeType}function fa(t){return 11===t.nodeType}function ma(t,e){var i,s,n;const a=t;return null!==(i=a.parent)&&void 0!==i||(a.parent=null!==e&&void 0!==e?e:null),null!==(s=a.firstChildNode)&&void 0!==s||(a.firstChildNode=t.firstChild),null!==(n=a.lastChildNode)&&void 0!==n||(a.lastChildNode=t.lastChild),a}const va={createElement:Jn,createElementNS:ta,createTextNode:ia,createDocumentFragment:ea,createComment:sa,insertBefore:na,removeChild:aa,appendChild:ra,parentNode:oa,nextSibling:la,tagName:ha,setTextContent:ca,getTextContent:da,isElement:ua,isText:pa,isComment:ga,isDocumentFragment:fa};function ba(t){return void 0===t}function xa(t){return void 0!==t}const ya=vn("",{},[],void 0,void 0);function wa(t,e){var i,s;const n=t.key===e.key,a=(null===(i=t.data)||void 0===i?void 0:i.is)===(null===(s=e.data)||void 0===s?void 0:s.is),r=t.sel===e.sel,o=!(!t.sel&&t.sel===e.sel)||typeof t.text===typeof e.text;return r&&n&&a&&o}function ka(){throw new Error("The document fragment is not supported on this platform.")}function Ca(t,e){return t.isElement(e)}function Sa(t,e){return t.isDocumentFragment(e)}function _a(t,e,i){var s;const n={};for(let a=e;a<=i;++a){const e=null===(s=t[a])||void 0===s?void 0:s.key;void 0!==e&&(n[e]=a)}return n}const Aa=["create","update","remove","destroy","pre","post"];function Ia(t,e,i){const s={create:[],update:[],remove:[],destroy:[],pre:[],post:[]},n=void 0!==e?e:va;for(const g of Aa)for(const e of t){const t=e[g];void 0!==t&&s[g].push(t)}function a(t){const e=t.id?"#"+t.id:"",i=t.getAttribute("class"),s=i?"."+i.split(" ").join("."):"";return vn(n.tagName(t).toLowerCase()+e+s,{},[],void 0,t)}function r(t){return vn(void 0,{},[],void 0,t)}function o(t,e){return function(){if(0===--e){const e=n.parentNode(t);n.removeChild(e,t)}}}function l(t,e){var a,r,o,h;let c,d=t.data;if(void 0!==d){const e=null===(a=d.hook)||void 0===a?void 0:a.init;xa(e)&&(e(t),d=t.data)}const u=t.children,p=t.sel;if("!"===p)ba(t.text)&&(t.text=""),t.elm=n.createComment(t.text);else if(void 0!==p){const i=p.indexOf("#"),a=p.indexOf(".",i),o=i>0?i:p.length,h=a>0?a:p.length,g=-1!==i||-1!==a?p.slice(0,Math.min(o,h)):p,f=t.elm=xa(d)&&xa(c=d.ns)?n.createElementNS(c,g,d):n.createElement(g,d);for(o<h&&f.setAttribute("id",p.slice(o+1,h)),a>0&&f.setAttribute("class",p.slice(h+1).replace(/\./g," ")),c=0;c<s.create.length;++c)s.create[c](ya,t);if(bn(u))for(c=0;c<u.length;++c){const t=u[c];null!=t&&n.appendChild(f,l(t,e))}else xn(t.text)&&n.appendChild(f,n.createTextNode(t.text));const m=t.data.hook;xa(m)&&(null===(r=m.create)||void 0===r||r.call(m,ya,t),m.insert&&e.push(t))}else if((null===(o=null===i||void 0===i?void 0:i.experimental)||void 0===o?void 0:o.fragments)&&t.children){for(t.elm=(null!==(h=n.createDocumentFragment)&&void 0!==h?h:ka)(),c=0;c<s.create.length;++c)s.create[c](ya,t);for(c=0;c<t.children.length;++c){const i=t.children[c];null!=i&&n.appendChild(t.elm,l(i,e))}}else t.elm=n.createTextNode(t.text);return t.elm}function h(t,e,i,s,a,r){for(;s<=a;++s){const a=i[s];null!=a&&n.insertBefore(t,l(a,r),e)}}function c(t){var e,i;const n=t.data;if(void 0!==n){null===(i=null===(e=null===n||void 0===n?void 0:n.hook)||void 0===e?void 0:e.destroy)||void 0===i||i.call(e,t);for(let e=0;e<s.destroy.length;++e)s.destroy[e](t);if(void 0!==t.children)for(let e=0;e<t.children.length;++e){const i=t.children[e];null!=i&&"string"!==typeof i&&c(i)}}}function d(t,e,i,a){for(var r,l;i<=a;++i){let a,h;const u=e[i];if(null!=u)if(xa(u.sel)){c(u),a=s.remove.length+1,h=o(u.elm,a);for(let e=0;e<s.remove.length;++e)s.remove[e](u,h);const t=null===(l=null===(r=null===u||void 0===u?void 0:u.data)||void 0===r?void 0:r.hook)||void 0===l?void 0:l.remove;xa(t)?t(u,h):h()}else u.children?(c(u),d(t,u.children,0,u.children.length-1)):n.removeChild(t,u.elm)}}function u(t,e,i,s){let a,r,o,c,u=0,g=0,f=e.length-1,m=e[0],v=e[f],b=i.length-1,x=i[0],y=i[b];while(u<=f&&g<=b)null==m?m=e[++u]:null==v?v=e[--f]:null==x?x=i[++g]:null==y?y=i[--b]:wa(m,x)?(p(m,x,s),m=e[++u],x=i[++g]):wa(v,y)?(p(v,y,s),v=e[--f],y=i[--b]):wa(m,y)?(p(m,y,s),n.insertBefore(t,m.elm,n.nextSibling(v.elm)),m=e[++u],y=i[--b]):wa(v,x)?(p(v,x,s),n.insertBefore(t,v.elm,m.elm),v=e[--f],x=i[++g]):(void 0===a&&(a=_a(e,u,f)),r=a[x.key],ba(r)?n.insertBefore(t,l(x,s),m.elm):(o=e[r],o.sel!==x.sel?n.insertBefore(t,l(x,s),m.elm):(p(o,x,s),e[r]=void 0,n.insertBefore(t,o.elm,m.elm))),x=i[++g]);g<=b&&(c=null==i[b+1]?null:i[b+1].elm,h(t,c,i,g,b,s)),u<=f&&d(t,e,u,f)}function p(t,e,i){var a,r,o,l,c,p,g,f;const m=null===(a=e.data)||void 0===a?void 0:a.hook;null===(r=null===m||void 0===m?void 0:m.prepatch)||void 0===r||r.call(m,t,e);const v=e.elm=t.elm;if(t===e)return;if(void 0!==e.data||xa(e.text)&&e.text!==t.text){null!==(o=e.data)&&void 0!==o||(e.data={}),null!==(l=t.data)&&void 0!==l||(t.data={});for(let i=0;i<s.update.length;++i)s.update[i](t,e);null===(g=null===(p=null===(c=e.data)||void 0===c?void 0:c.hook)||void 0===p?void 0:p.update)||void 0===g||g.call(p,t,e)}const b=t.children,x=e.children;ba(e.text)?xa(b)&&xa(x)?b!==x&&u(v,b,x,i):xa(x)?(xa(t.text)&&n.setTextContent(v,""),h(v,null,x,0,x.length-1,i)):xa(b)?d(v,b,0,b.length-1):xa(t.text)&&n.setTextContent(v,""):t.text!==e.text&&(xa(b)&&d(v,b,0,b.length-1),n.setTextContent(v,e.text)),null===(f=null===m||void 0===m?void 0:m.postpatch)||void 0===f||f.call(m,t,e)}return function(t,e){let i,o,h;const c=[];for(i=0;i<s.pre.length;++i)s.pre[i]();for(Ca(n,t)?t=a(t):Sa(n,t)&&(t=r(t)),wa(t,e)?p(t,e,c):(o=t.elm,h=n.parentNode(o),l(e,c),null!==h&&(n.insertBefore(h,e.elm,n.nextSibling(o)),d(h,[t],0,0))),i=0;i<c.length;++i)c[i].data.hook.insert(c[i]);for(i=0;i<s.post.length;++i)s.post[i]();return e}}function Pa(t,e){let i,s;const n=e.elm;let a=t.data.class,r=e.data.class;if((a||r)&&a!==r){for(s in a=a||{},r=r||{},a)a[s]&&!Object.prototype.hasOwnProperty.call(r,s)&&n.classList.remove(s);for(s in r)i=r[s],i!==a[s]&&n.classList[i?"add":"remove"](s)}}const Ta={create:Pa,update:Pa},Ea="http://www.w3.org/1999/xlink",La="http://www.w3.org/XML/1998/namespace",Ma=58,Oa=120;function Da(t,e){let i;const s=e.elm;let n=t.data.attrs,a=e.data.attrs;if((n||a)&&n!==a){for(i in n=n||{},a=a||{},a){const t=a[i],e=n[i];e!==t&&(!0===t?s.setAttribute(i,""):!1===t?s.removeAttribute(i):i.charCodeAt(0)!==Oa?s.setAttribute(i,t):i.charCodeAt(3)===Ma?s.setAttributeNS(La,i,t):i.charCodeAt(5)===Ma?s.setAttributeNS(Ea,i,t):s.setAttribute(i,t))}for(i in n)i in a||s.removeAttribute(i)}}const Ra={create:Da,update:Da},Na={pgn:"*",fen:void 0,showPlayers:"auto",showClocks:!0,showMoves:"auto",showControls:!0,scrollToMove:!0,orientation:"white",initialPly:0,chessground:{},drawArrows:!0,menu:{getPgn:{enabled:!0,fileName:void 0}},lichess:"https://lichess.org",classes:void 0};function za(t,e){const i={...Na};return Fa(i,e),i.fen&&(i.pgn=`[FEN "${i.fen}"]\n${i.pgn}`),i.classes||(i.classes=t.className),i}function Fa(t,e){for(const i in e)"undefined"!==typeof e[i]&&(Ba(t[i])&&Ba(e[i])?Fa(t[i],e[i]):t[i]=e[i])}function Ba(t){if("object"!==typeof t||null===t)return!1;const e=Object.getPrototypeOf(t);return e===Object.prototype||null===e}function Ha(t,e){const i=Ia([Ta,Ra]),s=za(t,e),n=new Ke(s,o),a=qn(n);t.innerHTML="";let r=i(t,a);function o(){r=i(r,qn(n))}return n.div=r.elm,n}var $a=o["default"].extend({name:"PuzzleBoard",data:()=>({lpv:None}),mounted(){this.lpv=Ha(this.$refs.board,{pgn:"1.e4 e5 2.Nf3 Nc6 3.Bc4 Bc5 4.b4 Bxb4 5.c3 Ba5 6.d4 exd4 7.O-O d3 8.Qb3 Qf6 9.e5 Qg6 10.Re1 Nge7 11.Ba3 b5 12.Qxb5 Rb8 13.Qa4 Bb6 14.Nbd2 Bb7 15.Ne4 Qf5 16.Bxd3 Qh5 17.Nf6+ gxf6 18.exf6 Rg8 19.Rad1 Qxf3 20.Rxe7+ Nxe7 21.Qxd7+ Kxd7 22.Bf5+ Ke8 23.Bd7+ Kf8 24.Bxe7# 1-0"})}}),Wa=$a,Xa=i(3736),Ya=(0,Xa.Z)(Wa,l,h,!1,null,null,null),Va=Ya.exports;const Za={databaseURL:"https://chessible-34200-default-rtdb.asia-southeast1.firebasedatabase.app/"},Ga=(0,a.ZF)(Za);(0,r.N8)(Ga);var ja=o["default"].extend({name:"GameView",components:{PuzzleBoard:Va},data:()=>({dialog:!1,won:-1,ori:"",opponent:{username:"AI",rating:200,avatar:"https://thumbs.dreamstime.com/z/gear-smart-ai-icon-outline-style-vector-web-design-isolated-white-background-153382060.jpg"},player:{username:"Halogen",rating:100,avatar:"https://cdn.discordapp.com/avatars/340785972545454080/6cf1fe5e726470b1903236d2638d5a58.png?size=1024"}}),mounted(){window.addEventListener("resize",this.onResize)},unmounted(){window.removeEventListener("resize",this.onResize)},methods:{onEnd(t){t==this.ori?this.won=1:this.won="draw"==t?0:-1,this.dialog=!0,this.ori=""},startGame(t){this.ori=t,this.$refs.board.restartBoard(t)},onResize(){document.body.dispatchEvent(new Event("chessground.resize"))}}}),qa=ja,Ua=(0,Xa.Z)(qa,s,n,!1,null,"2c7e96b2",null),Ka=Ua.exports},1464:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return b}});var s=i(3816),n=i(5255),a=i(4063),r=i(9088),o=i(2515),l=i(756),h=i(6975),c=i(6899),d=i(9007),u=function(){var t=this,e=t._self._c;return e("div",{staticClass:"ranking"},[e(s.Z,{staticClass:"ma-10",attrs:{elevation:"5"}},[e(c.Z,{attrs:{grow:"",color:"secondary darken-1","background-color":"transparent","icons-and-text":""}},[e(l.Z,[t._v(" Top Players "),e(r.Z,[t._v(" mdi-chess-king ")])],1),e(h.Z,[e(n.EB,[e(o.Z),e(d.Z,{staticStyle:{"margin-right":"5%","max-width":"45%"},attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.chess_search,callback:function(e){t.chess_search=e},expression:"chess_search"}})],1),e(a.Z,{staticClass:"elevation-5 mx-10 mb-5",attrs:{"disable-pagination":"","no-data-text":"Go make some friends!",height:"90vh",headers:t.headers,items:t.chess_friend_toggle?t.friend_chess:t.top_chess,"items-per-page":20,search:t.chess_search,loading:t.top_chess.length<20}})],1),e(l.Z,[t._v(" Top Puzzlers "),e(r.Z,[t._v(" mdi-puzzle ")])],1),e(h.Z,[e(a.Z,{staticClass:"elevation-5 mx-10 mb-5",attrs:{"no-data-text":"Go make some friends!","disable-pagination":"",height:"90vh",headers:t.headers,items:t.puzzle_friend_toggle?t.friend_puzzle:t.top_puzzle,"items-per-page":20,search:t.puzzle_search,loading:t.top_puzzle.length<20}})],1)],1)],1)],1)},p=[],g={name:"App",data:()=>({headers:[{text:"Player",align:"start",sortable:!1,value:"username"},{text:"Rating",sortable:!1,value:"rating"},{text:"Delta",sortable:!1,value:"delta"}],top_chess:[],top_puzzle:[],friend_chess:[],friend_puzzle:[],chess_search:"",puzzle_search:""}),methods:{feedback(){}},created(){}},f=g,m=i(3736),v=(0,m.Z)(f,u,p,!1,null,null,null),b=v.exports},4993:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return x}});var s=i(3381),n=i(3816),a=i(5255),r=i(7024),o=i(6530),l=i(3240),h=i(7894),c=i(2515),d=i(9007),u=i(2732),p=function(){var t=this,e=t._self._c;return e(o.Z,{staticClass:"register-page",attrs:{"fill-width":"","fill-height":""}},[e(h.Z,{attrs:{align:"center",justify:"center"}},[e(r.Z,{attrs:{xs:"12",sm:"10",md:"8"}},[e(n.Z,{staticClass:"pb-4 rounded-xl",attrs:{elevation:"12"}},[e(u.Z,{staticClass:"my-4",attrs:{dark:"",color:"primary"}},[e(c.Z),e("h1",[t._v("Join Now!")]),e(c.Z)],1),e(a.ZB,{staticClass:"pa-5"},[e(l.Z,[e(d.Z,{attrs:{outlined:"",clearable:"","prepend-inner-icon":"mdi-account-circle",rules:[""!=t.username||"This field is required"],name:"username",label:"Username",type:"text"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),e(d.Z,{staticClass:"input-group--focused",attrs:{id:"password",name:"password",label:"Password",outlined:"","prepend-inner-icon":"mdi-lock","append-icon":t.showPw1?"mdi-eye":"mdi-eye-off",type:t.showPw1?"text":"password"},on:{"click:append":function(e){t.showPw1=!t.showPw1}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),e(d.Z,{staticClass:"input-group--focused",attrs:{name:"password",label:"Confirm Password",outlined:"","prepend-inner-icon":"mdi-lock",rules:[t.confirmPassword==t.password||"Password do not match"],"hide-details":"auto","append-icon":t.showPw2?"mdi-eye":"mdi-eye-off",type:t.showPw2?"text":"password"},on:{"click:append":function(e){t.showPw2=!t.showPw2}},model:{value:t.confirmPassword,callback:function(e){t.confirmPassword=e},expression:"confirmPassword"}})],1)],1),e(a.h7,[e(c.Z),e(s.Z,{staticClass:"px-5",attrs:{color:"primary"},on:{click:t.register}},[t._v("Register")])],1),e("br"),e("h3",{attrs:{align:"center"}},[t._v(" Got an account? "),e("router-link",{attrs:{to:"/login"}},[t._v("Log in now!")])],1)],1)],1)],1)],1)},g=[],f={name:"App",data(){return{username:"",password:"",confirmPassword:"",showPw1:!1,showPw2:!1}},methods:{async register(){""!=this.username&&""!=this.password&&""!=this.confirmPassword?this.password==this.confirmPassword?await this.$store.dispatch("registerPlayer",{username:this.username,password:this.password})?this.$router.push("/login"):this.$notify({type:"error",title:"Registration Failed",text:"Error connecting to !"}):alert("Mismatch Password: Check your passwords"):alert("Missing Values: Please fill in all fields")}}},m=f,v=i(3736),b=(0,v.Z)(m,p,g,!1,null,null,null),x=b.exports},6568:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return C}});var s=i(3381),n=i(7024),a=i(6530),r=i(4063),o=i(4557),l=i(4694),h=i(6131),c=i(5136),d=i(9088),u=i(7894),p=i(2515),g=i(9007),f=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mx-auto mt-4",staticStyle:{"max-width":"max(69%, 900px)"}},[e("h1",{staticClass:"mx-auto mt-4",attrs:{width:"100%"}},[t._v("Find a Team!")]),e("div",{staticClass:"d-flex"},[e("div",{staticClass:"ma-2",attrs:{width:t.loggedIn?"63%":"100%"}},[e(g.Z,{staticClass:"mx-auto grey lighten-3 rounded-pill",staticStyle:{"margin-top":"min(50px, max(1.5%, 1.5vh))"},attrs:{dense:"",solo:"",label:"Search Teams","append-icon":"mdi-magnify","single-line":"",outlined:"","hide-details":"",clearable:"",height:"min(100px, 5vh)"},on:{"click:clear":function(e){t.search=""}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),e(a.Z,{staticClass:"my-4 mx-auto"},t._l(t.filteredTeams,(function(i){return e(u.Z,{key:i.id},[e(n.Z,{staticClass:"pa-0 py-1"},[e("TeamCard",{attrs:{team:i},on:{click:function(e){return t.selectTeam(i)}}})],1)],1)})),1)],1),t.loggedIn?e("div",{staticClass:"ma-2",staticStyle:{width:"37%"}},[t.curPlayer.team_id?t._e():e(c.Z,{staticStyle:{width:"100%"},attrs:{accordion:""}},[e(o.Z,{staticClass:"primary lighten-3"},[e(h.Z,{staticClass:"font-weight-bold",staticStyle:{"font-size":"1.3rem"}},[t._v(" Applications ")]),e(l.Z,[e(r.Z,{staticClass:"elevation-10",attrs:{"disable-pagination":"",headers:t.app_table_headers,items:t.applications,"hide-default-header":"","items-per-page":-1,"no-data-text":"No Applications Yet...","hide-default-footer":"","single-expand":"",expanded:t.expanded,"show-expand":""},on:{"update:expanded":function(e){t.expanded=e}},scopedSlots:t._u([{key:"item.username",fn:function({item:e}){return[t._v(" "+t._s(e.creator_name)+" ")]}},{key:"item.actions",fn:function({item:i}){return[e(s.Z,{attrs:{medium:"",icon:"",color:"grey"},on:{click:function(e){return t.deleteApplication(i)}}},[e(d.Z,[t._v("mdi-delete")])],1)]}},{key:"expanded-item",fn:function({headers:i,item:s}){return[e("td",{attrs:{colspan:i.length}},[t._v(" "+t._s(s.message)+" ")])]}}],null,!1,128463185)})],1)],1),t.curPlayer.team_id?t._e():e(o.Z,{staticClass:"green lighten-3"},[e(h.Z,{staticClass:"font-weight-bold",staticStyle:{"font-size":"1.3rem"},attrs:{"expand-icon":"mdi-plus"}},[t._v(" Create Team ")]),e(l.Z,[e(g.Z,{attrs:{label:"Team Name",placeholder:"My Team",solo:"",clearable:""},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.createTeam()}},model:{value:t.team_name,callback:function(e){t.team_name=e},expression:"team_name"}})],1)],1)],1),t.curPlayer.team_id?e(s.Z,{staticClass:"primary lighten-1 py-6 px-5 mt-2 font-weight-bold",staticStyle:{"font-size":"1.3rem"},attrs:{block:""},on:{click:function(e){return t.$router.push("teams/"+t.curPlayer.team_id)}}},[e(d.Z,{attrs:{size:"2rem",left:""}},[t._v("mdi-account-group")]),e(p.Z),t._v(" My Team ")],1):t._e()],1):t._e()])])},m=[],v=i(629),b=i(1157),x={components:{TeamCard:b.Z},data(){return{search:"",teams:[],expanded:[],team_name:"",applications:[],app_table_headers:[{text:"team_name",sortable:!1,align:"start",value:"team_name"},{text:"actions",sortable:!1,align:"end",value:"actions"}]}},methods:{selectTeam(t){this.$router.push("/teams/"+t.team_id)},async createTeam(){let t=await this.$store.dispatch("createTeam",this.team_name);console.log(t),this.$router.push("/teams/"+t.team_id)},async deleteApplication(t){await this.$store.dispatch("rejectApplication",{id:t.id,team_id:t.team_id})?this.$router.go():this.$notify("Failed")}},computed:{filteredTeams(){return this.teams.filter((t=>t.team_name.toLowerCase().includes(this.search.toLowerCase())))},...(0,v.Se)({curPlayer:"getCurPlayer",loggedIn:"loggedIn"})},async created(){console.log(this.$route.params),this.teams=await this.$store.getters.getTeams(this.$route.params.id),this.applications=await this.$store.getters.getUserApplications(),console.log(this.applications)}},y=x,w=i(3736),k=(0,w.Z)(y,f,m,!1,null,"6c94722a",null),C=k.exports},6748:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return M}});var s=i(9396),n=i(3381),a=i(3816),r=i(5255),o=i(7024),l=i(6530),h=i(4063),c=i(3749),d=i(7690),u=i(4557),p=i(4694),g=i(6131),f=i(5136),m=i(9088),v=i(1584),b=i(3328),x=i(7894),y=i(2515),w=i(2379),k=i(2732),C=function(){var t=this,e=t._self._c;return e("div",{staticClass:"teamView mx-auto my-8",staticStyle:{width:"min(70%, 1785px)"}},[e(a.Z,{staticClass:"my-2",attrs:{outlined:"",height:"100%",elevation:"6"}},[e(l.Z,{attrs:{"no-gutters":"",height:"100%",width:"100%"}},[e(x.Z,{attrs:{justify:t.$vuetify.breakpoint.lgAndDown?"center":"start"}},[e(o.Z,{staticClass:"d-flex flex-nowrap align-center",attrs:{justify:"$vuetify.breakpoint.lgAndDown ? 'center' : 'start'",sm:"12",xl:"6"}},[e(s.Z,{staticClass:"mx-3 my-auto",attrs:{size:"100px",tile:""}},[t.team.icon?e(v.Z,{attrs:{size:"100px",src:t.team.icon}}):e(m.Z,{attrs:{size:"100px"}},[t._v("mdi-forum")])],1),e("div",{attrs:{align:"left"}},[e(r.EB,{staticClass:"font-weight-medium text-"},[t._v(t._s(t.team.team_name))]),e(r.ZB,[t._v(t._s(t.team.about_team))])],1)],1),e(y.Z),e(o.Z,{staticClass:"d-flex flex-column ma-4 align-center",attrs:{sm:"3",xl:"2"}},[e(m.Z,{attrs:{size:"64px"}},[t._v("mdi-account-multiple")]),e(r.EB,[t._v(t._s(t.team.member_count))])],1),e(o.Z,{staticClass:"d-flex flex-column ma-4 align-center",attrs:{sm:"3",xl:"2"}},[e(m.Z,{attrs:{size:"64px"}},[t._v("mdi-chess-pawn")]),e(r.EB,[t._v(t._s(t.average_rating))])],1)],1)],1)],1),e("p",{staticClass:"text-h4 mt-8"},[t._v("Team Members")]),e("div",{staticClass:"d-flex"},[e("div",{staticClass:"ma-2",staticStyle:{width:"65%"}},[e(h.Z,{staticClass:"elevation-5",attrs:{"disable-pagination":"",headers:t.table_headers,items:t.team.players,"hide-default-header":"","items-per-page":-1,"no-data-text":"No Members","hide-default-footer":"","sort-by":"rating","sort-desc":!0},scopedSlots:t._u([{key:"item.ranking",fn:function({index:e}){return[t._v(" "+t._s(e+1)+" ")]}},{key:"item.avatar",fn:function({item:i}){return[i.avatar?e(v.Z,{attrs:{src:i.avatar}}):e(m.Z,[t._v("mdi-account-circle")])]}},{key:"item.username",fn:function({item:e}){return[t._v(" "+t._s(e.username)+" ")]}},t.curPlayer.mod_start_date&&t.curPlayer.team_id==t.$route.params.teamId?{key:"item.actions",fn:function({item:i}){return[e(b.Z,{attrs:{top:"","close-on-content-click":t.closeOnContentClick},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:s}){return[e(n.Z,t._g(t._b({attrs:{medium:"",icon:"",color:"grey"}},"v-btn",s,!1),i),[e(m.Z,[t._v("mdi-dots-horizontal")])],1)]}}],null,!0)},[i.is_moderator?t._e():e(n.Z,{attrs:{block:""},on:{click:function(e){return t.makeMod(i)}}},[t._v("Make Mod")]),i.is_moderator?e(n.Z,{attrs:{readonly:"",block:""}},[t._v("Member is Mod")]):e(n.Z,{attrs:{block:""},on:{click:function(e){return t.kick(i)}}},[t._v("Kick Member")])],1)]}}:null],null,!0)})],1),e("div",{staticClass:"mx-2",staticStyle:{width:"35%"}},[e(f.Z,{staticClass:"mt-2",attrs:{accordion:""},model:{value:t.panels,callback:function(e){t.panels=e},expression:"panels"}},[e(u.Z,{staticClass:"elevation-10"},[e(g.Z,[t._v(" Moderators ")]),e(p.Z,[e(h.Z,{staticClass:"elevation-10",attrs:{"disable-pagination":"",headers:t.mod_table_headers,items:t.moderators,"hide-default-header":"","items-per-page":-1,"no-data-text":"No Moderators","hide-default-footer":"","sort-by":"rating","sort-desc":!0},on:{"click:row":t.toPlayer},scopedSlots:t._u([{key:"item.avatar",fn:function({item:i}){return[i.avatar?e(v.Z,{attrs:{src:i.avatar}}):e(m.Z,[t._v("mdi-account-circle")])]}},{key:"item.username",fn:function({item:e}){return[t._v(" "+t._s(e.username)+" ")]}}])})],1)],1),t.$store.state.curPlayer.mod_start_date&&t.$route.params.teamId===t.$store.state.curPlayer.team_id.toString()?e(u.Z,{staticClass:"elevation-10"},[e(g.Z,[t._v(" Applications ")]),e(p.Z,[e(h.Z,{staticClass:"elevation-10",attrs:{"disable-pagination":"",headers:t.app_table_headers,items:t.applications,"hide-default-header":"","items-per-page":-1,"no-data-text":"No Applications Yet...","hide-default-footer":"","single-expand":"",expanded:t.expanded,"show-expand":""},on:{"update:expanded":function(e){t.expanded=e}},scopedSlots:t._u([{key:"item.username",fn:function({item:e}){return[t._v(" "+t._s(e.creator_name)+" ")]}},{key:"item.actions",fn:function({item:i}){return[e(n.Z,{attrs:{medium:"",icon:"",color:"green"},on:{click:function(e){return t.approveApp(i,!0)}}},[e(m.Z,[t._v("mdi-check")])],1),e(n.Z,{attrs:{medium:"",icon:"",color:"red"},on:{click:function(e){return t.approveApp(i,!1)}}},[e(m.Z,[t._v("mdi-close")])],1)]}},{key:"expanded-item",fn:function({headers:i,item:s}){return[e("td",{attrs:{colspan:i.length}},[t._v(" "+t._s(s.message)+" ")])]}}],null,!1,4020302695)})],1)],1):t._e()],1),t.curPlayer.mod_start_date&&t.curPlayer.team_id==t.$route.params.teamId?e(n.Z,{staticClass:"orange darken-1 py-6 px-5 mt-2 font-weight-bold",staticStyle:{"font-size":"1.4rem"},attrs:{block:"",dark:""},on:{click:function(e){return t.quitModding()}}},[e(m.Z,{attrs:{size:"1.4rem",left:""}},[t._v("mdi-cancel")]),e(y.Z),t._v(" Stop Mod ")],1):t._e(),!t.curPlayer.team_id&&t.loggedIn?e(n.Z,{staticClass:"green lighten-3 py-6 px-5 mt-2 font-weight-bold",staticStyle:{"font-size":"1.4rem"},attrs:{block:""},on:{click:function(e){t.dialog=!0}}},[e(m.Z,{attrs:{size:"1.4rem",left:""}},[t._v("mdi-account-plus")]),e(y.Z),t._v(" Apply NOW! ")],1):t._e(),t.loggedIn?t._e():e(n.Z,{staticClass:"green lighten-3 py-6 px-5 mt-2 font-weight-bold",staticStyle:{"font-size":"1.4rem"},attrs:{block:""},on:{click:function(e){return t.$router.push("/login")}}},[e(m.Z,{attrs:{size:"1.4rem",left:""}},[t._v("mdi-account-plus")]),e(y.Z),t._v(" Login to JOIN! ")],1),t.curPlayer.team_id==t.$route.params.teamId?e(n.Z,{staticClass:"orange darken-1 py-6 px-5 mt-2 font-weight-bold",staticStyle:{"font-size":"1.4rem"},attrs:{block:"",dark:""},on:{click:function(e){return t.quitTeam()}}},[e(m.Z,{attrs:{size:"1.4rem",left:""}},[t._v("mdi-logout")]),e(y.Z),t._v(" Quit Team ")],1):t._e()],1)]),e(c.Z,{attrs:{width:"max(500px, 50%)"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(a.Z,[e(k.Z,{staticClass:"text-h4 lighten-2",attrs:{color:"green"}},[e(y.Z),e("p",{staticClass:"ma-4"},[t._v("Leave A Message?")]),e(y.Z)],1),e(w.Z,{staticClass:"mx-4 mt-4",attrs:{solo:"","no-resize":"",outlined:""},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey?t.applyToTeam.apply(null,arguments):null}},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}}),e("div",{staticClass:"d-flex justify-end",attrs:{width:"100%"}},[e(n.Z,{staticClass:"ma-5 green lighten-3",attrs:{outlined:""},on:{click:t.applyToTeam}},[t._v("Apply")])],1),e(d.Z)],1)],1)],1)},S=[],_=i(144),A=i(629),I=i(1157),P=_["default"].extend({data:()=>({team:{},dialog:!1,panels:0,average_puzzle:0,average_rating:0,message:"",table_headers:[{text:"ranking",align:"start",sortable:!1,value:"ranking"},{text:"Avatar",align:"start",sortable:!1,value:"avatar"},{text:"Username",sortable:!1,value:"username"},{text:"rating",sortable:!1,align:"end",value:"rating"},{text:"actions",sortable:!1,align:"end",value:"actions"}],mod_table_headers:[{text:"Avatar",align:"start",sortable:!1,value:"avatar"},{text:"Username",sortable:!1,value:"username"}],app_table_headers:[{text:"Username",sortable:!1,value:"username"},{text:"actions",sortable:!1,align:"end",value:"actions"}],applications:[]}),methods:{toPlayer(t){this.$router.push("/player/"+t.username)},async quitModding(){await this.$store.dispatch("quitTeamMod")?this.$router.go():this.$notify("Failed")},async makeMod(t){await this.$store.dispatch("makeMod",{username:t.username,team_id:this.$route.params.teamId})?this.$router.go():this.$notify("Failed")},async kick(t){await this.$store.dispatch("kick",{username:t.username,team_id:this.$route.params.teamId})?this.$router.go():this.$notify("Failed")},async quitTeam(){await this.$store.dispatch("quitTeam")?this.$router.go():this.$notify("Failed")},async applyToTeam(){await this.$store.dispatch("makeApplication",{team_id:this.$route.params.teamId,message:this.message})?(this.$notify({type:"Success",title:"Application Successful",text:"Please wait for a moderator to accept you"}),this.dialog=!1):this.$notify("Application Failed")},async approveApp(t,e){e?await this.$store.dispatch("approveApplication",{team_id:this.$route.params.teamId,applicant:t.creator_name})?this.$router.go():this.$notify("Failed"):await this.$store.dispatch("rejectApplication",{id:t.id,team_id:t.team_id,applicant:t.creator_name})?this.$router.go():this.$notify("Failed")}},computed:{moderators(){return this.team.players.filter((t=>t.is_moderator))},...(0,A.Se)({curPlayer:"getCurPlayer",loggedIn:"loggedIn"})},components:{TeamCard:I.Z},beforeMount:async function(){this.team=await this.$store.getters.getTeam(this.$route.params.teamId);for(let t of this.team.players)this.average_puzzle+=t.puzzle,this.average_rating+=t.rating;this.average_puzzle=0==this.team.players.length?0:Math.round(this.average_puzzle/this.team.players.length),this.average_rating=0==this.team.players.length?0:Math.round(this.average_rating/this.team.players.length),this.$store.state.curPlayer.mod_start_date&&this.$route.params.teamId===this.$store.state.curPlayer.team_id.toString()&&(this.applications=await this.$store.getters.getApplications(this.$route.params.teamId))}}),T=P,E=i(3736),L=(0,E.Z)(T,C,S,!1,null,"309373c6",null),M=L.exports},1555:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return f}});var s=i(7024),n=i(6530),a=i(7894),r=i(9007),o=function(){var t=this,e=t._self._c;return e("div",[e("h1",{staticClass:"mx-auto my-4",staticStyle:{"max-width":"max(66%, 880px)"}},[t._v("Find a Team!")]),e(r.Z,{staticClass:"mx-auto grey lighten-3 rounded-pill",staticStyle:{"max-width":"max(60%, 800px)","margin-top":"min(150px, max(2.5%, 2.5vh))"},attrs:{dense:"",solo:"",label:"Search Teams","append-icon":"mdi-magnify","single-line":"",outlined:"","hide-details":"",clearable:"",height:"min(100px, 5vh)"},on:{"click:clear":function(e){t.search=""}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),e(n.Z,{staticClass:"my-4 mx-auto rounded-xl",staticStyle:{"max-width":"max(65%, 867px)"}},[e(a.Z,t._l(t.filteredTeams,(function(t){return e(s.Z,{key:t.id,attrs:{cols:"12",sm:"6",md:"4"}},[e("TeamCard",{attrs:{team:t}})],1)})),1)],1)],1)},l=[],h=i(6154),c=i(1157),d={components:{TeamCard:c.Z},data(){return{search:"",teams:[]}},computed:{filteredTeams(){return this.teams.filter((t=>t.team_name.toLowerCase().includes(this.search.toLowerCase())))}},async created(){this.teams=(await h.Z.get("http://127.0.0.1:5000/teams")).data,console.log(this.teams)}},u=d,p=i(3736),g=(0,p.Z)(u,o,l,!1,null,"2d8d0134",null),f=g.exports},3742:function(t,e,i){"use strict";i.r(e);var s,n,a=i(3736),r={},o=(0,a.Z)(r,s,n,!1,null,null,null);e["default"]=o.exports},2782:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return L}});var s=i(9396),n=i(3381),a=i(3816),r=i(5255),o=i(4063),l=i(9088),h=i(1584),c=i(2515),d=i(756),u=i(6975),p=i(6899),g=i(2379),f=i(2732),m=i(8131);const v=(0,m.Ji)("v-toolbar__title"),b=(0,m.Ji)("v-toolbar__items");f.Z;var x=function(){var t=this,e=t._self._c;return e("div",{staticClass:"profile flex-column",staticStyle:{width:"100%"}},[e(a.Z,{staticClass:"pb-4",staticStyle:{margin:"3vh 25vw"},attrs:{elevation:"12",height:"15vh"}},[e("div",{staticClass:"d-flex flex-no-wrap justify-right align-center",staticStyle:{height:"100%",width:"100%"}},[e(s.Z,{staticClass:"mx-3 my-auto",attrs:{size:"72px",tile:""}},[t.player.avatar?e(h.Z,{attrs:{size:"72px",src:t.player.avatar}}):e(l.Z,{attrs:{size:"72px"}},[t._v("mdi-account-circle")])],1),e("div",{attrs:{align:"left"}},[e(r.EB,{staticClass:"text-h3 font-weight-medium"},[t._v(t._s(t.player.username))])],1)],1)]),e(a.Z,{staticClass:"ma-10",attrs:{elevation:"5"}},[e(f.Z,{attrs:{flat:"",color:"primary",dark:""}},[e(v,{staticClass:"text-h3 ma-5"},[t._v("Statistics")])],1),e(p.Z,{attrs:{vertical:"",grow:"",color:"secondary darken-1","background-color":"transparent",icon:""}},[e(d.Z,[e(l.Z,{attrs:{left:""}},[t._v(" mdi-information ")]),t._v(" About "),e(c.Z)],1),e(u.Z,[e(a.Z,{staticClass:"d-flex align-center justify-start",attrs:{height:"60vh"}},[e(a.Z,{staticClass:"ma-10",attrs:{elevation:"10",width:"calc(40% - 40px)",height:"35vh"}},[e(r.EB,[t._v("About Me!")]),t.display?e(r.ZB,[t._v(t._s(t.player.about_me))]):e(g.Z,{staticClass:"mx-4 mt-4",attrs:{solo:"","no-resize":"",outlined:""},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey?t.swapDisplay.apply(null,arguments):null}},model:{value:t.player.about_me,callback:function(e){t.$set(t.player,"about_me",e)},expression:"player.about_me"}}),e("div",{staticClass:"d-flex justify-end mx-5"},[t.player.username==t.curPlayer.username?e(n.Z,{attrs:{large:"",icon:"",color:"grey"},on:{click:t.swapDisplay}},[t.display?e(l.Z,[t._v("mdi-pen")]):e(l.Z,{attrs:{color:"green"}},[t._v("mdi-check")])],1):t._e()],1)],1),e("div",{staticClass:"ma-10",attrs:{elevation:"10",width:"calc(40% - 40px)",height:"35vh"}},[e(r.EB,[t._v("Team")]),t.player.team_id?e("TeamCard",{attrs:{hoverAnim:!1,team:t.team},on:{click:function(e){return t.$router.push("/teams/"+t.player.team_id)}}}):e(r.ZB,[t._v("None at the moment...")])],1)],1)],1),e(d.Z,[e(l.Z,{attrs:{left:""}},[t._v(" mdi-checkerboard ")]),t._v(" Classical "),e(c.Z)],1),e(u.Z,[e(a.Z,{staticClass:"pa-5 d-flex align-center",attrs:{height:"60vh",flat:""}},[e("div",{staticClass:"pr-5",staticStyle:{width:"50%",height:"100%"}},[e("div",{staticClass:"d-flex justify-center align-center"},[t._l(t.ranges,(function(i){return e(n.Z,{key:i.name,staticClass:"ma-1",attrs:{id:i.name,outlined:t.classicalSelection!==i.name,depressed:"",color:"primary"},on:{click:function(e){return t.rezoomClassicalData(i.name)}}},[t._v(" "+t._s(i.display)+" ")])})),e(c.Z),e("div",{staticClass:"text-h5"},[t._v("Rating History")])],2),e("LineChart",{ref:"classicalChart",staticStyle:{".svg {overflow":"visible"},attrs:{width:"100%",height:"80%",type:"area",options:t.chartOptions,series:t.classical_data}})],1),e("div",{staticStyle:{"flex-grow":"1","margin-right":"2%"}},[e("p",{staticClass:"text-h4"},[t._v("Recent Games")]),e(o.Z,{staticClass:"elevation-1",attrs:{height:"30vh",headers:t.headers,items:t.games,"items-per-page":"6","no-data-text":"No games played so far...","footer-props":{showFirstLastPage:!0,disableItemsPerPage:!0}},scopedSlots:t._u([{key:"item.result",fn:function({item:i}){return[1===i.result?e(l.Z,{attrs:{color:"green"}},[t._v("mdi-plus")]):0===i.result?e(l.Z,{attrs:{color:"grey"}},[t._v("mdi-equal")]):e(l.Z,{attrs:{color:"red"}},[t._v("mdi-minus")])]}},{key:"item.date",fn:function({item:e}){return[t._v(" "+t._s(e.date.toLocaleDateString("en-UK",{day:"numeric",month:"short",year:"numeric"}))+" ")]}},{key:"item.side",fn:function({item:t}){return["black"==t.side?e("div",{staticStyle:{width:"2vmin",height:"2vmin",border:"2px solid var(--v-primary-base)","background-color":"#616161"}}):e("div",{staticStyle:{width:"2vmin",height:"2vmin",border:"2px solid var(--v-primary-base)","background-color":"#eeeeee"}})]}}])})],1)])],1),t._e(),e(u.Z,[e(a.Z,{staticClass:"pa-5 d-flex align-center",attrs:{height:"60vh",flat:""}},[e("div",{staticClass:"pr-5",staticStyle:{width:"50%",height:"100%"}},[e("div",{staticClass:"d-flex justify-center align-center"},[t._l(t.ranges,(function(i){return e(n.Z,{key:i.name,staticClass:"ma-1",attrs:{id:i.name,outlined:t.puzzleSelection!==i.name,depressed:"",color:"primary"},on:{click:function(e){return t.rezoomPuzzleData(i.name)}}},[t._v(" "+t._s(i.display)+" ")])})),e(c.Z),e("div",{staticClass:"text-h5"},[t._v("Rating History")])],2),e("LineChart",{ref:"puzzleChart",staticStyle:{".svg {overflow":"visible"},attrs:{width:"100%",height:"80%",type:"area",options:t.chartOptions,series:t.puzzle_data}})],1),e("div",{staticStyle:{"flex-grow":"1","margin-right":"2%"}},[e("p",{staticClass:"text-h4"},[t._v("Recent Puzzles")]),e(o.Z,{staticClass:"elevation-1",attrs:{height:"30vh",headers:t.headers,items:t.games,"items-per-page":"6","no-data-text":"No games played so far...","footer-props":{showFirstLastPage:!0,disableItemsPerPage:!0}},scopedSlots:t._u([{key:"item.result",fn:function({item:i}){return[1===i.result?e(l.Z,{attrs:{color:"green"}},[t._v("mdi-plus")]):0===i.result?e(l.Z,{attrs:{color:"grey"}},[t._v("mdi-equal")]):e(l.Z,{attrs:{color:"red"}},[t._v("mdi-minus")])]}},{key:"item.date",fn:function({item:e}){return[t._v(" "+t._s(e.date.toLocaleDateString("en-UK",{day:"numeric",month:"short",year:"numeric"}))+" ")]}},{key:"item.side",fn:function({item:t}){return["black"==t.side?e("div",{staticStyle:{width:"2vmin",height:"2vmin",border:"2px solid var(--v-primary-base)","background-color":"#616161"}}):e("div",{staticStyle:{width:"2vmin",height:"2vmin",border:"2px solid var(--v-primary-base)","background-color":"#eeeeee"}})]}}])})],1)])],1)],1)],1)],1)},y=[],w=i(144),k=i(629),C=i(7166),S=i.n(C),_=i(1157),A=i(5413),I=w["default"].extend({data:()=>({chartOptions:{chart:{type:"area",curve:"straight",stacked:!1,zoom:{type:"x",enabled:!1,autoScaleYaxis:!0},toolbar:{show:!1}},xaxis:{type:"datetime"},fill:{type:"gradient",gradient:{shadeIntensity:1,inverseColors:!1,opacityFrom:.5,opacityTo:0,stops:[0,90,100]}},noData:{text:"Loading..."},dataLabels:{enabled:!1}},player:{},team:{},classical_data:[],puzzle_data:[],display:!0,classicalSelection:"all",puzzleSelection:"all",ranges:[{display:"1M",name:"one_month"},{display:"6M",name:"six_months"},{display:"1Y",name:"one_year"},{display:"All",name:"all"}],headers:[{text:"Opponent",align:"start",sortable:!1,value:"opponent"},{text:"Side",sortable:!1,value:"side"},{text:"Result",value:"result"},{text:"Date",value:"date"}],games:[{date:"Sat, 11 Feb 2023 16:09:23 GMT",is_public:!0,opponent:"ethantan2509",result:-1,side:"white"},{date:"Sat, 11 Feb 2023 16:02:11 GMT",is_public:!0,opponent:"ethantan2509",result:1,side:"black"}]}),methods:{rezoomClassicalData(t){this.classicalSelection=t;var e=this.classical_data[0]["data"][this.classical_data[0]["data"].length-1][0],i=new Date(e);switch(t){case"one_month":i.setMonth(i.getMonth()-1);break;case"six_months":i.setMonth(i.getMonth()-6);break;case"one_year":i.setFullYear(i.getFullYear()-1);break;case"all":i=this.classical_data[0]["data"][0][0];break;default:}this.$refs.classicalChart.zoomX(i.getTime(),e)},rezoomPuzzleData(t){this.puzzleSelection=t;var e=this.puzzle_data[0]["data"][this.puzzle_data[0]["data"].length-1][0],i=new Date(e);switch(t){case"one_month":i.setMonth(i.getMonth()-1);break;case"six_months":i.setMonth(i.getMonth()-6);break;case"one_year":i.setFullYear(i.getFullYear()-1);break;case"all":i=this.puzzle_data[0]["data"][0][0];break;default:}console.log(i,e),this.$refs.puzzleChart.zoomX(i.getTime(),e)},async swapDisplay(){this.display?this.display=!1:await this.$store.dispatch("updateProfile",{username:this.$route.params.username,about:this.player.about_me})?this.display=!0:this.$notify("Failed")}},components:{LineChart:S(),TeamCard:_.Z,PlayerCard:A.Z},computed:{...(0,k.Se)({curPlayer:"getCurPlayer"})},beforeCreate(){},async beforeMount(){await fetch("https://lichess.org/api/user/penguingim1/rating-history").then((t=>t.json()));this.player=await this.$store.getters.getPlayer(this.$route.params.username),this.player.rating_history.map((t=>[new Date(t.datetime),t.rating])),this.player.puzzle_history.map((t=>[new Date(t.datetime),t.rating])),this.classical_data=[{data:this.player.rating_history.map((t=>[new Date(t.datetime),t.rating])),name:"Classical"}],this.puzzle_data=[{data:this.player.puzzle_history.map((t=>[new Date(t.datetime),t.rating])),name:"Puzzles"}],this.games=await this.$store.getters.getGames(this.$route.params.username),this.games.map((t=>t["date"]=new Date(t["date"]))),this.player.team_id&&(this.team=await this.$store.getters.getTeam(this.player.team_id),console.log(this.team))}}),P=I,T=i(3736),E=(0,T.Z)(P,x,y,!1,null,"6cee0172",null),L=E.exports},989:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return x}});var s=i(7024),n=i(6530),a=i(4557),r=i(4694),o=i(6131),l=i(5136),h=i(7894),c=i(9007),d=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mx-auto mt-4",staticStyle:{"max-width":"max(69%, 900px)"}},[e("h1",{staticClass:"mx-auto mt-4",attrs:{width:"100%"}},[t._v("Find a Player!")]),e("div",{staticClass:"d-flex justify-space-between"},[e("div",{staticClass:"ma-2",staticStyle:{width:"60%"}},[e(n.Z,{staticClass:"my-4",attrs:{width:"100%"}},t._l(t.filteredPlayers,(function(i){return e(h.Z,{key:i.username},[e(s.Z,{staticClass:"pa-0 py-1"},[e("PlayerCard",{attrs:{player:i},on:{click:function(e){return t.selectTeam(i)}}})],1)],1)})),1)],1),e("div",{staticClass:"ma-2",staticStyle:{width:"31%"}},[e(c.Z,{staticClass:"mx-auto my-4 grey lighten-3 rounded-pill",staticStyle:{"margin-top":"min(50px, max(1.5%, 1.5vh))"},attrs:{dense:"",solo:"",label:"Search Username","append-icon":"mdi-magnify","single-line":"",outlined:"","hide-details":"",clearable:"",height:"min(100px, 5vh)"},on:{"click:clear":function(e){t.search=""}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),e(l.Z,{attrs:{accordion:""},model:{value:t.panels,callback:function(e){t.panels=e},expression:"panels"}},[e(a.Z,{staticClass:"elevation-5"},[e(o.Z,{staticClass:"font-weight-bold",staticStyle:{"font-size":"1.3rem"}},[t._v(" Filters ")]),e(r.Z)],1)],1)],1)])])},u=[],p=i(629),g=i(5413),f={components:{PlayerCard:g.Z},data(){return{search:"",players:[]}},methods:{selectTeam(t){this.$router.push("/player/"+t.username)}},computed:{filteredPlayers(){return this.players.filter((t=>t.username.toLowerCase().includes(this.search.toLowerCase())))},...(0,p.Se)({curPlayer:"getCurPlayer"})},async created(){this.players=await this.$store.getters.getPlayers()}},m=f,v=i(3736),b=(0,v.Z)(m,d,u,!1,null,"6bb931a9",null),x=b.exports},7514:function(t,e,i){var s;
/*!
 * ApexCharts v3.36.2
 * (c) 2018-2022 ApexCharts
 * Released under the MIT License.
 */!function(e,i){t.exports=i()}(0,(function(){"use strict";function n(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function a(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?n(Object(i),!0).forEach((function(e){c(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function h(t,e,i){return e&&l(t.prototype,e),i&&l(t,i),t}function c(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}function p(t,e){return p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},p(t,e)}function g(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,s=u(t);if(e){var n=u(this).constructor;i=Reflect.construct(s,arguments,n)}else i=s.apply(this,arguments);return g(this,i)}}function m(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var s,n,a=[],r=!0,o=!1;try{for(i=i.call(t);!(r=(s=i.next()).done)&&(a.push(s.value),!e||a.length!==e);r=!0);}catch(t){o=!0,n=t}finally{try{r||null==i.return||i.return()}finally{if(o)throw n}}return a}}(t,e)||b(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t){return function(t){if(Array.isArray(t))return x(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||b(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t,e){if(t){if("string"==typeof t)return x(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?x(t,e):void 0}}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}var y=function(){function t(){o(this,t)}return h(t,[{key:"shadeRGBColor",value:function(t,e){var i=e.split(","),s=t<0?0:255,n=t<0?-1*t:t,a=parseInt(i[0].slice(4),10),r=parseInt(i[1],10),o=parseInt(i[2],10);return"rgb("+(Math.round((s-a)*n)+a)+","+(Math.round((s-r)*n)+r)+","+(Math.round((s-o)*n)+o)+")"}},{key:"shadeHexColor",value:function(t,e){var i=parseInt(e.slice(1),16),s=t<0?0:255,n=t<0?-1*t:t,a=i>>16,r=i>>8&255,o=255&i;return"#"+(16777216+65536*(Math.round((s-a)*n)+a)+256*(Math.round((s-r)*n)+r)+(Math.round((s-o)*n)+o)).toString(16).slice(1)}},{key:"shadeColor",value:function(e,i){return t.isColorHex(i)?this.shadeHexColor(e,i):this.shadeRGBColor(e,i)}}],[{key:"bind",value:function(t,e){return function(){return t.apply(e,arguments)}}},{key:"isObject",value:function(t){return t&&"object"===r(t)&&!Array.isArray(t)&&null!=t}},{key:"is",value:function(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"}},{key:"listToArray",value:function(t){var e,i=[];for(e=0;e<t.length;e++)i[e]=t[e];return i}},{key:"extend",value:function(t,e){var i=this;"function"!=typeof Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var s=arguments[i];if(null!=s)for(var n in s)s.hasOwnProperty(n)&&(e[n]=s[n])}return e});var s=Object.assign({},t);return this.isObject(t)&&this.isObject(e)&&Object.keys(e).forEach((function(n){i.isObject(e[n])&&n in t?s[n]=i.extend(t[n],e[n]):Object.assign(s,c({},n,e[n]))})),s}},{key:"extendArray",value:function(e,i){var s=[];return e.map((function(e){s.push(t.extend(i,e))})),s}},{key:"monthMod",value:function(t){return t%12}},{key:"clone",value:function(e){if(t.is("Array",e)){for(var i=[],s=0;s<e.length;s++)i[s]=this.clone(e[s]);return i}if(t.is("Null",e))return null;if(t.is("Date",e))return e;if("object"===r(e)){var n={};for(var a in e)e.hasOwnProperty(a)&&(n[a]=this.clone(e[a]));return n}return e}},{key:"log10",value:function(t){return Math.log(t)/Math.LN10}},{key:"roundToBase10",value:function(t){return Math.pow(10,Math.floor(Math.log10(t)))}},{key:"roundToBase",value:function(t,e){return Math.pow(e,Math.floor(Math.log(t)/Math.log(e)))}},{key:"parseNumber",value:function(t){return null===t?t:parseFloat(t)}},{key:"randomId",value:function(){return(Math.random()+1).toString(36).substring(4)}},{key:"noExponents",value:function(t){var e=String(t).split(/[eE]/);if(1===e.length)return e[0];var i="",s=t<0?"-":"",n=e[0].replace(".",""),a=Number(e[1])+1;if(a<0){for(i=s+"0.";a++;)i+="0";return i+n.replace(/^-/,"")}for(a-=n.length;a--;)i+="0";return n+i}},{key:"getDimensions",value:function(t){var e=getComputedStyle(t,null),i=t.clientHeight,s=t.clientWidth;return i-=parseFloat(e.paddingTop)+parseFloat(e.paddingBottom),[s-=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight),i]}},{key:"getBoundingClientRect",value:function(t){var e=t.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:t.clientWidth,height:t.clientHeight,x:e.left,y:e.top}}},{key:"getLargestStringFromArr",value:function(t){return t.reduce((function(t,e){return Array.isArray(e)&&(e=e.reduce((function(t,e){return t.length>e.length?t:e}))),t.length>e.length?t:e}),0)}},{key:"hexToRgba",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#999999",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.6;"#"!==t.substring(0,1)&&(t="#999999");var i=t.replace("#","");i=i.match(new RegExp("(.{"+i.length/3+"})","g"));for(var s=0;s<i.length;s++)i[s]=parseInt(1===i[s].length?i[s]+i[s]:i[s],16);return void 0!==e&&i.push(e),"rgba("+i.join(",")+")"}},{key:"getOpacityFromRGBA",value:function(t){return parseFloat(t.replace(/^.*,(.+)\)/,"$1"))}},{key:"rgb2hex",value:function(t){return(t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):""}},{key:"isColorHex",value:function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(t)}},{key:"getPolygonPos",value:function(t,e){for(var i=[],s=2*Math.PI/e,n=0;n<e;n++){var a={};a.x=t*Math.sin(n*s),a.y=-t*Math.cos(n*s),i.push(a)}return i}},{key:"polarToCartesian",value:function(t,e,i,s){var n=(s-90)*Math.PI/180;return{x:t+i*Math.cos(n),y:e+i*Math.sin(n)}}},{key:"escapeString",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",i=t.toString().slice();return i.replace(/[` ~!@#$%^&*()|+\=?;:'",.<>{}[\]\\/]/gi,e)}},{key:"negToZero",value:function(t){return t<0?0:t}},{key:"moveIndexInArray",value:function(t,e,i){if(i>=t.length)for(var s=i-t.length+1;s--;)t.push(void 0);return t.splice(i,0,t.splice(e,1)[0]),t}},{key:"extractNumber",value:function(t){return parseFloat(t.replace(/[^\d.]*/g,""))}},{key:"findAncestor",value:function(t,e){for(;(t=t.parentElement)&&!t.classList.contains(e););return t}},{key:"setELstyles",value:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t.style.key=e[i])}},{key:"isNumber",value:function(t){return!isNaN(t)&&parseFloat(Number(t))===t&&!isNaN(parseInt(t,10))}},{key:"isFloat",value:function(t){return Number(t)===t&&t%1!=0}},{key:"isSafari",value:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},{key:"isFirefox",value:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1}},{key:"isIE11",value:function(){if(-1!==window.navigator.userAgent.indexOf("MSIE")||window.navigator.appVersion.indexOf("Trident/")>-1)return!0}},{key:"isIE",value:function(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ");if(e>0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(t.indexOf("Trident/")>0){var i=t.indexOf("rv:");return parseInt(t.substring(i+3,t.indexOf(".",i)),10)}var s=t.indexOf("Edge/");return s>0&&parseInt(t.substring(s+5,t.indexOf(".",s)),10)}}]),t}(),w=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w,this.setEasingFunctions()}return h(t,[{key:"setEasingFunctions",value:function(){var t;if(!this.w.globals.easing){switch(this.w.config.chart.animations.easing){case"linear":t="-";break;case"easein":t="<";break;case"easeout":t=">";break;case"easeinout":default:t="<>";break;case"swing":t=function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1};break;case"bounce":t=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375};break;case"elastic":t=function(t){return t===!!t?t:Math.pow(2,-10*t)*Math.sin((t-.075)*(2*Math.PI)/.3)+1}}this.w.globals.easing=t}}},{key:"animateLine",value:function(t,e,i,s){t.attr(e).animate(s).attr(i)}},{key:"animateMarker",value:function(t,e,i,s,n,a){e||(e=0),t.attr({r:e,width:e,height:e}).animate(s,n).attr({r:i,width:i.width,height:i.height}).afterAll((function(){a()}))}},{key:"animateCircle",value:function(t,e,i,s,n){t.attr({r:e.r,cx:e.cx,cy:e.cy}).animate(s,n).attr({r:i.r,cx:i.cx,cy:i.cy})}},{key:"animateRect",value:function(t,e,i,s,n){t.attr(e).animate(s).attr(i).afterAll((function(){return n()}))}},{key:"animatePathsGradually",value:function(t){var e=t.el,i=t.realIndex,s=t.j,n=t.fill,a=t.pathFrom,r=t.pathTo,o=t.speed,l=t.delay,h=this.w,c=0;h.config.chart.animations.animateGradually.enabled&&(c=h.config.chart.animations.animateGradually.delay),h.config.chart.animations.dynamicAnimation.enabled&&h.globals.dataChanged&&"bar"!==h.config.chart.type&&(c=0),this.morphSVG(e,i,s,"line"!==h.config.chart.type||h.globals.comboCharts?n:"stroke",a,r,o,l*c)}},{key:"showDelayedElements",value:function(){this.w.globals.delayedElements.forEach((function(t){t.el.classList.remove("apexcharts-element-hidden")}))}},{key:"animationCompleted",value:function(t){var e=this.w;e.globals.animationEnded||(e.globals.animationEnded=!0,this.showDelayedElements(),"function"==typeof e.config.chart.events.animationEnd&&e.config.chart.events.animationEnd(this.ctx,{el:t,w:e}))}},{key:"morphSVG",value:function(t,e,i,s,n,a,r,o){var l=this,h=this.w;n||(n=t.attr("pathFrom")),a||(a=t.attr("pathTo"));var c=function(t){return"radar"===h.config.chart.type&&(r=1),"M 0 ".concat(h.globals.gridHeight)};(!n||n.indexOf("undefined")>-1||n.indexOf("NaN")>-1)&&(n=c()),(!a||a.indexOf("undefined")>-1||a.indexOf("NaN")>-1)&&(a=c()),h.globals.shouldAnimate||(r=1),t.plot(n).animate(1,h.globals.easing,o).plot(n).animate(r,h.globals.easing,o).plot(a).afterAll((function(){y.isNumber(i)?i===h.globals.series[h.globals.maxValsInArrayIndex].length-2&&h.globals.shouldAnimate&&l.animationCompleted(t):"none"!==s&&h.globals.shouldAnimate&&(!h.globals.comboCharts&&e===h.globals.series.length-1||h.globals.comboCharts)&&l.animationCompleted(t),l.showDelayedElements()}))}}]),t}(),k=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w}return h(t,[{key:"getDefaultFilter",value:function(t,e){var i=this.w;t.unfilter(!0),(new window.SVG.Filter).size("120%","180%","-5%","-40%"),"none"!==i.config.states.normal.filter?this.applyFilter(t,e,i.config.states.normal.filter.type,i.config.states.normal.filter.value):i.config.chart.dropShadow.enabled&&this.dropShadow(t,i.config.chart.dropShadow,e)}},{key:"addNormalFilter",value:function(t,e){var i=this.w;i.config.chart.dropShadow.enabled&&!t.node.classList.contains("apexcharts-marker")&&this.dropShadow(t,i.config.chart.dropShadow,e)}},{key:"addLightenFilter",value:function(t,e,i){var s=this,n=this.w,a=i.intensity;t.unfilter(!0),new window.SVG.Filter,t.filter((function(t){var i=n.config.chart.dropShadow;(i.enabled?s.addShadow(t,e,i):t).componentTransfer({rgb:{type:"linear",slope:1.5,intercept:a}})})),t.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(t.filterer.node)}},{key:"addDarkenFilter",value:function(t,e,i){var s=this,n=this.w,a=i.intensity;t.unfilter(!0),new window.SVG.Filter,t.filter((function(t){var i=n.config.chart.dropShadow;(i.enabled?s.addShadow(t,e,i):t).componentTransfer({rgb:{type:"linear",slope:a}})})),t.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(t.filterer.node)}},{key:"applyFilter",value:function(t,e,i){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;switch(i){case"none":this.addNormalFilter(t,e);break;case"lighten":this.addLightenFilter(t,e,{intensity:s});break;case"darken":this.addDarkenFilter(t,e,{intensity:s})}}},{key:"addShadow",value:function(t,e,i){var s=i.blur,n=i.top,a=i.left,r=i.color,o=i.opacity,l=t.flood(Array.isArray(r)?r[e]:r,o).composite(t.sourceAlpha,"in").offset(a,n).gaussianBlur(s).merge(t.source);return t.blend(t.source,l)}},{key:"dropShadow",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=e.top,n=e.left,a=e.blur,r=e.color,o=e.opacity,l=e.noUserSpaceOnUse,h=this.w;return t.unfilter(!0),y.isIE()&&"radialBar"===h.config.chart.type||(r=Array.isArray(r)?r[i]:r,t.filter((function(t){var e=null;e=y.isSafari()||y.isFirefox()||y.isIE()?t.flood(r,o).composite(t.sourceAlpha,"in").offset(n,s).gaussianBlur(a):t.flood(r,o).composite(t.sourceAlpha,"in").offset(n,s).gaussianBlur(a).merge(t.source),t.blend(t.source,e)})),l||t.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(t.filterer.node)),t}},{key:"setSelectionFilter",value:function(t,e,i){var s=this.w;if(void 0!==s.globals.selectedDataPoints[e]&&s.globals.selectedDataPoints[e].indexOf(i)>-1){t.node.setAttribute("selected",!0);var n=s.config.states.active.filter;"none"!==n&&this.applyFilter(t,e,n.type,n.value)}}},{key:"_scaleFilterSize",value:function(t){!function(e){for(var i in e)e.hasOwnProperty(i)&&t.setAttribute(i,e[i])}({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}]),t}(),C=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w}return h(t,[{key:"roundPathCorners",value:function(t,e){function i(t,e,i){var n=e.x-t.x,a=e.y-t.y,r=Math.sqrt(n*n+a*a);return s(t,e,Math.min(1,i/r))}function s(t,e,i){return{x:t.x+(e.x-t.x)*i,y:t.y+(e.y-t.y)*i}}function n(t,e){t.length>2&&(t[t.length-2]=e.x,t[t.length-1]=e.y)}function a(t){return{x:parseFloat(t[t.length-2]),y:parseFloat(t[t.length-1])}}var r=t.split(/[,\s]/).reduce((function(t,e){var i=e.match("([a-zA-Z])(.+)");return i?(t.push(i[1]),t.push(i[2])):t.push(e),t}),[]).reduce((function(t,e){return parseFloat(e)==e&&t.length?t[t.length-1].push(e):t.push([e]),t}),[]),o=[];if(r.length>1){var l=a(r[0]),h=null;"Z"==r[r.length-1][0]&&r[0].length>2&&(h=["L",l.x,l.y],r[r.length-1]=h),o.push(r[0]);for(var c=1;c<r.length;c++){var d=o[o.length-1],u=r[c],p=u==h?r[1]:r[c+1];if(p&&d&&d.length>2&&"L"==u[0]&&p.length>2&&"L"==p[0]){var g,f,m=a(d),v=a(u),b=a(p);g=i(v,m,e),f=i(v,b,e),n(u,g),u.origPoint=v,o.push(u);var x=s(g,v,.5),y=s(v,f,.5),w=["C",x.x,x.y,y.x,y.y,f.x,f.y];w.origPoint=v,o.push(w)}else o.push(u)}if(h){var k=a(o[o.length-1]);o.push(["Z"]),n(o[0],k)}}else o=r;return o.reduce((function(t,e){return t+e.join(" ")+" "}),"")}},{key:"drawLine",value:function(t,e,i,s){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#a8a8a8",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"butt",l=this.w,h=l.globals.dom.Paper.line().attr({x1:t,y1:e,x2:i,y2:s,stroke:n,"stroke-dasharray":a,"stroke-width":r,"stroke-linecap":o});return h}},{key:"drawRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#fefefe",r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,c=this.w,d=c.globals.dom.Paper.rect();return d.attr({x:t,y:e,width:i>0?i:0,height:s>0?s:0,rx:n,ry:n,opacity:r,"stroke-width":null!==o?o:0,stroke:null!==l?l:"none","stroke-dasharray":h}),d.node.setAttribute("fill",a),d}},{key:"drawPolygon",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#e1e1e1",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none",n=this.w,a=n.globals.dom.Paper.polygon(t).attr({fill:s,stroke:e,"stroke-width":i});return a}},{key:"drawCircle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.w;t<0&&(t=0);var s=i.globals.dom.Paper.circle(2*t);return null!==e&&s.attr(e),s}},{key:"drawPath",value:function(t){var e=t.d,i=void 0===e?"":e,s=t.stroke,n=void 0===s?"#a8a8a8":s,a=t.strokeWidth,r=void 0===a?1:a,o=t.fill,l=t.fillOpacity,h=void 0===l?1:l,c=t.strokeOpacity,d=void 0===c?1:c,u=t.classes,p=t.strokeLinecap,g=void 0===p?null:p,f=t.strokeDashArray,m=void 0===f?0:f,v=this.w;return null===g&&(g=v.config.stroke.lineCap),(i.indexOf("undefined")>-1||i.indexOf("NaN")>-1)&&(i="M 0 ".concat(v.globals.gridHeight)),v.globals.dom.Paper.path(i).attr({fill:o,"fill-opacity":h,stroke:n,"stroke-opacity":d,"stroke-linecap":g,"stroke-width":r,"stroke-dasharray":m,class:u})}},{key:"group",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.w,i=e.globals.dom.Paper.group();return null!==t&&i.attr(t),i}},{key:"move",value:function(t,e){var i=["M",t,e].join(" ");return i}},{key:"line",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=null;return null===i?s=[" L",t,e].join(" "):"H"===i?s=[" H",t].join(" "):"V"===i&&(s=[" V",e].join(" ")),s}},{key:"curve",value:function(t,e,i,s,n,a){var r=["C",t,e,i,s,n,a].join(" ");return r}},{key:"quadraticCurve",value:function(t,e,i,s){return["Q",t,e,i,s].join(" ")}},{key:"arc",value:function(t,e,i,s,n,a,r){var o=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l="A";o&&(l="a");var h=[l,t,e,i,s,n,a,r].join(" ");return h}},{key:"renderPaths",value:function(t){var e,i=t.j,s=t.realIndex,n=t.pathFrom,r=t.pathTo,o=t.stroke,l=t.strokeWidth,h=t.strokeLinecap,c=t.fill,d=t.animationDelay,u=t.initialSpeed,p=t.dataChangeSpeed,g=t.className,f=t.shouldClipToGrid,m=void 0===f||f,v=t.bindEventsOnPaths,b=void 0===v||v,x=t.drawShadow,y=void 0===x||x,C=this.w,S=new k(this.ctx),_=new w(this.ctx),A=this.w.config.chart.animations.enabled,I=A&&this.w.config.chart.animations.dynamicAnimation.enabled,P=!!(A&&!C.globals.resized||I&&C.globals.dataChanged&&C.globals.shouldAnimate);P?e=n:(e=r,C.globals.animationEnded=!0);var T=C.config.stroke.dashArray,E=0;E=Array.isArray(T)?T[s]:C.config.stroke.dashArray;var L=this.drawPath({d:e,stroke:o,strokeWidth:l,fill:c,fillOpacity:1,classes:g,strokeLinecap:h,strokeDashArray:E});if(L.attr("index",s),m&&L.attr({"clip-path":"url(#gridRectMask".concat(C.globals.cuid,")")}),"none"!==C.config.states.normal.filter.type)S.getDefaultFilter(L,s);else if(C.config.chart.dropShadow.enabled&&y&&(!C.config.chart.dropShadow.enabledOnSeries||C.config.chart.dropShadow.enabledOnSeries&&-1!==C.config.chart.dropShadow.enabledOnSeries.indexOf(s))){var M=C.config.chart.dropShadow;S.dropShadow(L,M,s)}b&&(L.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,L)),L.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,L)),L.node.addEventListener("mousedown",this.pathMouseDown.bind(this,L))),L.attr({pathTo:r,pathFrom:n});var O={el:L,j:i,realIndex:s,pathFrom:n,pathTo:r,fill:c,strokeWidth:l,delay:d};return!A||C.globals.resized||C.globals.dataChanged?!C.globals.resized&&C.globals.dataChanged||_.showDelayedElements():_.animatePathsGradually(a(a({},O),{},{speed:u})),C.globals.dataChanged&&I&&P&&_.animatePathsGradually(a(a({},O),{},{speed:p})),L}},{key:"drawPattern",value:function(t,e,i){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#a8a8a8",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=this.w,r=a.globals.dom.Paper.pattern(e,i,(function(a){"horizontalLines"===t?a.line(0,0,i,0).stroke({color:s,width:n+1}):"verticalLines"===t?a.line(0,0,0,e).stroke({color:s,width:n+1}):"slantedLines"===t?a.line(0,0,e,i).stroke({color:s,width:n}):"squares"===t?a.rect(e,i).fill("none").stroke({color:s,width:n}):"circles"===t&&a.circle(e).fill("none").stroke({color:s,width:n})}));return r}},{key:"drawGradient",value:function(t,e,i,s,n){var a,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=this.w;e.length<9&&0===e.indexOf("#")&&(e=y.hexToRgba(e,s)),i.length<9&&0===i.indexOf("#")&&(i=y.hexToRgba(i,n));var d=0,u=1,p=1,g=null;null!==o&&(d=void 0!==o[0]?o[0]/100:0,u=void 0!==o[1]?o[1]/100:1,p=void 0!==o[2]?o[2]/100:1,g=void 0!==o[3]?o[3]/100:null);var f=!("donut"!==c.config.chart.type&&"pie"!==c.config.chart.type&&"polarArea"!==c.config.chart.type&&"bubble"!==c.config.chart.type);if(a=null===l||0===l.length?c.globals.dom.Paper.gradient(f?"radial":"linear",(function(t){t.at(d,e,s),t.at(u,i,n),t.at(p,i,n),null!==g&&t.at(g,e,s)})):c.globals.dom.Paper.gradient(f?"radial":"linear",(function(t){(Array.isArray(l[h])?l[h]:l).forEach((function(e){t.at(e.offset/100,e.color,e.opacity)}))})),f){var m=c.globals.gridWidth/2,v=c.globals.gridHeight/2;"bubble"!==c.config.chart.type?a.attr({gradientUnits:"userSpaceOnUse",cx:m,cy:v,r:r}):a.attr({cx:.5,cy:.5,r:.8,fx:.2,fy:.2})}else"vertical"===t?a.from(0,0).to(0,1):"diagonal"===t?a.from(0,0).to(1,1):"horizontal"===t?a.from(0,1).to(1,1):"diagonal2"===t&&a.from(1,0).to(0,1);return a}},{key:"getTextBasedOnMaxWidth",value:function(t){var e=t.text,i=t.maxWidth,s=t.fontSize,n=t.fontFamily,a=this.getTextRects(e,s,n),r=a.width/e.length,o=Math.floor(i/r);return i<a.width?e.slice(0,o-3)+"...":e}},{key:"drawText",value:function(t){var e=this,i=t.x,s=t.y,n=t.text,r=t.textAnchor,o=t.fontSize,l=t.fontFamily,h=t.fontWeight,c=t.foreColor,d=t.opacity,u=t.maxWidth,p=t.cssClass,g=void 0===p?"":p,f=t.isPlainText,m=void 0===f||f,v=this.w;void 0===n&&(n="");var b=n;r||(r="start"),c&&c.length||(c=v.config.chart.foreColor),l=l||v.config.chart.fontFamily,h=h||"regular";var x,y={maxWidth:u,fontSize:o=o||"11px",fontFamily:l};return Array.isArray(n)?x=v.globals.dom.Paper.text((function(t){for(var i=0;i<n.length;i++)b=n[i],u&&(b=e.getTextBasedOnMaxWidth(a({text:n[i]},y))),0===i?t.tspan(b):t.tspan(b).newLine()})):(u&&(b=this.getTextBasedOnMaxWidth(a({text:n},y))),x=m?v.globals.dom.Paper.plain(n):v.globals.dom.Paper.text((function(t){return t.tspan(b)}))),x.attr({x:i,y:s,"text-anchor":r,"dominant-baseline":"auto","font-size":o,"font-family":l,"font-weight":h,fill:c,class:"apexcharts-text "+g}),x.node.style.fontFamily=l,x.node.style.opacity=d,x}},{key:"drawMarker",value:function(t,e,i){t=t||0;var s=i.pSize||0,n=null;if("square"===i.shape||"rect"===i.shape){var a=void 0===i.pRadius?s/2:i.pRadius;null!==e&&s||(s=0,a=0);var r=1.2*s+a,o=this.drawRect(r,r,r,r,a);o.attr({x:t-r/2,y:e-r/2,cx:t,cy:e,class:i.class?i.class:"",fill:i.pointFillColor,"fill-opacity":i.pointFillOpacity?i.pointFillOpacity:1,stroke:i.pointStrokeColor,"stroke-width":i.pointStrokeWidth?i.pointStrokeWidth:0,"stroke-opacity":i.pointStrokeOpacity?i.pointStrokeOpacity:1}),n=o}else"circle"!==i.shape&&i.shape||(y.isNumber(e)||(s=0,e=0),n=this.drawCircle(s,{cx:t,cy:e,class:i.class?i.class:"",stroke:i.pointStrokeColor,fill:i.pointFillColor,"fill-opacity":i.pointFillOpacity?i.pointFillOpacity:1,"stroke-width":i.pointStrokeWidth?i.pointStrokeWidth:0,"stroke-opacity":i.pointStrokeOpacity?i.pointStrokeOpacity:1}));return n}},{key:"pathMouseEnter",value:function(t,e){var i=this.w,s=new k(this.ctx),n=parseInt(t.node.getAttribute("index"),10),a=parseInt(t.node.getAttribute("j"),10);if("function"==typeof i.config.chart.events.dataPointMouseEnter&&i.config.chart.events.dataPointMouseEnter(e,this.ctx,{seriesIndex:n,dataPointIndex:a,w:i}),this.ctx.events.fireEvent("dataPointMouseEnter",[e,this.ctx,{seriesIndex:n,dataPointIndex:a,w:i}]),("none"===i.config.states.active.filter.type||"true"!==t.node.getAttribute("selected"))&&"none"!==i.config.states.hover.filter.type&&!i.globals.isTouchDevice){var r=i.config.states.hover.filter;s.applyFilter(t,n,r.type,r.value)}}},{key:"pathMouseLeave",value:function(t,e){var i=this.w,s=new k(this.ctx),n=parseInt(t.node.getAttribute("index"),10),a=parseInt(t.node.getAttribute("j"),10);"function"==typeof i.config.chart.events.dataPointMouseLeave&&i.config.chart.events.dataPointMouseLeave(e,this.ctx,{seriesIndex:n,dataPointIndex:a,w:i}),this.ctx.events.fireEvent("dataPointMouseLeave",[e,this.ctx,{seriesIndex:n,dataPointIndex:a,w:i}]),"none"!==i.config.states.active.filter.type&&"true"===t.node.getAttribute("selected")||"none"!==i.config.states.hover.filter.type&&s.getDefaultFilter(t,n)}},{key:"pathMouseDown",value:function(t,e){var i=this.w,s=new k(this.ctx),n=parseInt(t.node.getAttribute("index"),10),a=parseInt(t.node.getAttribute("j"),10),r="false";if("true"===t.node.getAttribute("selected")){if(t.node.setAttribute("selected","false"),i.globals.selectedDataPoints[n].indexOf(a)>-1){var o=i.globals.selectedDataPoints[n].indexOf(a);i.globals.selectedDataPoints[n].splice(o,1)}}else{if(!i.config.states.active.allowMultipleDataPointsSelection&&i.globals.selectedDataPoints.length>0){i.globals.selectedDataPoints=[];var l=i.globals.dom.Paper.select(".apexcharts-series path").members,h=i.globals.dom.Paper.select(".apexcharts-series circle, .apexcharts-series rect").members,c=function(t){Array.prototype.forEach.call(t,(function(t){t.node.setAttribute("selected","false"),s.getDefaultFilter(t,n)}))};c(l),c(h)}t.node.setAttribute("selected","true"),r="true",void 0===i.globals.selectedDataPoints[n]&&(i.globals.selectedDataPoints[n]=[]),i.globals.selectedDataPoints[n].push(a)}if("true"===r){var d=i.config.states.active.filter;if("none"!==d)s.applyFilter(t,n,d.type,d.value);else if("none"!==i.config.states.hover.filter&&!i.globals.isTouchDevice){var u=i.config.states.hover.filter;s.applyFilter(t,n,u.type,u.value)}}else"none"!==i.config.states.active.filter.type&&("none"===i.config.states.hover.filter.type||i.globals.isTouchDevice?s.getDefaultFilter(t,n):(u=i.config.states.hover.filter,s.applyFilter(t,n,u.type,u.value)));"function"==typeof i.config.chart.events.dataPointSelection&&i.config.chart.events.dataPointSelection(e,this.ctx,{selectedDataPoints:i.globals.selectedDataPoints,seriesIndex:n,dataPointIndex:a,w:i}),e&&this.ctx.events.fireEvent("dataPointSelection",[e,this.ctx,{selectedDataPoints:i.globals.selectedDataPoints,seriesIndex:n,dataPointIndex:a,w:i}])}},{key:"rotateAroundCenter",value:function(t){var e={};return t&&"function"==typeof t.getBBox&&(e=t.getBBox()),{x:e.x+e.width/2,y:e.y+e.height/2}}},{key:"getTextRects",value:function(t,e,i,s){var n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=this.w,r=this.drawText({x:-200,y:-200,text:t,textAnchor:"start",fontSize:e,fontFamily:i,foreColor:"#fff",opacity:0});s&&r.attr("transform",s),a.globals.dom.Paper.add(r);var o=r.bbox();return n||(o=r.node.getBoundingClientRect()),r.remove(),{width:o.width,height:o.height}}},{key:"placeTextWithEllipsis",value:function(t,e,i){if("function"==typeof t.getComputedTextLength&&(t.textContent=e,e.length>0&&t.getComputedTextLength()>=i/1.1)){for(var s=e.length-3;s>0;s-=3)if(t.getSubStringLength(0,s)<=i/1.1)return void(t.textContent=e.substring(0,s)+"...");t.textContent="."}}}],[{key:"setAttrs",value:function(t,e){for(var i in e)e.hasOwnProperty(i)&&t.setAttribute(i,e[i])}}]),t}(),S=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w}return h(t,[{key:"getStackedSeriesTotals",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=this.w,i=[];if(0===e.globals.series.length)return i;for(var s=0;s<e.globals.series[e.globals.maxValsInArrayIndex].length;s++){for(var n=0,a=0;a<e.globals.series.length;a++)void 0!==e.globals.series[a][s]&&-1===t.indexOf(a)&&(n+=e.globals.series[a][s]);i.push(n)}return i}},{key:"getSeriesTotalByIndex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===t?this.w.config.series.reduce((function(t,e){return t+e}),0):this.w.globals.series[t].reduce((function(t,e){return t+e}),0)}},{key:"isSeriesNull",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return 0===(null===t?this.w.config.series.filter((function(t){return null!==t})):this.w.config.series[t].data.filter((function(t){return null!==t}))).length}},{key:"seriesHaveSameValues",value:function(t){return this.w.globals.series[t].every((function(t,e,i){return t===i[0]}))}},{key:"getCategoryLabels",value:function(t){var e=this.w,i=t.slice();return e.config.xaxis.convertedCatToNumeric&&(i=t.map((function(t,i){return e.config.xaxis.labels.formatter(t-e.globals.minX+1)}))),i}},{key:"getLargestSeries",value:function(){var t=this.w;t.globals.maxValsInArrayIndex=t.globals.series.map((function(t){return t.length})).indexOf(Math.max.apply(Math,t.globals.series.map((function(t){return t.length}))))}},{key:"getLargestMarkerSize",value:function(){var t=this.w,e=0;return t.globals.markers.size.forEach((function(t){e=Math.max(e,t)})),t.config.markers.discrete&&t.config.markers.discrete.length&&t.config.markers.discrete.forEach((function(t){e=Math.max(e,t.size)})),e>0&&(e+=t.config.markers.hover.sizeOffset+1),t.globals.markers.largestSize=e,e}},{key:"getSeriesTotals",value:function(){var t=this.w;t.globals.seriesTotals=t.globals.series.map((function(t,e){var i=0;if(Array.isArray(t))for(var s=0;s<t.length;s++)i+=t[s];else i+=t;return i}))}},{key:"getSeriesTotalsXRange",value:function(t,e){var i=this.w;return i.globals.series.map((function(s,n){for(var a=0,r=0;r<s.length;r++)i.globals.seriesX[n][r]>t&&i.globals.seriesX[n][r]<e&&(a+=s[r]);return a}))}},{key:"getPercentSeries",value:function(){var t=this.w;t.globals.seriesPercent=t.globals.series.map((function(e,i){var s=[];if(Array.isArray(e))for(var n=0;n<e.length;n++){var a=t.globals.stackedSeriesTotals[n],r=0;a&&(r=100*e[n]/a),s.push(r)}else{var o=100*e/t.globals.seriesTotals.reduce((function(t,e){return t+e}),0);s.push(o)}return s}))}},{key:"getCalculatedRatios",value:function(){var t,e,i,s,n=this.w.globals,a=[],r=0,o=[],l=.1,h=0;if(n.yRange=[],n.isMultipleYAxis)for(var c=0;c<n.minYArr.length;c++)n.yRange.push(Math.abs(n.minYArr[c]-n.maxYArr[c])),o.push(0);else n.yRange.push(Math.abs(n.minY-n.maxY));n.xRange=Math.abs(n.maxX-n.minX),n.zRange=Math.abs(n.maxZ-n.minZ);for(var d=0;d<n.yRange.length;d++)a.push(n.yRange[d]/n.gridHeight);if(e=n.xRange/n.gridWidth,i=Math.abs(n.initialMaxX-n.initialMinX)/n.gridWidth,t=n.yRange/n.gridWidth,s=n.xRange/n.gridHeight,(r=n.zRange/n.gridHeight*16)||(r=1),n.minY!==Number.MIN_VALUE&&0!==Math.abs(n.minY)&&(n.hasNegs=!0),n.isMultipleYAxis){o=[];for(var u=0;u<a.length;u++)o.push(-n.minYArr[u]/a[u])}else o.push(-n.minY/a[0]),n.minY!==Number.MIN_VALUE&&0!==Math.abs(n.minY)&&(l=-n.minY/t,h=n.minX/e);return{yRatio:a,invertedYRatio:t,zRatio:r,xRatio:e,initialXRatio:i,invertedXRatio:s,baseLineInvertedY:l,baseLineY:o,baseLineX:h}}},{key:"getLogSeries",value:function(t){var e=this,i=this.w;return i.globals.seriesLog=t.map((function(t,s){return i.config.yaxis[s]&&i.config.yaxis[s].logarithmic?t.map((function(t){return null===t?null:e.getLogVal(i.config.yaxis[s].logBase,t,s)})):t})),i.globals.invalidLogScale?t:i.globals.seriesLog}},{key:"getBaseLog",value:function(t,e){return Math.log(e)/Math.log(t)}},{key:"getLogVal",value:function(t,e,i){if(0===e)return 0;var s=this.w,n=0===s.globals.minYArr[i]?-1:this.getBaseLog(t,s.globals.minYArr[i]),a=(0===s.globals.maxYArr[i]?0:this.getBaseLog(t,s.globals.maxYArr[i]))-n;return e<1?e/a:(this.getBaseLog(t,e)-n)/a}},{key:"getLogYRatios",value:function(t){var e=this,i=this.w,s=this.w.globals;return s.yLogRatio=t.slice(),s.logYRange=s.yRange.map((function(t,n){if(i.config.yaxis[n]&&e.w.config.yaxis[n].logarithmic){var a,r=-Number.MAX_VALUE,o=Number.MIN_VALUE;return s.seriesLog.forEach((function(t,e){t.forEach((function(t){i.config.yaxis[e]&&i.config.yaxis[e].logarithmic&&(r=Math.max(t,r),o=Math.min(t,o))}))})),a=Math.pow(s.yRange[n],Math.abs(o-r)/s.yRange[n]),s.yLogRatio[n]=a/s.gridHeight,a}})),s.invalidLogScale?t.slice():s.yLogRatio}}],[{key:"checkComboSeries",value:function(t){var e=!1,i=0,s=0;return t.length&&void 0!==t[0].type&&t.forEach((function(t){"bar"!==t.type&&"column"!==t.type&&"candlestick"!==t.type&&"boxPlot"!==t.type||i++,void 0!==t.type&&s++})),s>0&&(e=!0),{comboBarCount:i,comboCharts:e}}},{key:"extendArrayProps",value:function(t,e,i){return e.yaxis&&(e=t.extendYAxis(e,i)),e.annotations&&(e.annotations.yaxis&&(e=t.extendYAxisAnnotations(e)),e.annotations.xaxis&&(e=t.extendXAxisAnnotations(e)),e.annotations.points&&(e=t.extendPointAnnotations(e))),e}}]),t}(),_=function(){function t(e){o(this,t),this.w=e.w,this.annoCtx=e}return h(t,[{key:"setOrientations",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.w;if("vertical"===t.label.orientation){var s=null!==e?e:0,n=i.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(s,"']"));if(null!==n){var a=n.getBoundingClientRect();n.setAttribute("x",parseFloat(n.getAttribute("x"))-a.height+4),"top"===t.label.position?n.setAttribute("y",parseFloat(n.getAttribute("y"))+a.width):n.setAttribute("y",parseFloat(n.getAttribute("y"))-a.width);var r=this.annoCtx.graphics.rotateAroundCenter(n),o=r.x,l=r.y;n.setAttribute("transform","rotate(-90 ".concat(o," ").concat(l,")"))}}}},{key:"addBackgroundToAnno",value:function(t,e){var i=this.w;if(!t||void 0===e.label.text||void 0!==e.label.text&&!String(e.label.text).trim())return null;var s=i.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),n=t.getBoundingClientRect(),a=e.label.style.padding.left,r=e.label.style.padding.right,o=e.label.style.padding.top,l=e.label.style.padding.bottom;"vertical"===e.label.orientation&&(o=e.label.style.padding.left,l=e.label.style.padding.right,a=e.label.style.padding.top,r=e.label.style.padding.bottom);var h=n.left-s.left-a,c=n.top-s.top-o,d=this.annoCtx.graphics.drawRect(h-i.globals.barPadForNumericAxis,c,n.width+a+r,n.height+o+l,e.label.borderRadius,e.label.style.background,1,e.label.borderWidth,e.label.borderColor,0);return e.id&&d.node.classList.add(e.id),d}},{key:"annotationsBackground",value:function(){var t=this,e=this.w,i=function(i,s,n){var a=e.globals.dom.baseEl.querySelector(".apexcharts-".concat(n,"-annotations .apexcharts-").concat(n,"-annotation-label[rel='").concat(s,"']"));if(a){var r=a.parentNode,o=t.addBackgroundToAnno(a,i);o&&(r.insertBefore(o.node,a),i.label.mouseEnter&&o.node.addEventListener("mouseenter",i.label.mouseEnter.bind(t,i)),i.label.mouseLeave&&o.node.addEventListener("mouseleave",i.label.mouseLeave.bind(t,i)),i.label.click&&o.node.addEventListener("click",i.label.click.bind(t,i)))}};e.config.annotations.xaxis.map((function(t,e){i(t,e,"xaxis")})),e.config.annotations.yaxis.map((function(t,e){i(t,e,"yaxis")})),e.config.annotations.points.map((function(t,e){i(t,e,"point")}))}},{key:"getY1Y2",value:function(t,e){var i,s="y1"===t?e.y:e.y2,n=this.w;if(this.annoCtx.invertAxis){var a=n.globals.labels.indexOf(s);n.config.xaxis.convertedCatToNumeric&&(a=n.globals.categoryLabels.indexOf(s));var r=n.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child("+(a+1)+")");r&&(i=parseFloat(r.getAttribute("y")))}else{var o;o=n.config.yaxis[e.yAxisIndex].logarithmic?(s=new S(this.annoCtx.ctx).getLogVal(s,e.yAxisIndex))/n.globals.yLogRatio[e.yAxisIndex]:(s-n.globals.minYArr[e.yAxisIndex])/(n.globals.yRange[e.yAxisIndex]/n.globals.gridHeight),i=n.globals.gridHeight-o,!e.marker||void 0!==e.y&&null!==e.y||(i=0),n.config.yaxis[e.yAxisIndex]&&n.config.yaxis[e.yAxisIndex].reversed&&(i=o)}return"string"==typeof s&&s.indexOf("px")>-1&&(i=parseFloat(s)),i}},{key:"getX1X2",value:function(t,e){var i=this.w,s=this.annoCtx.invertAxis?i.globals.minY:i.globals.minX,n=this.annoCtx.invertAxis?i.globals.maxY:i.globals.maxX,a=this.annoCtx.invertAxis?i.globals.yRange[0]:i.globals.xRange,r=(e.x-s)/(a/i.globals.gridWidth);this.annoCtx.inversedReversedAxis&&(r=(n-e.x)/(a/i.globals.gridWidth)),"category"!==i.config.xaxis.type&&!i.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||i.globals.dataFormatXNumeric||(r=this.getStringX(e.x));var o=(e.x2-s)/(a/i.globals.gridWidth);return this.annoCtx.inversedReversedAxis&&(o=(n-e.x2)/(a/i.globals.gridWidth)),"category"!==i.config.xaxis.type&&!i.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||i.globals.dataFormatXNumeric||(o=this.getStringX(e.x2)),void 0!==e.x&&null!==e.x||!e.marker||(r=i.globals.gridWidth),"x1"===t&&"string"==typeof e.x&&e.x.indexOf("px")>-1&&(r=parseFloat(e.x)),"x2"===t&&"string"==typeof e.x2&&e.x2.indexOf("px")>-1&&(o=parseFloat(e.x2)),"x1"===t?r:o}},{key:"getStringX",value:function(t){var e=this.w,i=t;e.config.xaxis.convertedCatToNumeric&&e.globals.categoryLabels.length&&(t=e.globals.categoryLabels.indexOf(t)+1);var s=e.globals.labels.indexOf(t),n=e.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child("+(s+1)+")");return n&&(i=parseFloat(n.getAttribute("x"))),i}}]),t}(),A=function(){function t(e){o(this,t),this.w=e.w,this.annoCtx=e,this.invertAxis=this.annoCtx.invertAxis,this.helpers=new _(this.annoCtx)}return h(t,[{key:"addXaxisAnnotation",value:function(t,e,i){var s,n=this.w,a=this.helpers.getX1X2("x1",t),r=t.label.text,o=t.strokeDashArray;if(y.isNumber(a)){if(null===t.x2||void 0===t.x2){var l=this.annoCtx.graphics.drawLine(a+t.offsetX,0+t.offsetY,a+t.offsetX,n.globals.gridHeight+t.offsetY,t.borderColor,o,t.borderWidth);e.appendChild(l.node),t.id&&l.node.classList.add(t.id)}else{if((s=this.helpers.getX1X2("x2",t))<a){var h=a;a=s,s=h}var c=this.annoCtx.graphics.drawRect(a+t.offsetX,0+t.offsetY,s-a,n.globals.gridHeight+t.offsetY,0,t.fillColor,t.opacity,1,t.borderColor,o);c.node.classList.add("apexcharts-annotation-rect"),c.attr("clip-path","url(#gridRectMask".concat(n.globals.cuid,")")),e.appendChild(c.node),t.id&&c.node.classList.add(t.id)}var d=this.annoCtx.graphics.getTextRects(r,parseFloat(t.label.style.fontSize)),u="top"===t.label.position?4:"center"===t.label.position?n.globals.gridHeight/2+("vertical"===t.label.orientation?d.width/2:0):n.globals.gridHeight,p=this.annoCtx.graphics.drawText({x:a+t.label.offsetX,y:u+t.label.offsetY-("vertical"===t.label.orientation?"top"===t.label.position?d.width/2-12:-d.width/2:0),text:r,textAnchor:t.label.textAnchor,fontSize:t.label.style.fontSize,fontFamily:t.label.style.fontFamily,fontWeight:t.label.style.fontWeight,foreColor:t.label.style.color,cssClass:"apexcharts-xaxis-annotation-label ".concat(t.label.style.cssClass," ").concat(t.id?t.id:"")});p.attr({rel:i}),e.appendChild(p.node),this.annoCtx.helpers.setOrientations(t,i)}}},{key:"drawXAxisAnnotations",value:function(){var t=this,e=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return e.config.annotations.xaxis.map((function(e,s){t.addXaxisAnnotation(e,i.node,s)})),i}}]),t}(),I=function(){function t(e){o(this,t),this.w=e.w,this.annoCtx=e,this.helpers=new _(this.annoCtx)}return h(t,[{key:"addYaxisAnnotation",value:function(t,e,i){var s,n=this.w,a=t.strokeDashArray,r=this.helpers.getY1Y2("y1",t),o=t.label.text;if(null===t.y2||void 0===t.y2){var l=this.annoCtx.graphics.drawLine(0+t.offsetX,r+t.offsetY,this._getYAxisAnnotationWidth(t),r+t.offsetY,t.borderColor,a,t.borderWidth);e.appendChild(l.node),t.id&&l.node.classList.add(t.id)}else{if((s=this.helpers.getY1Y2("y2",t))>r){var h=r;r=s,s=h}var c=this.annoCtx.graphics.drawRect(0+t.offsetX,s+t.offsetY,this._getYAxisAnnotationWidth(t),r-s,0,t.fillColor,t.opacity,1,t.borderColor,a);c.node.classList.add("apexcharts-annotation-rect"),c.attr("clip-path","url(#gridRectMask".concat(n.globals.cuid,")")),e.appendChild(c.node),t.id&&c.node.classList.add(t.id)}var d="right"===t.label.position?n.globals.gridWidth:"center"===t.label.position?n.globals.gridWidth/2:0,u=this.annoCtx.graphics.drawText({x:d+t.label.offsetX,y:(null!=s?s:r)+t.label.offsetY-3,text:o,textAnchor:t.label.textAnchor,fontSize:t.label.style.fontSize,fontFamily:t.label.style.fontFamily,fontWeight:t.label.style.fontWeight,foreColor:t.label.style.color,cssClass:"apexcharts-yaxis-annotation-label ".concat(t.label.style.cssClass," ").concat(t.id?t.id:"")});u.attr({rel:i}),e.appendChild(u.node)}},{key:"_getYAxisAnnotationWidth",value:function(t){var e=this.w;return e.globals.gridWidth,(t.width.indexOf("%")>-1?e.globals.gridWidth*parseInt(t.width,10)/100:parseInt(t.width,10))+t.offsetX}},{key:"drawYAxisAnnotations",value:function(){var t=this,e=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return e.config.annotations.yaxis.map((function(e,s){t.addYaxisAnnotation(e,i.node,s)})),i}}]),t}(),P=function(){function t(e){o(this,t),this.w=e.w,this.annoCtx=e,this.helpers=new _(this.annoCtx)}return h(t,[{key:"addPointAnnotation",value:function(t,e,i){this.w;var s=this.helpers.getX1X2("x1",t),n=this.helpers.getY1Y2("y1",t);if(y.isNumber(s)){var a={pSize:t.marker.size,pointStrokeWidth:t.marker.strokeWidth,pointFillColor:t.marker.fillColor,pointStrokeColor:t.marker.strokeColor,shape:t.marker.shape,pRadius:t.marker.radius,class:"apexcharts-point-annotation-marker ".concat(t.marker.cssClass," ").concat(t.id?t.id:"")},r=this.annoCtx.graphics.drawMarker(s+t.marker.offsetX,n+t.marker.offsetY,a);e.appendChild(r.node);var o=t.label.text?t.label.text:"",l=this.annoCtx.graphics.drawText({x:s+t.label.offsetX,y:n+t.label.offsetY-t.marker.size-parseFloat(t.label.style.fontSize)/1.6,text:o,textAnchor:t.label.textAnchor,fontSize:t.label.style.fontSize,fontFamily:t.label.style.fontFamily,fontWeight:t.label.style.fontWeight,foreColor:t.label.style.color,cssClass:"apexcharts-point-annotation-label ".concat(t.label.style.cssClass," ").concat(t.id?t.id:"")});if(l.attr({rel:i}),e.appendChild(l.node),t.customSVG.SVG){var h=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+t.customSVG.cssClass});h.attr({transform:"translate(".concat(s+t.customSVG.offsetX,", ").concat(n+t.customSVG.offsetY,")")}),h.node.innerHTML=t.customSVG.SVG,e.appendChild(h.node)}if(t.image.path){var c=t.image.width?t.image.width:20,d=t.image.height?t.image.height:20;r=this.annoCtx.addImage({x:s+t.image.offsetX-c/2,y:n+t.image.offsetY-d/2,width:c,height:d,path:t.image.path,appendTo:".apexcharts-point-annotations"})}t.mouseEnter&&r.node.addEventListener("mouseenter",t.mouseEnter.bind(this,t)),t.mouseLeave&&r.node.addEventListener("mouseleave",t.mouseLeave.bind(this,t)),t.click&&r.node.addEventListener("click",t.click.bind(this,t))}}},{key:"drawPointAnnotations",value:function(){var t=this,e=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return e.config.annotations.points.map((function(e,s){t.addPointAnnotation(e,i.node,s)})),i}}]),t}(),T={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}},E=function(){function t(){o(this,t),this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,logBase:10,tickAmount:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:-90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={id:void 0,x:0,y:null,yAxisIndex:0,seriesIndex:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,radius:2,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={id:void 0,y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,width:"100%",yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={id:void 0,x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2}}return h(t,[{key:"init",value:function(){return{annotations:{position:"front",yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"transparent",locales:[T],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.35},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,mouseLeave:void 0,xAxisLabelClick:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,beforeResetZoom:void 0,zoomed:void 0,scrolled:void 0,brushScrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,redrawOnWindowResize:!0,id:void 0,group:void 0,offsetX:0,offsetY:0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0},stacked:!1,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:void 0,columnDelimiter:",",headerCategory:"category",headerValue:"value",dateFormatter:function(t){return new Date(t).toDateString()}},png:{filename:void 0},svg:{filename:void 0}},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},plotOptions:{area:{fillTo:"origin"},bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,borderRadius:0,borderRadiusApplication:"around",borderRadiusWhenStacked:"last",rangeBarOverlap:!0,rangeBarGroupRows:!1,colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal",total:{enabled:!1,formatter:void 0,offsetX:0,offsetY:0,style:{color:"#373d3f",fontSize:"12px",fontFamily:void 0,fontWeight:600}}}},bubble:{zScaling:!0,minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},boxPlot:{colors:{upper:"#00E396",lower:"#008FFB"}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},treemap:{enableShades:!0,shadeIntensity:.5,distributed:!1,reverseNegativeShade:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter:function(t){return t}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter:function(t){return t+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter:function(t){return t.globals.seriesTotals.reduce((function(t,e){return t+e}),0)/t.globals.series.length+"%"}}}},pie:{customScale:1,offsetX:0,offsetY:0,startAngle:0,endAngle:360,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(t){return t}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter:function(t){return t}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter:function(t){return t.globals.seriesTotals.reduce((function(t,e){return t+e}),0)}}}}},polarArea:{rings:{strokeWidth:1,strokeColor:"#e8e8e8"},spokes:{strokeWidth:1,connectorColors:"#e8e8e8"}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeWidth:1,strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(t){return null!==t?t:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},forecastDataPoints:{count:0,fillOpacity:.5,strokeWidth:void 0,dashArray:4},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:4,customLegendItems:[],labels:{colors:void 0,useSeriesColors:!1},markers:{width:12,height:12,strokeWidth:0,fillColors:void 0,strokeColor:"#fff",radius:12,customHTML:void 0,offsetX:0,offsetY:0,onClick:void 0},itemMargin:{horizontal:5,vertical:2},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",width:8,height:8,radius:2,offsetX:0,offsetY:0,onClick:void 0,onDblClick:void 0,showNullDataPoints:!0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{normal:{filter:{type:"none",value:0}},hover:{filter:{type:"lighten",value:.1}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken",value:.5}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0,fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]}}},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",cssClass:"",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter:function(t){return t?t+": ":""}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,offsetX:0,offsetY:0,overwriteCategories:void 0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss",second:"HH:mm:ss"}},group:{groups:[],style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,decimalsInFloat:void 0,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.4}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"light",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}]),t}(),L=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w,this.graphics=new C(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new _(this),this.xAxisAnnotations=new A(this),this.yAxisAnnotations=new I(this),this.pointsAnnotations=new P(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}return h(t,[{key:"drawAxesAnnotations",value:function(){var t=this.w;if(t.globals.axisCharts){for(var e=this.yAxisAnnotations.drawYAxisAnnotations(),i=this.xAxisAnnotations.drawXAxisAnnotations(),s=this.pointsAnnotations.drawPointAnnotations(),n=t.config.chart.animations.enabled,a=[e,i,s],r=[i.node,e.node,s.node],o=0;o<3;o++)t.globals.dom.elGraphical.add(a[o]),!n||t.globals.resized||t.globals.dataChanged||"scatter"!==t.config.chart.type&&"bubble"!==t.config.chart.type&&t.globals.dataPoints>1&&r[o].classList.add("apexcharts-element-hidden"),t.globals.delayedElements.push({el:r[o],index:0});this.helpers.annotationsBackground()}}},{key:"drawImageAnnos",value:function(){var t=this;this.w.config.annotations.images.map((function(e,i){t.addImage(e,i)}))}},{key:"drawTextAnnos",value:function(){var t=this;this.w.config.annotations.texts.map((function(e,i){t.addText(e,i)}))}},{key:"addXaxisAnnotation",value:function(t,e,i){this.xAxisAnnotations.addXaxisAnnotation(t,e,i)}},{key:"addYaxisAnnotation",value:function(t,e,i){this.yAxisAnnotations.addYaxisAnnotation(t,e,i)}},{key:"addPointAnnotation",value:function(t,e,i){this.pointsAnnotations.addPointAnnotation(t,e,i)}},{key:"addText",value:function(t,e){var i=t.x,s=t.y,n=t.text,a=t.textAnchor,r=t.foreColor,o=t.fontSize,l=t.fontFamily,h=t.fontWeight,c=t.cssClass,d=t.backgroundColor,u=t.borderWidth,p=t.strokeDashArray,g=t.borderRadius,f=t.borderColor,m=t.appendTo,v=void 0===m?".apexcharts-annotations":m,b=t.paddingLeft,x=void 0===b?4:b,y=t.paddingRight,w=void 0===y?4:y,k=t.paddingBottom,C=void 0===k?2:k,S=t.paddingTop,_=void 0===S?2:S,A=this.w,I=this.graphics.drawText({x:i,y:s,text:n,textAnchor:a||"start",fontSize:o||"12px",fontWeight:h||"regular",fontFamily:l||A.config.chart.fontFamily,foreColor:r||A.config.chart.foreColor,cssClass:c}),P=A.globals.dom.baseEl.querySelector(v);P&&P.appendChild(I.node);var T=I.bbox();if(n){var E=this.graphics.drawRect(T.x-x,T.y-_,T.width+x+w,T.height+C+_,g,d||"transparent",1,u,f,p);P.insertBefore(E.node,I.node)}}},{key:"addImage",value:function(t,e){var i=this.w,s=t.path,n=t.x,a=void 0===n?0:n,r=t.y,o=void 0===r?0:r,l=t.width,h=void 0===l?20:l,c=t.height,d=void 0===c?20:c,u=t.appendTo,p=void 0===u?".apexcharts-annotations":u,g=i.globals.dom.Paper.image(s);g.size(h,d).move(a,o);var f=i.globals.dom.baseEl.querySelector(p);return f&&f.appendChild(g.node),g}},{key:"addXaxisAnnotationExternal",value:function(t,e,i){return this.addAnnotationExternal({params:t,pushToMemory:e,context:i,type:"xaxis",contextMethod:i.addXaxisAnnotation}),i}},{key:"addYaxisAnnotationExternal",value:function(t,e,i){return this.addAnnotationExternal({params:t,pushToMemory:e,context:i,type:"yaxis",contextMethod:i.addYaxisAnnotation}),i}},{key:"addPointAnnotationExternal",value:function(t,e,i){return void 0===this.invertAxis&&(this.invertAxis=i.w.globals.isBarHorizontal),this.addAnnotationExternal({params:t,pushToMemory:e,context:i,type:"point",contextMethod:i.addPointAnnotation}),i}},{key:"addAnnotationExternal",value:function(t){var e=t.params,i=t.pushToMemory,s=t.context,n=t.type,a=t.contextMethod,r=s,o=r.w,l=o.globals.dom.baseEl.querySelector(".apexcharts-".concat(n,"-annotations")),h=l.childNodes.length+1,c=new E,d=Object.assign({},"xaxis"===n?c.xAxisAnnotation:"yaxis"===n?c.yAxisAnnotation:c.pointAnnotation),u=y.extend(d,e);switch(n){case"xaxis":this.addXaxisAnnotation(u,l,h);break;case"yaxis":this.addYaxisAnnotation(u,l,h);break;case"point":this.addPointAnnotation(u,l,h)}var p=o.globals.dom.baseEl.querySelector(".apexcharts-".concat(n,"-annotations .apexcharts-").concat(n,"-annotation-label[rel='").concat(h,"']")),g=this.helpers.addBackgroundToAnno(p,u);return g&&l.insertBefore(g.node,p),i&&o.globals.memory.methodsToExec.push({context:r,id:u.id?u.id:y.randomId(),method:a,label:"addAnnotation",params:e}),s}},{key:"clearAnnotations",value:function(t){var e=t.w,i=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations");e.globals.memory.methodsToExec.map((function(t,i){"addText"!==t.label&&"addAnnotation"!==t.label||e.globals.memory.methodsToExec.splice(i,1)})),i=y.listToArray(i),Array.prototype.forEach.call(i,(function(t){for(;t.firstChild;)t.removeChild(t.firstChild)}))}},{key:"removeAnnotation",value:function(t,e){var i=t.w,s=i.globals.dom.baseEl.querySelectorAll(".".concat(e));s&&(i.globals.memory.methodsToExec.map((function(t,s){t.id===e&&i.globals.memory.methodsToExec.splice(s,1)})),Array.prototype.forEach.call(s,(function(t){t.parentElement.removeChild(t)})))}}]),t}(),M=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}return h(t,[{key:"isValidDate",value:function(t){return!isNaN(this.parseDate(t))}},{key:"getTimeStamp",value:function(t){return Date.parse(t)?this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(t).toISOString().substr(0,25)).getTime():new Date(t).getTime():t}},{key:"getDate",value:function(t){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(t).toUTCString()):new Date(t)}},{key:"parseDate",value:function(t){var e=Date.parse(t);if(!isNaN(e))return this.getTimeStamp(t);var i=Date.parse(t.replace(/-/g,"/").replace(/[a-z]+/gi," "));return this.getTimeStamp(i)}},{key:"parseDateWithTimezone",value:function(t){return Date.parse(t.replace(/-/g,"/").replace(/[a-z]+/gi," "))}},{key:"formatDate",value:function(t,e){var i=this.w.globals.locale,s=this.w.config.xaxis.labels.datetimeUTC,n=["\0"].concat(v(i.months)),a=[""].concat(v(i.shortMonths)),r=[""].concat(v(i.days)),o=[""].concat(v(i.shortDays));function l(t,e){var i=t+"";for(e=e||2;i.length<e;)i="0"+i;return i}var h=s?t.getUTCFullYear():t.getFullYear();e=(e=(e=e.replace(/(^|[^\\])yyyy+/g,"$1"+h)).replace(/(^|[^\\])yy/g,"$1"+h.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+h);var c=(s?t.getUTCMonth():t.getMonth())+1;e=(e=(e=(e=e.replace(/(^|[^\\])MMMM+/g,"$1"+n[0])).replace(/(^|[^\\])MMM/g,"$1"+a[0])).replace(/(^|[^\\])MM/g,"$1"+l(c))).replace(/(^|[^\\])M/g,"$1"+c);var d=s?t.getUTCDate():t.getDate();e=(e=(e=(e=e.replace(/(^|[^\\])dddd+/g,"$1"+r[0])).replace(/(^|[^\\])ddd/g,"$1"+o[0])).replace(/(^|[^\\])dd/g,"$1"+l(d))).replace(/(^|[^\\])d/g,"$1"+d);var u=s?t.getUTCHours():t.getHours(),p=u>12?u-12:0===u?12:u;e=(e=(e=(e=e.replace(/(^|[^\\])HH+/g,"$1"+l(u))).replace(/(^|[^\\])H/g,"$1"+u)).replace(/(^|[^\\])hh+/g,"$1"+l(p))).replace(/(^|[^\\])h/g,"$1"+p);var g=s?t.getUTCMinutes():t.getMinutes();e=(e=e.replace(/(^|[^\\])mm+/g,"$1"+l(g))).replace(/(^|[^\\])m/g,"$1"+g);var f=s?t.getUTCSeconds():t.getSeconds();e=(e=e.replace(/(^|[^\\])ss+/g,"$1"+l(f))).replace(/(^|[^\\])s/g,"$1"+f);var m=s?t.getUTCMilliseconds():t.getMilliseconds();e=e.replace(/(^|[^\\])fff+/g,"$1"+l(m,3)),m=Math.round(m/10),e=e.replace(/(^|[^\\])ff/g,"$1"+l(m)),m=Math.round(m/10);var b=u<12?"AM":"PM";e=(e=(e=e.replace(/(^|[^\\])f/g,"$1"+m)).replace(/(^|[^\\])TT+/g,"$1"+b)).replace(/(^|[^\\])T/g,"$1"+b.charAt(0));var x=b.toLowerCase();e=(e=e.replace(/(^|[^\\])tt+/g,"$1"+x)).replace(/(^|[^\\])t/g,"$1"+x.charAt(0));var y=-t.getTimezoneOffset(),w=s||!y?"Z":y>0?"+":"-";if(!s){var k=(y=Math.abs(y))%60;w+=l(Math.floor(y/60))+":"+l(k)}e=e.replace(/(^|[^\\])K/g,"$1"+w);var C=(s?t.getUTCDay():t.getDay())+1;return(e=(e=(e=(e=e.replace(new RegExp(r[0],"g"),r[C])).replace(new RegExp(o[0],"g"),o[C])).replace(new RegExp(n[0],"g"),n[c])).replace(new RegExp(a[0],"g"),a[c])).replace(/\\(.)/g,"$1")}},{key:"getTimeUnitsfromTimestamp",value:function(t,e,i){var s=this.w;void 0!==s.config.xaxis.min&&(t=s.config.xaxis.min),void 0!==s.config.xaxis.max&&(e=s.config.xaxis.max);var n=this.getDate(t),a=this.getDate(e),r=this.formatDate(n,"yyyy MM dd HH mm ss fff").split(" "),o=this.formatDate(a,"yyyy MM dd HH mm ss fff").split(" ");return{minMillisecond:parseInt(r[6],10),maxMillisecond:parseInt(o[6],10),minSecond:parseInt(r[5],10),maxSecond:parseInt(o[5],10),minMinute:parseInt(r[4],10),maxMinute:parseInt(o[4],10),minHour:parseInt(r[3],10),maxHour:parseInt(o[3],10),minDate:parseInt(r[2],10),maxDate:parseInt(o[2],10),minMonth:parseInt(r[1],10)-1,maxMonth:parseInt(o[1],10)-1,minYear:parseInt(r[0],10),maxYear:parseInt(o[0],10)}}},{key:"isLeapYear",value:function(t){return t%4==0&&t%100!=0||t%400==0}},{key:"calculcateLastDaysOfMonth",value:function(t,e,i){return this.determineDaysOfMonths(t,e)-i}},{key:"determineDaysOfYear",value:function(t){var e=365;return this.isLeapYear(t)&&(e=366),e}},{key:"determineRemainingDaysOfYear",value:function(t,e,i){var s=this.daysCntOfYear[e]+i;return e>1&&this.isLeapYear()&&s++,s}},{key:"determineDaysOfMonths",value:function(t,e){var i=30;switch(t=y.monthMod(t),!0){case this.months30.indexOf(t)>-1:2===t&&(i=this.isLeapYear(e)?29:28);break;case this.months31.indexOf(t)>-1:default:i=31}return i}}]),t}(),O=function(t){var e,i=t.ctx,s=t.seriesIndex,n=t.dataPointIndex,a=t.y1,r=t.y2,o=t.w,l=o.globals.seriesRangeStart[s][n],h=o.globals.seriesRangeEnd[s][n],c=o.globals.labels[n],d=o.config.series[s].name?o.config.series[s].name:"",u=o.config.tooltip.y.formatter,p=o.config.tooltip.y.title.formatter,g={w:o,seriesIndex:s,dataPointIndex:n,start:l,end:h};"function"==typeof p&&(d=p(d,g)),null!==(e=o.config.series[s].data[n])&&void 0!==e&&e.x&&(c=o.config.series[s].data[n].x+":"),"function"==typeof u&&(c=u(c,g)),Number.isFinite(a)&&Number.isFinite(r)&&(l=a,h=r);var f="",m="",v=o.globals.colors[s];if(void 0===o.config.tooltip.x.formatter)if("datetime"===o.config.xaxis.type){var b=new M(i);f=b.formatDate(b.getDate(l),o.config.tooltip.x.format),m=b.formatDate(b.getDate(h),o.config.tooltip.x.format)}else f=l,m=h;else f=o.config.tooltip.x.formatter(l),m=o.config.tooltip.x.formatter(h);return{start:l,end:h,startVal:f,endVal:m,ylabel:c,color:v,seriesName:d}},D=function(t){var e=t.color,i=t.seriesName,s=t.ylabel,n=t.start,a=t.end,r=t.seriesIndex,o=t.dataPointIndex,l=t.ctx.tooltip.tooltipLabels.getFormatters(r);n=l.yLbFormatter(n),a=l.yLbFormatter(a);var h=l.yLbFormatter(t.w.globals.series[r][o]),c='<span class="value start-value">\n  '.concat(n,'\n  </span> <span class="separator">-</span> <span class="value end-value">\n  ').concat(a,"\n  </span>");return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+e+'">'+(i||"")+'</span></div><div> <span class="category">'+s+" </span> "+(t.w.globals.comboCharts?"rangeArea"===t.w.config.series[r].type||"rangeBar"===t.w.config.series[r].type?c:"<span>".concat(h,"</span>"):c)+" </div></div>"},R=function(){function t(e){o(this,t),this.opts=e}return h(t,[{key:"line",value:function(){return{chart:{animations:{easing:"swing"}},dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}},{key:"sparkline",value:function(t){return this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0,y.extend(t,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}},{key:"bar",value:function(){return{chart:{stacked:!1,animations:{easing:"swing"}},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"round"},fill:{opacity:.85},legend:{markers:{shape:"square",radius:2,size:8}},tooltip:{shared:!1,intersect:!0},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}},{key:"candlestick",value:function(){var t=this;return{stroke:{width:1,colors:["#333"]},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(e){var i=e.seriesIndex,s=e.dataPointIndex,n=e.w;return t._getBoxTooltip(n,i,s,["Open","High","","Low","Close"],"candlestick")}},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}},{key:"boxPlot",value:function(){var t=this;return{chart:{animations:{dynamicAnimation:{enabled:!1}}},stroke:{width:1,colors:["#24292e"]},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(e){var i=e.seriesIndex,s=e.dataPointIndex,n=e.w;return t._getBoxTooltip(n,i,s,["Minimum","Q1","Median","Q3","Maximum"],"boxPlot")}},markers:{size:5,strokeWidth:1,strokeColors:"#111"},xaxis:{crosshairs:{width:1}}}}},{key:"rangeBar",value:function(){return{stroke:{width:0,lineCap:"square"},plotOptions:{bar:{borderRadius:0,dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter:function(t,e){e.ctx;var i=e.seriesIndex,s=e.dataPointIndex,n=e.w,a=function(){var t=n.globals.seriesRangeStart[i][s];return n.globals.seriesRangeEnd[i][s]-t};return n.globals.comboCharts?"rangeBar"===n.config.series[i].type||"rangeArea"===n.config.series[i].type?a():t:a()},background:{enabled:!1},style:{colors:["#fff"]}},tooltip:{shared:!1,followCursor:!0,custom:function(t){return t.w.config.plotOptions&&t.w.config.plotOptions.bar&&t.w.config.plotOptions.bar.horizontal?function(t){var e=O(t),i=e.color,s=e.seriesName,n=e.ylabel,r=e.startVal,o=e.endVal;return D(a(a({},t),{},{color:i,seriesName:s,ylabel:n,start:r,end:o}))}(t):function(t){var e=O(t),i=e.color,s=e.seriesName,n=e.ylabel,r=e.start,o=e.end;return D(a(a({},t),{},{color:i,seriesName:s,ylabel:n,start:r,end:o}))}(t)}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}},{key:"area",value:function(){return{stroke:{width:4,fill:{type:"solid",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}}},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}},{key:"rangeArea",value:function(){return{stroke:{curve:"straight",width:0},fill:{type:"solid",opacity:.6},markers:{size:0},states:{hover:{filter:{type:"none"}},active:{filter:{type:"none"}}},tooltip:{intersect:!1,shared:!0,followCursor:!0,custom:function(t){return function(t){var e=O(t),i=e.color,s=e.seriesName,n=e.ylabel,r=e.start,o=e.end;return D(a(a({},t),{},{color:i,seriesName:s,ylabel:n,start:r,end:o}))}(t)}}}}},{key:"brush",value:function(t){return y.extend(t,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}},{key:"stacked100",value:function(t){t.dataLabels=t.dataLabels||{},t.dataLabels.formatter=t.dataLabels.formatter||void 0;var e=t.dataLabels.formatter;return t.yaxis.forEach((function(e,i){t.yaxis[i].min=0,t.yaxis[i].max=100})),"bar"===t.chart.type&&(t.dataLabels.formatter=e||function(t){return"number"==typeof t&&t?t.toFixed(0)+"%":t}),t}},{key:"convertCatToNumeric",value:function(t){return t.xaxis.convertedCatToNumeric=!0,t}},{key:"convertCatToNumericXaxis",value:function(t,e,i){t.xaxis.type="numeric",t.xaxis.labels=t.xaxis.labels||{},t.xaxis.labels.formatter=t.xaxis.labels.formatter||function(t){return y.isNumber(t)?Math.floor(t):t};var s=t.xaxis.labels.formatter,n=t.xaxis.categories&&t.xaxis.categories.length?t.xaxis.categories:t.labels;return i&&i.length&&(n=i.map((function(t){return Array.isArray(t)?t:String(t)}))),n&&n.length&&(t.xaxis.labels.formatter=function(t){return y.isNumber(t)?s(n[Math.floor(t)-1]):s(t)}),t.xaxis.categories=[],t.labels=[],t.xaxis.tickAmount=t.xaxis.tickAmount||"dataPoints",t}},{key:"bubble",value:function(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}},{key:"scatter",value:function(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}},{key:"heatmap",value:function(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square",size:10,offsetY:2}},grid:{padding:{right:20}}}}},{key:"treemap",value:function(){return{chart:{zoom:{enabled:!1}},dataLabels:{style:{fontSize:14,fontWeight:600,colors:["#fff"]}},stroke:{show:!0,width:2,colors:["#fff"]},legend:{show:!1},fill:{gradient:{stops:[0,100]}},tooltip:{followCursor:!0,x:{show:!1}},grid:{padding:{left:0,right:0}},xaxis:{crosshairs:{show:!1},tooltip:{enabled:!1}}}}},{key:"pie",value:function(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:function(t){return t.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"donut",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(t){return t.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"polarArea",value:function(){return this.opts.yaxis[0].tickAmount=this.opts.yaxis[0].tickAmount?this.opts.yaxis[0].tickAmount:6,{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(t){return t.toFixed(1)+"%"},enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"radar",value:function(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:3,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1},xaxis:{labels:{formatter:function(t){return t},style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}},{key:"radialBar",value:function(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0}}}},{key:"_getBoxTooltip",value:function(t,e,i,s,n){var a=t.globals.seriesCandleO[e][i],r=t.globals.seriesCandleH[e][i],o=t.globals.seriesCandleM[e][i],l=t.globals.seriesCandleL[e][i],h=t.globals.seriesCandleC[e][i];return t.config.series[e].type&&t.config.series[e].type!==n?'<div class="apexcharts-custom-tooltip">\n          '.concat(t.config.series[e].name?t.config.series[e].name:"series-"+(e+1),": <strong>").concat(t.globals.series[e][i],"</strong>\n        </div>"):'<div class="apexcharts-tooltip-box apexcharts-tooltip-'.concat(t.config.chart.type,'">')+"<div>".concat(s[0],': <span class="value">')+a+"</span></div>"+"<div>".concat(s[1],': <span class="value">')+r+"</span></div>"+(o?"<div>".concat(s[2],': <span class="value">')+o+"</span></div>":"")+"<div>".concat(s[3],': <span class="value">')+l+"</span></div>"+"<div>".concat(s[4],': <span class="value">')+h+"</span></div></div>"}}]),t}(),N=function(){function t(e){o(this,t),this.opts=e}return h(t,[{key:"init",value:function(t){var e=t.responsiveOverride,i=this.opts,s=new E,n=new R(i);this.chartType=i.chart.type,"histogram"===this.chartType&&(i.chart.type="bar",i=y.extend({plotOptions:{bar:{columnWidth:"99.99%"}}},i)),i=this.extendYAxis(i),i=this.extendAnnotations(i);var a=s.init(),o={};if(i&&"object"===r(i)){var l={};l=-1!==["line","area","bar","candlestick","boxPlot","rangeBar","rangeArea","histogram","bubble","scatter","heatmap","treemap","pie","polarArea","donut","radar","radialBar"].indexOf(i.chart.type)?n[i.chart.type]():n.line(),i.chart.brush&&i.chart.brush.enabled&&(l=n.brush(l)),i.chart.stacked&&"100%"===i.chart.stackType&&(i=n.stacked100(i)),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(i),i.xaxis=i.xaxis||window.Apex.xaxis||{},e||(i.xaxis.convertedCatToNumeric=!1),((i=this.checkForCatToNumericXAxis(this.chartType,l,i)).chart.sparkline&&i.chart.sparkline.enabled||window.Apex.chart&&window.Apex.chart.sparkline&&window.Apex.chart.sparkline.enabled)&&(l=n.sparkline(l)),o=y.extend(a,l)}var h=y.extend(o,window.Apex);return a=y.extend(h,i),this.handleUserInputErrors(a)}},{key:"checkForCatToNumericXAxis",value:function(t,e,i){var s=new R(i),n=("bar"===t||"boxPlot"===t)&&i.plotOptions&&i.plotOptions.bar&&i.plotOptions.bar.horizontal,a="pie"===t||"polarArea"===t||"donut"===t||"radar"===t||"radialBar"===t||"heatmap"===t,r="datetime"!==i.xaxis.type&&"numeric"!==i.xaxis.type,o=i.xaxis.tickPlacement?i.xaxis.tickPlacement:e.xaxis&&e.xaxis.tickPlacement;return n||a||!r||"between"===o||(i=s.convertCatToNumeric(i)),i}},{key:"extendYAxis",value:function(t,e){var i=new E;(void 0===t.yaxis||!t.yaxis||Array.isArray(t.yaxis)&&0===t.yaxis.length)&&(t.yaxis={}),t.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(t.yaxis=y.extend(t.yaxis,window.Apex.yaxis)),t.yaxis.constructor!==Array?t.yaxis=[y.extend(i.yAxis,t.yaxis)]:t.yaxis=y.extendArray(t.yaxis,i.yAxis);var s=!1;t.yaxis.forEach((function(t){t.logarithmic&&(s=!0)}));var n=t.series;return e&&!n&&(n=e.config.series),s&&n.length!==t.yaxis.length&&n.length&&(t.yaxis=n.map((function(e,s){if(e.name||(n[s].name="series-".concat(s+1)),t.yaxis[s])return t.yaxis[s].seriesName=n[s].name,t.yaxis[s];var a=y.extend(i.yAxis,t.yaxis[0]);return a.show=!1,a}))),s&&n.length>1&&n.length!==t.yaxis.length&&console.warn("A multi-series logarithmic chart should have equal number of series and y-axes. Please make sure to equalize both."),t}},{key:"extendAnnotations",value:function(t){return void 0===t.annotations&&(t.annotations={},t.annotations.yaxis=[],t.annotations.xaxis=[],t.annotations.points=[]),t=this.extendYAxisAnnotations(t),t=this.extendXAxisAnnotations(t),this.extendPointAnnotations(t)}},{key:"extendYAxisAnnotations",value:function(t){var e=new E;return t.annotations.yaxis=y.extendArray(void 0!==t.annotations.yaxis?t.annotations.yaxis:[],e.yAxisAnnotation),t}},{key:"extendXAxisAnnotations",value:function(t){var e=new E;return t.annotations.xaxis=y.extendArray(void 0!==t.annotations.xaxis?t.annotations.xaxis:[],e.xAxisAnnotation),t}},{key:"extendPointAnnotations",value:function(t){var e=new E;return t.annotations.points=y.extendArray(void 0!==t.annotations.points?t.annotations.points:[],e.pointAnnotation),t}},{key:"checkForDarkTheme",value:function(t){t.theme&&"dark"===t.theme.mode&&(t.tooltip||(t.tooltip={}),"light"!==t.tooltip.theme&&(t.tooltip.theme="dark"),t.chart.foreColor||(t.chart.foreColor="#f6f7f8"),t.chart.background||(t.chart.background="#424242"),t.theme.palette||(t.theme.palette="palette4"))}},{key:"handleUserInputErrors",value:function(t){var e=t;if(e.tooltip.shared&&e.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if("bar"===e.chart.type&&e.plotOptions.bar.horizontal){if(e.yaxis.length>1)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");e.yaxis[0].reversed&&(e.yaxis[0].opposite=!0),e.xaxis.tooltip.enabled=!1,e.yaxis[0].tooltip.enabled=!1,e.chart.zoom.enabled=!1}return"bar"!==e.chart.type&&"rangeBar"!==e.chart.type||e.tooltip.shared&&"barWidth"===e.xaxis.crosshairs.width&&e.series.length>1&&(e.xaxis.crosshairs.width="tickWidth"),"candlestick"!==e.chart.type&&"boxPlot"!==e.chart.type||e.yaxis[0].reversed&&(console.warn("Reversed y-axis in ".concat(e.chart.type," chart is not supported.")),e.yaxis[0].reversed=!1),e}}]),t}(),z=function(){function t(){o(this,t)}return h(t,[{key:"initGlobalVars",value:function(t){t.series=[],t.seriesCandleO=[],t.seriesCandleH=[],t.seriesCandleM=[],t.seriesCandleL=[],t.seriesCandleC=[],t.seriesRangeStart=[],t.seriesRangeEnd=[],t.seriesRange=[],t.seriesPercent=[],t.seriesGoals=[],t.seriesX=[],t.seriesZ=[],t.seriesNames=[],t.seriesTotals=[],t.seriesLog=[],t.seriesColors=[],t.stackedSeriesTotals=[],t.seriesXvalues=[],t.seriesYvalues=[],t.labels=[],t.hasGroups=!1,t.groups=[],t.categoryLabels=[],t.timescaleLabels=[],t.noLabelsProvided=!1,t.resizeTimer=null,t.selectionResizeTimer=null,t.delayedElements=[],t.pointsArray=[],t.dataLabelsRects=[],t.isXNumeric=!1,t.xaxisLabelsCount=0,t.skipLastTimelinelabel=!1,t.skipFirstTimelinelabel=!1,t.isDataXYZ=!1,t.isMultiLineX=!1,t.isMultipleYAxis=!1,t.maxY=-Number.MAX_VALUE,t.minY=Number.MIN_VALUE,t.minYArr=[],t.maxYArr=[],t.maxX=-Number.MAX_VALUE,t.minX=Number.MAX_VALUE,t.initialMaxX=-Number.MAX_VALUE,t.initialMinX=Number.MAX_VALUE,t.maxDate=0,t.minDate=Number.MAX_VALUE,t.minZ=Number.MAX_VALUE,t.maxZ=-Number.MAX_VALUE,t.minXDiff=Number.MAX_VALUE,t.yAxisScale=[],t.xAxisScale=null,t.xAxisTicksPositions=[],t.yLabelsCoords=[],t.yTitleCoords=[],t.barPadForNumericAxis=0,t.padHorizontal=0,t.xRange=0,t.yRange=[],t.zRange=0,t.dataPoints=0,t.xTickAmount=0}},{key:"globalVars",value:function(t){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:t.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,initialSeries:[],lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],goldenPadding:35,invalidLogScale:!1,ignoreYAxisIndexes:[],yAxisSameScaleIndices:[],maxValsInArrayIndex:0,radialSize:0,selection:void 0,zoomEnabled:"zoom"===t.chart.toolbar.autoSelected&&t.chart.toolbar.tools.zoom&&t.chart.zoom.enabled,panEnabled:"pan"===t.chart.toolbar.autoSelected&&t.chart.toolbar.tools.pan,selectionEnabled:"selection"===t.chart.toolbar.autoSelected&&t.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],hasNullValues:!1,easing:null,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,xAxisGroupLabelsHeight:0,xAxisLabelsWidth:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null}}},{key:"init",value:function(t){var e=this.globalVars(t);return this.initGlobalVars(e),e.initialConfig=y.extend({},t),e.initialSeries=y.clone(t.series),e.lastXAxis=y.clone(e.initialConfig.xaxis),e.lastYAxis=y.clone(e.initialConfig.yaxis),e}}]),t}(),F=function(){function t(e){o(this,t),this.opts=e}return h(t,[{key:"init",value:function(){var t=new N(this.opts).init({responsiveOverride:!1});return{config:t,globals:(new z).init(t)}}}]),t}(),B=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w,this.opts=null,this.seriesIndex=0}return h(t,[{key:"clippedImgArea",value:function(t){var e=this.w,i=e.config,s=parseInt(e.globals.gridWidth,10),n=parseInt(e.globals.gridHeight,10),a=s>n?s:n,r=t.image,o=0,l=0;void 0===t.width&&void 0===t.height?void 0!==i.fill.image.width&&void 0!==i.fill.image.height?(o=i.fill.image.width+1,l=i.fill.image.height):(o=a+1,l=a):(o=t.width,l=t.height);var h=document.createElementNS(e.globals.SVGNS,"pattern");C.setAttrs(h,{id:t.patternID,patternUnits:t.patternUnits?t.patternUnits:"userSpaceOnUse",width:o+"px",height:l+"px"});var c=document.createElementNS(e.globals.SVGNS,"image");h.appendChild(c),c.setAttributeNS(window.SVG.xlink,"href",r),C.setAttrs(c,{x:0,y:0,preserveAspectRatio:"none",width:o+"px",height:l+"px"}),c.style.opacity=t.opacity,e.globals.dom.elDefs.node.appendChild(h)}},{key:"getSeriesIndex",value:function(t){var e=this.w;return("bar"===e.config.chart.type||"rangeBar"===e.config.chart.type)&&e.config.plotOptions.bar.distributed||"heatmap"===e.config.chart.type||"treemap"===e.config.chart.type?this.seriesIndex=t.seriesNumber:this.seriesIndex=t.seriesNumber%e.globals.series.length,this.seriesIndex}},{key:"fillPath",value:function(t){var e=this.w;this.opts=t;var i,s,n,a=this.w.config;this.seriesIndex=this.getSeriesIndex(t);var r=this.getFillColors()[this.seriesIndex];void 0!==e.globals.seriesColors[this.seriesIndex]&&(r=e.globals.seriesColors[this.seriesIndex]),"function"==typeof r&&(r=r({seriesIndex:this.seriesIndex,dataPointIndex:t.dataPointIndex,value:t.value,w:e}));var o=t.fillType?t.fillType:this.getFillType(this.seriesIndex),l=Array.isArray(a.fill.opacity)?a.fill.opacity[this.seriesIndex]:a.fill.opacity;t.color&&(r=t.color);var h=r;if(-1===r.indexOf("rgb")?r.length<9&&(h=y.hexToRgba(r,l)):r.indexOf("rgba")>-1&&(l=y.getOpacityFromRGBA(r)),t.opacity&&(l=t.opacity),"pattern"===o&&(s=this.handlePatternFill({fillConfig:t.fillConfig,patternFill:s,fillColor:r,fillOpacity:l,defaultColor:h})),"gradient"===o&&(n=this.handleGradientFill({fillConfig:t.fillConfig,fillColor:r,fillOpacity:l,i:this.seriesIndex})),"image"===o){var c=a.fill.image.src,d=t.patternID?t.patternID:"";this.clippedImgArea({opacity:l,image:Array.isArray(c)?t.seriesNumber<c.length?c[t.seriesNumber]:c[0]:c,width:t.width?t.width:void 0,height:t.height?t.height:void 0,patternUnits:t.patternUnits,patternID:"pattern".concat(e.globals.cuid).concat(t.seriesNumber+1).concat(d)}),i="url(#pattern".concat(e.globals.cuid).concat(t.seriesNumber+1).concat(d,")")}else i="gradient"===o?n:"pattern"===o?s:h;return t.solid&&(i=h),i}},{key:"getFillType",value:function(t){var e=this.w;return Array.isArray(e.config.fill.type)?e.config.fill.type[t]:e.config.fill.type}},{key:"getFillColors",value:function(){var t=this.w,e=t.config,i=this.opts,s=[];return t.globals.comboCharts?"line"===t.config.series[this.seriesIndex].type?Array.isArray(t.globals.stroke.colors)?s=t.globals.stroke.colors:s.push(t.globals.stroke.colors):Array.isArray(t.globals.fill.colors)?s=t.globals.fill.colors:s.push(t.globals.fill.colors):"line"===e.chart.type?Array.isArray(t.globals.stroke.colors)?s=t.globals.stroke.colors:s.push(t.globals.stroke.colors):Array.isArray(t.globals.fill.colors)?s=t.globals.fill.colors:s.push(t.globals.fill.colors),void 0!==i.fillColors&&(s=[],Array.isArray(i.fillColors)?s=i.fillColors.slice():s.push(i.fillColors)),s}},{key:"handlePatternFill",value:function(t){var e=t.fillConfig,i=t.patternFill,s=t.fillColor,n=t.fillOpacity,a=t.defaultColor,r=this.w.config.fill;e&&(r=e);var o=this.opts,l=new C(this.ctx),h=Array.isArray(r.pattern.strokeWidth)?r.pattern.strokeWidth[this.seriesIndex]:r.pattern.strokeWidth,c=s;return i=Array.isArray(r.pattern.style)?void 0!==r.pattern.style[o.seriesNumber]?l.drawPattern(r.pattern.style[o.seriesNumber],r.pattern.width,r.pattern.height,c,h,n):a:l.drawPattern(r.pattern.style,r.pattern.width,r.pattern.height,c,h,n),i}},{key:"handleGradientFill",value:function(t){var e=t.fillColor,i=t.fillOpacity,s=t.fillConfig,n=t.i,r=this.w.config.fill;s&&(r=a(a({},r),s));var o,l=this.opts,h=new C(this.ctx),c=new y,d=r.gradient.type,u=e,p=void 0===r.gradient.opacityFrom?i:Array.isArray(r.gradient.opacityFrom)?r.gradient.opacityFrom[n]:r.gradient.opacityFrom;u.indexOf("rgba")>-1&&(p=y.getOpacityFromRGBA(u));var g=void 0===r.gradient.opacityTo?i:Array.isArray(r.gradient.opacityTo)?r.gradient.opacityTo[n]:r.gradient.opacityTo;if(void 0===r.gradient.gradientToColors||0===r.gradient.gradientToColors.length)o="dark"===r.gradient.shade?c.shadeColor(-1*parseFloat(r.gradient.shadeIntensity),e.indexOf("rgb")>-1?y.rgb2hex(e):e):c.shadeColor(parseFloat(r.gradient.shadeIntensity),e.indexOf("rgb")>-1?y.rgb2hex(e):e);else if(r.gradient.gradientToColors[l.seriesNumber]){var f=r.gradient.gradientToColors[l.seriesNumber];o=f,f.indexOf("rgba")>-1&&(g=y.getOpacityFromRGBA(f))}else o=e;if(r.gradient.gradientFrom&&(u=r.gradient.gradientFrom),r.gradient.gradientTo&&(o=r.gradient.gradientTo),r.gradient.inverseColors){var m=u;u=o,o=m}return u.indexOf("rgb")>-1&&(u=y.rgb2hex(u)),o.indexOf("rgb")>-1&&(o=y.rgb2hex(o)),h.drawGradient(d,u,o,p,g,l.size,r.gradient.stops,r.gradient.colorStops,n)}}]),t}(),H=function(){function t(e,i){o(this,t),this.ctx=e,this.w=e.w}return h(t,[{key:"setGlobalMarkerSize",value:function(){var t=this.w;if(t.globals.markers.size=Array.isArray(t.config.markers.size)?t.config.markers.size:[t.config.markers.size],t.globals.markers.size.length>0){if(t.globals.markers.size.length<t.globals.series.length+1)for(var e=0;e<=t.globals.series.length;e++)void 0===t.globals.markers.size[e]&&t.globals.markers.size.push(t.globals.markers.size[0])}else t.globals.markers.size=t.config.series.map((function(e){return t.config.markers.size}))}},{key:"plotChartMarkers",value:function(t,e,i,s){var n,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=this.w,o=e,l=t,h=null,c=new C(this.ctx),d=r.config.markers.discrete&&r.config.markers.discrete.length;if((r.globals.markers.size[e]>0||a||d)&&(h=c.group({class:a||d?"":"apexcharts-series-markers"})).attr("clip-path","url(#gridRectMarkerMask".concat(r.globals.cuid,")")),Array.isArray(l.x))for(var u=0;u<l.x.length;u++){var p=i;1===i&&0===u&&(p=0),1===i&&1===u&&(p=1);var g="apexcharts-marker";"line"!==r.config.chart.type&&"area"!==r.config.chart.type||r.globals.comboCharts||r.config.tooltip.intersect||(g+=" no-pointer-events");var f=Array.isArray(r.config.markers.size)?r.globals.markers.size[e]>0:r.config.markers.size>0;if(f||a||d){y.isNumber(l.y[u])?g+=" w".concat(y.randomId()):g="apexcharts-nullpoint";var m=this.getMarkerConfig({cssClass:g,seriesIndex:e,dataPointIndex:p});r.config.series[o].data[p]&&(r.config.series[o].data[p].fillColor&&(m.pointFillColor=r.config.series[o].data[p].fillColor),r.config.series[o].data[p].strokeColor&&(m.pointStrokeColor=r.config.series[o].data[p].strokeColor)),s&&(m.pSize=s),(n=c.drawMarker(l.x[u],l.y[u],m)).attr("rel",p),n.attr("j",p),n.attr("index",e),n.node.setAttribute("default-marker-size",m.pSize);var v=new k(this.ctx);v.setSelectionFilter(n,e,p),this.addEvents(n),h&&h.add(n)}else void 0===r.globals.pointsArray[e]&&(r.globals.pointsArray[e]=[]),r.globals.pointsArray[e].push([l.x[u],l.y[u]])}return h}},{key:"getMarkerConfig",value:function(t){var e=t.cssClass,i=t.seriesIndex,s=t.dataPointIndex,n=void 0===s?null:s,a=t.finishRadius,r=void 0===a?null:a,o=this.w,l=this.getMarkerStyle(i),h=o.globals.markers.size[i],c=o.config.markers;return null!==n&&c.discrete.length&&c.discrete.map((function(t){t.seriesIndex===i&&t.dataPointIndex===n&&(l.pointStrokeColor=t.strokeColor,l.pointFillColor=t.fillColor,h=t.size,l.pointShape=t.shape)})),{pSize:null===r?h:r,pRadius:c.radius,width:Array.isArray(c.width)?c.width[i]:c.width,height:Array.isArray(c.height)?c.height[i]:c.height,pointStrokeWidth:Array.isArray(c.strokeWidth)?c.strokeWidth[i]:c.strokeWidth,pointStrokeColor:l.pointStrokeColor,pointFillColor:l.pointFillColor,shape:l.pointShape||(Array.isArray(c.shape)?c.shape[i]:c.shape),class:e,pointStrokeOpacity:Array.isArray(c.strokeOpacity)?c.strokeOpacity[i]:c.strokeOpacity,pointStrokeDashArray:Array.isArray(c.strokeDashArray)?c.strokeDashArray[i]:c.strokeDashArray,pointFillOpacity:Array.isArray(c.fillOpacity)?c.fillOpacity[i]:c.fillOpacity,seriesIndex:i}}},{key:"addEvents",value:function(t){var e=this.w,i=new C(this.ctx);t.node.addEventListener("mouseenter",i.pathMouseEnter.bind(this.ctx,t)),t.node.addEventListener("mouseleave",i.pathMouseLeave.bind(this.ctx,t)),t.node.addEventListener("mousedown",i.pathMouseDown.bind(this.ctx,t)),t.node.addEventListener("click",e.config.markers.onClick),t.node.addEventListener("dblclick",e.config.markers.onDblClick),t.node.addEventListener("touchstart",i.pathMouseDown.bind(this.ctx,t),{passive:!0})}},{key:"getMarkerStyle",value:function(t){var e=this.w,i=e.globals.markers.colors,s=e.config.markers.strokeColor||e.config.markers.strokeColors;return{pointStrokeColor:Array.isArray(s)?s[t]:s,pointFillColor:Array.isArray(i)?i[t]:i}}}]),t}(),$=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled}return h(t,[{key:"draw",value:function(t,e,i){var s=this.w,n=new C(this.ctx),a=i.realIndex,r=i.pointsPos,o=i.zRatio,l=i.elParent,h=n.group({class:"apexcharts-series-markers apexcharts-series-".concat(s.config.chart.type)});if(h.attr("clip-path","url(#gridRectMarkerMask".concat(s.globals.cuid,")")),Array.isArray(r.x))for(var c=0;c<r.x.length;c++){var d=e+1,u=!0;0===e&&0===c&&(d=0),0===e&&1===c&&(d=1);var p=0,g=s.globals.markers.size[a];if(o!==1/0){var f=s.config.plotOptions.bubble;g=s.globals.seriesZ[a][d],f.zScaling&&(g/=o),f.minBubbleRadius&&g<f.minBubbleRadius&&(g=f.minBubbleRadius),f.maxBubbleRadius&&g>f.maxBubbleRadius&&(g=f.maxBubbleRadius)}s.config.chart.animations.enabled||(p=g);var m=r.x[c],v=r.y[c];if(p=p||0,null!==v&&void 0!==s.globals.series[a][d]||(u=!1),u){var b=this.drawPoint(m,v,p,g,a,d,e);h.add(b)}l.add(h)}}},{key:"drawPoint",value:function(t,e,i,s,n,a,r){var o=this.w,l=n,h=new w(this.ctx),c=new k(this.ctx),d=new B(this.ctx),u=new H(this.ctx),p=new C(this.ctx),g=u.getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:l,dataPointIndex:a,finishRadius:"bubble"===o.config.chart.type||o.globals.comboCharts&&o.config.series[n]&&"bubble"===o.config.series[n].type?s:null});s=g.pSize;var f,m=d.fillPath({seriesNumber:n,dataPointIndex:a,color:g.pointFillColor,patternUnits:"objectBoundingBox",value:o.globals.series[n][r]});if("circle"===g.shape?f=p.drawCircle(i):"square"!==g.shape&&"rect"!==g.shape||(f=p.drawRect(0,0,g.width-g.pointStrokeWidth/2,g.height-g.pointStrokeWidth/2,g.pRadius)),o.config.series[l].data[a]&&o.config.series[l].data[a].fillColor&&(m=o.config.series[l].data[a].fillColor),f.attr({x:t-g.width/2-g.pointStrokeWidth/2,y:e-g.height/2-g.pointStrokeWidth/2,cx:t,cy:e,fill:m,"fill-opacity":g.pointFillOpacity,stroke:g.pointStrokeColor,r:s,"stroke-width":g.pointStrokeWidth,"stroke-dasharray":g.pointStrokeDashArray,"stroke-opacity":g.pointStrokeOpacity}),o.config.chart.dropShadow.enabled){var v=o.config.chart.dropShadow;c.dropShadow(f,v,n)}if(!this.initialAnim||o.globals.dataChanged||o.globals.resized)o.globals.animationEnded=!0;else{var b=o.config.chart.animations.speed;h.animateMarker(f,0,"circle"===g.shape?s:{width:g.width,height:g.height},b,o.globals.easing,(function(){window.setTimeout((function(){h.animationCompleted(f)}),100)}))}if(o.globals.dataChanged&&"circle"===g.shape)if(this.dynamicAnim){var x,y,S,_,A=o.config.chart.animations.dynamicAnimation.speed;null!=(_=o.globals.previousPaths[n]&&o.globals.previousPaths[n][r])&&(x=_.x,y=_.y,S=void 0!==_.r?_.r:s);for(var I=0;I<o.globals.collapsedSeries.length;I++)o.globals.collapsedSeries[I].index===n&&(A=1,s=0);0===t&&0===e&&(s=0),h.animateCircle(f,{cx:x,cy:y,r:S},{cx:t,cy:e,r:s},A,o.globals.easing)}else f.attr({r:s});return f.attr({rel:a,j:a,index:n,"default-marker-size":s}),c.setSelectionFilter(f,n,a),u.addEvents(f),f.node.classList.add("apexcharts-marker"),f}},{key:"centerTextInBubble",value:function(t){var e=this.w;return{y:t+=parseInt(e.config.dataLabels.style.fontSize,10)/4}}}]),t}(),W=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w}return h(t,[{key:"dataLabelsCorrection",value:function(t,e,i,s,n,a,r){var o=this.w,l=!1,h=new C(this.ctx).getTextRects(i,r),c=h.width,d=h.height;e<0&&(e=0),e>o.globals.gridHeight+d&&(e=o.globals.gridHeight+d/2),void 0===o.globals.dataLabelsRects[s]&&(o.globals.dataLabelsRects[s]=[]),o.globals.dataLabelsRects[s].push({x:t,y:e,width:c,height:d});var u=o.globals.dataLabelsRects[s].length-2,p=void 0!==o.globals.lastDrawnDataLabelsIndexes[s]?o.globals.lastDrawnDataLabelsIndexes[s][o.globals.lastDrawnDataLabelsIndexes[s].length-1]:0;if(void 0!==o.globals.dataLabelsRects[s][u]){var g=o.globals.dataLabelsRects[s][p];(t>g.x+g.width+2||e>g.y+g.height+2||t+c<g.x)&&(l=!0)}return(0===n||a)&&(l=!0),{x:t,y:e,textRects:h,drawnextLabel:l}}},{key:"drawDataLabel",value:function(t){var e=this,i=t.type,s=t.pos,n=t.i,a=t.j,r=t.isRangeStart,o=t.strokeWidth,l=void 0===o?2:o,h=this.w,c=new C(this.ctx),d=h.config.dataLabels,u=0,p=0,g=a,f=null;if(!d.enabled||!Array.isArray(s.x))return f;f=c.group({class:"apexcharts-data-labels"});for(var m=0;m<s.x.length;m++)if(u=s.x[m]+d.offsetX,p=s.y[m]+d.offsetY+l,!isNaN(u)){1===a&&0===m&&(g=0),1===a&&1===m&&(g=1);var v=h.globals.series[n][g];"rangeArea"===i&&(v=r?h.globals.seriesRangeStart[n][g]:h.globals.seriesRangeEnd[n][g]);var b="",x=function(t){return h.config.dataLabels.formatter(t,{ctx:e.ctx,seriesIndex:n,dataPointIndex:g,w:h})};"bubble"===h.config.chart.type?(b=x(v=h.globals.seriesZ[n][g]),p=s.y[m],p=new $(this.ctx).centerTextInBubble(p,n,g).y):void 0!==v&&(b=x(v)),this.plotDataLabelsText({x:u,y:p,text:b,i:n,j:g,parent:f,offsetCorrection:!0,dataLabelsConfig:h.config.dataLabels})}return f}},{key:"plotDataLabelsText",value:function(t){var e=this.w,i=new C(this.ctx),s=t.x,n=t.y,a=t.i,r=t.j,o=t.text,l=t.textAnchor,h=t.fontSize,c=t.parent,d=t.dataLabelsConfig,u=t.color,p=t.alwaysDrawDataLabel,g=t.offsetCorrection;if(!(Array.isArray(e.config.dataLabels.enabledOnSeries)&&e.config.dataLabels.enabledOnSeries.indexOf(a)<0)){var f={x:s,y:n,drawnextLabel:!0,textRects:null};g&&(f=this.dataLabelsCorrection(s,n,o,a,r,p,parseInt(d.style.fontSize,10))),e.globals.zoomed||(s=f.x,n=f.y),f.textRects&&(s<-10-f.textRects.width||s>e.globals.gridWidth+f.textRects.width+10)&&(o="");var m=e.globals.dataLabels.style.colors[a];(("bar"===e.config.chart.type||"rangeBar"===e.config.chart.type)&&e.config.plotOptions.bar.distributed||e.config.dataLabels.distributed)&&(m=e.globals.dataLabels.style.colors[r]),"function"==typeof m&&(m=m({series:e.globals.series,seriesIndex:a,dataPointIndex:r,w:e})),u&&(m=u);var v=d.offsetX,b=d.offsetY;if("bar"!==e.config.chart.type&&"rangeBar"!==e.config.chart.type||(v=0,b=0),f.drawnextLabel){var x=i.drawText({width:100,height:parseInt(d.style.fontSize,10),x:s+v,y:n+b,foreColor:m,textAnchor:l||d.textAnchor,text:o,fontSize:h||d.style.fontSize,fontFamily:d.style.fontFamily,fontWeight:d.style.fontWeight||"normal"});if(x.attr({class:"apexcharts-datalabel",cx:s,cy:n}),d.dropShadow.enabled){var y=d.dropShadow;new k(this.ctx).dropShadow(x,y)}c.add(x),void 0===e.globals.lastDrawnDataLabelsIndexes[a]&&(e.globals.lastDrawnDataLabelsIndexes[a]=[]),e.globals.lastDrawnDataLabelsIndexes[a].push(r)}}}},{key:"addBackgroundToDataLabel",value:function(t,e){var i=this.w,s=i.config.dataLabels.background,n=s.padding,a=s.padding/2,r=e.width,o=e.height,l=new C(this.ctx).drawRect(e.x-n,e.y-a/2,r+2*n,o+a,s.borderRadius,"transparent"===i.config.chart.background?"#fff":i.config.chart.background,s.opacity,s.borderWidth,s.borderColor);return s.dropShadow.enabled&&new k(this.ctx).dropShadow(l,s.dropShadow),l}},{key:"dataLabelsBackground",value:function(){var t=this.w;if("bubble"!==t.config.chart.type)for(var e=t.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"),i=0;i<e.length;i++){var s=e[i],n=s.getBBox(),a=null;if(n.width&&n.height&&(a=this.addBackgroundToDataLabel(s,n)),a){s.parentNode.insertBefore(a.node,s);var r=s.getAttribute("fill");!t.config.chart.animations.enabled||t.globals.resized||t.globals.dataChanged?a.attr({fill:r}):a.animate().attr({fill:r}),s.setAttribute("fill",t.config.dataLabels.background.foreColor)}}}},{key:"bringForward",value:function(){for(var t=this.w,e=t.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"),i=t.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"),s=0;s<e.length;s++)i&&i.insertBefore(e[s],i.nextSibling)}}]),t}(),X=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w,this.legendInactiveClass="legend-mouseover-inactive"}return h(t,[{key:"getAllSeriesEls",value:function(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}},{key:"getSeriesByName",value:function(t){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner .apexcharts-series[seriesName='".concat(y.escapeString(t),"']"))}},{key:"isSeriesHidden",value:function(t){var e=this.getSeriesByName(t),i=parseInt(e.getAttribute("data:realIndex"),10);return{isHidden:e.classList.contains("apexcharts-series-collapsed"),realIndex:i}}},{key:"addCollapsedClassToSeries",value:function(t,e){var i=this.w;function s(i){for(var s=0;s<i.length;s++)i[s].index===e&&t.node.classList.add("apexcharts-series-collapsed")}s(i.globals.collapsedSeries),s(i.globals.ancillaryCollapsedSeries)}},{key:"toggleSeries",value:function(t){var e=this.isSeriesHidden(t);return this.ctx.legend.legendHelpers.toggleDataSeries(e.realIndex,e.isHidden),e.isHidden}},{key:"showSeries",value:function(t){var e=this.isSeriesHidden(t);e.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(e.realIndex,!0)}},{key:"hideSeries",value:function(t){var e=this.isSeriesHidden(t);e.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(e.realIndex,!1)}},{key:"resetSeries",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=this.w,n=y.clone(s.globals.initialSeries);s.globals.previousPaths=[],i?(s.globals.collapsedSeries=[],s.globals.ancillaryCollapsedSeries=[],s.globals.collapsedSeriesIndices=[],s.globals.ancillaryCollapsedSeriesIndices=[]):n=this.emptyCollapsedSeries(n),s.config.series=n,t&&(e&&(s.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(n,s.config.chart.animations.dynamicAnimation.enabled))}},{key:"emptyCollapsedSeries",value:function(t){for(var e=this.w,i=0;i<t.length;i++)e.globals.collapsedSeriesIndices.indexOf(i)>-1&&(t[i].data=[]);return t}},{key:"toggleSeriesOnHover",value:function(t,e){var i=this.w;e||(e=t.target);var s=i.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels");if("mousemove"===t.type){var n=parseInt(e.getAttribute("rel"),10)-1,a=null,r=null;i.globals.axisCharts||"radialBar"===i.config.chart.type?i.globals.axisCharts?(a=i.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(n,"']")),r=i.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(n,"']"))):a=i.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(n+1,"']")):a=i.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(n+1,"'] path"));for(var o=0;o<s.length;o++)s[o].classList.add(this.legendInactiveClass);null!==a&&(i.globals.axisCharts||a.parentNode.classList.remove(this.legendInactiveClass),a.classList.remove(this.legendInactiveClass),null!==r&&r.classList.remove(this.legendInactiveClass))}else if("mouseout"===t.type)for(var l=0;l<s.length;l++)s[l].classList.remove(this.legendInactiveClass)}},{key:"highlightRangeInSeries",value:function(t,e){var i=this,s=this.w,n=s.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"),a=function(t){for(var e=0;e<n.length;e++)n[e].classList[t](i.legendInactiveClass)};if("mousemove"===t.type){var r=parseInt(e.getAttribute("rel"),10)-1;a("add"),function(t){for(var e=0;e<n.length;e++){var s=parseInt(n[e].getAttribute("val"),10);s>=t.from&&s<=t.to&&n[e].classList.remove(i.legendInactiveClass)}}(s.config.plotOptions.heatmap.colorScale.ranges[r])}else"mouseout"===t.type&&a("remove")}},{key:"getActiveConfigSeriesIndex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"asc",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=this.w,s=0;if(i.config.series.length>1)for(var n=i.config.series.map((function(t,s){return t.data&&t.data.length>0&&-1===i.globals.collapsedSeriesIndices.indexOf(s)&&(!i.globals.comboCharts||0===e.length||e.length&&e.indexOf(i.config.series[s].type)>-1)?s:-1})),a="asc"===t?0:n.length-1;"asc"===t?a<n.length:a>=0;"asc"===t?a++:a--)if(-1!==n[a]){s=n[a];break}return s}},{key:"getBarSeriesIndices",value:function(){return this.w.globals.comboCharts?this.w.config.series.map((function(t,e){return"bar"===t.type||"column"===t.type?e:-1})).filter((function(t){return-1!==t})):this.w.config.series.map((function(t,e){return e}))}},{key:"getPreviousPaths",value:function(){var t=this.w;function e(e,i,s){for(var n=e[i].childNodes,a={type:s,paths:[],realIndex:e[i].getAttribute("data:realIndex")},r=0;r<n.length;r++)if(n[r].hasAttribute("pathTo")){var o=n[r].getAttribute("pathTo");a.paths.push({d:o})}t.globals.previousPaths.push(a)}t.globals.previousPaths=[],["line","area","bar","rangebar","rangeArea","candlestick","radar"].forEach((function(i){for(var s,n=(s=i,t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(s,"-series .apexcharts-series"))),a=0;a<n.length;a++)e(n,a,i)})),this.handlePrevBubbleScatterPaths("bubble"),this.handlePrevBubbleScatterPaths("scatter");var i=t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(t.config.chart.type," .apexcharts-series"));if(i.length>0)for(var s=function(e){for(var i=t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(t.config.chart.type," .apexcharts-series[data\\:realIndex='").concat(e,"'] rect")),s=[],n=function(t){var e=function(e){return i[t].getAttribute(e)},n={x:parseFloat(e("x")),y:parseFloat(e("y")),width:parseFloat(e("width")),height:parseFloat(e("height"))};s.push({rect:n,color:i[t].getAttribute("color")})},a=0;a<i.length;a++)n(a);t.globals.previousPaths.push(s)},n=0;n<i.length;n++)s(n);t.globals.axisCharts||(t.globals.previousPaths=t.globals.series)}},{key:"handlePrevBubbleScatterPaths",value:function(t){var e=this.w,i=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(t,"-series .apexcharts-series"));if(i.length>0)for(var s=0;s<i.length;s++){for(var n=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(t,"-series .apexcharts-series[data\\:realIndex='").concat(s,"'] circle")),a=[],r=0;r<n.length;r++)a.push({x:n[r].getAttribute("cx"),y:n[r].getAttribute("cy"),r:n[r].getAttribute("r")});e.globals.previousPaths.push(a)}}},{key:"clearPreviousPaths",value:function(){var t=this.w;t.globals.previousPaths=[],t.globals.allSeriesCollapsed=!1}},{key:"handleNoData",value:function(){var t=this.w,e=t.config.noData,i=new C(this.ctx),s=t.globals.svgWidth/2,n=t.globals.svgHeight/2,a="middle";if(t.globals.noData=!0,t.globals.animationEnded=!0,"left"===e.align?(s=10,a="start"):"right"===e.align&&(s=t.globals.svgWidth-10,a="end"),"top"===e.verticalAlign?n=50:"bottom"===e.verticalAlign&&(n=t.globals.svgHeight-50),s+=e.offsetX,n=n+parseInt(e.style.fontSize,10)+2+e.offsetY,void 0!==e.text&&""!==e.text){var r=i.drawText({x:s,y:n,text:e.text,textAnchor:a,fontSize:e.style.fontSize,fontFamily:e.style.fontFamily,foreColor:e.style.color,opacity:1,class:"apexcharts-text-nodata"});t.globals.dom.Paper.add(r)}}},{key:"setNullSeriesToZeroValues",value:function(t){for(var e=this.w,i=0;i<t.length;i++)if(0===t[i].length)for(var s=0;s<t[e.globals.maxValsInArrayIndex].length;s++)t[i].push(0);return t}},{key:"hasAllSeriesEqualX",value:function(){for(var t=!0,e=this.w,i=this.filteredSeriesX(),s=0;s<i.length-1;s++)if(i[s][0]!==i[s+1][0]){t=!1;break}return e.globals.allSeriesHasEqualX=t,t}},{key:"filteredSeriesX",value:function(){var t=this.w.globals.seriesX.map((function(t){return t.length>0?t:[]}));return t}}]),t}(),Y=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.seriesGoals=[],this.coreUtils=new S(this.ctx)}return h(t,[{key:"isMultiFormat",value:function(){return this.isFormatXY()||this.isFormat2DArray()}},{key:"isFormatXY",value:function(){var t=this.w.config.series.slice(),e=new X(this.ctx);if(this.activeSeriesIndex=e.getActiveConfigSeriesIndex(),void 0!==t[this.activeSeriesIndex].data&&t[this.activeSeriesIndex].data.length>0&&null!==t[this.activeSeriesIndex].data[0]&&void 0!==t[this.activeSeriesIndex].data[0].x&&null!==t[this.activeSeriesIndex].data[0])return!0}},{key:"isFormat2DArray",value:function(){var t=this.w.config.series.slice(),e=new X(this.ctx);if(this.activeSeriesIndex=e.getActiveConfigSeriesIndex(),void 0!==t[this.activeSeriesIndex].data&&t[this.activeSeriesIndex].data.length>0&&void 0!==t[this.activeSeriesIndex].data[0]&&null!==t[this.activeSeriesIndex].data[0]&&t[this.activeSeriesIndex].data[0].constructor===Array)return!0}},{key:"handleFormat2DArray",value:function(t,e){for(var i=this.w.config,s=this.w.globals,n="boxPlot"===i.chart.type||"boxPlot"===i.series[e].type,a=0;a<t[e].data.length;a++)if(void 0!==t[e].data[a][1]&&(Array.isArray(t[e].data[a][1])&&4===t[e].data[a][1].length&&!n?this.twoDSeries.push(y.parseNumber(t[e].data[a][1][3])):t[e].data[a].length>=5?this.twoDSeries.push(y.parseNumber(t[e].data[a][4])):this.twoDSeries.push(y.parseNumber(t[e].data[a][1])),s.dataFormatXNumeric=!0),"datetime"===i.xaxis.type){var r=new Date(t[e].data[a][0]);r=new Date(r).getTime(),this.twoDSeriesX.push(r)}else this.twoDSeriesX.push(t[e].data[a][0]);for(var o=0;o<t[e].data.length;o++)void 0!==t[e].data[o][2]&&(this.threeDSeries.push(t[e].data[o][2]),s.isDataXYZ=!0)}},{key:"handleFormatXY",value:function(t,e){var i=this.w.config,s=this.w.globals,n=new M(this.ctx),a=e;s.collapsedSeriesIndices.indexOf(e)>-1&&(a=this.activeSeriesIndex);for(var r=0;r<t[e].data.length;r++)void 0!==t[e].data[r].y&&(Array.isArray(t[e].data[r].y)?this.twoDSeries.push(y.parseNumber(t[e].data[r].y[t[e].data[r].y.length-1])):this.twoDSeries.push(y.parseNumber(t[e].data[r].y))),void 0!==t[e].data[r].goals&&Array.isArray(t[e].data[r].goals)?(void 0===this.seriesGoals[e]&&(this.seriesGoals[e]=[]),this.seriesGoals[e].push(t[e].data[r].goals)):(void 0===this.seriesGoals[e]&&(this.seriesGoals[e]=[]),this.seriesGoals[e].push(null));for(var o=0;o<t[a].data.length;o++){var l="string"==typeof t[a].data[o].x,h=Array.isArray(t[a].data[o].x),c=!h&&!!n.isValidDate(t[a].data[o].x.toString());if(l||c)if(l||i.xaxis.convertedCatToNumeric){var d=s.isBarHorizontal&&s.isRangeData;"datetime"!==i.xaxis.type||d?(this.fallbackToCategory=!0,this.twoDSeriesX.push(t[a].data[o].x)):this.twoDSeriesX.push(n.parseDate(t[a].data[o].x))}else"datetime"===i.xaxis.type?this.twoDSeriesX.push(n.parseDate(t[a].data[o].x.toString())):(s.dataFormatXNumeric=!0,s.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(t[a].data[o].x)));else h?(this.fallbackToCategory=!0,this.twoDSeriesX.push(t[a].data[o].x)):(s.isXNumeric=!0,s.dataFormatXNumeric=!0,this.twoDSeriesX.push(t[a].data[o].x))}if(t[e].data[0]&&void 0!==t[e].data[0].z){for(var u=0;u<t[e].data.length;u++)this.threeDSeries.push(t[e].data[u].z);s.isDataXYZ=!0}}},{key:"handleRangeData",value:function(t,e){var i=this.w.globals,s={};return this.isFormat2DArray()?s=this.handleRangeDataFormat("array",t,e):this.isFormatXY()&&(s=this.handleRangeDataFormat("xy",t,e)),i.seriesRangeStart.push(s.start),i.seriesRangeEnd.push(s.end),i.seriesRange.push(s.rangeUniques),i.seriesRange.forEach((function(t,e){t&&t.forEach((function(t,e){t.y.forEach((function(e,i){for(var s=0;s<t.y.length;s++)if(i!==s){var n=e.y1,a=e.y2,r=t.y[s].y1;n<=t.y[s].y2&&r<=a&&(t.overlaps.indexOf(e.rangeName)<0&&t.overlaps.push(e.rangeName),t.overlaps.indexOf(t.y[s].rangeName)<0&&t.overlaps.push(t.y[s].rangeName))}}))}))})),s}},{key:"handleCandleStickBoxData",value:function(t,e){var i=this.w.globals,s={};return this.isFormat2DArray()?s=this.handleCandleStickBoxDataFormat("array",t,e):this.isFormatXY()&&(s=this.handleCandleStickBoxDataFormat("xy",t,e)),i.seriesCandleO[e]=s.o,i.seriesCandleH[e]=s.h,i.seriesCandleM[e]=s.m,i.seriesCandleL[e]=s.l,i.seriesCandleC[e]=s.c,s}},{key:"handleRangeDataFormat",value:function(t,e,i){var s=[],n=[],a=e[i].data.filter((function(t,e,i){return e===i.findIndex((function(e){return e.x===t.x}))})).map((function(t,e){return{x:t.x,overlaps:[],y:[]}}));if("array"===t)for(var r=0;r<e[i].data.length;r++)Array.isArray(e[i].data[r])?(s.push(e[i].data[r][1][0]),n.push(e[i].data[r][1][1])):(s.push(e[i].data[r]),n.push(e[i].data[r]));else if("xy"===t)for(var o=function(t){var r=Array.isArray(e[i].data[t].y),o=y.randomId(),l=e[i].data[t].x,h={y1:r?e[i].data[t].y[0]:e[i].data[t].y,y2:r?e[i].data[t].y[1]:e[i].data[t].y,rangeName:o};e[i].data[t].rangeName=o;var c=a.findIndex((function(t){return t.x===l}));a[c].y.push(h),s.push(h.y1),n.push(h.y2)},l=0;l<e[i].data.length;l++)o(l);return{start:s,end:n,rangeUniques:a}}},{key:"handleCandleStickBoxDataFormat",value:function(t,e,i){var s=this.w,n="boxPlot"===s.config.chart.type||"boxPlot"===s.config.series[i].type,a=[],r=[],o=[],l=[],h=[];if("array"===t)if(n&&6===e[i].data[0].length||!n&&5===e[i].data[0].length)for(var c=0;c<e[i].data.length;c++)a.push(e[i].data[c][1]),r.push(e[i].data[c][2]),n?(o.push(e[i].data[c][3]),l.push(e[i].data[c][4]),h.push(e[i].data[c][5])):(l.push(e[i].data[c][3]),h.push(e[i].data[c][4]));else for(var d=0;d<e[i].data.length;d++)Array.isArray(e[i].data[d][1])&&(a.push(e[i].data[d][1][0]),r.push(e[i].data[d][1][1]),n?(o.push(e[i].data[d][1][2]),l.push(e[i].data[d][1][3]),h.push(e[i].data[d][1][4])):(l.push(e[i].data[d][1][2]),h.push(e[i].data[d][1][3])));else if("xy"===t)for(var u=0;u<e[i].data.length;u++)Array.isArray(e[i].data[u].y)&&(a.push(e[i].data[u].y[0]),r.push(e[i].data[u].y[1]),n?(o.push(e[i].data[u].y[2]),l.push(e[i].data[u].y[3]),h.push(e[i].data[u].y[4])):(l.push(e[i].data[u].y[2]),h.push(e[i].data[u].y[3])));return{o:a,h:r,m:o,l:l,c:h}}},{key:"parseDataAxisCharts",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ctx,s=this.w.config,n=this.w.globals,a=new M(i),r=s.labels.length>0?s.labels.slice():s.xaxis.categories.slice();n.isRangeBar="rangeBar"===s.chart.type&&n.isBarHorizontal,n.hasGroups="category"===s.xaxis.type&&s.xaxis.group.groups.length>0,n.hasGroups&&(n.groups=s.xaxis.group.groups);for(var o=function(){for(var t=0;t<r.length;t++)if("string"==typeof r[t]){if(!a.isValidDate(r[t]))throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");e.twoDSeriesX.push(a.parseDate(r[t]))}else e.twoDSeriesX.push(r[t])},l=0;l<t.length;l++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],void 0===t[l].data)return void console.error("It is a possibility that you may have not included 'data' property in series.");if("rangeBar"!==s.chart.type&&"rangeArea"!==s.chart.type&&"rangeBar"!==t[l].type&&"rangeArea"!==t[l].type||(n.isRangeData=!0,n.isComboCharts?"rangeBar"!==t[l].type&&"rangeArea"!==t[l].type||this.handleRangeData(t,l):"rangeBar"!==s.chart.type&&"rangeArea"!==s.chart.type||this.handleRangeData(t,l)),this.isMultiFormat())this.isFormat2DArray()?this.handleFormat2DArray(t,l):this.isFormatXY()&&this.handleFormatXY(t,l),"candlestick"!==s.chart.type&&"candlestick"!==t[l].type&&"boxPlot"!==s.chart.type&&"boxPlot"!==t[l].type||this.handleCandleStickBoxData(t,l),n.series.push(this.twoDSeries),n.labels.push(this.twoDSeriesX),n.seriesX.push(this.twoDSeriesX),n.seriesGoals=this.seriesGoals,l!==this.activeSeriesIndex||this.fallbackToCategory||(n.isXNumeric=!0);else{"datetime"===s.xaxis.type?(n.isXNumeric=!0,o(),n.seriesX.push(this.twoDSeriesX)):"numeric"===s.xaxis.type&&(n.isXNumeric=!0,r.length>0&&(this.twoDSeriesX=r,n.seriesX.push(this.twoDSeriesX))),n.labels.push(this.twoDSeriesX);var h=t[l].data.map((function(t){return y.parseNumber(t)}));n.series.push(h)}n.seriesZ.push(this.threeDSeries),void 0!==t[l].name?n.seriesNames.push(t[l].name):n.seriesNames.push("series-"+parseInt(l+1,10)),void 0!==t[l].color?n.seriesColors.push(t[l].color):n.seriesColors.push(void 0)}return this.w}},{key:"parseDataNonAxisCharts",value:function(t){var e=this.w.globals,i=this.w.config;e.series=t.slice(),e.seriesNames=i.labels.slice();for(var s=0;s<e.series.length;s++)void 0===e.seriesNames[s]&&e.seriesNames.push("series-"+(s+1));return this.w}},{key:"handleExternalLabelsData",value:function(t){var e=this.w.config,i=this.w.globals;e.xaxis.categories.length>0?i.labels=e.xaxis.categories:e.labels.length>0?i.labels=e.labels.slice():this.fallbackToCategory?(i.labels=i.labels[0],i.seriesRange.length&&(i.seriesRange.map((function(t){t.forEach((function(t){i.labels.indexOf(t.x)<0&&t.x&&i.labels.push(t.x)}))})),i.labels=i.labels.filter((function(t,e,i){return i.indexOf(t)===e}))),e.xaxis.convertedCatToNumeric&&(new R(e).convertCatToNumericXaxis(e,this.ctx,i.seriesX[0]),this._generateExternalLabels(t))):this._generateExternalLabels(t)}},{key:"_generateExternalLabels",value:function(t){var e=this.w.globals,i=this.w.config,s=[];if(e.axisCharts){if(e.series.length>0)if(this.isFormatXY())for(var n=i.series.map((function(t,e){return t.data.filter((function(t,e,i){return i.findIndex((function(e){return e.x===t.x}))===e}))})),a=n.reduce((function(t,e,i,s){return s[t].length>e.length?t:i}),0),r=0;r<n[a].length;r++)s.push(r+1);else for(var o=0;o<e.series[e.maxValsInArrayIndex].length;o++)s.push(o+1);e.seriesX=[];for(var l=0;l<t.length;l++)e.seriesX.push(s);e.isXNumeric=!0}if(0===s.length){s=e.axisCharts?[]:e.series.map((function(t,e){return e+1}));for(var h=0;h<t.length;h++)e.seriesX.push(s)}e.labels=s,i.xaxis.convertedCatToNumeric&&(e.categoryLabels=s.map((function(t){return i.xaxis.labels.formatter(t)}))),e.noLabelsProvided=!0}},{key:"parseData",value:function(t){var e=this.w,i=e.config,s=e.globals;if(this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),s.axisCharts?(this.parseDataAxisCharts(t),this.coreUtils.getLargestSeries()):this.parseDataNonAxisCharts(t),"bar"===i.chart.type&&i.chart.stacked){var n=new X(this.ctx);s.series=n.setNullSeriesToZeroValues(s.series)}this.coreUtils.getSeriesTotals(),s.axisCharts&&(s.stackedSeriesTotals=this.coreUtils.getStackedSeriesTotals()),this.coreUtils.getPercentSeries(),s.dataFormatXNumeric||s.isXNumeric&&("numeric"!==i.xaxis.type||0!==i.labels.length||0!==i.xaxis.categories.length)||this.handleExternalLabelsData(t);for(var a=this.coreUtils.getCategoryLabels(s.labels),r=0;r<a.length;r++)if(Array.isArray(a[r])){s.isMultiLineX=!0;break}}},{key:"excludeCollapsedSeriesInYAxis",value:function(){var t=this,e=this.w;e.globals.ignoreYAxisIndexes=e.globals.collapsedSeries.map((function(i,s){if(t.w.globals.isMultipleYAxis&&!e.config.chart.stacked)return i.index}))}}]),t}(),V=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w,this.tooltipKeyFormat="dd MMM"}return h(t,[{key:"xLabelFormat",value:function(t,e,i,s){var n=this.w;if("datetime"===n.config.xaxis.type&&void 0===n.config.xaxis.labels.formatter&&void 0===n.config.tooltip.x.formatter){var a=new M(this.ctx);return a.formatDate(a.getDate(e),n.config.tooltip.x.format)}return t(e,i,s)}},{key:"defaultGeneralFormatter",value:function(t){return Array.isArray(t)?t.map((function(t){return t})):t}},{key:"defaultYFormatter",value:function(t,e,i){var s=this.w;return y.isNumber(t)&&(t=0!==s.globals.yValueDecimal?t.toFixed(void 0!==e.decimalsInFloat?e.decimalsInFloat:s.globals.yValueDecimal):s.globals.maxYArr[i]-s.globals.minYArr[i]<5?t.toFixed(1):t.toFixed(0)),t}},{key:"setLabelFormatters",value:function(){var t=this,e=this.w;return e.globals.xaxisTooltipFormatter=function(e){return t.defaultGeneralFormatter(e)},e.globals.ttKeyFormatter=function(e){return t.defaultGeneralFormatter(e)},e.globals.ttZFormatter=function(t){return t},e.globals.legendFormatter=function(e){return t.defaultGeneralFormatter(e)},void 0!==e.config.xaxis.labels.formatter?e.globals.xLabelFormatter=e.config.xaxis.labels.formatter:e.globals.xLabelFormatter=function(t){if(y.isNumber(t)){if(!e.config.xaxis.convertedCatToNumeric&&"numeric"===e.config.xaxis.type){if(y.isNumber(e.config.xaxis.decimalsInFloat))return t.toFixed(e.config.xaxis.decimalsInFloat);var i=e.globals.maxX-e.globals.minX;return i>0&&i<100?t.toFixed(1):t.toFixed(0)}return e.globals.isBarHorizontal&&e.globals.maxY-e.globals.minYArr<4?t.toFixed(1):t.toFixed(0)}return t},"function"==typeof e.config.tooltip.x.formatter?e.globals.ttKeyFormatter=e.config.tooltip.x.formatter:e.globals.ttKeyFormatter=e.globals.xLabelFormatter,"function"==typeof e.config.xaxis.tooltip.formatter&&(e.globals.xaxisTooltipFormatter=e.config.xaxis.tooltip.formatter),(Array.isArray(e.config.tooltip.y)||void 0!==e.config.tooltip.y.formatter)&&(e.globals.ttVal=e.config.tooltip.y),void 0!==e.config.tooltip.z.formatter&&(e.globals.ttZFormatter=e.config.tooltip.z.formatter),void 0!==e.config.legend.formatter&&(e.globals.legendFormatter=e.config.legend.formatter),e.config.yaxis.forEach((function(i,s){void 0!==i.labels.formatter?e.globals.yLabelFormatters[s]=i.labels.formatter:e.globals.yLabelFormatters[s]=function(n){return e.globals.xyCharts?Array.isArray(n)?n.map((function(e){return t.defaultYFormatter(e,i,s)})):t.defaultYFormatter(n,i,s):n}})),e.globals}},{key:"heatmapLabelFormatters",value:function(){var t=this.w;if("heatmap"===t.config.chart.type){t.globals.yAxisScale[0].result=t.globals.seriesNames.slice();var e=t.globals.seriesNames.reduce((function(t,e){return t.length>e.length?t:e}),0);t.globals.yAxisScale[0].niceMax=e,t.globals.yAxisScale[0].niceMin=e}}}]),t}(),Z=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w}return h(t,[{key:"getLabel",value:function(t,e,i,s){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"12px",r=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],o=this.w,l=void 0===t[s]?"":t[s],h=l,c=o.globals.xLabelFormatter,d=o.config.xaxis.labels.formatter,u=!1,p=new V(this.ctx),g=l;r&&(h=p.xLabelFormat(c,l,g,{i:s,dateFormatter:new M(this.ctx).formatDate,w:o}),void 0!==d&&(h=d(l,t[s],{i:s,dateFormatter:new M(this.ctx).formatDate,w:o})));var f=function(t){var i=null;return e.forEach((function(t){"month"===t.unit?i="year":"day"===t.unit?i="month":"hour"===t.unit?i="day":"minute"===t.unit&&(i="hour")})),i===t};e.length>0?(u=f(e[s].unit),i=e[s].position,h=e[s].value):"datetime"===o.config.xaxis.type&&void 0===d&&(h=""),void 0===h&&(h=""),h=Array.isArray(h)?h:h.toString();var m=new C(this.ctx),v={};v=o.globals.rotateXLabels&&r?m.getTextRects(h,parseInt(a,10),null,"rotate(".concat(o.config.xaxis.labels.rotate," 0 0)"),!1):m.getTextRects(h,parseInt(a,10));var b=!o.config.xaxis.labels.showDuplicates&&this.ctx.timeScale;return!Array.isArray(h)&&(0===h.indexOf("NaN")||0===h.toLowerCase().indexOf("invalid")||h.toLowerCase().indexOf("infinity")>=0||n.indexOf(h)>=0&&b)&&(h=""),{x:i,text:h,textRect:v,isBold:u}}},{key:"checkLabelBasedOnTickamount",value:function(t,e,i){var s=this.w,n=s.config.xaxis.tickAmount;return"dataPoints"===n&&(n=Math.round(s.globals.gridWidth/120)),n>i||t%Math.round(i/(n+1))==0||(e.text=""),e}},{key:"checkForOverflowingLabels",value:function(t,e,i,s,n){var a=this.w;if(0===t&&a.globals.skipFirstTimelinelabel&&(e.text=""),t===i-1&&a.globals.skipLastTimelinelabel&&(e.text=""),a.config.xaxis.labels.hideOverlappingLabels&&s.length>0){var r=n[n.length-1];e.x<r.textRect.width/(a.globals.rotateXLabels?Math.abs(a.config.xaxis.labels.rotate)/12:1.01)+r.x&&(e.text="")}return e}},{key:"checkForReversedLabels",value:function(t,e){var i=this.w;return i.config.yaxis[t]&&i.config.yaxis[t].reversed&&e.reverse(),e}},{key:"isYAxisHidden",value:function(t){var e=this.w,i=new S(this.ctx);return!e.config.yaxis[t].show||!e.config.yaxis[t].showForNullSeries&&i.isSeriesNull(t)&&-1===e.globals.collapsedSeriesIndices.indexOf(t)}},{key:"getYAxisForeColor",value:function(t,e){var i=this.w;return Array.isArray(t)&&i.globals.yAxisScale[e]&&this.ctx.theme.pushExtraColors(t,i.globals.yAxisScale[e].result.length,!1),t}},{key:"drawYAxisTicks",value:function(t,e,i,s,n,a,r){var o=this.w,l=new C(this.ctx),h=o.globals.translateY;if(s.show&&e>0){!0===o.config.yaxis[n].opposite&&(t+=s.width);for(var c=e;c>=0;c--){var d=h+e/10+o.config.yaxis[n].labels.offsetY-1;o.globals.isBarHorizontal&&(d=a*c),"heatmap"===o.config.chart.type&&(d+=a/2);var u=l.drawLine(t+i.offsetX-s.width+s.offsetX,d+s.offsetY,t+i.offsetX+s.offsetX,d+s.offsetY,s.color);r.add(u),h+=a}}}}]),t}(),G=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w}return h(t,[{key:"scaleSvgNode",value:function(t,e){var i=parseFloat(t.getAttributeNS(null,"width")),s=parseFloat(t.getAttributeNS(null,"height"));t.setAttributeNS(null,"width",i*e),t.setAttributeNS(null,"height",s*e),t.setAttributeNS(null,"viewBox","0 0 "+i+" "+s)}},{key:"fixSvgStringForIe11",value:function(t){if(!y.isIE11())return t.replace(/&nbsp;/g,"&#160;");var e=0,i=t.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,(function(t){return 2===++e?'xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.dev"':t}));return(i=i.replace(/xmlns:NS\d+=""/g,"")).replace(/NS\d+:(\w+:\w+=")/g,"$1")}},{key:"getSvgString",value:function(t){null==t&&(t=1);var e=this.w.globals.dom.Paper.svg();if(1!==t){var i=this.w.globals.dom.Paper.node.cloneNode(!0);this.scaleSvgNode(i,t),e=(new XMLSerializer).serializeToString(i)}return this.fixSvgStringForIe11(e)}},{key:"cleanup",value:function(){var t=this.w,e=t.globals.dom.baseEl.getElementsByClassName("apexcharts-xcrosshairs"),i=t.globals.dom.baseEl.getElementsByClassName("apexcharts-ycrosshairs"),s=t.globals.dom.baseEl.querySelectorAll(".apexcharts-zoom-rect, .apexcharts-selection-rect");Array.prototype.forEach.call(s,(function(t){t.setAttribute("width",0)})),e&&e[0]&&(e[0].setAttribute("x",-500),e[0].setAttribute("x1",-500),e[0].setAttribute("x2",-500)),i&&i[0]&&(i[0].setAttribute("y",-100),i[0].setAttribute("y1",-100),i[0].setAttribute("y2",-100))}},{key:"svgUrl",value:function(){this.cleanup();var t=this.getSvgString(),e=new Blob([t],{type:"image/svg+xml;charset=utf-8"});return URL.createObjectURL(e)}},{key:"dataURI",value:function(t){var e=this;return new Promise((function(i){var s=e.w,n=t?t.scale||t.width/s.globals.svgWidth:1;e.cleanup();var a=document.createElement("canvas");a.width=s.globals.svgWidth*n,a.height=parseInt(s.globals.dom.elWrap.style.height,10)*n;var r="transparent"===s.config.chart.background?"#fff":s.config.chart.background,o=a.getContext("2d");o.fillStyle=r,o.fillRect(0,0,a.width*n,a.height*n);var l=e.getSvgString(n);if(window.canvg&&y.isIE11()){var h=window.canvg.Canvg.fromString(o,l,{ignoreClear:!0,ignoreDimensions:!0});h.start();var c=a.msToBlob();h.stop(),i({blob:c})}else{var d="data:image/svg+xml,"+encodeURIComponent(l),u=new Image;u.crossOrigin="anonymous",u.onload=function(){if(o.drawImage(u,0,0),a.msToBlob){var t=a.msToBlob();i({blob:t})}else{var e=a.toDataURL("image/png");i({imgURI:e})}},u.src=d}}))}},{key:"exportToSVG",value:function(){this.triggerDownload(this.svgUrl(),this.w.config.chart.toolbar.export.svg.filename,".svg")}},{key:"exportToPng",value:function(){var t=this;this.dataURI().then((function(e){var i=e.imgURI,s=e.blob;s?navigator.msSaveOrOpenBlob(s,t.w.globals.chartID+".png"):t.triggerDownload(i,t.w.config.chart.toolbar.export.png.filename,".png")}))}},{key:"exportToCSV",value:function(t){var e=this,i=t.series,s=t.fileName,n=t.columnDelimiter,a=void 0===n?",":n,r=t.lineDelimiter,o=void 0===r?"\n":r,l=this.w;i||(i=l.config.series);var h=[],c=[],d="",u=l.globals.series.map((function(t,e){return-1===l.globals.collapsedSeriesIndices.indexOf(e)?t:[]})),p=Math.max.apply(Math,v(i.map((function(t){return t.data?t.data.length:0})))),g=new Y(this.ctx),f=new Z(this.ctx),m=function(t){var i="";if(l.globals.axisCharts){if("category"===l.config.xaxis.type||l.config.xaxis.convertedCatToNumeric)if(l.globals.isBarHorizontal){var s=l.globals.yLabelFormatters[0],n=new X(e.ctx).getActiveConfigSeriesIndex();i=s(l.globals.labels[t],{seriesIndex:n,dataPointIndex:t,w:l})}else i=f.getLabel(l.globals.labels,l.globals.timescaleLabels,0,t).text;"datetime"===l.config.xaxis.type&&(l.config.xaxis.categories.length?i=l.config.xaxis.categories[t]:l.config.labels.length&&(i=l.config.labels[t]))}else i=l.config.labels[t];return Array.isArray(i)&&(i=i.join(" ")),y.isNumber(i)?i:i.split(a).join("")},b=function(t,e){if(h.length&&0===e&&c.push(h.join(a)),t.data){t.data=t.data.length&&t.data||v(Array(p)).map((function(){return""}));for(var s=0;s<t.data.length;s++){h=[];var n=m(s);if(n||(g.isFormatXY()?n=i[e].data[s].x:g.isFormat2DArray()&&(n=i[e].data[s]?i[e].data[s][0]:"")),0===e){h.push((o=n,"datetime"===l.config.xaxis.type&&String(o).length>=10?l.config.chart.toolbar.export.csv.dateFormatter(n):y.isNumber(n)?n:n.split(a).join("")));for(var r=0;r<l.globals.series.length;r++)g.isFormatXY()?h.push(i[r].data[s].y):h.push(u[r][s])}("candlestick"===l.config.chart.type||t.type&&"candlestick"===t.type)&&(h.pop(),h.push(l.globals.seriesCandleO[e][s]),h.push(l.globals.seriesCandleH[e][s]),h.push(l.globals.seriesCandleL[e][s]),h.push(l.globals.seriesCandleC[e][s])),("boxPlot"===l.config.chart.type||t.type&&"boxPlot"===t.type)&&(h.pop(),h.push(l.globals.seriesCandleO[e][s]),h.push(l.globals.seriesCandleH[e][s]),h.push(l.globals.seriesCandleM[e][s]),h.push(l.globals.seriesCandleL[e][s]),h.push(l.globals.seriesCandleC[e][s])),"rangeBar"===l.config.chart.type&&(h.pop(),h.push(l.globals.seriesRangeStart[e][s]),h.push(l.globals.seriesRangeEnd[e][s])),h.length&&c.push(h.join(a))}}var o};h.push(l.config.chart.toolbar.export.csv.headerCategory),"boxPlot"===l.config.chart.type?(h.push("minimum"),h.push("q1"),h.push("median"),h.push("q3"),h.push("maximum")):"candlestick"===l.config.chart.type?(h.push("open"),h.push("high"),h.push("low"),h.push("close")):"rangeBar"===l.config.chart.type?(h.push("minimum"),h.push("maximum")):i.map((function(t,e){var i=t.name?t.name:"series-".concat(e);l.globals.axisCharts&&h.push(i.split(a).join("")?i.split(a).join(""):"series-".concat(e))})),l.globals.axisCharts||(h.push(l.config.chart.toolbar.export.csv.headerValue),c.push(h.join(a))),i.map((function(t,e){l.globals.axisCharts?b(t,e):((h=[]).push(l.globals.labels[e].split(a).join("")),h.push(u[e]),c.push(h.join(a)))})),d+=c.join(o),this.triggerDownload("data:text/csv; charset=utf-8,"+encodeURIComponent("\ufeff"+d),s||l.config.chart.toolbar.export.csv.filename,".csv")}},{key:"triggerDownload",value:function(t,e,i){var s=document.createElement("a");s.href=t,s.download=(e||this.w.globals.chartID)+i,document.body.appendChild(s),s.click(),document.body.removeChild(s)}}]),t}(),j=function(){function t(e,i){o(this,t),this.ctx=e,this.elgrid=i,this.w=e.w;var s=this.w;this.axesUtils=new Z(e),this.xaxisLabels=s.globals.labels.slice(),s.globals.timescaleLabels.length>0&&!s.globals.isBarHorizontal&&(this.xaxisLabels=s.globals.timescaleLabels.slice()),s.config.xaxis.overwriteCategories&&(this.xaxisLabels=s.config.xaxis.overwriteCategories),this.drawnLabels=[],this.drawnLabelsRects=[],"top"===s.config.xaxis.position?this.offY=0:this.offY=s.globals.gridHeight+1,this.offY=this.offY+s.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal="bar"===s.config.chart.type&&s.config.plotOptions.bar.horizontal,this.xaxisFontSize=s.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=s.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=s.config.xaxis.labels.style.colors,this.xaxisBorderWidth=s.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=s.config.yaxis[0].axisBorder.width.toString()),this.xaxisBorderWidth.indexOf("%")>-1?this.xaxisBorderWidth=s.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:this.xaxisBorderWidth=parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=s.config.xaxis.axisBorder.height,this.yaxis=s.config.yaxis[0]}return h(t,[{key:"drawXaxis",value:function(){var t=this.w,e=new C(this.ctx),i=e.group({class:"apexcharts-xaxis",transform:"translate(".concat(t.config.xaxis.offsetX,", ").concat(t.config.xaxis.offsetY,")")}),s=e.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(t.globals.translateXAxisX,", ").concat(t.globals.translateXAxisY,")")});i.add(s);for(var n=[],a=0;a<this.xaxisLabels.length;a++)n.push(this.xaxisLabels[a]);if(this.drawXAxisLabelAndGroup(!0,e,s,n,t.globals.isXNumeric,(function(t,e){return e})),t.globals.hasGroups){var r=t.globals.groups;n=[];for(var o=0;o<r.length;o++)n.push(r[o].title);var l={};t.config.xaxis.group.style&&(l.xaxisFontSize=t.config.xaxis.group.style.fontSize,l.xaxisFontFamily=t.config.xaxis.group.style.fontFamily,l.xaxisForeColors=t.config.xaxis.group.style.colors,l.fontWeight=t.config.xaxis.group.style.fontWeight,l.cssClass=t.config.xaxis.group.style.cssClass),this.drawXAxisLabelAndGroup(!1,e,s,n,!1,(function(t,e){return r[t].cols*e}),l)}if(void 0!==t.config.xaxis.title.text){var h=e.group({class:"apexcharts-xaxis-title"}),c=e.drawText({x:t.globals.gridWidth/2+t.config.xaxis.title.offsetX,y:this.offY+parseFloat(this.xaxisFontSize)+("bottom"===t.config.xaxis.title.position?t.globals.xAxisLabelsHeight:-t.globals.xAxisLabelsHeight-10)+t.config.xaxis.title.offsetY,text:t.config.xaxis.title.text,textAnchor:"middle",fontSize:t.config.xaxis.title.style.fontSize,fontFamily:t.config.xaxis.title.style.fontFamily,fontWeight:t.config.xaxis.title.style.fontWeight,foreColor:t.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+t.config.xaxis.title.style.cssClass});h.add(c),i.add(h)}if(t.config.xaxis.axisBorder.show){var d=t.globals.barPadForNumericAxis,u=e.drawLine(t.globals.padHorizontal+t.config.xaxis.axisBorder.offsetX-d,this.offY,this.xaxisBorderWidth+d,this.offY,t.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight);this.elgrid&&this.elgrid.elGridBorders?this.elgrid.elGridBorders.add(u):i.add(u)}return i}},{key:"drawXAxisLabelAndGroup",value:function(t,e,i,s,n,a){var r,o=this,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},h=[],c=[],d=this.w,u=l.xaxisFontSize||this.xaxisFontSize,p=l.xaxisFontFamily||this.xaxisFontFamily,g=l.xaxisForeColors||this.xaxisForeColors,f=l.fontWeight||d.config.xaxis.labels.style.fontWeight,m=l.cssClass||d.config.xaxis.labels.style.cssClass,v=d.globals.padHorizontal,b=s.length,x="category"===d.config.xaxis.type?d.globals.dataPoints:b;if(0===x&&b>x&&(x=b),n){var y=x>1?x-1:x;r=d.globals.gridWidth/y,v=v+a(0,r)/2+d.config.xaxis.labels.offsetX}else r=d.globals.gridWidth/x,v=v+a(0,r)+d.config.xaxis.labels.offsetX;for(var w=function(n){var l=v-a(n,r)/2+d.config.xaxis.labels.offsetX;0===n&&1===b&&r/2===v&&1===x&&(l=d.globals.gridWidth/2);var y=o.axesUtils.getLabel(s,d.globals.timescaleLabels,l,n,h,u,t),w=28;if(d.globals.rotateXLabels&&t&&(w=22),d.config.xaxis.title.text&&"top"===d.config.xaxis.position&&(w+=parseFloat(d.config.xaxis.title.style.fontSize)+2),t||(w=w+parseFloat(u)+(d.globals.xAxisLabelsHeight-d.globals.xAxisGroupLabelsHeight)+(d.globals.rotateXLabels?10:0)),y=void 0!==d.config.xaxis.tickAmount&&"dataPoints"!==d.config.xaxis.tickAmount&&"datetime"!==d.config.xaxis.type?o.axesUtils.checkLabelBasedOnTickamount(n,y,b):o.axesUtils.checkForOverflowingLabels(n,y,b,h,c),t&&y.text&&d.globals.xaxisLabelsCount++,d.config.xaxis.labels.show){var k=e.drawText({x:y.x,y:o.offY+d.config.xaxis.labels.offsetY+w-("top"===d.config.xaxis.position?d.globals.xAxisHeight+d.config.xaxis.axisTicks.height-2:0),text:y.text,textAnchor:"middle",fontWeight:y.isBold?600:f,fontSize:u,fontFamily:p,foreColor:Array.isArray(g)?t&&d.config.xaxis.convertedCatToNumeric?g[d.globals.minX+n-1]:g[n]:g,isPlainText:!1,cssClass:(t?"apexcharts-xaxis-label ":"apexcharts-xaxis-group-label ")+m});if(i.add(k),k.on("click",(function(t){if("function"==typeof d.config.chart.events.xAxisLabelClick){var e=Object.assign({},d,{labelIndex:n});d.config.chart.events.xAxisLabelClick(t,o.ctx,e)}})),t){var C=document.createElementNS(d.globals.SVGNS,"title");C.textContent=Array.isArray(y.text)?y.text.join(" "):y.text,k.node.appendChild(C),""!==y.text&&(h.push(y.text),c.push(y))}}n<b-1&&(v+=a(n+1,r))},k=0;k<=b-1;k++)w(k)}},{key:"drawXaxisInversed",value:function(t){var e,i,s=this,n=this.w,a=new C(this.ctx),r=n.config.yaxis[0].opposite?n.globals.translateYAxisX[t]:0,o=a.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:t}),l=a.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+r+", 0)"});o.add(l);var h=[];if(n.config.yaxis[t].show)for(var c=0;c<this.xaxisLabels.length;c++)h.push(this.xaxisLabels[c]);e=n.globals.gridHeight/h.length,i=-e/2.2;var d=n.globals.yLabelFormatters[0],u=n.config.yaxis[0].labels;if(u.show)for(var p=function(r){var o=void 0===h[r]?"":h[r];o=d(o,{seriesIndex:t,dataPointIndex:r,w:n});var c=s.axesUtils.getYAxisForeColor(u.style.colors,t),p=0;Array.isArray(o)&&(p=o.length/2*parseInt(u.style.fontSize,10));var g=a.drawText({x:u.offsetX-15,y:i+e+u.offsetY-p,text:o,textAnchor:s.yaxis.opposite?"start":"end",foreColor:Array.isArray(c)?c[r]:c,fontSize:u.style.fontSize,fontFamily:u.style.fontFamily,fontWeight:u.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+u.style.cssClass,maxWidth:u.maxWidth});l.add(g),g.on("click",(function(t){if("function"==typeof n.config.chart.events.xAxisLabelClick){var e=Object.assign({},n,{labelIndex:r});n.config.chart.events.xAxisLabelClick(t,s.ctx,e)}}));var f=document.createElementNS(n.globals.SVGNS,"title");if(f.textContent=Array.isArray(o)?o.join(" "):o,g.node.appendChild(f),0!==n.config.yaxis[t].labels.rotate){var m=a.rotateAroundCenter(g.node);g.node.setAttribute("transform","rotate(".concat(n.config.yaxis[t].labels.rotate," 0 ").concat(m.y,")"))}i+=e},g=0;g<=h.length-1;g++)p(g);if(void 0!==n.config.yaxis[0].title.text){var f=a.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+r+", 0)"}),m=a.drawText({x:n.config.yaxis[0].title.offsetX,y:n.globals.gridHeight/2+n.config.yaxis[0].title.offsetY,text:n.config.yaxis[0].title.text,textAnchor:"middle",foreColor:n.config.yaxis[0].title.style.color,fontSize:n.config.yaxis[0].title.style.fontSize,fontWeight:n.config.yaxis[0].title.style.fontWeight,fontFamily:n.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+n.config.yaxis[0].title.style.cssClass});f.add(m),o.add(f)}var v=0;this.isCategoryBarHorizontal&&n.config.yaxis[0].opposite&&(v=n.globals.gridWidth);var b=n.config.xaxis.axisBorder;if(b.show){var x=a.drawLine(n.globals.padHorizontal+b.offsetX+v,1+b.offsetY,n.globals.padHorizontal+b.offsetX+v,n.globals.gridHeight+b.offsetY,b.color,0);this.elgrid&&this.elgrid.elGridBorders?this.elgrid.elGridBorders.add(x):o.add(x)}return n.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(v,h.length,n.config.yaxis[0].axisBorder,n.config.yaxis[0].axisTicks,0,e,o),o}},{key:"drawXaxisTicks",value:function(t,e,i){var s=this.w,n=t;if(!(t<0||t-2>s.globals.gridWidth)){var a=this.offY+s.config.xaxis.axisTicks.offsetY;if(e=e+a+s.config.xaxis.axisTicks.height,"top"===s.config.xaxis.position&&(e=a-s.config.xaxis.axisTicks.height),s.config.xaxis.axisTicks.show){var r=new C(this.ctx).drawLine(t+s.config.xaxis.axisTicks.offsetX,a+s.config.xaxis.offsetY,n+s.config.xaxis.axisTicks.offsetX,e+s.config.xaxis.offsetY,s.config.xaxis.axisTicks.color);i.add(r),r.node.classList.add("apexcharts-xaxis-tick")}}}},{key:"getXAxisTicksPositions",value:function(){var t=this.w,e=[],i=this.xaxisLabels.length,s=t.globals.padHorizontal;if(t.globals.timescaleLabels.length>0)for(var n=0;n<i;n++)s=this.xaxisLabels[n].position,e.push(s);else for(var a=i,r=0;r<a;r++){var o=a;t.globals.isXNumeric&&"bar"!==t.config.chart.type&&(o-=1),s+=t.globals.gridWidth/o,e.push(s)}return e}},{key:"xAxisLabelCorrections",value:function(){var t=this.w,e=new C(this.ctx),i=t.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),s=t.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text:not(.apexcharts-xaxis-group-label)"),n=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),a=t.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(t.globals.rotateXLabels||t.config.xaxis.labels.rotateAlways)for(var r=0;r<s.length;r++){var o=e.rotateAroundCenter(s[r]);o.y=o.y-1,o.x=o.x+1,s[r].setAttribute("transform","rotate(".concat(t.config.xaxis.labels.rotate," ").concat(o.x," ").concat(o.y,")")),s[r].setAttribute("text-anchor","end"),i.setAttribute("transform","translate(0, ".concat(-10,")"));var l=s[r].childNodes;t.config.xaxis.labels.trim&&Array.prototype.forEach.call(l,(function(i){e.placeTextWithEllipsis(i,i.textContent,t.globals.xAxisLabelsHeight-("bottom"===t.config.legend.position?20:10))}))}else!function(){for(var i=t.globals.gridWidth/(t.globals.labels.length+1),n=0;n<s.length;n++){var a=s[n].childNodes;t.config.xaxis.labels.trim&&"datetime"!==t.config.xaxis.type&&Array.prototype.forEach.call(a,(function(t){e.placeTextWithEllipsis(t,t.textContent,i)}))}}();if(n.length>0){var h=n[n.length-1].getBBox(),c=n[0].getBBox();h.x<-20&&n[n.length-1].parentNode.removeChild(n[n.length-1]),c.x+c.width>t.globals.gridWidth&&!t.globals.isBarHorizontal&&n[0].parentNode.removeChild(n[0]);for(var d=0;d<a.length;d++)e.placeTextWithEllipsis(a[d],a[d].textContent,t.config.yaxis[0].labels.maxWidth-(t.config.yaxis[0].title.text?2*parseFloat(t.config.yaxis[0].title.style.fontSize):0)-15)}}}]),t}(),q=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w;var i=this.w;this.xaxisLabels=i.globals.labels.slice(),this.axesUtils=new Z(e),this.isRangeBar=i.globals.seriesRange.length,i.globals.timescaleLabels.length>0&&(this.xaxisLabels=i.globals.timescaleLabels.slice())}return h(t,[{key:"drawGridArea",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.w,i=new C(this.ctx);null===t&&(t=i.group({class:"apexcharts-grid"}));var s=i.drawLine(e.globals.padHorizontal,1,e.globals.padHorizontal,e.globals.gridHeight,"transparent"),n=i.drawLine(e.globals.padHorizontal,e.globals.gridHeight,e.globals.gridWidth,e.globals.gridHeight,"transparent");return t.add(n),t.add(s),t}},{key:"drawGrid",value:function(){var t=null;return this.w.globals.axisCharts&&(t=this.renderGrid(),this.drawGridArea(t.el)),t}},{key:"createGridMask",value:function(){var t=this.w,e=t.globals,i=new C(this.ctx),s=Array.isArray(t.config.stroke.width)?0:t.config.stroke.width;if(Array.isArray(t.config.stroke.width)){var n=0;t.config.stroke.width.forEach((function(t){n=Math.max(n,t)})),s=n}e.dom.elGridRectMask=document.createElementNS(e.SVGNS,"clipPath"),e.dom.elGridRectMask.setAttribute("id","gridRectMask".concat(e.cuid)),e.dom.elGridRectMarkerMask=document.createElementNS(e.SVGNS,"clipPath"),e.dom.elGridRectMarkerMask.setAttribute("id","gridRectMarkerMask".concat(e.cuid)),e.dom.elForecastMask=document.createElementNS(e.SVGNS,"clipPath"),e.dom.elForecastMask.setAttribute("id","forecastMask".concat(e.cuid)),e.dom.elNonForecastMask=document.createElementNS(e.SVGNS,"clipPath"),e.dom.elNonForecastMask.setAttribute("id","nonForecastMask".concat(e.cuid));var a=t.config.chart.type,r=0,o=0;("bar"===a||"rangeBar"===a||"candlestick"===a||"boxPlot"===a||t.globals.comboBarCount>0)&&t.globals.isXNumeric&&!t.globals.isBarHorizontal&&(r=t.config.grid.padding.left,o=t.config.grid.padding.right,e.barPadForNumericAxis>r&&(r=e.barPadForNumericAxis,o=e.barPadForNumericAxis)),e.dom.elGridRect=i.drawRect(-s/2-r-2,-s/2,e.gridWidth+s+o+r+4,e.gridHeight+s,0,"#fff");var l=t.globals.markers.largestSize+1;e.dom.elGridRectMarker=i.drawRect(2*-l,2*-l,e.gridWidth+4*l,e.gridHeight+4*l,0,"#fff"),e.dom.elGridRectMask.appendChild(e.dom.elGridRect.node),e.dom.elGridRectMarkerMask.appendChild(e.dom.elGridRectMarker.node);var h=e.dom.baseEl.querySelector("defs");h.appendChild(e.dom.elGridRectMask),h.appendChild(e.dom.elForecastMask),h.appendChild(e.dom.elNonForecastMask),h.appendChild(e.dom.elGridRectMarkerMask)}},{key:"_drawGridLines",value:function(t){var e=t.i,i=t.x1,s=t.y1,n=t.x2,a=t.y2,r=t.xCount,o=t.parent,l=this.w;if(!(0===e&&l.globals.skipFirstTimelinelabel||e===r-1&&l.globals.skipLastTimelinelabel&&!l.config.xaxis.labels.formatter||"radar"===l.config.chart.type)){l.config.grid.xaxis.lines.show&&this._drawGridLine({i:e,x1:i,y1:s,x2:n,y2:a,xCount:r,parent:o});var h=0;if(l.globals.hasGroups&&"between"===l.config.xaxis.tickPlacement){var c=l.globals.groups;if(c){for(var d=0,u=0;d<e&&u<c.length;u++)d+=c[u].cols;d===e&&(h=.6*l.globals.xAxisLabelsHeight)}}new j(this.ctx).drawXaxisTicks(i,h,l.globals.dom.elGraphical)}}},{key:"_drawGridLine",value:function(t){var e=t.i,i=t.x1,s=t.y1,n=t.x2,a=t.y2,r=t.xCount,o=t.parent,l=this.w,h=!1,c=o.node.classList.contains("apexcharts-gridlines-horizontal"),d=l.config.grid.strokeDashArray,u=l.globals.barPadForNumericAxis;(0===s&&0===a||0===i&&0===n)&&(h=!0),s===l.globals.gridHeight&&a===l.globals.gridHeight&&(h=!0),!l.globals.isBarHorizontal||0!==e&&e!==r-1||(h=!0);var p=new C(this).drawLine(i-(c?u:0),s,n+(c?u:0),a,l.config.grid.borderColor,d);p.node.classList.add("apexcharts-gridline"),h?this.elGridBorders.add(p):o.add(p)}},{key:"_drawGridBandRect",value:function(t){var e=t.c,i=t.x1,s=t.y1,n=t.x2,a=t.y2,r=t.type,o=this.w,l=new C(this.ctx),h=o.globals.barPadForNumericAxis;if("column"!==r||"datetime"!==o.config.xaxis.type){var c=o.config.grid[r].colors[e],d=l.drawRect(i-("row"===r?h:0),s,n+("row"===r?2*h:0),a,0,c,o.config.grid[r].opacity);this.elg.add(d),d.attr("clip-path","url(#gridRectMask".concat(o.globals.cuid,")")),d.node.classList.add("apexcharts-grid-".concat(r))}}},{key:"_drawXYLines",value:function(t){var e=this,i=t.xCount,s=t.tickAmount,n=this.w;if(n.config.grid.xaxis.lines.show||n.config.xaxis.axisTicks.show){var a,r=n.globals.padHorizontal,o=n.globals.gridHeight;n.globals.timescaleLabels.length?function(t){for(var s=t.xC,n=t.x1,a=t.y1,r=t.x2,o=t.y2,l=0;l<s;l++)n=e.xaxisLabels[l].position,r=e.xaxisLabels[l].position,e._drawGridLines({i:l,x1:n,y1:a,x2:r,y2:o,xCount:i,parent:e.elgridLinesV})}({xC:i,x1:r,y1:0,x2:a,y2:o}):(n.globals.isXNumeric&&(i=n.globals.xAxisScale.result.length),n.config.xaxis.convertedCatToNumeric&&(i=n.globals.xaxisLabelsCount),function(t){var s=t.xC,a=t.x1,r=t.y1,o=t.x2,l=t.y2;if(void 0!==n.config.xaxis.tickAmount&&"dataPoints"!==n.config.xaxis.tickAmount&&"on"===n.config.xaxis.tickPlacement)n.globals.dom.baseEl.querySelectorAll(".apexcharts-text.apexcharts-xaxis-label tspan:not(:empty)").forEach((function(t,s){var n=t.getBBox();e._drawGridLines({i:s,x1:n.x+n.width/2,y1:r,x2:n.x+n.width/2,y2:l,xCount:i,parent:e.elgridLinesV})}));else for(var h=0;h<s+(n.globals.isXNumeric?0:1);h++)0===h&&1===s&&1===n.globals.dataPoints&&(o=a=n.globals.gridWidth/2),e._drawGridLines({i:h,x1:a,y1:r,x2:o,y2:l,xCount:i,parent:e.elgridLinesV}),o=a+=n.globals.gridWidth/(n.globals.isXNumeric?s-1:s)}({xC:i,x1:r,y1:0,x2:a,y2:o}))}if(n.config.grid.yaxis.lines.show){var l=0,h=0,c=n.globals.gridWidth,d=s+1;this.isRangeBar&&(d=n.globals.labels.length);for(var u=0;u<d+(this.isRangeBar?1:0);u++)this._drawGridLine({i:u,xCount:d+(this.isRangeBar?1:0),x1:0,y1:l,x2:c,y2:h,parent:this.elgridLinesH}),h=l+=n.globals.gridHeight/(this.isRangeBar?d:s)}}},{key:"_drawInvertedXYLines",value:function(t){var e=t.xCount,i=this.w;if(i.config.grid.xaxis.lines.show||i.config.xaxis.axisTicks.show)for(var s,n=i.globals.padHorizontal,a=i.globals.gridHeight,r=0;r<e+1;r++)i.config.grid.xaxis.lines.show&&this._drawGridLine({i:r,xCount:e+1,x1:n,y1:0,x2:s,y2:a,parent:this.elgridLinesV}),new j(this.ctx).drawXaxisTicks(n,0,i.globals.dom.elGraphical),s=n=n+i.globals.gridWidth/e+.3;if(i.config.grid.yaxis.lines.show)for(var o=0,l=0,h=i.globals.gridWidth,c=0;c<i.globals.dataPoints+1;c++)this._drawGridLine({i:c,xCount:i.globals.dataPoints+1,x1:0,y1:o,x2:h,y2:l,parent:this.elgridLinesH}),l=o+=i.globals.gridHeight/i.globals.dataPoints}},{key:"renderGrid",value:function(){var t=this.w,e=new C(this.ctx);this.elg=e.group({class:"apexcharts-grid"}),this.elgridLinesH=e.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=e.group({class:"apexcharts-gridlines-vertical"}),this.elGridBorders=e.group({class:"apexcharts-grid-borders"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),t.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide(),this.elGridBorders.hide());for(var i,s=t.globals.yAxisScale.length?t.globals.yAxisScale[0].result.length-1:5,n=0;n<t.globals.series.length&&(void 0!==t.globals.yAxisScale[n]&&(s=t.globals.yAxisScale[n].result.length-1),!(s>2));n++);return!t.globals.isBarHorizontal||this.isRangeBar?(i=this.xaxisLabels.length,this.isRangeBar&&(s=t.globals.labels.length,t.config.xaxis.tickAmount&&t.config.xaxis.labels.formatter&&(i=t.config.xaxis.tickAmount)),this._drawXYLines({xCount:i,tickAmount:s})):(i=s,s=t.globals.xTickAmount,this._drawInvertedXYLines({xCount:i,tickAmount:s})),this.drawGridBands(i,s),{el:this.elg,elGridBorders:this.elGridBorders,xAxisTickWidth:t.globals.gridWidth/i}}},{key:"drawGridBands",value:function(t,e){var i=this.w;if(void 0!==i.config.grid.row.colors&&i.config.grid.row.colors.length>0)for(var s=0,n=i.globals.gridHeight/e,a=i.globals.gridWidth,r=0,o=0;r<e;r++,o++)o>=i.config.grid.row.colors.length&&(o=0),this._drawGridBandRect({c:o,x1:0,y1:s,x2:a,y2:n,type:"row"}),s+=i.globals.gridHeight/e;if(void 0!==i.config.grid.column.colors&&i.config.grid.column.colors.length>0)for(var l=i.globals.isBarHorizontal||"category"!==i.config.xaxis.type&&!i.config.xaxis.convertedCatToNumeric?t:t-1,h=i.globals.padHorizontal,c=i.globals.padHorizontal+i.globals.gridWidth/l,d=i.globals.gridHeight,u=0,p=0;u<t;u++,p++)p>=i.config.grid.column.colors.length&&(p=0),this._drawGridBandRect({c:p,x1:h,y1:0,x2:c,y2:d,type:"column"}),h+=i.globals.gridWidth/l}}]),t}(),U=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w}return h(t,[{key:"niceScale",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4?arguments[4]:void 0,a=this.w,r=Math.abs(e-t);if("dataPoints"===(i=this._adjustTicksForSmallRange(i,s,r))&&(i=a.globals.dataPoints-1),t===Number.MIN_VALUE&&0===e||!y.isNumber(t)&&!y.isNumber(e)||t===Number.MIN_VALUE&&e===-Number.MAX_VALUE){t=0,e=i;var o=this.linearScale(t,e,i);return o}t>e?(console.warn("axis.min cannot be greater than axis.max"),e=t+.1):t===e&&(t=0===t?0:t-.5,e=0===e?2:e+.5);var l=[];r<1&&n&&("candlestick"===a.config.chart.type||"candlestick"===a.config.series[s].type||"boxPlot"===a.config.chart.type||"boxPlot"===a.config.series[s].type||a.globals.isRangeData)&&(e*=1.01);var h=i+1;h<2?h=2:h>2&&(h-=2);var c=r/h,d=Math.floor(y.log10(c)),u=Math.pow(10,d),p=Math.round(c/u);p<1&&(p=1);var g=p*u,f=g*Math.floor(t/g),m=g*Math.ceil(e/g),v=f;if(n&&r>2){for(;l.push(v),!((v+=g)>m););return{result:l,niceMin:l[0],niceMax:l[l.length-1]}}var b=t;(l=[]).push(b);for(var x=Math.abs(e-t)/i,w=0;w<=i;w++)b+=x,l.push(b);return l[l.length-2]>=e&&l.pop(),{result:l,niceMin:l[0],niceMax:l[l.length-1]}}},{key:"linearScale",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,s=arguments.length>3?arguments[3]:void 0,n=Math.abs(e-t);"dataPoints"===(i=this._adjustTicksForSmallRange(i,s,n))&&(i=this.w.globals.dataPoints-1);var a=n/i;i===Number.MAX_VALUE&&(i=10,a=1);for(var r=[],o=t;i>=0;)r.push(o),o+=a,i-=1;return{result:r,niceMin:r[0],niceMax:r[r.length-1]}}},{key:"logarithmicScaleNice",value:function(t,e,i){e<=0&&(e=Math.max(t,i)),t<=0&&(t=Math.min(e,i));for(var s=[],n=Math.ceil(Math.log(e)/Math.log(i)+1),a=Math.floor(Math.log(t)/Math.log(i));a<n;a++)s.push(Math.pow(i,a));return{result:s,niceMin:s[0],niceMax:s[s.length-1]}}},{key:"logarithmicScale",value:function(t,e,i){e<=0&&(e=Math.max(t,i)),t<=0&&(t=Math.min(e,i));for(var s=[],n=Math.log(e)/Math.log(i),a=Math.log(t)/Math.log(i),r=n-a,o=Math.round(r),l=r/o,h=0,c=a;h<o;h++,c+=l)s.push(Math.pow(i,c));return s.push(Math.pow(i,n)),{result:s,niceMin:t,niceMax:e}}},{key:"_adjustTicksForSmallRange",value:function(t,e,i){var s=t;if(void 0!==e&&this.w.config.yaxis[e].labels.formatter&&void 0===this.w.config.yaxis[e].tickAmount){var n=this.w.config.yaxis[e].labels.formatter(1);y.isNumber(Number(n))&&!y.isFloat(n)&&(s=Math.ceil(i))}return s<t?s:t}},{key:"setYScaleForIndex",value:function(t,e,i){var s=this.w.globals,n=this.w.config,a=s.isBarHorizontal?n.xaxis:n.yaxis[t];void 0===s.yAxisScale[t]&&(s.yAxisScale[t]=[]);var r=Math.abs(i-e);if(a.logarithmic&&r<=5&&(s.invalidLogScale=!0),a.logarithmic&&r>5)s.allSeriesCollapsed=!1,s.yAxisScale[t]=this.logarithmicScale(e,i,a.logBase),s.yAxisScale[t]=a.forceNiceScale?this.logarithmicScaleNice(e,i,a.logBase):this.logarithmicScale(e,i,a.logBase);else if(i!==-Number.MAX_VALUE&&y.isNumber(i))if(s.allSeriesCollapsed=!1,void 0===a.min&&void 0===a.max||a.forceNiceScale){var o=void 0===n.yaxis[t].max&&void 0===n.yaxis[t].min||n.yaxis[t].forceNiceScale;s.yAxisScale[t]=this.niceScale(e,i,a.tickAmount?a.tickAmount:r<5&&r>1?r+1:5,t,o)}else s.yAxisScale[t]=this.linearScale(e,i,a.tickAmount,t);else s.yAxisScale[t]=this.linearScale(0,5,5)}},{key:"setXScale",value:function(t,e){var i=this.w,s=i.globals,n=i.config.xaxis,a=Math.abs(e-t);return e!==-Number.MAX_VALUE&&y.isNumber(e)?s.xAxisScale=this.linearScale(t,e,n.tickAmount?n.tickAmount:a<5&&a>1?a+1:5,0):s.xAxisScale=this.linearScale(0,5,5),s.xAxisScale}},{key:"setMultipleYScales",value:function(){var t=this,e=this.w.globals,i=this.w.config,s=e.minYArr.concat([]),n=e.maxYArr.concat([]),a=[];i.yaxis.forEach((function(e,r){var o=r;i.series.forEach((function(t,i){t.name===e.seriesName&&(o=i,r!==i?a.push({index:i,similarIndex:r,alreadyExists:!0}):a.push({index:i}))}));var l=s[o],h=n[o];t.setYScaleForIndex(r,l,h)})),this.sameScaleInMultipleAxes(s,n,a)}},{key:"sameScaleInMultipleAxes",value:function(t,e,i){var s=this,n=this.w.config,a=this.w.globals,r=[];i.forEach((function(t){t.alreadyExists&&(void 0===r[t.index]&&(r[t.index]=[]),r[t.index].push(t.index),r[t.index].push(t.similarIndex))})),a.yAxisSameScaleIndices=r,r.forEach((function(t,e){r.forEach((function(i,s){var n,a;e!==s&&(n=t,a=i,n.filter((function(t){return-1!==a.indexOf(t)}))).length>0&&(r[e]=r[e].concat(r[s]))}))}));var o=r.map((function(t){return t.filter((function(e,i){return t.indexOf(e)===i}))})).map((function(t){return t.sort()}));r=r.filter((function(t){return!!t}));var l=o.slice(),h=l.map((function(t){return JSON.stringify(t)}));l=l.filter((function(t,e){return h.indexOf(JSON.stringify(t))===e}));var c=[],d=[];t.forEach((function(t,i){l.forEach((function(s,n){s.indexOf(i)>-1&&(void 0===c[n]&&(c[n]=[],d[n]=[]),c[n].push({key:i,value:t}),d[n].push({key:i,value:e[i]}))}))}));var u=Array.apply(null,Array(l.length)).map(Number.prototype.valueOf,Number.MIN_VALUE),p=Array.apply(null,Array(l.length)).map(Number.prototype.valueOf,-Number.MAX_VALUE);c.forEach((function(t,e){t.forEach((function(t,i){u[e]=Math.min(t.value,u[e])}))})),d.forEach((function(t,e){t.forEach((function(t,i){p[e]=Math.max(t.value,p[e])}))})),t.forEach((function(t,e){d.forEach((function(t,i){var r=u[i],o=p[i];n.chart.stacked&&(o=0,t.forEach((function(t,e){t.value!==-Number.MAX_VALUE&&(o+=t.value),r!==Number.MIN_VALUE&&(r+=c[i][e].value)}))),t.forEach((function(i,l){t[l].key===e&&(void 0!==n.yaxis[e].min&&(r="function"==typeof n.yaxis[e].min?n.yaxis[e].min(a.minY):n.yaxis[e].min),void 0!==n.yaxis[e].max&&(o="function"==typeof n.yaxis[e].max?n.yaxis[e].max(a.maxY):n.yaxis[e].max),s.setYScaleForIndex(e,r,o))}))}))}))}},{key:"autoScaleY",value:function(t,e,i){t||(t=this);var s=t.w;if(s.globals.isMultipleYAxis||s.globals.collapsedSeries.length)return console.warn("autoScaleYaxis is not supported in a multi-yaxis chart."),e;var n=s.globals.seriesX[0],a=s.config.chart.stacked;return e.forEach((function(t,r){for(var o=0,l=0;l<n.length;l++)if(n[l]>=i.xaxis.min){o=l;break}var h,c,d=s.globals.minYArr[r],u=s.globals.maxYArr[r],p=s.globals.stackedSeriesTotals;s.globals.series.forEach((function(r,l){var g=r[o];a?(g=p[o],h=c=g,p.forEach((function(t,e){n[e]<=i.xaxis.max&&n[e]>=i.xaxis.min&&(t>c&&null!==t&&(c=t),r[e]<h&&null!==r[e]&&(h=r[e]))}))):(h=c=g,r.forEach((function(t,e){if(n[e]<=i.xaxis.max&&n[e]>=i.xaxis.min){var a=t,r=t;s.globals.series.forEach((function(i,s){null!==t&&(a=Math.min(i[e],a),r=Math.max(i[e],r))})),r>c&&null!==r&&(c=r),a<h&&null!==a&&(h=a)}}))),void 0===h&&void 0===c&&(h=d,c=u),c*=c<0?.9:1.1,0===(h*=h<0?1.1:.9)&&0===c&&(h=-1,c=1),c<0&&c<u&&(c=u),h<0&&h>d&&(h=d),e.length>1?(e[l].min=void 0===t.min?h:t.min,e[l].max=void 0===t.max?c:t.max):(e[0].min=void 0===t.min?h:t.min,e[0].max=void 0===t.max?c:t.max)}))})),e}}]),t}(),K=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w,this.scales=new U(e)}return h(t,[{key:"init",value:function(){this.setYRange(),this.setXRange(),this.setZRange()}},{key:"getMinYMaxY",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-Number.MAX_VALUE,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=this.w.config,a=this.w.globals,r=-Number.MAX_VALUE,o=Number.MIN_VALUE;null===s&&(s=t+1);var l=a.series,h=l,c=l;"candlestick"===n.chart.type?(h=a.seriesCandleL,c=a.seriesCandleH):"boxPlot"===n.chart.type?(h=a.seriesCandleO,c=a.seriesCandleC):a.isRangeData&&(h=a.seriesRangeStart,c=a.seriesRangeEnd);for(var d=t;d<s;d++){a.dataPoints=Math.max(a.dataPoints,l[d].length),a.categoryLabels.length&&(a.dataPoints=a.categoryLabels.filter((function(t){return void 0!==t})).length);for(var u=0;u<a.series[d].length;u++){var p=l[d][u];null!==p&&y.isNumber(p)?(void 0!==c[d][u]&&(r=Math.max(r,c[d][u]),e=Math.min(e,c[d][u])),void 0!==h[d][u]&&(e=Math.min(e,h[d][u]),i=Math.max(i,h[d][u])),"candlestick"!==this.w.config.chart.type&&"boxPlot"!==this.w.config.chart.type&&"rangeArea"===this.w.config.chart.type&&"rangeBar"===this.w.config.chart.type||("candlestick"!==this.w.config.chart.type&&"boxPlot"!==this.w.config.chart.type||void 0!==a.seriesCandleC[d][u]&&(r=Math.max(r,a.seriesCandleO[d][u]),r=Math.max(r,a.seriesCandleH[d][u]),r=Math.max(r,a.seriesCandleL[d][u]),r=Math.max(r,a.seriesCandleC[d][u]),"boxPlot"===this.w.config.chart.type&&(r=Math.max(r,a.seriesCandleM[d][u]))),!n.series[d].type||"candlestick"===n.series[d].type&&"boxPlot"===n.series[d].type&&"rangeArea"===n.series[d].type&&"rangeBar"===n.series[d].type||(r=Math.max(r,a.series[d][u]),e=Math.min(e,a.series[d][u])),i=r),a.seriesGoals[d]&&a.seriesGoals[d][u]&&Array.isArray(a.seriesGoals[d][u])&&a.seriesGoals[d][u].forEach((function(t){o!==Number.MIN_VALUE&&(o=Math.min(o,t.value),e=o),r=Math.max(r,t.value),i=r})),y.isFloat(p)&&(p=y.noExponents(p),a.yValueDecimal=Math.max(a.yValueDecimal,p.toString().split(".")[1].length)),o>h[d][u]&&h[d][u]<0&&(o=h[d][u])):a.hasNullValues=!0}}return"rangeBar"===n.chart.type&&a.seriesRangeStart.length&&a.isBarHorizontal&&(o=e),"bar"===n.chart.type&&(o<0&&r<0&&(r=0),o===Number.MIN_VALUE&&(o=0)),{minY:o,maxY:r,lowestY:e,highestY:i}}},{key:"setYRange",value:function(){var t=this.w.globals,e=this.w.config;t.maxY=-Number.MAX_VALUE,t.minY=Number.MIN_VALUE;var i=Number.MAX_VALUE;if(t.isMultipleYAxis)for(var s=0;s<t.series.length;s++){var n=this.getMinYMaxY(s,i,null,s+1);t.minYArr.push(n.minY),t.maxYArr.push(n.maxY),i=n.lowestY}var a=this.getMinYMaxY(0,i,null,t.series.length);if(t.minY=a.minY,t.maxY=a.maxY,i=a.lowestY,e.chart.stacked&&this._setStackedMinMax(),("line"===e.chart.type||"area"===e.chart.type||"candlestick"===e.chart.type||"boxPlot"===e.chart.type||"rangeBar"===e.chart.type&&!t.isBarHorizontal)&&t.minY===Number.MIN_VALUE&&i!==-Number.MAX_VALUE&&i!==t.maxY){var r=t.maxY-i;(i>=0&&i<=10||void 0!==e.yaxis[0].min||void 0!==e.yaxis[0].max)&&(r=0),t.minY=i-5*r/100,i>0&&t.minY<0&&(t.minY=0),t.maxY=t.maxY+5*r/100}return e.yaxis.forEach((function(e,i){void 0!==e.max&&("number"==typeof e.max?t.maxYArr[i]=e.max:"function"==typeof e.max&&(t.maxYArr[i]=e.max(t.isMultipleYAxis?t.maxYArr[i]:t.maxY)),t.maxY=t.maxYArr[i]),void 0!==e.min&&("number"==typeof e.min?t.minYArr[i]=e.min:"function"==typeof e.min&&(t.minYArr[i]=e.min(t.isMultipleYAxis?t.minYArr[i]===Number.MIN_VALUE?0:t.minYArr[i]:t.minY)),t.minY=t.minYArr[i])})),t.isBarHorizontal&&["min","max"].forEach((function(i){void 0!==e.xaxis[i]&&"number"==typeof e.xaxis[i]&&("min"===i?t.minY=e.xaxis[i]:t.maxY=e.xaxis[i])})),t.isMultipleYAxis?(this.scales.setMultipleYScales(),t.minY=i,t.yAxisScale.forEach((function(e,i){t.minYArr[i]=e.niceMin,t.maxYArr[i]=e.niceMax}))):(this.scales.setYScaleForIndex(0,t.minY,t.maxY),t.minY=t.yAxisScale[0].niceMin,t.maxY=t.yAxisScale[0].niceMax,t.minYArr[0]=t.yAxisScale[0].niceMin,t.maxYArr[0]=t.yAxisScale[0].niceMax),{minY:t.minY,maxY:t.maxY,minYArr:t.minYArr,maxYArr:t.maxYArr,yAxisScale:t.yAxisScale}}},{key:"setXRange",value:function(){var t=this.w.globals,e=this.w.config,i="numeric"===e.xaxis.type||"datetime"===e.xaxis.type||"category"===e.xaxis.type&&!t.noLabelsProvided||t.noLabelsProvided||t.isXNumeric;if(t.isXNumeric&&function(){for(var e=0;e<t.series.length;e++)if(t.labels[e])for(var i=0;i<t.labels[e].length;i++)null!==t.labels[e][i]&&y.isNumber(t.labels[e][i])&&(t.maxX=Math.max(t.maxX,t.labels[e][i]),t.initialMaxX=Math.max(t.maxX,t.labels[e][i]),t.minX=Math.min(t.minX,t.labels[e][i]),t.initialMinX=Math.min(t.minX,t.labels[e][i]))}(),t.noLabelsProvided&&0===e.xaxis.categories.length&&(t.maxX=t.labels[t.labels.length-1],t.initialMaxX=t.labels[t.labels.length-1],t.minX=1,t.initialMinX=1),t.isXNumeric||t.noLabelsProvided||t.dataFormatXNumeric){var s;if(void 0===e.xaxis.tickAmount?(s=Math.round(t.svgWidth/150),"numeric"===e.xaxis.type&&t.dataPoints<30&&(s=t.dataPoints-1),s>t.dataPoints&&0!==t.dataPoints&&(s=t.dataPoints-1)):"dataPoints"===e.xaxis.tickAmount?(t.series.length>1&&(s=t.series[t.maxValsInArrayIndex].length-1),t.isXNumeric&&(s=t.maxX-t.minX-1)):s=e.xaxis.tickAmount,t.xTickAmount=s,void 0!==e.xaxis.max&&"number"==typeof e.xaxis.max&&(t.maxX=e.xaxis.max),void 0!==e.xaxis.min&&"number"==typeof e.xaxis.min&&(t.minX=e.xaxis.min),void 0!==e.xaxis.range&&(t.minX=t.maxX-e.xaxis.range),t.minX!==Number.MAX_VALUE&&t.maxX!==-Number.MAX_VALUE)if(e.xaxis.convertedCatToNumeric&&!t.dataFormatXNumeric){for(var n=[],a=t.minX-1;a<t.maxX;a++)n.push(a+1);t.xAxisScale={result:n,niceMin:n[0],niceMax:n[n.length-1]}}else t.xAxisScale=this.scales.setXScale(t.minX,t.maxX);else t.xAxisScale=this.scales.linearScale(1,s,s),t.noLabelsProvided&&t.labels.length>0&&(t.xAxisScale=this.scales.linearScale(1,t.labels.length,s-1),t.seriesX=t.labels.slice());i&&(t.labels=t.xAxisScale.result.slice())}return t.isBarHorizontal&&t.labels.length&&(t.xTickAmount=t.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:t.minX,maxX:t.maxX}}},{key:"setZRange",value:function(){var t=this.w.globals;if(t.isDataXYZ)for(var e=0;e<t.series.length;e++)if(void 0!==t.seriesZ[e])for(var i=0;i<t.seriesZ[e].length;i++)null!==t.seriesZ[e][i]&&y.isNumber(t.seriesZ[e][i])&&(t.maxZ=Math.max(t.maxZ,t.seriesZ[e][i]),t.minZ=Math.min(t.minZ,t.seriesZ[e][i]))}},{key:"_handleSingleDataPoint",value:function(){var t=this.w.globals,e=this.w.config;if(t.minX===t.maxX){var i=new M(this.ctx);if("datetime"===e.xaxis.type){var s=i.getDate(t.minX);e.xaxis.labels.datetimeUTC?s.setUTCDate(s.getUTCDate()-2):s.setDate(s.getDate()-2),t.minX=new Date(s).getTime();var n=i.getDate(t.maxX);e.xaxis.labels.datetimeUTC?n.setUTCDate(n.getUTCDate()+2):n.setDate(n.getDate()+2),t.maxX=new Date(n).getTime()}else("numeric"===e.xaxis.type||"category"===e.xaxis.type&&!t.noLabelsProvided)&&(t.minX=t.minX-2,t.initialMinX=t.minX,t.maxX=t.maxX+2,t.initialMaxX=t.maxX)}}},{key:"_getMinXDiff",value:function(){var t=this.w.globals;t.isXNumeric&&t.seriesX.forEach((function(e,i){1===e.length&&e.push(t.seriesX[t.maxValsInArrayIndex][t.seriesX[t.maxValsInArrayIndex].length-1]);var s=e.slice();s.sort((function(t,e){return t-e})),s.forEach((function(e,i){if(i>0){var n=e-s[i-1];n>0&&(t.minXDiff=Math.min(n,t.minXDiff))}})),1!==t.dataPoints&&t.minXDiff!==Number.MAX_VALUE||(t.minXDiff=.5)}))}},{key:"_setStackedMinMax",value:function(){var t=this.w.globals,e=[],i=[];if(t.series.length)for(var s=0;s<t.series[t.maxValsInArrayIndex].length;s++)for(var n=0,a=0,r=0;r<t.series.length;r++)null!==t.series[r][s]&&y.isNumber(t.series[r][s])&&(t.series[r][s]>0?n=n+parseFloat(t.series[r][s])+1e-4:a+=parseFloat(t.series[r][s])),r===t.series.length-1&&(e.push(n),i.push(a));for(var o=0;o<e.length;o++)t.maxY=Math.max(t.maxY,e[o]),t.minY=Math.min(t.minY,i[o])}}]),t}(),Q=function(){function t(e,i){o(this,t),this.ctx=e,this.elgrid=i,this.w=e.w;var s=this.w;this.xaxisFontSize=s.config.xaxis.labels.style.fontSize,this.axisFontFamily=s.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=s.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal="bar"===s.config.chart.type&&s.config.plotOptions.bar.horizontal,this.xAxisoffX=0,"bottom"===s.config.xaxis.position&&(this.xAxisoffX=s.globals.gridHeight),this.drawnLabels=[],this.axesUtils=new Z(e)}return h(t,[{key:"drawYaxis",value:function(t){var e=this,i=this.w,s=new C(this.ctx),n=i.config.yaxis[t].labels.style,a=n.fontSize,r=n.fontFamily,o=n.fontWeight,l=s.group({class:"apexcharts-yaxis",rel:t,transform:"translate("+i.globals.translateYAxisX[t]+", 0)"});if(this.axesUtils.isYAxisHidden(t))return l;var h=s.group({class:"apexcharts-yaxis-texts-g"});l.add(h);var c=i.globals.yAxisScale[t].result.length-1,d=i.globals.gridHeight/c,u=i.globals.translateY,p=i.globals.yLabelFormatters[t],g=i.globals.yAxisScale[t].result.slice();g=this.axesUtils.checkForReversedLabels(t,g);var f="";if(i.config.yaxis[t].labels.show)for(var m=function(l){var m=g[l];m=p(m,l,i);var v=i.config.yaxis[t].labels.padding;i.config.yaxis[t].opposite&&0!==i.config.yaxis.length&&(v*=-1);var b=e.axesUtils.getYAxisForeColor(n.colors,t),x=s.drawText({x:v,y:u+c/10+i.config.yaxis[t].labels.offsetY+1,text:m,textAnchor:i.config.yaxis[t].opposite?"start":"end",fontSize:a,fontFamily:r,fontWeight:o,maxWidth:i.config.yaxis[t].labels.maxWidth,foreColor:Array.isArray(b)?b[l]:b,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+n.cssClass});l===c&&(f=x),h.add(x);var y=document.createElementNS(i.globals.SVGNS,"title");if(y.textContent=Array.isArray(m)?m.join(" "):m,x.node.appendChild(y),0!==i.config.yaxis[t].labels.rotate){var w=s.rotateAroundCenter(f.node),k=s.rotateAroundCenter(x.node);x.node.setAttribute("transform","rotate(".concat(i.config.yaxis[t].labels.rotate," ").concat(w.x," ").concat(k.y,")"))}u+=d},v=c;v>=0;v--)m(v);if(void 0!==i.config.yaxis[t].title.text){var b=s.group({class:"apexcharts-yaxis-title"}),x=0;i.config.yaxis[t].opposite&&(x=i.globals.translateYAxisX[t]);var y=s.drawText({x:x,y:i.globals.gridHeight/2+i.globals.translateY+i.config.yaxis[t].title.offsetY,text:i.config.yaxis[t].title.text,textAnchor:"end",foreColor:i.config.yaxis[t].title.style.color,fontSize:i.config.yaxis[t].title.style.fontSize,fontWeight:i.config.yaxis[t].title.style.fontWeight,fontFamily:i.config.yaxis[t].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+i.config.yaxis[t].title.style.cssClass});b.add(y),l.add(b)}var w=i.config.yaxis[t].axisBorder,k=31+w.offsetX;if(i.config.yaxis[t].opposite&&(k=-31-w.offsetX),w.show){var S=s.drawLine(k,i.globals.translateY+w.offsetY-2,k,i.globals.gridHeight+i.globals.translateY+w.offsetY+2,w.color,0,w.width);l.add(S)}return i.config.yaxis[t].axisTicks.show&&this.axesUtils.drawYAxisTicks(k,c,w,i.config.yaxis[t].axisTicks,t,d,l),l}},{key:"drawYaxisInversed",value:function(t){var e=this.w,i=new C(this.ctx),s=i.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),n=i.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(e.globals.translateXAxisX,", ").concat(e.globals.translateXAxisY,")")});s.add(n);var a=e.globals.yAxisScale[t].result.length-1,r=e.globals.gridWidth/a+.1,o=r+e.config.xaxis.labels.offsetX,l=e.globals.xLabelFormatter,h=e.globals.yAxisScale[t].result.slice(),c=e.globals.timescaleLabels;c.length>0&&(this.xaxisLabels=c.slice(),a=(h=c.slice()).length),h=this.axesUtils.checkForReversedLabels(t,h);var d=c.length;if(e.config.xaxis.labels.show)for(var u=d?0:a;d?u<d:u>=0;d?u++:u--){var p=h[u];p=l(p,u,e);var g=e.globals.gridWidth+e.globals.padHorizontal-(o-r+e.config.xaxis.labels.offsetX);if(c.length){var f=this.axesUtils.getLabel(h,c,g,u,this.drawnLabels,this.xaxisFontSize);g=f.x,p=f.text,this.drawnLabels.push(f.text),0===u&&e.globals.skipFirstTimelinelabel&&(p=""),u===h.length-1&&e.globals.skipLastTimelinelabel&&(p="")}var m=i.drawText({x:g,y:this.xAxisoffX+e.config.xaxis.labels.offsetY+30-("top"===e.config.xaxis.position?e.globals.xAxisHeight+e.config.xaxis.axisTicks.height-2:0),text:p,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[t]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:e.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label "+e.config.xaxis.labels.style.cssClass});n.add(m),m.tspan(p);var v=document.createElementNS(e.globals.SVGNS,"title");v.textContent=p,m.node.appendChild(v),o+=r}return this.inversedYAxisTitleText(s),this.inversedYAxisBorder(s),s}},{key:"inversedYAxisBorder",value:function(t){var e=this.w,i=new C(this.ctx),s=e.config.xaxis.axisBorder;if(s.show){var n=0;"bar"===e.config.chart.type&&e.globals.isXNumeric&&(n-=15);var a=i.drawLine(e.globals.padHorizontal+n+s.offsetX,this.xAxisoffX,e.globals.gridWidth,this.xAxisoffX,s.color,0,s.height);this.elgrid&&this.elgrid.elGridBorders?this.elgrid.elGridBorders.add(a):t.add(a)}}},{key:"inversedYAxisTitleText",value:function(t){var e=this.w,i=new C(this.ctx);if(void 0!==e.config.xaxis.title.text){var s=i.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),n=i.drawText({x:e.globals.gridWidth/2+e.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(e.config.xaxis.title.style.fontSize)+e.config.xaxis.title.offsetY+20,text:e.config.xaxis.title.text,textAnchor:"middle",fontSize:e.config.xaxis.title.style.fontSize,fontFamily:e.config.xaxis.title.style.fontFamily,fontWeight:e.config.xaxis.title.style.fontWeight,foreColor:e.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+e.config.xaxis.title.style.cssClass});s.add(n),t.add(s)}}},{key:"yAxisTitleRotate",value:function(t,e){var i=this.w,s=new C(this.ctx),n={width:0,height:0},a={width:0,height:0},r=i.globals.dom.baseEl.querySelector(" .apexcharts-yaxis[rel='".concat(t,"'] .apexcharts-yaxis-texts-g"));null!==r&&(n=r.getBoundingClientRect());var o=i.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(t,"'] .apexcharts-yaxis-title text"));if(null!==o&&(a=o.getBoundingClientRect()),null!==o){var l=this.xPaddingForYAxisTitle(t,n,a,e);o.setAttribute("x",l.xPos-(e?10:0))}if(null!==o){var h=s.rotateAroundCenter(o);o.setAttribute("transform","rotate(".concat(e?-1*i.config.yaxis[t].title.rotate:i.config.yaxis[t].title.rotate," ").concat(h.x," ").concat(h.y,")"))}}},{key:"xPaddingForYAxisTitle",value:function(t,e,i,s){var n=this.w,a=0,r=0,o=10;return void 0===n.config.yaxis[t].title.text||t<0?{xPos:r,padd:0}:(s?(r=e.width+n.config.yaxis[t].title.offsetX+i.width/2+o/2,0===(a+=1)&&(r-=o/2)):(r=-1*e.width+n.config.yaxis[t].title.offsetX+o/2+i.width/2,n.globals.isBarHorizontal&&(o=25,r=-1*e.width-n.config.yaxis[t].title.offsetX-o)),{xPos:r,padd:o})}},{key:"setYAxisXPosition",value:function(t,e){var i=this.w,s=0,n=0,a=18,r=1;i.config.yaxis.length>1&&(this.multipleYs=!0),i.config.yaxis.map((function(o,l){var h=i.globals.ignoreYAxisIndexes.indexOf(l)>-1||!o.show||o.floating||0===t[l].width,c=t[l].width+e[l].width;o.opposite?i.globals.isBarHorizontal?(n=i.globals.gridWidth+i.globals.translateX-1,i.globals.translateYAxisX[l]=n-o.labels.offsetX):(n=i.globals.gridWidth+i.globals.translateX+r,h||(r=r+c+20),i.globals.translateYAxisX[l]=n-o.labels.offsetX+20):(s=i.globals.translateX-a,h||(a=a+c+20),i.globals.translateYAxisX[l]=s+o.labels.offsetX)}))}},{key:"setYAxisTextAlignments",value:function(){var t=this.w,e=t.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis");(e=y.listToArray(e)).forEach((function(e,i){var s=t.config.yaxis[i];if(s&&void 0!==s.labels.align){var n=t.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(i,"'] .apexcharts-yaxis-texts-g")),a=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(i,"'] .apexcharts-yaxis-label"));a=y.listToArray(a);var r=n.getBoundingClientRect();"left"===s.labels.align?(a.forEach((function(t,e){t.setAttribute("text-anchor","start")})),s.opposite||n.setAttribute("transform","translate(-".concat(r.width,", 0)"))):"center"===s.labels.align?(a.forEach((function(t,e){t.setAttribute("text-anchor","middle")})),n.setAttribute("transform","translate(".concat(r.width/2*(s.opposite?1:-1),", 0)"))):"right"===s.labels.align&&(a.forEach((function(t,e){t.setAttribute("text-anchor","end")})),s.opposite&&n.setAttribute("transform","translate(".concat(r.width,", 0)")))}}))}}]),t}(),J=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w,this.documentEvent=y.bind(this.documentEvent,this)}return h(t,[{key:"addEventListener",value:function(t,e){var i=this.w;i.globals.events.hasOwnProperty(t)?i.globals.events[t].push(e):i.globals.events[t]=[e]}},{key:"removeEventListener",value:function(t,e){var i=this.w;if(i.globals.events.hasOwnProperty(t)){var s=i.globals.events[t].indexOf(e);-1!==s&&i.globals.events[t].splice(s,1)}}},{key:"fireEvent",value:function(t,e){var i=this.w;if(i.globals.events.hasOwnProperty(t)){e&&e.length||(e=[]);for(var s=i.globals.events[t],n=s.length,a=0;a<n;a++)s[a].apply(null,e)}}},{key:"setupEventHandlers",value:function(){var t=this,e=this.w,i=this.ctx,s=e.globals.dom.baseEl.querySelector(e.globals.chartClass);this.ctx.eventList.forEach((function(t){s.addEventListener(t,(function(t){var s=Object.assign({},e,{seriesIndex:e.globals.capturedSeriesIndex,dataPointIndex:e.globals.capturedDataPointIndex});"mousemove"===t.type||"touchmove"===t.type?"function"==typeof e.config.chart.events.mouseMove&&e.config.chart.events.mouseMove(t,i,s):"mouseleave"===t.type||"touchleave"===t.type?"function"==typeof e.config.chart.events.mouseLeave&&e.config.chart.events.mouseLeave(t,i,s):("mouseup"===t.type&&1===t.which||"touchend"===t.type)&&("function"==typeof e.config.chart.events.click&&e.config.chart.events.click(t,i,s),i.ctx.events.fireEvent("click",[t,i,s]))}),{capture:!1,passive:!0})})),this.ctx.eventList.forEach((function(i){e.globals.dom.baseEl.addEventListener(i,t.documentEvent,{passive:!0})})),this.ctx.core.setupBrushHandler()}},{key:"documentEvent",value:function(t){var e=this.w,i=t.target.className;if("click"===t.type){var s=e.globals.dom.baseEl.querySelector(".apexcharts-menu");s&&s.classList.contains("apexcharts-menu-open")&&"apexcharts-menu-icon"!==i&&s.classList.remove("apexcharts-menu-open")}e.globals.clientX="touchmove"===t.type?t.touches[0].clientX:t.clientX,e.globals.clientY="touchmove"===t.type?t.touches[0].clientY:t.clientY}}]),t}(),tt=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w}return h(t,[{key:"setCurrentLocaleValues",value:function(t){var e=this.w.config.chart.locales;window.Apex.chart&&window.Apex.chart.locales&&window.Apex.chart.locales.length>0&&(e=this.w.config.chart.locales.concat(window.Apex.chart.locales));var i=e.filter((function(e){return e.name===t}))[0];if(!i)throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options");var s=y.extend(T,i);this.w.globals.locale=s.options}}]),t}(),et=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w}return h(t,[{key:"drawAxis",value:function(t,e){var i,s,n=this.w.globals,a=this.w.config,r=new j(this.ctx,e),o=new Q(this.ctx,e);n.axisCharts&&"radar"!==t&&(n.isBarHorizontal?(s=o.drawYaxisInversed(0),i=r.drawXaxisInversed(0),n.dom.elGraphical.add(i),n.dom.elGraphical.add(s)):(i=r.drawXaxis(),n.dom.elGraphical.add(i),a.yaxis.map((function(t,e){-1===n.ignoreYAxisIndexes.indexOf(e)&&(s=o.drawYaxis(e),n.dom.Paper.add(s))}))))}}]),t}(),it=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w}return h(t,[{key:"drawXCrosshairs",value:function(){var t=this.w,e=new C(this.ctx),i=new k(this.ctx),s=t.config.xaxis.crosshairs.fill.gradient,n=t.config.xaxis.crosshairs.dropShadow,a=t.config.xaxis.crosshairs.fill.type,r=s.colorFrom,o=s.colorTo,l=s.opacityFrom,h=s.opacityTo,c=s.stops,d=n.enabled,u=n.left,p=n.top,g=n.blur,f=n.color,m=n.opacity,v=t.config.xaxis.crosshairs.fill.color;if(t.config.xaxis.crosshairs.show){"gradient"===a&&(v=e.drawGradient("vertical",r,o,l,h,null,c,null));var b=e.drawRect();1===t.config.xaxis.crosshairs.width&&(b=e.drawLine());var x=t.globals.gridHeight;(!y.isNumber(x)||x<0)&&(x=0);var w=t.config.xaxis.crosshairs.width;(!y.isNumber(w)||w<0)&&(w=0),b.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:x,width:w,height:x,fill:v,filter:"none","fill-opacity":t.config.xaxis.crosshairs.opacity,stroke:t.config.xaxis.crosshairs.stroke.color,"stroke-width":t.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":t.config.xaxis.crosshairs.stroke.dashArray}),d&&(b=i.dropShadow(b,{left:u,top:p,blur:g,color:f,opacity:m})),t.globals.dom.elGraphical.add(b)}}},{key:"drawYCrosshairs",value:function(){var t=this.w,e=new C(this.ctx),i=t.config.yaxis[0].crosshairs,s=t.globals.barPadForNumericAxis;if(t.config.yaxis[0].crosshairs.show){var n=e.drawLine(-s,0,t.globals.gridWidth+s,0,i.stroke.color,i.stroke.dashArray,i.stroke.width);n.attr({class:"apexcharts-ycrosshairs"}),t.globals.dom.elGraphical.add(n)}var a=e.drawLine(-s,0,t.globals.gridWidth+s,0,i.stroke.color,0,0);a.attr({class:"apexcharts-ycrosshairs-hidden"}),t.globals.dom.elGraphical.add(a)}}]),t}(),st=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w}return h(t,[{key:"checkResponsiveConfig",value:function(t){var e=this,i=this.w,s=i.config;if(0!==s.responsive.length){var n=s.responsive.slice();n.sort((function(t,e){return t.breakpoint>e.breakpoint?1:e.breakpoint>t.breakpoint?-1:0})).reverse();var a=new N({}),r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=n[0].breakpoint,r=window.innerWidth>0?window.innerWidth:screen.width;if(r>s){var o=S.extendArrayProps(a,i.globals.initialConfig,i);t=y.extend(o,t),t=y.extend(i.config,t),e.overrideResponsiveOptions(t)}else for(var l=0;l<n.length;l++)r<n[l].breakpoint&&(t=S.extendArrayProps(a,n[l].options,i),t=y.extend(i.config,t),e.overrideResponsiveOptions(t))};if(t){var o=S.extendArrayProps(a,t,i);o=y.extend(i.config,o),r(o=y.extend(o,t))}else r({})}}},{key:"overrideResponsiveOptions",value:function(t){var e=new N(t).init({responsiveOverride:!0});this.w.config=e}}]),t}(),nt=function(){function t(e){o(this,t),this.ctx=e,this.colors=[],this.w=e.w;var i=this.w;this.isColorFn=!1,this.isHeatmapDistributed="treemap"===i.config.chart.type&&i.config.plotOptions.treemap.distributed||"heatmap"===i.config.chart.type&&i.config.plotOptions.heatmap.distributed,this.isBarDistributed=i.config.plotOptions.bar.distributed&&("bar"===i.config.chart.type||"rangeBar"===i.config.chart.type)}return h(t,[{key:"init",value:function(){this.setDefaultColors()}},{key:"setDefaultColors",value:function(){var t=this,e=this.w,i=new y;if(e.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(e.config.theme.mode)),void 0===e.config.colors?e.globals.colors=this.predefined():(e.globals.colors=e.config.colors,Array.isArray(e.config.colors)&&e.config.colors.length>0&&"function"==typeof e.config.colors[0]&&(e.globals.colors=e.config.series.map((function(i,s){var n=e.config.colors[s];return n||(n=e.config.colors[0]),"function"==typeof n?(t.isColorFn=!0,n({value:e.globals.axisCharts?e.globals.series[s][0]?e.globals.series[s][0]:0:e.globals.series[s],seriesIndex:s,dataPointIndex:s,w:e})):n})))),e.globals.seriesColors.map((function(t,i){t&&(e.globals.colors[i]=t)})),e.config.theme.monochrome.enabled){var s=[],n=e.globals.series.length;(this.isBarDistributed||this.isHeatmapDistributed)&&(n=e.globals.series[0].length*e.globals.series.length);for(var a=e.config.theme.monochrome.color,r=1/(n/e.config.theme.monochrome.shadeIntensity),o=e.config.theme.monochrome.shadeTo,l=0,h=0;h<n;h++){var c=void 0;"dark"===o?(c=i.shadeColor(-1*l,a),l+=r):(c=i.shadeColor(l,a),l+=r),s.push(c)}e.globals.colors=s.slice()}var d=e.globals.colors.slice();this.pushExtraColors(e.globals.colors),["fill","stroke"].forEach((function(i){void 0===e.config[i].colors?e.globals[i].colors=t.isColorFn?e.config.colors:d:e.globals[i].colors=e.config[i].colors.slice(),t.pushExtraColors(e.globals[i].colors)})),void 0===e.config.dataLabels.style.colors?e.globals.dataLabels.style.colors=d:e.globals.dataLabels.style.colors=e.config.dataLabels.style.colors.slice(),this.pushExtraColors(e.globals.dataLabels.style.colors,50),void 0===e.config.plotOptions.radar.polygons.fill.colors?e.globals.radarPolygons.fill.colors=["dark"===e.config.theme.mode?"#424242":"none"]:e.globals.radarPolygons.fill.colors=e.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(e.globals.radarPolygons.fill.colors,20),void 0===e.config.markers.colors?e.globals.markers.colors=d:e.globals.markers.colors=e.config.markers.colors.slice(),this.pushExtraColors(e.globals.markers.colors)}},{key:"pushExtraColors",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=this.w,n=e||s.globals.series.length;if(null===i&&(i=this.isBarDistributed||this.isHeatmapDistributed||"heatmap"===s.config.chart.type&&s.config.plotOptions.heatmap.colorScale.inverse),i&&s.globals.series.length&&(n=s.globals.series[s.globals.maxValsInArrayIndex].length*s.globals.series.length),t.length<n)for(var a=n-t.length,r=0;r<a;r++)t.push(t[r])}},{key:"updateThemeOptions",value:function(t){t.chart=t.chart||{},t.tooltip=t.tooltip||{};var e=t.theme.mode||"light",i=t.theme.palette?t.theme.palette:"dark"===e?"palette4":"palette1",s=t.chart.foreColor?t.chart.foreColor:"dark"===e?"#f6f7f8":"#373d3f";return t.tooltip.theme=e,t.chart.foreColor=s,t.theme.palette=i,t}},{key:"predefined",value:function(){switch(this.w.config.theme.palette){case"palette1":default:this.colors=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"];break;case"palette2":this.colors=["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#FF9800"];break;case"palette3":this.colors=["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B"];break;case"palette4":this.colors=["#4ecdc4","#c7f464","#81D4FA","#fd6a6a","#546E7A"];break;case"palette5":this.colors=["#2b908f","#f9a3a4","#90ee7e","#fa4443","#69d2e7"];break;case"palette6":this.colors=["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"];break;case"palette7":this.colors=["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"];break;case"palette8":this.colors=["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"];break;case"palette9":this.colors=["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"];break;case"palette10":this.colors=["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"]}return this.colors}}]),t}(),at=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w}return h(t,[{key:"draw",value:function(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}},{key:"drawTitleSubtitle",value:function(t){var e=this.w,i="title"===t?e.config.title:e.config.subtitle,s=e.globals.svgWidth/2,n=i.offsetY,a="middle";if("left"===i.align?(s=10,a="start"):"right"===i.align&&(s=e.globals.svgWidth-10,a="end"),s+=i.offsetX,n=n+parseInt(i.style.fontSize,10)+i.margin/2,void 0!==i.text){var r=new C(this.ctx).drawText({x:s,y:n,text:i.text,textAnchor:a,fontSize:i.style.fontSize,fontFamily:i.style.fontFamily,fontWeight:i.style.fontWeight,foreColor:i.style.color,opacity:1});r.node.setAttribute("class","apexcharts-".concat(t,"-text")),e.globals.dom.Paper.add(r)}}}]),t}(),rt=function(){function t(e){o(this,t),this.w=e.w,this.dCtx=e}return h(t,[{key:"getTitleSubtitleCoords",value:function(t){var e=this.w,i=0,s=0,n="title"===t?e.config.title.floating:e.config.subtitle.floating,a=e.globals.dom.baseEl.querySelector(".apexcharts-".concat(t,"-text"));if(null!==a&&!n){var r=a.getBoundingClientRect();i=r.width,s=e.globals.axisCharts?r.height+5:r.height}return{width:i,height:s}}},{key:"getLegendsRect",value:function(){var t=this.w,e=t.globals.dom.baseEl.querySelector(".apexcharts-legend");t.config.legend.height||"top"!==t.config.legend.position&&"bottom"!==t.config.legend.position||(e.style.maxHeight=t.globals.svgHeight/2+"px");var i=Object.assign({},y.getBoundingClientRect(e));return null!==e&&!t.config.legend.floating&&t.config.legend.show?this.dCtx.lgRect={x:i.x,y:i.y,height:i.height,width:0===i.height?0:i.width}:this.dCtx.lgRect={x:0,y:0,height:0,width:0},"left"!==t.config.legend.position&&"right"!==t.config.legend.position||1.5*this.dCtx.lgRect.width>t.globals.svgWidth&&(this.dCtx.lgRect.width=t.globals.svgWidth/1.5),this.dCtx.lgRect}},{key:"getLargestStringFromMultiArr",value:function(t,e){var i=t;if(this.w.globals.isMultiLineX){var s=e.map((function(t,e){return Array.isArray(t)?t.length:1})),n=Math.max.apply(Math,v(s));i=e[s.indexOf(n)]}return i}}]),t}(),ot=function(){function t(e){o(this,t),this.w=e.w,this.dCtx=e}return h(t,[{key:"getxAxisLabelsCoords",value:function(){var t,e=this.w,i=e.globals.labels.slice();if(e.config.xaxis.convertedCatToNumeric&&0===i.length&&(i=e.globals.categoryLabels),e.globals.timescaleLabels.length>0){var s=this.getxAxisTimeScaleLabelsCoords();t={width:s.width,height:s.height},e.globals.rotateXLabels=!1}else{this.dCtx.lgWidthForSideLegends="left"!==e.config.legend.position&&"right"!==e.config.legend.position||e.config.legend.floating?0:this.dCtx.lgRect.width;var n=e.globals.xLabelFormatter,a=y.getLargestStringFromArr(i),r=this.dCtx.dimHelpers.getLargestStringFromMultiArr(a,i);e.globals.isBarHorizontal&&(r=a=e.globals.yAxisScale[0].result.reduce((function(t,e){return t.length>e.length?t:e}),0));var o=new V(this.dCtx.ctx),l=a;a=o.xLabelFormat(n,a,l,{i:void 0,dateFormatter:new M(this.dCtx.ctx).formatDate,w:e}),r=o.xLabelFormat(n,r,l,{i:void 0,dateFormatter:new M(this.dCtx.ctx).formatDate,w:e}),(e.config.xaxis.convertedCatToNumeric&&void 0===a||""===String(a).trim())&&(r=a="1");var h=new C(this.dCtx.ctx),c=h.getTextRects(a,e.config.xaxis.labels.style.fontSize),d=c;if(a!==r&&(d=h.getTextRects(r,e.config.xaxis.labels.style.fontSize)),(t={width:c.width>=d.width?c.width:d.width,height:c.height>=d.height?c.height:d.height}).width*i.length>e.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&0!==e.config.xaxis.labels.rotate||e.config.xaxis.labels.rotateAlways){if(!e.globals.isBarHorizontal){e.globals.rotateXLabels=!0;var u=function(t){return h.getTextRects(t,e.config.xaxis.labels.style.fontSize,e.config.xaxis.labels.style.fontFamily,"rotate(".concat(e.config.xaxis.labels.rotate," 0 0)"),!1)};c=u(a),a!==r&&(d=u(r)),t.height=(c.height>d.height?c.height:d.height)/1.5,t.width=c.width>d.width?c.width:d.width}}else e.globals.rotateXLabels=!1}return e.config.xaxis.labels.show||(t={width:0,height:0}),{width:t.width,height:t.height}}},{key:"getxAxisGroupLabelsCoords",value:function(){var t,e=this.w;if(!e.globals.hasGroups)return{width:0,height:0};var i,s=(null===(t=e.config.xaxis.group.style)||void 0===t?void 0:t.fontSize)||e.config.xaxis.labels.style.fontSize,n=e.globals.groups.map((function(t){return t.title})),a=y.getLargestStringFromArr(n),r=this.dCtx.dimHelpers.getLargestStringFromMultiArr(a,n),o=new C(this.dCtx.ctx),l=o.getTextRects(a,s),h=l;return a!==r&&(h=o.getTextRects(r,s)),i={width:l.width>=h.width?l.width:h.width,height:l.height>=h.height?l.height:h.height},e.config.xaxis.labels.show||(i={width:0,height:0}),{width:i.width,height:i.height}}},{key:"getxAxisTitleCoords",value:function(){var t=this.w,e=0,i=0;if(void 0!==t.config.xaxis.title.text){var s=new C(this.dCtx.ctx).getTextRects(t.config.xaxis.title.text,t.config.xaxis.title.style.fontSize);e=s.width,i=s.height}return{width:e,height:i}}},{key:"getxAxisTimeScaleLabelsCoords",value:function(){var t,e=this.w;this.dCtx.timescaleLabels=e.globals.timescaleLabels.slice();var i=this.dCtx.timescaleLabels.map((function(t){return t.value})),s=i.reduce((function(t,e){return void 0===t?(console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"),0):t.length>e.length?t:e}),0);return 1.05*(t=new C(this.dCtx.ctx).getTextRects(s,e.config.xaxis.labels.style.fontSize)).width*i.length>e.globals.gridWidth&&0!==e.config.xaxis.labels.rotate&&(e.globals.overlappingXLabels=!0),t}},{key:"additionalPaddingXLabels",value:function(t){var e=this,i=this.w,s=i.globals,n=i.config,a=n.xaxis.type,r=t.width;s.skipLastTimelinelabel=!1,s.skipFirstTimelinelabel=!1;var o=i.config.yaxis[0].opposite&&i.globals.isBarHorizontal,l=function(t,o){(function(t){return-1!==s.collapsedSeriesIndices.indexOf(t)})(o)||function(t){if(e.dCtx.timescaleLabels&&e.dCtx.timescaleLabels.length){var o=e.dCtx.timescaleLabels[0],l=e.dCtx.timescaleLabels[e.dCtx.timescaleLabels.length-1].position+r/1.75-e.dCtx.yAxisWidthRight,h=o.position-r/1.75+e.dCtx.yAxisWidthLeft,c="right"===i.config.legend.position&&e.dCtx.lgRect.width>0?e.dCtx.lgRect.width:0;l>s.svgWidth-s.translateX-c&&(s.skipLastTimelinelabel=!0),h<-(t.show&&!t.floating||"bar"!==n.chart.type&&"candlestick"!==n.chart.type&&"rangeBar"!==n.chart.type&&"boxPlot"!==n.chart.type?10:r/1.75)&&(s.skipFirstTimelinelabel=!0)}else"datetime"===a?e.dCtx.gridPad.right<r&&!s.rotateXLabels&&(s.skipLastTimelinelabel=!0):"datetime"!==a&&e.dCtx.gridPad.right<r/2-e.dCtx.yAxisWidthRight&&!s.rotateXLabels&&!i.config.xaxis.labels.trim&&("between"!==i.config.xaxis.tickPlacement||i.globals.isBarHorizontal)&&(e.dCtx.xPadRight=r/2+1)}(t)};n.yaxis.forEach((function(t,i){o?(e.dCtx.gridPad.left<r&&(e.dCtx.xPadLeft=r/2+1),e.dCtx.xPadRight=r/2+1):l(t,i)}))}}]),t}(),lt=function(){function t(e){o(this,t),this.w=e.w,this.dCtx=e}return h(t,[{key:"getyAxisLabelsCoords",value:function(){var t=this,e=this.w,i=[],s=10,n=new Z(this.dCtx.ctx);return e.config.yaxis.map((function(a,r){var o=e.globals.yAxisScale[r],l=0;if(!n.isYAxisHidden(r)&&a.labels.show&&void 0!==a.labels.minWidth&&(l=a.labels.minWidth),!n.isYAxisHidden(r)&&a.labels.show&&o.result.length){var h=e.globals.yLabelFormatters[r],c=o.niceMin===Number.MIN_VALUE?0:o.niceMin,d=String(c).length>String(o.niceMax).length?c:o.niceMax,u=h(d,{seriesIndex:r,dataPointIndex:-1,w:e}),p=u;if(void 0!==u&&0!==u.length||(u=d),e.globals.isBarHorizontal){s=0;var g=e.globals.labels.slice();u=h(u=y.getLargestStringFromArr(g),{seriesIndex:r,dataPointIndex:-1,w:e}),p=t.dCtx.dimHelpers.getLargestStringFromMultiArr(u,g)}var f=new C(t.dCtx.ctx),m="rotate(".concat(a.labels.rotate," 0 0)"),v=f.getTextRects(u,a.labels.style.fontSize,a.labels.style.fontFamily,m,!1),b=v;u!==p&&(b=f.getTextRects(p,a.labels.style.fontSize,a.labels.style.fontFamily,m,!1)),i.push({width:(l>b.width||l>v.width?l:b.width>v.width?b.width:v.width)+s,height:b.height>v.height?b.height:v.height})}else i.push({width:0,height:0})})),i}},{key:"getyAxisTitleCoords",value:function(){var t=this,e=this.w,i=[];return e.config.yaxis.map((function(e,s){if(e.show&&void 0!==e.title.text){var n=new C(t.dCtx.ctx),a="rotate(".concat(e.title.rotate," 0 0)"),r=n.getTextRects(e.title.text,e.title.style.fontSize,e.title.style.fontFamily,a,!1);i.push({width:r.width,height:r.height})}else i.push({width:0,height:0})})),i}},{key:"getTotalYAxisWidth",value:function(){var t=this.w,e=0,i=0,s=0,n=t.globals.yAxisScale.length>1?10:0,a=new Z(this.dCtx.ctx),r=function(r,o){var l=t.config.yaxis[o].floating,h=0;r.width>0&&!l?(h=r.width+n,function(e){return t.globals.ignoreYAxisIndexes.indexOf(e)>-1}(o)&&(h=h-r.width-n)):h=l||a.isYAxisHidden(o)?0:5,t.config.yaxis[o].opposite?s+=h:i+=h,e+=h};return t.globals.yLabelsCoords.map((function(t,e){r(t,e)})),t.globals.yTitleCoords.map((function(t,e){r(t,e)})),t.globals.isBarHorizontal&&!t.config.yaxis[0].floating&&(e=t.globals.yLabelsCoords[0].width+t.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=i,this.dCtx.yAxisWidthRight=s,e}}]),t}(),ht=function(){function t(e){o(this,t),this.w=e.w,this.dCtx=e}return h(t,[{key:"gridPadForColumnsInNumericAxis",value:function(t){var e=this.w;if(e.globals.noData||e.globals.allSeriesCollapsed)return 0;var i=function(t){return"bar"===t||"rangeBar"===t||"candlestick"===t||"boxPlot"===t},s=e.config.chart.type,n=0,a=i(s)?e.config.series.length:1;if(e.globals.comboBarCount>0&&(a=e.globals.comboBarCount),e.globals.collapsedSeries.forEach((function(t){i(t.type)&&(a-=1)})),e.config.chart.stacked&&(a=1),(i(s)||e.globals.comboBarCount>0)&&e.globals.isXNumeric&&!e.globals.isBarHorizontal&&a>0){var r,o,l=Math.abs(e.globals.initialMaxX-e.globals.initialMinX);l<=3&&(l=e.globals.dataPoints),r=l/t,e.globals.minXDiff&&e.globals.minXDiff/r>0&&(o=e.globals.minXDiff/r),o>t/2&&(o/=2),(n=o/a*parseInt(e.config.plotOptions.bar.columnWidth,10)/100)<1&&(n=1),n=n/(a>1?1:1.5)+5,e.globals.barPadForNumericAxis=n}return n}},{key:"gridPadFortitleSubtitle",value:function(){var t=this,e=this.w,i=e.globals,s=this.dCtx.isSparkline||!e.globals.axisCharts?0:10;["title","subtitle"].forEach((function(i){void 0!==e.config[i].text?s+=e.config[i].margin:s+=t.dCtx.isSparkline||!e.globals.axisCharts?0:5})),!e.config.legend.show||"bottom"!==e.config.legend.position||e.config.legend.floating||e.globals.axisCharts||(s+=10);var n=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),a=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");i.gridHeight=i.gridHeight-n.height-a.height-s,i.translateY=i.translateY+n.height+a.height+s}},{key:"setGridXPosForDualYAxis",value:function(t,e){var i=this.w,s=new Z(this.dCtx.ctx);i.config.yaxis.map((function(n,a){-1!==i.globals.ignoreYAxisIndexes.indexOf(a)||n.floating||s.isYAxisHidden(a)||(n.opposite&&(i.globals.translateX=i.globals.translateX-(e[a].width+t[a].width)-parseInt(i.config.yaxis[a].labels.style.fontSize,10)/1.2-12),i.globals.translateX<2&&(i.globals.translateX=2))}))}}]),t}(),ct=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new rt(this),this.dimYAxis=new lt(this),this.dimXAxis=new ot(this),this.dimGrid=new ht(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}return h(t,[{key:"plotCoords",value:function(){var t=this,e=this.w,i=e.globals;this.lgRect=this.dimHelpers.getLegendsRect(),this.isSparkline&&(e.config.markers.discrete.length>0||e.config.markers.size>0)&&Object.entries(this.gridPad).forEach((function(e){var i=m(e,2),s=i[0],n=i[1];t.gridPad[s]=Math.max(n,t.w.globals.markers.largestSize/1.5)})),i.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),i.gridHeight=i.gridHeight-this.gridPad.top-this.gridPad.bottom,i.gridWidth=i.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;var s=this.dimGrid.gridPadForColumnsInNumericAxis(i.gridWidth);i.gridWidth=i.gridWidth-2*s,i.translateX=i.translateX+this.gridPad.left+this.xPadLeft+(s>0?s+4:0),i.translateY=i.translateY+this.gridPad.top}},{key:"setDimensionsForAxisCharts",value:function(){var t=this,e=this.w,i=e.globals,s=this.dimYAxis.getyAxisLabelsCoords(),n=this.dimYAxis.getyAxisTitleCoords();e.globals.yLabelsCoords=[],e.globals.yTitleCoords=[],e.config.yaxis.map((function(t,i){e.globals.yLabelsCoords.push({width:s[i].width,index:i}),e.globals.yTitleCoords.push({width:n[i].width,index:i})})),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();var a=this.dimXAxis.getxAxisLabelsCoords(),r=this.dimXAxis.getxAxisGroupLabelsCoords(),o=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(a,o,r),i.translateXAxisY=e.globals.rotateXLabels?this.xAxisHeight/8:-4,i.translateXAxisX=e.globals.rotateXLabels&&e.globals.isXNumeric&&e.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,e.globals.isBarHorizontal&&(i.rotateXLabels=!1,i.translateXAxisY=parseInt(e.config.xaxis.labels.style.fontSize,10)/1.5*-1),i.translateXAxisY=i.translateXAxisY+e.config.xaxis.labels.offsetY,i.translateXAxisX=i.translateXAxisX+e.config.xaxis.labels.offsetX;var l=this.yAxisWidth,h=this.xAxisHeight;i.xAxisLabelsHeight=this.xAxisHeight-o.height,i.xAxisGroupLabelsHeight=i.xAxisLabelsHeight-a.height,i.xAxisLabelsWidth=this.xAxisWidth,i.xAxisHeight=this.xAxisHeight;var c=10;("radar"===e.config.chart.type||this.isSparkline)&&(l=0,h=i.goldenPadding),this.isSparkline&&(this.lgRect={height:0,width:0}),(this.isSparkline||"treemap"===e.config.chart.type)&&(l=0,h=0,c=0),this.isSparkline||this.dimXAxis.additionalPaddingXLabels(a);var d=function(){i.translateX=l,i.gridHeight=i.svgHeight-t.lgRect.height-h-(t.isSparkline||"treemap"===e.config.chart.type?0:e.globals.rotateXLabels?10:15),i.gridWidth=i.svgWidth-l};switch("top"===e.config.xaxis.position&&(c=i.xAxisHeight-e.config.xaxis.axisTicks.height-5),e.config.legend.position){case"bottom":i.translateY=c,d();break;case"top":i.translateY=this.lgRect.height+c,d();break;case"left":i.translateY=c,i.translateX=this.lgRect.width+l,i.gridHeight=i.svgHeight-h-12,i.gridWidth=i.svgWidth-this.lgRect.width-l;break;case"right":i.translateY=c,i.translateX=l,i.gridHeight=i.svgHeight-h-12,i.gridWidth=i.svgWidth-this.lgRect.width-l-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(n,s),new Q(this.ctx).setYAxisXPosition(s,n)}},{key:"setDimensionsForNonAxisCharts",value:function(){var t=this.w,e=t.globals,i=t.config,s=0;t.config.legend.show&&!t.config.legend.floating&&(s=20);var n="pie"===i.chart.type||"polarArea"===i.chart.type||"donut"===i.chart.type?"pie":"radialBar",a=i.plotOptions[n].offsetY,r=i.plotOptions[n].offsetX;if(!i.legend.show||i.legend.floating)return e.gridHeight=e.svgHeight-i.grid.padding.left+i.grid.padding.right,e.gridWidth=e.gridHeight,e.translateY=a,void(e.translateX=r+(e.svgWidth-e.gridWidth)/2);switch(i.legend.position){case"bottom":e.gridHeight=e.svgHeight-this.lgRect.height-e.goldenPadding,e.gridWidth=e.svgWidth,e.translateY=a-10,e.translateX=r+(e.svgWidth-e.gridWidth)/2;break;case"top":e.gridHeight=e.svgHeight-this.lgRect.height-e.goldenPadding,e.gridWidth=e.svgWidth,e.translateY=this.lgRect.height+a+10,e.translateX=r+(e.svgWidth-e.gridWidth)/2;break;case"left":e.gridWidth=e.svgWidth-this.lgRect.width-s,e.gridHeight="auto"!==i.chart.height?e.svgHeight:e.gridWidth,e.translateY=a,e.translateX=r+this.lgRect.width+s;break;case"right":e.gridWidth=e.svgWidth-this.lgRect.width-s-5,e.gridHeight="auto"!==i.chart.height?e.svgHeight:e.gridWidth,e.translateY=a,e.translateX=r+10;break;default:throw new Error("Legend position not supported")}}},{key:"conditionalChecksForAxisCoords",value:function(t,e,i){var s=this.w,n=s.globals.hasGroups?2:1,a=i.height+t.height+e.height,r=s.globals.isMultiLineX?1.2:s.globals.LINE_HEIGHT_RATIO,o=s.globals.rotateXLabels?22:10,l=s.globals.rotateXLabels&&"bottom"===s.config.legend.position?10:0;this.xAxisHeight=a*r+n*o+l,this.xAxisWidth=t.width,this.xAxisHeight-e.height>s.config.xaxis.labels.maxHeight&&(this.xAxisHeight=s.config.xaxis.labels.maxHeight),s.config.xaxis.labels.minHeight&&this.xAxisHeight<s.config.xaxis.labels.minHeight&&(this.xAxisHeight=s.config.xaxis.labels.minHeight),s.config.xaxis.floating&&(this.xAxisHeight=0);var h=0,c=0;s.config.yaxis.forEach((function(t){h+=t.labels.minWidth,c+=t.labels.maxWidth})),this.yAxisWidth<h&&(this.yAxisWidth=h),this.yAxisWidth>c&&(this.yAxisWidth=c)}}]),t}(),dt=function(){function t(e){o(this,t),this.w=e.w,this.lgCtx=e}return h(t,[{key:"getLegendStyles",value:function(){var t=document.createElement("style");t.setAttribute("type","text/css");var e=document.createTextNode("\t\n    \t\n      .apexcharts-legend {\t\n        display: flex;\t\n        overflow: auto;\t\n        padding: 0 10px;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom, .apexcharts-legend.apx-legend-position-top {\t\n        flex-wrap: wrap\t\n      }\t\n      .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\t\n        flex-direction: column;\t\n        bottom: 0;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-left, .apexcharts-legend.apx-legend-position-top.apexcharts-align-left, .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\t\n        justify-content: flex-start;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-center, .apexcharts-legend.apx-legend-position-top.apexcharts-align-center {\t\n        justify-content: center;  \t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-right, .apexcharts-legend.apx-legend-position-top.apexcharts-align-right {\t\n        justify-content: flex-end;\t\n      }\t\n      .apexcharts-legend-series {\t\n        cursor: pointer;\t\n        line-height: normal;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom .apexcharts-legend-series, .apexcharts-legend.apx-legend-position-top .apexcharts-legend-series{\t\n        display: flex;\t\n        align-items: center;\t\n      }\t\n      .apexcharts-legend-text {\t\n        position: relative;\t\n        font-size: 14px;\t\n      }\t\n      .apexcharts-legend-text *, .apexcharts-legend-marker * {\t\n        pointer-events: none;\t\n      }\t\n      .apexcharts-legend-marker {\t\n        position: relative;\t\n        display: inline-block;\t\n        cursor: pointer;\t\n        margin-right: 3px;\t\n        border-style: solid;\n      }\t\n      \t\n      .apexcharts-legend.apexcharts-align-right .apexcharts-legend-series, .apexcharts-legend.apexcharts-align-left .apexcharts-legend-series{\t\n        display: inline-block;\t\n      }\t\n      .apexcharts-legend-series.apexcharts-no-click {\t\n        cursor: auto;\t\n      }\t\n      .apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {\t\n        display: none !important;\t\n      }\t\n      .apexcharts-inactive-legend {\t\n        opacity: 0.45;\t\n      }");return t.appendChild(e),t}},{key:"getLegendBBox",value:function(){var t=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect(),e=t.width;return{clwh:t.height,clww:e}}},{key:"appendToForeignObject",value:function(){var t=this.w.globals;t.dom.elLegendForeign=document.createElementNS(t.SVGNS,"foreignObject");var e=t.dom.elLegendForeign;e.setAttribute("x",0),e.setAttribute("y",0),e.setAttribute("width",t.svgWidth),e.setAttribute("height",t.svgHeight),t.dom.elLegendWrap.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),e.appendChild(t.dom.elLegendWrap),e.appendChild(this.getLegendStyles()),t.dom.Paper.node.insertBefore(e,t.dom.elGraphical.node)}},{key:"toggleDataSeries",value:function(t,e){var i=this,s=this.w;if(s.globals.axisCharts||"radialBar"===s.config.chart.type){s.globals.resized=!0;var n=null,a=null;s.globals.risingSeries=[],s.globals.axisCharts?(n=s.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(t,"']")),a=parseInt(n.getAttribute("data:realIndex"),10)):(n=s.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(t+1,"']")),a=parseInt(n.getAttribute("rel"),10)-1),e?[{cs:s.globals.collapsedSeries,csi:s.globals.collapsedSeriesIndices},{cs:s.globals.ancillaryCollapsedSeries,csi:s.globals.ancillaryCollapsedSeriesIndices}].forEach((function(t){i.riseCollapsedSeries(t.cs,t.csi,a)})):this.hideSeries({seriesEl:n,realIndex:a})}else{var r=s.globals.dom.Paper.select(" .apexcharts-series[rel='".concat(t+1,"'] path")),o=s.config.chart.type;if("pie"===o||"polarArea"===o||"donut"===o){var l=s.config.plotOptions.pie.donut.labels;new C(this.lgCtx.ctx).pathMouseDown(r.members[0],null),this.lgCtx.ctx.pie.printDataLabelsInner(r.members[0].node,l)}r.fire("click")}}},{key:"hideSeries",value:function(t){var e=t.seriesEl,i=t.realIndex,s=this.w,n=y.clone(s.config.series);if(s.globals.axisCharts){var a=!1;if(s.config.yaxis[i]&&s.config.yaxis[i].show&&s.config.yaxis[i].showAlways&&(a=!0,s.globals.ancillaryCollapsedSeriesIndices.indexOf(i)<0&&(s.globals.ancillaryCollapsedSeries.push({index:i,data:n[i].data.slice(),type:e.parentNode.className.baseVal.split("-")[1]}),s.globals.ancillaryCollapsedSeriesIndices.push(i))),!a){s.globals.collapsedSeries.push({index:i,data:n[i].data.slice(),type:e.parentNode.className.baseVal.split("-")[1]}),s.globals.collapsedSeriesIndices.push(i);var r=s.globals.risingSeries.indexOf(i);s.globals.risingSeries.splice(r,1)}}else s.globals.collapsedSeries.push({index:i,data:n[i]}),s.globals.collapsedSeriesIndices.push(i);for(var o=e.childNodes,l=0;l<o.length;l++)o[l].classList.contains("apexcharts-series-markers-wrap")&&(o[l].classList.contains("apexcharts-hide")?o[l].classList.remove("apexcharts-hide"):o[l].classList.add("apexcharts-hide"));s.globals.allSeriesCollapsed=s.globals.collapsedSeries.length===s.config.series.length,n=this._getSeriesBasedOnCollapsedState(n),this.lgCtx.ctx.updateHelpers._updateSeries(n,s.config.chart.animations.dynamicAnimation.enabled)}},{key:"riseCollapsedSeries",value:function(t,e,i){var s=this.w,n=y.clone(s.config.series);if(t.length>0){for(var a=0;a<t.length;a++)t[a].index===i&&(s.globals.axisCharts?(n[i].data=t[a].data.slice(),t.splice(a,1),e.splice(a,1),s.globals.risingSeries.push(i)):(n[i]=t[a].data,t.splice(a,1),e.splice(a,1),s.globals.risingSeries.push(i)));n=this._getSeriesBasedOnCollapsedState(n),this.lgCtx.ctx.updateHelpers._updateSeries(n,s.config.chart.animations.dynamicAnimation.enabled)}}},{key:"_getSeriesBasedOnCollapsedState",value:function(t){var e=this.w;return e.globals.axisCharts?t.forEach((function(i,s){e.globals.collapsedSeriesIndices.indexOf(s)>-1&&(t[s].data=[])})):t.forEach((function(i,s){e.globals.collapsedSeriesIndices.indexOf(s)>-1&&(t[s]=0)})),t}}]),t}(),ut=function(){function t(e,i){o(this,t),this.ctx=e,this.w=e.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed="bar"===this.w.config.chart.type&&this.w.config.plotOptions.bar.distributed&&1===this.w.config.series.length,this.legendHelpers=new dt(this)}return h(t,[{key:"init",value:function(){var t=this.w,e=t.globals,i=t.config;if((i.legend.showForSingleSeries&&1===e.series.length||this.isBarsDistributed||e.series.length>1||!e.axisCharts)&&i.legend.show){for(;e.dom.elLegendWrap.firstChild;)e.dom.elLegendWrap.removeChild(e.dom.elLegendWrap.firstChild);this.drawLegends(),y.isIE11()?document.getElementsByTagName("head")[0].appendChild(this.legendHelpers.getLegendStyles()):this.legendHelpers.appendToForeignObject(),"bottom"===i.legend.position||"top"===i.legend.position?this.legendAlignHorizontal():"right"!==i.legend.position&&"left"!==i.legend.position||this.legendAlignVertical()}}},{key:"drawLegends",value:function(){var t=this,e=this.w,i=e.config.legend.fontFamily,s=e.globals.seriesNames,n=e.globals.colors.slice();if("heatmap"===e.config.chart.type){var a=e.config.plotOptions.heatmap.colorScale.ranges;s=a.map((function(t){return t.name?t.name:t.from+" - "+t.to})),n=a.map((function(t){return t.color}))}else this.isBarsDistributed&&(s=e.globals.labels.slice());e.config.legend.customLegendItems.length&&(s=e.config.legend.customLegendItems);for(var r=e.globals.legendFormatter,o=e.config.legend.inverseOrder,l=o?s.length-1:0;o?l>=0:l<=s.length-1;o?l--:l++){var h=r(s[l],{seriesIndex:l,w:e}),c=!1,d=!1;if(e.globals.collapsedSeries.length>0)for(var u=0;u<e.globals.collapsedSeries.length;u++)e.globals.collapsedSeries[u].index===l&&(c=!0);if(e.globals.ancillaryCollapsedSeriesIndices.length>0)for(var p=0;p<e.globals.ancillaryCollapsedSeriesIndices.length;p++)e.globals.ancillaryCollapsedSeriesIndices[p]===l&&(d=!0);var g=document.createElement("span");g.classList.add("apexcharts-legend-marker");var f=e.config.legend.markers.offsetX,m=e.config.legend.markers.offsetY,v=e.config.legend.markers.height,b=e.config.legend.markers.width,x=e.config.legend.markers.strokeWidth,w=e.config.legend.markers.strokeColor,k=e.config.legend.markers.radius,_=g.style;_.background=n[l],_.color=n[l],_.setProperty("background",n[l],"important"),e.config.legend.markers.fillColors&&e.config.legend.markers.fillColors[l]&&(_.background=e.config.legend.markers.fillColors[l]),void 0!==e.globals.seriesColors[l]&&(_.background=e.globals.seriesColors[l],_.color=e.globals.seriesColors[l]),_.height=Array.isArray(v)?parseFloat(v[l])+"px":parseFloat(v)+"px",_.width=Array.isArray(b)?parseFloat(b[l])+"px":parseFloat(b)+"px",_.left=(Array.isArray(f)?parseFloat(f[l]):parseFloat(f))+"px",_.top=(Array.isArray(m)?parseFloat(m[l]):parseFloat(m))+"px",_.borderWidth=Array.isArray(x)?x[l]:x,_.borderColor=Array.isArray(w)?w[l]:w,_.borderRadius=Array.isArray(k)?parseFloat(k[l])+"px":parseFloat(k)+"px",e.config.legend.markers.customHTML&&(Array.isArray(e.config.legend.markers.customHTML)?e.config.legend.markers.customHTML[l]&&(g.innerHTML=e.config.legend.markers.customHTML[l]()):g.innerHTML=e.config.legend.markers.customHTML()),C.setAttrs(g,{rel:l+1,"data:collapsed":c||d}),(c||d)&&g.classList.add("apexcharts-inactive-legend");var A=document.createElement("div"),I=document.createElement("span");I.classList.add("apexcharts-legend-text"),I.innerHTML=Array.isArray(h)?h.join(" "):h;var P=e.config.legend.labels.useSeriesColors?e.globals.colors[l]:e.config.legend.labels.colors;P||(P=e.config.chart.foreColor),I.style.color=P,I.style.fontSize=parseFloat(e.config.legend.fontSize)+"px",I.style.fontWeight=e.config.legend.fontWeight,I.style.fontFamily=i||e.config.chart.fontFamily,C.setAttrs(I,{rel:l+1,i:l,"data:default-text":encodeURIComponent(h),"data:collapsed":c||d}),A.appendChild(g),A.appendChild(I);var T=new S(this.ctx);e.config.legend.showForZeroSeries||0===T.getSeriesTotalByIndex(l)&&T.seriesHaveSameValues(l)&&!T.isSeriesNull(l)&&-1===e.globals.collapsedSeriesIndices.indexOf(l)&&-1===e.globals.ancillaryCollapsedSeriesIndices.indexOf(l)&&A.classList.add("apexcharts-hidden-zero-series"),e.config.legend.showForNullSeries||T.isSeriesNull(l)&&-1===e.globals.collapsedSeriesIndices.indexOf(l)&&-1===e.globals.ancillaryCollapsedSeriesIndices.indexOf(l)&&A.classList.add("apexcharts-hidden-null-series"),e.globals.dom.elLegendWrap.appendChild(A),e.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(e.config.legend.horizontalAlign)),e.globals.dom.elLegendWrap.classList.add("apx-legend-position-"+e.config.legend.position),A.classList.add("apexcharts-legend-series"),A.style.margin="".concat(e.config.legend.itemMargin.vertical,"px ").concat(e.config.legend.itemMargin.horizontal,"px"),e.globals.dom.elLegendWrap.style.width=e.config.legend.width?e.config.legend.width+"px":"",e.globals.dom.elLegendWrap.style.height=e.config.legend.height?e.config.legend.height+"px":"",C.setAttrs(A,{rel:l+1,seriesName:y.escapeString(s[l]),"data:collapsed":c||d}),(c||d)&&A.classList.add("apexcharts-inactive-legend"),e.config.legend.onItemClick.toggleDataSeries||A.classList.add("apexcharts-no-click")}e.globals.dom.elWrap.addEventListener("click",t.onLegendClick,!0),e.config.legend.onItemHover.highlightDataSeries&&0===e.config.legend.customLegendItems.length&&(e.globals.dom.elWrap.addEventListener("mousemove",t.onLegendHovered,!0),e.globals.dom.elWrap.addEventListener("mouseout",t.onLegendHovered,!0))}},{key:"setLegendWrapXY",value:function(t,e){var i=this.w,s=i.globals.dom.baseEl.querySelector(".apexcharts-legend"),n=s.getBoundingClientRect(),a=0,r=0;if("bottom"===i.config.legend.position)r+=i.globals.svgHeight-n.height/2;else if("top"===i.config.legend.position){var o=new ct(this.ctx),l=o.dimHelpers.getTitleSubtitleCoords("title").height,h=o.dimHelpers.getTitleSubtitleCoords("subtitle").height;r=r+(l>0?l-10:0)+(h>0?h-10:0)}s.style.position="absolute",a=a+t+i.config.legend.offsetX,r=r+e+i.config.legend.offsetY,s.style.left=a+"px",s.style.top=r+"px","bottom"===i.config.legend.position?(s.style.top="auto",s.style.bottom=5-i.config.legend.offsetY+"px"):"right"===i.config.legend.position&&(s.style.left="auto",s.style.right=25+i.config.legend.offsetX+"px"),["width","height"].forEach((function(t){s.style[t]&&(s.style[t]=parseInt(i.config.legend[t],10)+"px")}))}},{key:"legendAlignHorizontal",value:function(){var t=this.w;t.globals.dom.baseEl.querySelector(".apexcharts-legend").style.right=0;var e=this.legendHelpers.getLegendBBox(),i=new ct(this.ctx),s=i.dimHelpers.getTitleSubtitleCoords("title"),n=i.dimHelpers.getTitleSubtitleCoords("subtitle"),a=0;"bottom"===t.config.legend.position?a=-e.clwh/1.8:"top"===t.config.legend.position&&(a=s.height+n.height+t.config.title.margin+t.config.subtitle.margin-10),this.setLegendWrapXY(20,a)}},{key:"legendAlignVertical",value:function(){var t=this.w,e=this.legendHelpers.getLegendBBox(),i=0;"left"===t.config.legend.position&&(i=20),"right"===t.config.legend.position&&(i=t.globals.svgWidth-e.clww-10),this.setLegendWrapXY(i,20)}},{key:"onLegendHovered",value:function(t){var e=this.w,i=t.target.classList.contains("apexcharts-legend-text")||t.target.classList.contains("apexcharts-legend-marker");if("heatmap"===e.config.chart.type||this.isBarsDistributed){if(i){var s=parseInt(t.target.getAttribute("rel"),10)-1;this.ctx.events.fireEvent("legendHover",[this.ctx,s,this.w]),new X(this.ctx).highlightRangeInSeries(t,t.target)}}else!t.target.classList.contains("apexcharts-inactive-legend")&&i&&new X(this.ctx).toggleSeriesOnHover(t,t.target)}},{key:"onLegendClick",value:function(t){var e=this.w;if(!e.config.legend.customLegendItems.length&&(t.target.classList.contains("apexcharts-legend-text")||t.target.classList.contains("apexcharts-legend-marker"))){var i=parseInt(t.target.getAttribute("rel"),10)-1,s="true"===t.target.getAttribute("data:collapsed"),n=this.w.config.chart.events.legendClick;"function"==typeof n&&n(this.ctx,i,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,i,this.w]);var a=this.w.config.legend.markers.onClick;"function"==typeof a&&t.target.classList.contains("apexcharts-legend-marker")&&(a(this.ctx,i,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,i,this.w])),"treemap"!==e.config.chart.type&&"heatmap"!==e.config.chart.type&&!this.isBarsDistributed&&e.config.legend.onItemClick.toggleDataSeries&&this.legendHelpers.toggleDataSeries(i,s)}}}]),t}(),pt=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w;var i=this.w;this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar,this.minX=i.globals.minX,this.maxX=i.globals.maxX}return h(t,[{key:"createToolbar",value:function(){var t=this,e=this.w,i=function(){return document.createElement("div")},s=i();if(s.setAttribute("class","apexcharts-toolbar"),s.style.top=e.config.chart.toolbar.offsetY+"px",s.style.right=3-e.config.chart.toolbar.offsetX+"px",e.globals.dom.elWrap.appendChild(s),this.elZoom=i(),this.elZoomIn=i(),this.elZoomOut=i(),this.elPan=i(),this.elSelection=i(),this.elZoomReset=i(),this.elMenuIcon=i(),this.elMenu=i(),this.elCustomIcons=[],this.t=e.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(var n=0;n<this.t.customIcons.length;n++)this.elCustomIcons.push(i());var a=[],r=function(i,s,n){var r=i.toLowerCase();t.t[r]&&e.config.chart.zoom.enabled&&a.push({el:s,icon:"string"==typeof t.t[r]?t.t[r]:n,title:t.localeValues[i],class:"apexcharts-".concat(r,"-icon")})};r("zoomIn",this.elZoomIn,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n'),r("zoomOut",this.elZoomOut,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n');var o=function(i){t.t[i]&&e.config.chart[i].enabled&&a.push({el:"zoom"===i?t.elZoom:t.elSelection,icon:"string"==typeof t.t[i]?t.t[i]:"zoom"===i?'<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>\n    <path d="M0 0h24v24H0V0z" fill="none"/>\n    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>\n</svg>':'<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>\n</svg>',title:t.localeValues["zoom"===i?"selectionZoom":"selection"],class:e.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-".concat(i,"-icon")})};o("zoom"),o("selection"),this.t.pan&&e.config.chart.zoom.enabled&&a.push({el:this.elPan,icon:"string"==typeof this.t.pan?this.t.pan:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <defs>\n        <path d="M0 0h24v24H0z" id="a"/>\n    </defs>\n    <clipPath id="b">\n        <use overflow="visible" xlink:href="#a"/>\n    </clipPath>\n    <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>\n</svg>',title:this.localeValues.pan,class:e.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-pan-icon"}),r("reset",this.elZoomReset,'<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>'),this.t.download&&a.push({el:this.elMenuIcon,icon:"string"==typeof this.t.download?this.t.download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(var l=0;l<this.elCustomIcons.length;l++)a.push({el:this.elCustomIcons[l],icon:this.t.customIcons[l].icon,title:this.t.customIcons[l].title,index:this.t.customIcons[l].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[l].class});a.forEach((function(t,e){t.index&&y.moveIndexInArray(a,e,t.index)}));for(var h=0;h<a.length;h++)C.setAttrs(a[h].el,{class:a[h].class,title:a[h].title}),a[h].el.innerHTML=a[h].icon,s.appendChild(a[h].el);this._createHamburgerMenu(s),e.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):e.globals.panEnabled?this.elPan.classList.add(this.selectedClass):e.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}},{key:"_createHamburgerMenu",value:function(t){this.elMenuItems=[],t.appendChild(this.elMenu),C.setAttrs(this.elMenu,{class:"apexcharts-menu"});var e=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}];this.w.globals.allSeriesHasEqualX||e.splice(2,1);for(var i=0;i<e.length;i++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[i].innerHTML=e[i].title,C.setAttrs(this.elMenuItems[i],{class:"apexcharts-menu-item ".concat(e[i].name),title:e[i].title}),this.elMenu.appendChild(this.elMenuItems[i])}},{key:"addToolbarEventListeners",value:function(){var t=this;this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach((function(e){e.classList.contains("exportSVG")?e.addEventListener("click",t.handleDownload.bind(t,"svg")):e.classList.contains("exportPNG")?e.addEventListener("click",t.handleDownload.bind(t,"png")):e.classList.contains("exportCSV")&&e.addEventListener("click",t.handleDownload.bind(t,"csv"))}));for(var e=0;e<this.t.customIcons.length;e++)this.elCustomIcons[e].addEventListener("click",this.t.customIcons[e].click.bind(this,this.ctx,this.ctx.w))}},{key:"toggleZoomSelection",value:function(t){this.ctx.getSyncedCharts().forEach((function(e){e.ctx.toolbar.toggleOtherControls();var i="selection"===t?e.ctx.toolbar.elSelection:e.ctx.toolbar.elZoom,s="selection"===t?"selectionEnabled":"zoomEnabled";e.w.globals[s]=!e.w.globals[s],i.classList.contains(e.ctx.toolbar.selectedClass)?i.classList.remove(e.ctx.toolbar.selectedClass):i.classList.add(e.ctx.toolbar.selectedClass)}))}},{key:"getToolbarIconsReference",value:function(){var t=this.w;this.elZoom||(this.elZoom=t.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=t.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=t.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}},{key:"enableZoomPanFromToolbar",value:function(t){this.toggleOtherControls(),"pan"===t?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;var e="pan"===t?this.elPan:this.elZoom,i="pan"===t?this.elZoom:this.elPan;e&&e.classList.add(this.selectedClass),i&&i.classList.remove(this.selectedClass)}},{key:"togglePanning",value:function(){this.ctx.getSyncedCharts().forEach((function(t){t.ctx.toolbar.toggleOtherControls(),t.w.globals.panEnabled=!t.w.globals.panEnabled,t.ctx.toolbar.elPan.classList.contains(t.ctx.toolbar.selectedClass)?t.ctx.toolbar.elPan.classList.remove(t.ctx.toolbar.selectedClass):t.ctx.toolbar.elPan.classList.add(t.ctx.toolbar.selectedClass)}))}},{key:"toggleOtherControls",value:function(){var t=this,e=this.w;e.globals.panEnabled=!1,e.globals.zoomEnabled=!1,e.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach((function(e){e&&e.classList.remove(t.selectedClass)}))}},{key:"handleZoomIn",value:function(){var t=this.w;t.globals.isRangeBar&&(this.minX=t.globals.minY,this.maxX=t.globals.maxY);var e=(this.minX+this.maxX)/2,i=(this.minX+e)/2,s=(this.maxX+e)/2,n=this._getNewMinXMaxX(i,s);t.globals.disableZoomIn||this.zoomUpdateOptions(n.minX,n.maxX)}},{key:"handleZoomOut",value:function(){var t=this.w;if(t.globals.isRangeBar&&(this.minX=t.globals.minY,this.maxX=t.globals.maxY),!("datetime"===t.config.xaxis.type&&new Date(this.minX).getUTCFullYear()<1e3)){var e=(this.minX+this.maxX)/2,i=this.minX-(e-this.minX),s=this.maxX-(e-this.maxX),n=this._getNewMinXMaxX(i,s);t.globals.disableZoomOut||this.zoomUpdateOptions(n.minX,n.maxX)}}},{key:"_getNewMinXMaxX",value:function(t,e){var i=this.w.config.xaxis.convertedCatToNumeric;return{minX:i?Math.floor(t):t,maxX:i?Math.floor(e):e}}},{key:"zoomUpdateOptions",value:function(t,e){var i=this.w;if(void 0!==t||void 0!==e){if(!(i.config.xaxis.convertedCatToNumeric&&(t<1&&(t=1,e=i.globals.dataPoints),e-t<2))){var s={min:t,max:e},n=this.getBeforeZoomRange(s);n&&(s=n.xaxis);var a={xaxis:s},r=y.clone(i.globals.initialConfig.yaxis);i.config.chart.zoom.autoScaleYaxis&&(r=new U(this.ctx).autoScaleY(this.ctx,r,{xaxis:s})),i.config.chart.group||(a.yaxis=r),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(a,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(s,r)}}else this.handleZoomReset()}},{key:"zoomCallback",value:function(t,e){"function"==typeof this.ev.zoomed&&this.ev.zoomed(this.ctx,{xaxis:t,yaxis:e})}},{key:"getBeforeZoomRange",value:function(t,e){var i=null;return"function"==typeof this.ev.beforeZoom&&(i=this.ev.beforeZoom(this,{xaxis:t,yaxis:e})),i}},{key:"toggleMenu",value:function(){var t=this;window.setTimeout((function(){t.elMenu.classList.contains("apexcharts-menu-open")?t.elMenu.classList.remove("apexcharts-menu-open"):t.elMenu.classList.add("apexcharts-menu-open")}),0)}},{key:"handleDownload",value:function(t){var e=this.w,i=new G(this.ctx);switch(t){case"svg":i.exportToSVG(this.ctx);break;case"png":i.exportToPng(this.ctx);break;case"csv":i.exportToCSV({series:e.config.series,columnDelimiter:e.config.chart.toolbar.export.csv.columnDelimiter})}}},{key:"handleZoomReset",value:function(t){this.ctx.getSyncedCharts().forEach((function(t){var e=t.w;if(e.globals.lastXAxis.min=void 0,e.globals.lastXAxis.max=void 0,t.updateHelpers.revertDefaultAxisMinMax(),"function"==typeof e.config.chart.events.beforeResetZoom){var i=e.config.chart.events.beforeResetZoom(t,e);i&&t.updateHelpers.revertDefaultAxisMinMax(i)}"function"==typeof e.config.chart.events.zoomed&&t.ctx.toolbar.zoomCallback({min:e.config.xaxis.min,max:e.config.xaxis.max}),e.globals.zoomed=!1;var s=t.ctx.series.emptyCollapsedSeries(y.clone(e.globals.initialSeries));t.updateHelpers._updateSeries(s,e.config.chart.animations.dynamicAnimation.enabled)}))}},{key:"destroy",value:function(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}]),t}(),gt=function(t){d(i,t);var e=f(i);function i(t){var s;return o(this,i),(s=e.call(this,t)).ctx=t,s.w=t.w,s.dragged=!1,s.graphics=new C(s.ctx),s.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend"],s.clientX=0,s.clientY=0,s.startX=0,s.endX=0,s.dragX=0,s.startY=0,s.endY=0,s.dragY=0,s.moveDirection="none",s}return h(i,[{key:"init",value:function(t){var e=this,i=t.xyRatios,s=this.w,n=this;this.xyRatios=i,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=s.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),s.globals.dom.elGraphical.add(this.zoomRect),s.globals.dom.elGraphical.add(this.selectionRect),"x"===s.config.chart.selection.type?this.slDraggableRect=this.selectionRect.draggable({minX:0,minY:0,maxX:s.globals.gridWidth,maxY:s.globals.gridHeight}).on("dragmove",this.selectionDragging.bind(this,"dragging")):"y"===s.config.chart.selection.type?this.slDraggableRect=this.selectionRect.draggable({minX:0,maxX:s.globals.gridWidth}).on("dragmove",this.selectionDragging.bind(this,"dragging")):this.slDraggableRect=this.selectionRect.draggable().on("dragmove",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=s.globals.dom.baseEl.querySelector("".concat(s.globals.chartClass," .apexcharts-svg")),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach((function(t){e.hoverArea.addEventListener(t,n.svgMouseEvents.bind(n,i),{capture:!1,passive:!0})}))}},{key:"destroy",value:function(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}},{key:"svgMouseEvents",value:function(t,e){var i=this.w,s=this,n=this.ctx.toolbar,a=i.globals.zoomEnabled?i.config.chart.zoom.type:i.config.chart.selection.type,r=i.config.chart.toolbar.autoSelected;if(e.shiftKey?(this.shiftWasPressed=!0,n.enableZoomPanFromToolbar("pan"===r?"zoom":"pan")):this.shiftWasPressed&&(n.enableZoomPanFromToolbar(r),this.shiftWasPressed=!1),e.target){var o,l=e.target.classList;if(e.target.parentNode&&null!==e.target.parentNode&&(o=e.target.parentNode.classList),!(l.contains("apexcharts-selection-rect")||l.contains("apexcharts-legend-marker")||l.contains("apexcharts-legend-text")||o&&o.contains("apexcharts-toolbar"))){if(s.clientX="touchmove"===e.type||"touchstart"===e.type?e.touches[0].clientX:"touchend"===e.type?e.changedTouches[0].clientX:e.clientX,s.clientY="touchmove"===e.type||"touchstart"===e.type?e.touches[0].clientY:"touchend"===e.type?e.changedTouches[0].clientY:e.clientY,"mousedown"===e.type&&1===e.which){var h=s.gridRect.getBoundingClientRect();s.startX=s.clientX-h.left,s.startY=s.clientY-h.top,s.dragged=!1,s.w.globals.mousedown=!0}if(("mousemove"===e.type&&1===e.which||"touchmove"===e.type)&&(s.dragged=!0,i.globals.panEnabled?(i.globals.selection=null,s.w.globals.mousedown&&s.panDragging({context:s,zoomtype:a,xyRatios:t})):(s.w.globals.mousedown&&i.globals.zoomEnabled||s.w.globals.mousedown&&i.globals.selectionEnabled)&&(s.selection=s.selectionDrawing({context:s,zoomtype:a}))),"mouseup"===e.type||"touchend"===e.type||"mouseleave"===e.type){var c=s.gridRect.getBoundingClientRect();s.w.globals.mousedown&&(s.endX=s.clientX-c.left,s.endY=s.clientY-c.top,s.dragX=Math.abs(s.endX-s.startX),s.dragY=Math.abs(s.endY-s.startY),(i.globals.zoomEnabled||i.globals.selectionEnabled)&&s.selectionDrawn({context:s,zoomtype:a}),i.globals.panEnabled&&i.config.xaxis.convertedCatToNumeric&&s.delayedPanScrolled()),i.globals.zoomEnabled&&s.hideSelectionRect(this.selectionRect),s.dragged=!1,s.w.globals.mousedown=!1}this.makeSelectionRectDraggable()}}}},{key:"makeSelectionRectDraggable",value:function(){var t=this.w;if(this.selectionRect){var e=this.selectionRect.node.getBoundingClientRect();e.width>0&&e.height>0&&this.slDraggableRect.selectize({points:"l, r",pointSize:8,pointType:"rect"}).resize({constraint:{minX:0,minY:0,maxX:t.globals.gridWidth,maxY:t.globals.gridHeight}}).on("resizing",this.selectionDragging.bind(this,"resizing"))}}},{key:"preselectedSelection",value:function(){var t=this.w,e=this.xyRatios;if(!t.globals.zoomEnabled)if(void 0!==t.globals.selection&&null!==t.globals.selection)this.drawSelectionRect(t.globals.selection);else if(void 0!==t.config.chart.selection.xaxis.min&&void 0!==t.config.chart.selection.xaxis.max){var i=(t.config.chart.selection.xaxis.min-t.globals.minX)/e.xRatio,s={x:i,y:0,width:t.globals.gridWidth-(t.globals.maxX-t.config.chart.selection.xaxis.max)/e.xRatio-i,height:t.globals.gridHeight,translateX:0,translateY:0,selectionEnabled:!0};this.drawSelectionRect(s),this.makeSelectionRectDraggable(),"function"==typeof t.config.chart.events.selection&&t.config.chart.events.selection(this.ctx,{xaxis:{min:t.config.chart.selection.xaxis.min,max:t.config.chart.selection.xaxis.max},yaxis:{}})}}},{key:"drawSelectionRect",value:function(t){var e=t.x,i=t.y,s=t.width,n=t.height,a=t.translateX,r=void 0===a?0:a,o=t.translateY,l=void 0===o?0:o,h=this.w,c=this.zoomRect,d=this.selectionRect;if(this.dragged||null!==h.globals.selection){var u={transform:"translate("+r+", "+l+")"};h.globals.zoomEnabled&&this.dragged&&(s<0&&(s=1),c.attr({x:e,y:i,width:s,height:n,fill:h.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":h.config.chart.zoom.zoomedArea.fill.opacity,stroke:h.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":h.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":h.config.chart.zoom.zoomedArea.stroke.opacity}),C.setAttrs(c.node,u)),h.globals.selectionEnabled&&(d.attr({x:e,y:i,width:s>0?s:0,height:n>0?n:0,fill:h.config.chart.selection.fill.color,"fill-opacity":h.config.chart.selection.fill.opacity,stroke:h.config.chart.selection.stroke.color,"stroke-width":h.config.chart.selection.stroke.width,"stroke-dasharray":h.config.chart.selection.stroke.dashArray,"stroke-opacity":h.config.chart.selection.stroke.opacity}),C.setAttrs(d.node,u))}}},{key:"hideSelectionRect",value:function(t){t&&t.attr({x:0,y:0,width:0,height:0})}},{key:"selectionDrawing",value:function(t){var e=t.context,i=t.zoomtype,s=this.w,n=e,a=this.gridRect.getBoundingClientRect(),r=n.startX-1,o=n.startY,l=!1,h=!1,c=n.clientX-a.left-r,d=n.clientY-a.top-o,u={};return Math.abs(c+r)>s.globals.gridWidth?c=s.globals.gridWidth-r:n.clientX-a.left<0&&(c=r),r>n.clientX-a.left&&(l=!0,c=Math.abs(c)),o>n.clientY-a.top&&(h=!0,d=Math.abs(d)),u="x"===i?{x:l?r-c:r,y:0,width:c,height:s.globals.gridHeight}:"y"===i?{x:0,y:h?o-d:o,width:s.globals.gridWidth,height:d}:{x:l?r-c:r,y:h?o-d:o,width:c,height:d},n.drawSelectionRect(u),n.selectionDragging("resizing"),u}},{key:"selectionDragging",value:function(t,e){var i=this,s=this.w,n=this.xyRatios,a=this.selectionRect,r=0;"resizing"===t&&(r=30);var o=function(t){return parseFloat(a.node.getAttribute(t))},l={x:o("x"),y:o("y"),width:o("width"),height:o("height")};s.globals.selection=l,"function"==typeof s.config.chart.events.selection&&s.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout((function(){var t=i.gridRect.getBoundingClientRect(),e=a.node.getBoundingClientRect(),r={xaxis:{min:s.globals.xAxisScale.niceMin+(e.left-t.left)*n.xRatio,max:s.globals.xAxisScale.niceMin+(e.right-t.left)*n.xRatio},yaxis:{min:s.globals.yAxisScale[0].niceMin+(t.bottom-e.bottom)*n.yRatio[0],max:s.globals.yAxisScale[0].niceMax-(e.top-t.top)*n.yRatio[0]}};s.config.chart.events.selection(i.ctx,r),s.config.chart.brush.enabled&&void 0!==s.config.chart.events.brushScrolled&&s.config.chart.events.brushScrolled(i.ctx,r)}),r))}},{key:"selectionDrawn",value:function(t){var e=t.context,i=t.zoomtype,s=this.w,n=e,a=this.xyRatios,r=this.ctx.toolbar;if(n.startX>n.endX){var o=n.startX;n.startX=n.endX,n.endX=o}if(n.startY>n.endY){var l=n.startY;n.startY=n.endY,n.endY=l}var h=void 0,c=void 0;s.globals.isRangeBar?(h=s.globals.yAxisScale[0].niceMin+n.startX*a.invertedYRatio,c=s.globals.yAxisScale[0].niceMin+n.endX*a.invertedYRatio):(h=s.globals.xAxisScale.niceMin+n.startX*a.xRatio,c=s.globals.xAxisScale.niceMin+n.endX*a.xRatio);var d=[],u=[];if(s.config.yaxis.forEach((function(t,e){d.push(s.globals.yAxisScale[e].niceMax-a.yRatio[e]*n.startY),u.push(s.globals.yAxisScale[e].niceMax-a.yRatio[e]*n.endY)})),n.dragged&&(n.dragX>10||n.dragY>10)&&h!==c)if(s.globals.zoomEnabled){var p=y.clone(s.globals.initialConfig.yaxis),g=y.clone(s.globals.initialConfig.xaxis);if(s.globals.zoomed=!0,s.config.xaxis.convertedCatToNumeric&&(h=Math.floor(h),c=Math.floor(c),h<1&&(h=1,c=s.globals.dataPoints),c-h<2&&(c=h+1)),"xy"!==i&&"x"!==i||(g={min:h,max:c}),"xy"!==i&&"y"!==i||p.forEach((function(t,e){p[e].min=u[e],p[e].max=d[e]})),s.config.chart.zoom.autoScaleYaxis){var f=new U(n.ctx);p=f.autoScaleY(n.ctx,p,{xaxis:g})}if(r){var m=r.getBeforeZoomRange(g,p);m&&(g=m.xaxis?m.xaxis:g,p=m.yaxis?m.yaxis:p)}var v={xaxis:g};s.config.chart.group||(v.yaxis=p),n.ctx.updateHelpers._updateOptions(v,!1,n.w.config.chart.animations.dynamicAnimation.enabled),"function"==typeof s.config.chart.events.zoomed&&r.zoomCallback(g,p)}else if(s.globals.selectionEnabled){var b,x=null;b={min:h,max:c},"xy"!==i&&"y"!==i||(x=y.clone(s.config.yaxis)).forEach((function(t,e){x[e].min=u[e],x[e].max=d[e]})),s.globals.selection=n.selection,"function"==typeof s.config.chart.events.selection&&s.config.chart.events.selection(n.ctx,{xaxis:b,yaxis:x})}}},{key:"panDragging",value:function(t){var e=t.context,i=this.w,s=e;if(void 0!==i.globals.lastClientPosition.x){var n=i.globals.lastClientPosition.x-s.clientX,a=i.globals.lastClientPosition.y-s.clientY;Math.abs(n)>Math.abs(a)&&n>0?this.moveDirection="left":Math.abs(n)>Math.abs(a)&&n<0?this.moveDirection="right":Math.abs(a)>Math.abs(n)&&a>0?this.moveDirection="up":Math.abs(a)>Math.abs(n)&&a<0&&(this.moveDirection="down")}i.globals.lastClientPosition={x:s.clientX,y:s.clientY};var r=i.globals.isRangeBar?i.globals.minY:i.globals.minX,o=i.globals.isRangeBar?i.globals.maxY:i.globals.maxX;i.config.xaxis.convertedCatToNumeric||s.panScrolled(r,o)}},{key:"delayedPanScrolled",value:function(){var t=this.w,e=t.globals.minX,i=t.globals.maxX,s=(t.globals.maxX-t.globals.minX)/2;"left"===this.moveDirection?(e=t.globals.minX+s,i=t.globals.maxX+s):"right"===this.moveDirection&&(e=t.globals.minX-s,i=t.globals.maxX-s),e=Math.floor(e),i=Math.floor(i),this.updateScrolledChart({xaxis:{min:e,max:i}},e,i)}},{key:"panScrolled",value:function(t,e){var i=this.w,s=this.xyRatios,n=y.clone(i.globals.initialConfig.yaxis),a=s.xRatio,r=i.globals.minX,o=i.globals.maxX;i.globals.isRangeBar&&(a=s.invertedYRatio,r=i.globals.minY,o=i.globals.maxY),"left"===this.moveDirection?(t=r+i.globals.gridWidth/15*a,e=o+i.globals.gridWidth/15*a):"right"===this.moveDirection&&(t=r-i.globals.gridWidth/15*a,e=o-i.globals.gridWidth/15*a),i.globals.isRangeBar||(t<i.globals.initialMinX||e>i.globals.initialMaxX)&&(t=r,e=o);var l={min:t,max:e};i.config.chart.zoom.autoScaleYaxis&&(n=new U(this.ctx).autoScaleY(this.ctx,n,{xaxis:l}));var h={xaxis:{min:t,max:e}};i.config.chart.group||(h.yaxis=n),this.updateScrolledChart(h,t,e)}},{key:"updateScrolledChart",value:function(t,e,i){var s=this.w;this.ctx.updateHelpers._updateOptions(t,!1,!1),"function"==typeof s.config.chart.events.scrolled&&s.config.chart.events.scrolled(this.ctx,{xaxis:{min:e,max:i}})}}]),i}(pt),ft=function(){function t(e){o(this,t),this.w=e.w,this.ttCtx=e,this.ctx=e.ctx}return h(t,[{key:"getNearestValues",value:function(t){var e=t.hoverArea,i=t.elGrid,s=t.clientX,n=t.clientY,a=this.w,r=i.getBoundingClientRect(),o=r.width,l=r.height,h=o/(a.globals.dataPoints-1),c=l/a.globals.dataPoints,d=this.hasBars();!a.globals.comboCharts&&!d||a.config.xaxis.convertedCatToNumeric||(h=o/a.globals.dataPoints);var u=s-r.left-a.globals.barPadForNumericAxis,p=n-r.top;u<0||p<0||u>o||p>l?(e.classList.remove("hovering-zoom"),e.classList.remove("hovering-pan")):a.globals.zoomEnabled?(e.classList.remove("hovering-pan"),e.classList.add("hovering-zoom")):a.globals.panEnabled&&(e.classList.remove("hovering-zoom"),e.classList.add("hovering-pan"));var g=Math.round(u/h),f=Math.floor(p/c);d&&!a.config.xaxis.convertedCatToNumeric&&(g=Math.ceil(u/h),g-=1);var m=null,v=null,b=[],x=[];if(a.globals.seriesXvalues.forEach((function(t){b.push([t[0]+1e-6].concat(t))})),a.globals.seriesYvalues.forEach((function(t){x.push([t[0]+1e-6].concat(t))})),b=b.map((function(t){return t.filter((function(t){return y.isNumber(t)}))})),x=x.map((function(t){return t.filter((function(t){return y.isNumber(t)}))})),a.globals.isXNumeric){var w=this.ttCtx.getElGrid().getBoundingClientRect(),k=u*(w.width/o),C=p*(w.height/l);m=(v=this.closestInMultiArray(k,C,b,x)).index,g=v.j,null!==m&&(b=a.globals.seriesXvalues[m],g=(v=this.closestInArray(k,b)).index)}return a.globals.capturedSeriesIndex=null===m?-1:m,(!g||g<1)&&(g=0),a.globals.isBarHorizontal?a.globals.capturedDataPointIndex=f:a.globals.capturedDataPointIndex=g,{capturedSeries:m,j:a.globals.isBarHorizontal?f:g,hoverX:u,hoverY:p}}},{key:"closestInMultiArray",value:function(t,e,i,s){var n=this.w,a=0,r=null,o=-1;n.globals.series.length>1?a=this.getFirstActiveXArray(i):r=0;var l=i[a][0],h=Math.abs(t-l);if(i.forEach((function(e){e.forEach((function(e,i){var s=Math.abs(t-e);s<h&&(h=s,o=i)}))})),-1!==o){var c=s[a][o],d=Math.abs(e-c);r=a,s.forEach((function(t,i){var s=Math.abs(e-t[o]);s<d&&(d=s,r=i)}))}return{index:r,j:o}}},{key:"getFirstActiveXArray",value:function(t){for(var e=this.w,i=0,s=t.map((function(t,e){return t.length>0?e:-1})),n=0;n<s.length;n++)if(-1!==s[n]&&-1===e.globals.collapsedSeriesIndices.indexOf(n)&&-1===e.globals.ancillaryCollapsedSeriesIndices.indexOf(n)){i=s[n];break}return i}},{key:"closestInArray",value:function(t,e){for(var i=e[0],s=null,n=Math.abs(t-i),a=0;a<e.length;a++){var r=Math.abs(t-e[a]);r<n&&(n=r,s=a)}return{index:s}}},{key:"isXoverlap",value:function(t){var e=[],i=this.w.globals.seriesX.filter((function(t){return void 0!==t[0]}));if(i.length>0)for(var s=0;s<i.length-1;s++)void 0!==i[s][t]&&void 0!==i[s+1][t]&&i[s][t]!==i[s+1][t]&&e.push("unEqual");return 0===e.length}},{key:"isInitialSeriesSameLen",value:function(){for(var t=!0,e=this.w.globals.initialSeries,i=0;i<e.length-1;i++)if(e[i].data.length!==e[i+1].data.length){t=!1;break}return t}},{key:"getBarsHeight",value:function(t){return v(t).reduce((function(t,e){return t+e.getBBox().height}),0)}},{key:"getElMarkers",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(" .apexcharts-series-markers")}},{key:"getAllMarkers",value:function(){var t=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");(t=v(t)).sort((function(t,e){var i=Number(t.getAttribute("data:realIndex")),s=Number(e.getAttribute("data:realIndex"));return s<i?1:s>i?-1:0}));var e=[];return t.forEach((function(t){e.push(t.querySelector(".apexcharts-marker"))})),e}},{key:"hasMarkers",value:function(){return this.getElMarkers().length>0}},{key:"getElBars",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-boxPlot-series, .apexcharts-rangebar-series")}},{key:"hasBars",value:function(){return this.getElBars().length>0}},{key:"getHoverMarkerSize",value:function(t){var e=this.w,i=e.config.markers.hover.size;return void 0===i&&(i=e.globals.markers.size[t]+e.config.markers.hover.sizeOffset),i}},{key:"toggleAllTooltipSeriesGroups",value:function(t){var e=this.w,i=this.ttCtx;0===i.allTooltipSeriesGroups.length&&(i.allTooltipSeriesGroups=e.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));for(var s=i.allTooltipSeriesGroups,n=0;n<s.length;n++)"enable"===t?(s[n].classList.add("apexcharts-active"),s[n].style.display=e.config.tooltip.items.display):(s[n].classList.remove("apexcharts-active"),s[n].style.display="none")}}]),t}(),mt=function(){function t(e){o(this,t),this.w=e.w,this.ctx=e.ctx,this.ttCtx=e,this.tooltipUtil=new ft(e)}return h(t,[{key:"drawSeriesTexts",value:function(t){var e=t.shared,i=void 0===e||e,s=t.ttItems,n=t.i,a=void 0===n?0:n,r=t.j,o=void 0===r?null:r,l=t.y1,h=t.y2,c=t.e,d=this.w;void 0!==d.config.tooltip.custom?this.handleCustomTooltip({i:a,j:o,y1:l,y2:h,w:d}):this.toggleActiveInactiveSeries(i);var u=this.getValuesToPrint({i:a,j:o});this.printLabels({i:a,j:o,values:u,ttItems:s,shared:i,e:c});var p=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=p.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=p.getBoundingClientRect().height}},{key:"printLabels",value:function(t){var e,i=this,s=t.i,n=t.j,r=t.values,o=t.ttItems,l=t.shared,h=t.e,c=this.w,d=[],u=function(t){return c.globals.seriesGoals[t]&&c.globals.seriesGoals[t][n]&&Array.isArray(c.globals.seriesGoals[t][n])},p=r.xVal,g=r.zVal,f=r.xAxisTTVal,m="",v=c.globals.colors[s];null!==n&&c.config.plotOptions.bar.distributed&&(v=c.globals.colors[n]);for(var b=function(t,r){var b=i.getFormatters(s);m=i.getSeriesName({fn:b.yLbTitleFormatter,index:s,seriesIndex:s,j:n}),"treemap"===c.config.chart.type&&(m=b.yLbTitleFormatter(String(c.config.series[s].data[n].x),{series:c.globals.series,seriesIndex:s,dataPointIndex:n,w:c}));var x=c.config.tooltip.inverseOrder?r:t;if(c.globals.axisCharts){var y=function(t){return b.yLbFormatter(c.globals.series[t][n],{series:c.globals.series,seriesIndex:t,dataPointIndex:n,w:c})};if(l)b=i.getFormatters(x),m=i.getSeriesName({fn:b.yLbTitleFormatter,index:x,seriesIndex:s,j:n}),v=c.globals.colors[x],e=y(x),u(x)&&(d=c.globals.seriesGoals[x][n].map((function(t){return{attrs:t,val:b.yLbFormatter(t.value,{seriesIndex:x,dataPointIndex:n,w:c})}})));else{var w,k=null==h||null===(w=h.target)||void 0===w?void 0:w.getAttribute("fill");k&&(v=-1!==k.indexOf("url")?document.querySelector(k.substr(4).slice(0,-1)).childNodes[0].getAttribute("stroke"):k),e=y(s),u(s)&&Array.isArray(c.globals.seriesGoals[s][n])&&(d=c.globals.seriesGoals[s][n].map((function(t){return{attrs:t,val:b.yLbFormatter(t.value,{seriesIndex:s,dataPointIndex:n,w:c})}})))}}null===n&&(e=b.yLbFormatter(c.globals.series[s],a(a({},c),{},{seriesIndex:s,dataPointIndex:s}))),i.DOMHandling({i:s,t:x,j:n,ttItems:o,values:{val:e,goalVals:d,xVal:p,xAxisTTVal:f,zVal:g},seriesName:m,shared:l,pColor:v})},x=0,y=c.globals.series.length-1;x<c.globals.series.length;x++,y--)b(x,y)}},{key:"getFormatters",value:function(t){var e,i=this.w,s=i.globals.yLabelFormatters[t];return void 0!==i.globals.ttVal?Array.isArray(i.globals.ttVal)?(s=i.globals.ttVal[t]&&i.globals.ttVal[t].formatter,e=i.globals.ttVal[t]&&i.globals.ttVal[t].title&&i.globals.ttVal[t].title.formatter):(s=i.globals.ttVal.formatter,"function"==typeof i.globals.ttVal.title.formatter&&(e=i.globals.ttVal.title.formatter)):e=i.config.tooltip.y.title.formatter,"function"!=typeof s&&(s=i.globals.yLabelFormatters[0]?i.globals.yLabelFormatters[0]:function(t){return t}),"function"!=typeof e&&(e=function(t){return t}),{yLbFormatter:s,yLbTitleFormatter:e}}},{key:"getSeriesName",value:function(t){var e=t.fn,i=t.index,s=t.seriesIndex,n=t.j,a=this.w;return e(String(a.globals.seriesNames[i]),{series:a.globals.series,seriesIndex:s,dataPointIndex:n,w:a})}},{key:"DOMHandling",value:function(t){t.i;var e=t.t,i=t.j,s=t.ttItems,n=t.values,a=t.seriesName,r=t.shared,o=t.pColor,l=this.w,h=this.ttCtx,c=n.val,d=n.goalVals,u=n.xVal,p=n.xAxisTTVal,g=n.zVal,f=null;f=s[e].children,l.config.tooltip.fillSeriesColor&&(s[e].style.backgroundColor=o,f[0].style.display="none"),h.showTooltipTitle&&(null===h.tooltipTitle&&(h.tooltipTitle=l.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),h.tooltipTitle.innerHTML=u),h.isXAxisTooltipEnabled&&(h.xaxisTooltipText.innerHTML=""!==p?p:u);var m=s[e].querySelector(".apexcharts-tooltip-text-y-label");m&&(m.innerHTML=a||"");var v=s[e].querySelector(".apexcharts-tooltip-text-y-value");v&&(v.innerHTML=void 0!==c?c:""),f[0]&&f[0].classList.contains("apexcharts-tooltip-marker")&&(l.config.tooltip.marker.fillColors&&Array.isArray(l.config.tooltip.marker.fillColors)&&(o=l.config.tooltip.marker.fillColors[e]),f[0].style.backgroundColor=o),l.config.tooltip.marker.show||(f[0].style.display="none");var b=s[e].querySelector(".apexcharts-tooltip-text-goals-label"),x=s[e].querySelector(".apexcharts-tooltip-text-goals-value");if(d.length&&l.globals.seriesGoals[e]){var y=function(){var t="<div >",e="<div>";d.forEach((function(i,s){t+=' <div style="display: flex"><span class="apexcharts-tooltip-marker" style="background-color: '.concat(i.attrs.strokeColor,'; height: 3px; border-radius: 0; top: 5px;"></span> ').concat(i.attrs.name,"</div>"),e+="<div>".concat(i.val,"</div>")})),b.innerHTML=t+"</div>",x.innerHTML=e+"</div>"};r?l.globals.seriesGoals[e][i]&&Array.isArray(l.globals.seriesGoals[e][i])?y():(b.innerHTML="",x.innerHTML=""):y()}else b.innerHTML="",x.innerHTML="";null!==g&&(s[e].querySelector(".apexcharts-tooltip-text-z-label").innerHTML=l.config.tooltip.z.title,s[e].querySelector(".apexcharts-tooltip-text-z-value").innerHTML=void 0!==g?g:""),r&&f[0]&&(null==c||l.globals.ancillaryCollapsedSeriesIndices.indexOf(e)>-1||l.globals.collapsedSeriesIndices.indexOf(e)>-1?f[0].parentNode.style.display="none":f[0].parentNode.style.display=l.config.tooltip.items.display)}},{key:"toggleActiveInactiveSeries",value:function(t){var e=this.w;if(t)this.tooltipUtil.toggleAllTooltipSeriesGroups("enable");else{this.tooltipUtil.toggleAllTooltipSeriesGroups("disable");var i=e.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group");i&&(i.classList.add("apexcharts-active"),i.style.display=e.config.tooltip.items.display)}}},{key:"getValuesToPrint",value:function(t){var e=t.i,i=t.j,s=this.w,n=this.ctx.series.filteredSeriesX(),a="",r="",o=null,l=null,h={series:s.globals.series,seriesIndex:e,dataPointIndex:i,w:s},c=s.globals.ttZFormatter;null===i?l=s.globals.series[e]:s.globals.isXNumeric&&"treemap"!==s.config.chart.type?(a=n[e][i],0===n[e].length&&(a=n[this.tooltipUtil.getFirstActiveXArray(n)][i])):a=void 0!==s.globals.labels[i]?s.globals.labels[i]:"";var d=a;return a=s.globals.isXNumeric&&"datetime"===s.config.xaxis.type?new V(this.ctx).xLabelFormat(s.globals.ttKeyFormatter,d,d,{i:void 0,dateFormatter:new M(this.ctx).formatDate,w:this.w}):s.globals.isBarHorizontal?s.globals.yLabelFormatters[0](d,h):s.globals.xLabelFormatter(d,h),void 0!==s.config.tooltip.x.formatter&&(a=s.globals.ttKeyFormatter(d,h)),s.globals.seriesZ.length>0&&s.globals.seriesZ[e].length>0&&(o=c(s.globals.seriesZ[e][i],s)),r="function"==typeof s.config.xaxis.tooltip.formatter?s.globals.xaxisTooltipFormatter(d,h):a,{val:Array.isArray(l)?l.join(" "):l,xVal:Array.isArray(a)?a.join(" "):a,xAxisTTVal:Array.isArray(r)?r.join(" "):r,zVal:o}}},{key:"handleCustomTooltip",value:function(t){var e=t.i,i=t.j,s=t.y1,n=t.y2,a=t.w,r=this.ttCtx.getElTooltip(),o=a.config.tooltip.custom;Array.isArray(o)&&o[e]&&(o=o[e]),r.innerHTML=o({ctx:this.ctx,series:a.globals.series,seriesIndex:e,dataPointIndex:i,y1:s,y2:n,w:a})}}]),t}(),vt=function(){function t(e){o(this,t),this.ttCtx=e,this.ctx=e.ctx,this.w=e.w}return h(t,[{key:"moveXCrosshairs",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.ttCtx,s=this.w,n=i.getElXCrosshairs(),a=t-i.xcrosshairsWidth/2,r=s.globals.labels.slice().length;if(null!==e&&(a=s.globals.gridWidth/r*e),null===n||s.globals.isBarHorizontal||(n.setAttribute("x",a),n.setAttribute("x1",a),n.setAttribute("x2",a),n.setAttribute("y2",s.globals.gridHeight),n.classList.add("apexcharts-active")),a<0&&(a=0),a>s.globals.gridWidth&&(a=s.globals.gridWidth),i.isXAxisTooltipEnabled){var o=a;"tickWidth"!==s.config.xaxis.crosshairs.width&&"barWidth"!==s.config.xaxis.crosshairs.width||(o=a+i.xcrosshairsWidth/2),this.moveXAxisTooltip(o)}}},{key:"moveYCrosshairs",value:function(t){var e=this.ttCtx;null!==e.ycrosshairs&&C.setAttrs(e.ycrosshairs,{y1:t,y2:t}),null!==e.ycrosshairsHidden&&C.setAttrs(e.ycrosshairsHidden,{y1:t,y2:t})}},{key:"moveXAxisTooltip",value:function(t){var e=this.w,i=this.ttCtx;if(null!==i.xaxisTooltip&&0!==i.xcrosshairsWidth){i.xaxisTooltip.classList.add("apexcharts-active");var s,n=i.xaxisOffY+e.config.xaxis.tooltip.offsetY+e.globals.translateY+1+e.config.xaxis.offsetY;if(t-=i.xaxisTooltip.getBoundingClientRect().width/2,!isNaN(t))t+=e.globals.translateX,s=new C(this.ctx).getTextRects(i.xaxisTooltipText.innerHTML),i.xaxisTooltipText.style.minWidth=s.width+"px",i.xaxisTooltip.style.left=t+"px",i.xaxisTooltip.style.top=n+"px"}}},{key:"moveYAxisTooltip",value:function(t){var e=this.w,i=this.ttCtx;null===i.yaxisTTEls&&(i.yaxisTTEls=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));var s=parseInt(i.ycrosshairsHidden.getAttribute("y1"),10),n=e.globals.translateY+s,a=i.yaxisTTEls[t].getBoundingClientRect().height,r=e.globals.translateYAxisX[t]-2;e.config.yaxis[t].opposite&&(r-=26),n-=a/2,-1===e.globals.ignoreYAxisIndexes.indexOf(t)?(i.yaxisTTEls[t].classList.add("apexcharts-active"),i.yaxisTTEls[t].style.top=n+"px",i.yaxisTTEls[t].style.left=r+e.config.yaxis[t].tooltip.offsetX+"px"):i.yaxisTTEls[t].classList.remove("apexcharts-active")}},{key:"moveTooltip",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=this.w,n=this.ttCtx,a=n.getElTooltip(),r=n.tooltipRect,o=null!==i?parseFloat(i):1,l=parseFloat(t)+o+5,h=parseFloat(e)+o/2;if(l>s.globals.gridWidth/2&&(l=l-r.ttWidth-o-10),l>s.globals.gridWidth-r.ttWidth-10&&(l=s.globals.gridWidth-r.ttWidth),l<-20&&(l=-20),s.config.tooltip.followCursor){var c=n.getElGrid(),d=c.getBoundingClientRect();h=n.e.clientY+s.globals.translateY-d.top-r.ttHeight/2}else s.globals.isBarHorizontal||(r.ttHeight/2+h>s.globals.gridHeight&&(h=s.globals.gridHeight-r.ttHeight+s.globals.translateY),h<0&&(h=0));isNaN(l)||(l+=s.globals.translateX,a.style.left=l+"px",a.style.top=h+"px")}},{key:"moveMarkers",value:function(t,e){var i=this.w,s=this.ttCtx;if(i.globals.markers.size[t]>0)for(var n=i.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(t,"'] .apexcharts-marker")),a=0;a<n.length;a++)parseInt(n[a].getAttribute("rel"),10)===e&&(s.marker.resetPointsSize(),s.marker.enlargeCurrentPoint(e,n[a]));else s.marker.resetPointsSize(),this.moveDynamicPointOnHover(e,t)}},{key:"moveDynamicPointOnHover",value:function(t,e){var i,s,n=this.w,a=this.ttCtx,r=n.globals.pointsArray,o=a.tooltipUtil.getHoverMarkerSize(e),l=n.config.series[e].type;if(!l||"column"!==l&&"candlestick"!==l&&"boxPlot"!==l){i=r[e][t][0],s=r[e][t][1]?r[e][t][1]:0;var h=n.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(e,"'] .apexcharts-series-markers circle"));h&&s<n.globals.gridHeight&&s>0&&(h.setAttribute("r",o),h.setAttribute("cx",i),h.setAttribute("cy",s)),this.moveXCrosshairs(i),a.fixedTooltip||this.moveTooltip(i,s,o)}}},{key:"moveDynamicPointsOnHover",value:function(t){var e,i=this.ttCtx,s=i.w,n=0,a=0,r=s.globals.pointsArray;e=new X(this.ctx).getActiveConfigSeriesIndex("asc",["line","area","scatter","bubble"]);var o=i.tooltipUtil.getHoverMarkerSize(e);r[e]&&(n=r[e][t][0],a=r[e][t][1]);var l=i.tooltipUtil.getAllMarkers();if(null!==l)for(var h=0;h<s.globals.series.length;h++){var c=r[h];if(s.globals.comboCharts&&void 0===c&&l.splice(h,0,null),c&&c.length){var d=r[h][t][1],u=void 0;if(l[h].setAttribute("cx",n),"rangeArea"===s.config.chart.type&&!s.globals.comboCharts){var p=t+s.globals.series[h].length;u=r[h][p][1],d-=Math.abs(d-u)/2}null!==d&&!isNaN(d)&&d<s.globals.gridHeight+o&&d+o>0?(l[h]&&l[h].setAttribute("r",o),l[h]&&l[h].setAttribute("cy",d)):l[h]&&l[h].setAttribute("r",0)}}if(this.moveXCrosshairs(n),!i.fixedTooltip){var g=a||s.globals.gridHeight;this.moveTooltip(n,g,o)}}},{key:"moveStickyTooltipOverBars",value:function(t){var e=this.w,i=this.ttCtx,s=e.globals.columnSeries?e.globals.columnSeries.length:e.globals.series.length,n=s>=2&&s%2==0?Math.floor(s/2):Math.floor(s/2)+1;e.globals.isBarHorizontal&&(n=new X(this.ctx).getActiveConfigSeriesIndex("desc")+1);var a=e.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(n,"'] path[j='").concat(t,"'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(n,"'] path[j='").concat(t,"'], .apexcharts-boxPlot-series .apexcharts-series[rel='").concat(n,"'] path[j='").concat(t,"'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(n,"'] path[j='").concat(t,"']")),r=a?parseFloat(a.getAttribute("cx")):0,o=a?parseFloat(a.getAttribute("cy")):0,l=a?parseFloat(a.getAttribute("barWidth")):0,h=a?parseFloat(a.getAttribute("barHeight")):0,c=i.getElGrid().getBoundingClientRect(),d=a.classList.contains("apexcharts-candlestick-area")||a.classList.contains("apexcharts-boxPlot-area");if(e.globals.isXNumeric?(a&&!d&&(r-=s%2!=0?l/2:0),a&&d&&e.globals.comboCharts&&(r-=l/2)):e.globals.isBarHorizontal||(r=i.xAxisTicksPositions[t-1]+i.dataPointsDividedWidth/2,isNaN(r)&&(r=i.xAxisTicksPositions[t]-i.dataPointsDividedWidth/2)),e.globals.isBarHorizontal?(o>e.globals.gridHeight/2&&(o-=i.tooltipRect.ttHeight),(o=o+e.config.grid.padding.top+h/3)+h>e.globals.gridHeight&&(o=e.globals.gridHeight-h)):e.config.tooltip.followCursor?o=i.e.clientY-c.top-i.tooltipRect.ttHeight/2:o+i.tooltipRect.ttHeight+15>e.globals.gridHeight&&(o=e.globals.gridHeight),o<-10&&(o=-10),e.globals.isBarHorizontal||this.moveXCrosshairs(r),!i.fixedTooltip){var u=o||e.globals.gridHeight;this.moveTooltip(r,u)}}}]),t}(),bt=function(){function t(e){o(this,t),this.w=e.w,this.ttCtx=e,this.ctx=e.ctx,this.tooltipPosition=new vt(e)}return h(t,[{key:"drawDynamicPoints",value:function(){var t=this.w,e=new C(this.ctx),i=new H(this.ctx),s=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series");s=v(s),t.config.chart.stacked&&s.sort((function(t,e){return parseFloat(t.getAttribute("data:realIndex"))-parseFloat(e.getAttribute("data:realIndex"))}));for(var n=0;n<s.length;n++){var a=s[n].querySelector(".apexcharts-series-markers-wrap");if(null!==a){var r=void 0,o="apexcharts-marker w".concat((Math.random()+1).toString(36).substring(4));"line"!==t.config.chart.type&&"area"!==t.config.chart.type||t.globals.comboCharts||t.config.tooltip.intersect||(o+=" no-pointer-events");var l=i.getMarkerConfig({cssClass:o,seriesIndex:Number(a.getAttribute("data:realIndex"))});(r=e.drawMarker(0,0,l)).node.setAttribute("default-marker-size",0);var h=document.createElementNS(t.globals.SVGNS,"g");h.classList.add("apexcharts-series-markers"),h.appendChild(r.node),a.appendChild(h)}}}},{key:"enlargeCurrentPoint",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=this.w;"bubble"!==n.config.chart.type&&this.newPointSize(t,e);var a=e.getAttribute("cx"),r=e.getAttribute("cy");if(null!==i&&null!==s&&(a=i,r=s),this.tooltipPosition.moveXCrosshairs(a),!this.fixedTooltip){if("radar"===n.config.chart.type){var o=this.ttCtx.getElGrid(),l=o.getBoundingClientRect();a=this.ttCtx.e.clientX-l.left}this.tooltipPosition.moveTooltip(a,r,n.config.markers.hover.size)}}},{key:"enlargePoints",value:function(t){for(var e=this.w,i=this,s=this.ttCtx,n=t,a=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),r=e.config.markers.hover.size,o=0;o<a.length;o++){var l=a[o].getAttribute("rel"),h=a[o].getAttribute("index");if(void 0===r&&(r=e.globals.markers.size[h]+e.config.markers.hover.sizeOffset),n===parseInt(l,10)){i.newPointSize(n,a[o]);var c=a[o].getAttribute("cx"),d=a[o].getAttribute("cy");i.tooltipPosition.moveXCrosshairs(c),s.fixedTooltip||i.tooltipPosition.moveTooltip(c,d,r)}else i.oldPointSize(a[o])}}},{key:"newPointSize",value:function(t,e){var i=this.w,s=i.config.markers.hover.size,n=0===t?e.parentNode.firstChild:e.parentNode.lastChild;if("0"!==n.getAttribute("default-marker-size")){var a=parseInt(n.getAttribute("index"),10);void 0===s&&(s=i.globals.markers.size[a]+i.config.markers.hover.sizeOffset),s<0&&(s=0),n.setAttribute("r",s)}}},{key:"oldPointSize",value:function(t){var e=parseFloat(t.getAttribute("default-marker-size"));t.setAttribute("r",e)}},{key:"resetPointsSize",value:function(){for(var t=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),e=0;e<t.length;e++){var i=parseFloat(t[e].getAttribute("default-marker-size"));y.isNumber(i)&&i>=0?t[e].setAttribute("r",i):t[e].setAttribute("r",0)}}}]),t}(),xt=function(){function t(e){o(this,t),this.w=e.w,this.ttCtx=e}return h(t,[{key:"getAttr",value:function(t,e){return parseFloat(t.target.getAttribute(e))}},{key:"handleHeatTreeTooltip",value:function(t){var e=t.e,i=t.opt,s=t.x,n=t.y,a=t.type,r=this.ttCtx,o=this.w;if(e.target.classList.contains("apexcharts-".concat(a,"-rect"))){var l=this.getAttr(e,"i"),h=this.getAttr(e,"j"),c=this.getAttr(e,"cx"),d=this.getAttr(e,"cy"),u=this.getAttr(e,"width"),p=this.getAttr(e,"height");if(r.tooltipLabels.drawSeriesTexts({ttItems:i.ttItems,i:l,j:h,shared:!1,e:e}),o.globals.capturedSeriesIndex=l,o.globals.capturedDataPointIndex=h,s=c+r.tooltipRect.ttWidth/2+u,n=d+r.tooltipRect.ttHeight/2-p/2,r.tooltipPosition.moveXCrosshairs(c+u/2),s>o.globals.gridWidth/2&&(s=c-r.tooltipRect.ttWidth/2+u),r.w.config.tooltip.followCursor){var g=o.globals.dom.elWrap.getBoundingClientRect();s=o.globals.clientX-g.left-(s>o.globals.gridWidth/2?r.tooltipRect.ttWidth:0),n=o.globals.clientY-g.top-(n>o.globals.gridHeight/2?r.tooltipRect.ttHeight:0)}}return{x:s,y:n}}},{key:"handleMarkerTooltip",value:function(t){var e,i,s=t.e,n=t.opt,a=t.x,r=t.y,o=this.w,l=this.ttCtx;if(s.target.classList.contains("apexcharts-marker")){var h=parseInt(n.paths.getAttribute("cx"),10),c=parseInt(n.paths.getAttribute("cy"),10),d=parseFloat(n.paths.getAttribute("val"));if(i=parseInt(n.paths.getAttribute("rel"),10),e=parseInt(n.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,l.intersect){var u=y.findAncestor(n.paths,"apexcharts-series");u&&(e=parseInt(u.getAttribute("data:realIndex"),10))}if(l.tooltipLabels.drawSeriesTexts({ttItems:n.ttItems,i:e,j:i,shared:!l.showOnIntersect&&o.config.tooltip.shared,e:s}),"mouseup"===s.type&&l.markerClick(s,e,i),o.globals.capturedSeriesIndex=e,o.globals.capturedDataPointIndex=i,a=h,r=c+o.globals.translateY-1.4*l.tooltipRect.ttHeight,l.w.config.tooltip.followCursor){var p=l.getElGrid().getBoundingClientRect();r=l.e.clientY+o.globals.translateY-p.top}d<0&&(r=c),l.marker.enlargeCurrentPoint(i,n.paths,a,r)}return{x:a,y:r}}},{key:"handleBarTooltip",value:function(t){var e,i,s=t.e,n=t.opt,a=this.w,r=this.ttCtx,o=r.getElTooltip(),l=0,h=0,c=0,d=this.getBarTooltipXY({e:s,opt:n});e=d.i;var u=d.barHeight,p=d.j;a.globals.capturedSeriesIndex=e,a.globals.capturedDataPointIndex=p,a.globals.isBarHorizontal&&r.tooltipUtil.hasBars()||!a.config.tooltip.shared?(h=d.x,c=d.y,i=Array.isArray(a.config.stroke.width)?a.config.stroke.width[e]:a.config.stroke.width,l=h):a.globals.comboCharts||a.config.tooltip.shared||(l/=2),isNaN(c)?c=a.globals.svgHeight-r.tooltipRect.ttHeight:c<0&&(c=0);var g=parseInt(n.paths.parentNode.getAttribute("data:realIndex"),10),f=a.globals.isMultipleYAxis?a.config.yaxis[g]&&a.config.yaxis[g].reversed:a.config.yaxis[0].reversed;if(h+r.tooltipRect.ttWidth>a.globals.gridWidth&&!f?h-=r.tooltipRect.ttWidth:h<0&&(h=0),r.w.config.tooltip.followCursor){var m=r.getElGrid().getBoundingClientRect();c=r.e.clientY-m.top}null===r.tooltip&&(r.tooltip=a.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),a.config.tooltip.shared||(a.globals.comboBarCount>0?r.tooltipPosition.moveXCrosshairs(l+i/2):r.tooltipPosition.moveXCrosshairs(l)),!r.fixedTooltip&&(!a.config.tooltip.shared||a.globals.isBarHorizontal&&r.tooltipUtil.hasBars())&&(f&&(h-=r.tooltipRect.ttWidth)<0&&(h=0),!f||a.globals.isBarHorizontal&&r.tooltipUtil.hasBars()||(c=c+u-2*(a.globals.series[e][p]<0?u:0)),r.tooltipRect.ttHeight+c>a.globals.gridHeight?c=a.globals.gridHeight-r.tooltipRect.ttHeight+a.globals.translateY:(c=c+a.globals.translateY-r.tooltipRect.ttHeight/2)<0&&(c=0),o.style.left=h+a.globals.translateX+"px",o.style.top=c+"px")}},{key:"getBarTooltipXY",value:function(t){var e=t.e,i=t.opt,s=this.w,n=null,a=this.ttCtx,r=0,o=0,l=0,h=0,c=0,d=e.target.classList;if(d.contains("apexcharts-bar-area")||d.contains("apexcharts-candlestick-area")||d.contains("apexcharts-boxPlot-area")||d.contains("apexcharts-rangebar-area")){var u=e.target,p=u.getBoundingClientRect(),g=i.elGrid.getBoundingClientRect(),f=p.height;c=p.height;var m=p.width,v=parseInt(u.getAttribute("cx"),10),b=parseInt(u.getAttribute("cy"),10);h=parseFloat(u.getAttribute("barWidth"));var x="touchmove"===e.type?e.touches[0].clientX:e.clientX;n=parseInt(u.getAttribute("j"),10),r=parseInt(u.parentNode.getAttribute("rel"),10)-1;var y=u.getAttribute("data-range-y1"),w=u.getAttribute("data-range-y2");s.globals.comboCharts&&(r=parseInt(u.parentNode.getAttribute("data:realIndex"),10)),a.tooltipLabels.drawSeriesTexts({ttItems:i.ttItems,i:r,j:n,y1:y?parseInt(y,10):null,y2:w?parseInt(w,10):null,shared:!a.showOnIntersect&&s.config.tooltip.shared,e:e}),s.config.tooltip.followCursor?s.globals.isBarHorizontal?(o=x-g.left+15,l=b-a.dataPointsDividedHeight+f/2-a.tooltipRect.ttHeight/2):(o=s.globals.isXNumeric?v-m/2:v-a.dataPointsDividedWidth+m/2,l=e.clientY-g.top-a.tooltipRect.ttHeight/2-15):s.globals.isBarHorizontal?((o=v)<a.xyRatios.baseLineInvertedY&&(o=v-a.tooltipRect.ttWidth),l=b-a.dataPointsDividedHeight+f/2-a.tooltipRect.ttHeight/2):(o=s.globals.isXNumeric?v-m/2:v-a.dataPointsDividedWidth+m/2,l=b)}return{x:o,y:l,barHeight:c,barWidth:h,i:r,j:n}}}]),t}(),yt=function(){function t(e){o(this,t),this.w=e.w,this.ttCtx=e}return h(t,[{key:"drawXaxisTooltip",value:function(){var t=this.w,e=this.ttCtx,i="bottom"===t.config.xaxis.position;e.xaxisOffY=i?t.globals.gridHeight+1:-t.globals.xAxisHeight-t.config.xaxis.axisTicks.height+3;var s=i?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top",n=t.globals.dom.elWrap;e.isXAxisTooltipEnabled&&null===t.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")&&(e.xaxisTooltip=document.createElement("div"),e.xaxisTooltip.setAttribute("class",s+" apexcharts-theme-"+t.config.tooltip.theme),n.appendChild(e.xaxisTooltip),e.xaxisTooltipText=document.createElement("div"),e.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),e.xaxisTooltipText.style.fontFamily=t.config.xaxis.tooltip.style.fontFamily||t.config.chart.fontFamily,e.xaxisTooltipText.style.fontSize=t.config.xaxis.tooltip.style.fontSize,e.xaxisTooltip.appendChild(e.xaxisTooltipText))}},{key:"drawYaxisTooltip",value:function(){for(var t=this.w,e=this.ttCtx,i=function(i){var s=t.config.yaxis[i].opposite||t.config.yaxis[i].crosshairs.opposite;e.yaxisOffX=s?t.globals.gridWidth+1:1;var n="apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(i,s?" apexcharts-yaxistooltip-right":" apexcharts-yaxistooltip-left");t.globals.yAxisSameScaleIndices.map((function(e,s){e.map((function(e,s){s===i&&(n+=t.config.yaxis[s].show?" ":" apexcharts-yaxistooltip-hidden")}))}));var a=t.globals.dom.elWrap;null===t.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(i))&&(e.yaxisTooltip=document.createElement("div"),e.yaxisTooltip.setAttribute("class",n+" apexcharts-theme-"+t.config.tooltip.theme),a.appendChild(e.yaxisTooltip),0===i&&(e.yaxisTooltipText=[]),e.yaxisTooltipText[i]=document.createElement("div"),e.yaxisTooltipText[i].classList.add("apexcharts-yaxistooltip-text"),e.yaxisTooltip.appendChild(e.yaxisTooltipText[i]))},s=0;s<t.config.yaxis.length;s++)i(s)}},{key:"setXCrosshairWidth",value:function(){var t=this.w,e=this.ttCtx,i=e.getElXCrosshairs();if(e.xcrosshairsWidth=parseInt(t.config.xaxis.crosshairs.width,10),t.globals.comboCharts){var s=t.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==s&&"barWidth"===t.config.xaxis.crosshairs.width){var n=parseFloat(s.getAttribute("barWidth"));e.xcrosshairsWidth=n}else if("tickWidth"===t.config.xaxis.crosshairs.width){var a=t.globals.labels.length;e.xcrosshairsWidth=t.globals.gridWidth/a}}else if("tickWidth"===t.config.xaxis.crosshairs.width){var r=t.globals.labels.length;e.xcrosshairsWidth=t.globals.gridWidth/r}else if("barWidth"===t.config.xaxis.crosshairs.width){var o=t.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==o){var l=parseFloat(o.getAttribute("barWidth"));e.xcrosshairsWidth=l}else e.xcrosshairsWidth=1}t.globals.isBarHorizontal&&(e.xcrosshairsWidth=0),null!==i&&e.xcrosshairsWidth>0&&i.setAttribute("width",e.xcrosshairsWidth)}},{key:"handleYCrosshair",value:function(){var t=this.w,e=this.ttCtx;e.ycrosshairs=t.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),e.ycrosshairsHidden=t.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}},{key:"drawYaxisTooltipText",value:function(t,e,i){var s=this.ttCtx,n=this.w,a=n.globals.yLabelFormatters[t];if(s.yaxisTooltips[t]){var r=s.getElGrid().getBoundingClientRect(),o=(e-r.top)*i.yRatio[t],l=n.globals.maxYArr[t]-n.globals.minYArr[t],h=n.globals.minYArr[t]+(l-o);s.tooltipPosition.moveYCrosshairs(e-r.top),s.yaxisTooltipText[t].innerHTML=a(h),s.tooltipPosition.moveYAxisTooltip(t)}}}]),t}(),wt=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w;var i=this.w;this.tConfig=i.config.tooltip,this.tooltipUtil=new ft(this),this.tooltipLabels=new mt(this),this.tooltipPosition=new vt(this),this.marker=new bt(this),this.intersect=new xt(this),this.axesTooltip=new yt(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!i.globals.isBarHorizontal&&this.tConfig.shared,this.lastHoverTime=Date.now()}return h(t,[{key:"getElTooltip",value:function(t){return t||(t=this),t.w.globals.dom.baseEl?t.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip"):null}},{key:"getElXCrosshairs",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}},{key:"getElGrid",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}},{key:"drawTooltip",value:function(t){var e=this.w;this.xyRatios=t,this.isXAxisTooltipEnabled=e.config.xaxis.tooltip.enabled&&e.globals.axisCharts,this.yaxisTooltips=e.config.yaxis.map((function(t,i){return!!(t.show&&t.tooltip.enabled&&e.globals.axisCharts)})),this.allTooltipSeriesGroups=[],e.globals.axisCharts||(this.showTooltipTitle=!1);var i=document.createElement("div");if(i.classList.add("apexcharts-tooltip"),e.config.tooltip.cssClass&&i.classList.add(e.config.tooltip.cssClass),i.classList.add("apexcharts-theme-".concat(this.tConfig.theme)),e.globals.dom.elWrap.appendChild(i),e.globals.axisCharts){this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair();var s=new j(this.ctx);this.xAxisTicksPositions=s.getXAxisTicksPositions()}if(!e.globals.comboCharts&&!this.tConfig.intersect&&"rangeBar"!==e.config.chart.type||this.tConfig.shared||(this.showOnIntersect=!0),0!==e.config.markers.size&&0!==e.globals.markers.largestSize||this.marker.drawDynamicPoints(this),e.globals.collapsedSeries.length!==e.globals.series.length){this.dataPointsDividedHeight=e.globals.gridHeight/e.globals.dataPoints,this.dataPointsDividedWidth=e.globals.gridWidth/e.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||e.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,i.appendChild(this.tooltipTitle));var n=e.globals.series.length;(e.globals.xyCharts||e.globals.comboCharts)&&this.tConfig.shared&&(n=this.showOnIntersect?1:e.globals.series.length),this.legendLabels=e.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(n),this.addSVGEvents()}}},{key:"createTTElements",value:function(t){for(var e=this,i=this.w,s=[],n=this.getElTooltip(),a=function(a){var r=document.createElement("div");r.classList.add("apexcharts-tooltip-series-group"),r.style.order=i.config.tooltip.inverseOrder?t-a:a+1,e.tConfig.shared&&e.tConfig.enabledOnSeries&&Array.isArray(e.tConfig.enabledOnSeries)&&e.tConfig.enabledOnSeries.indexOf(a)<0&&r.classList.add("apexcharts-tooltip-series-group-hidden");var o=document.createElement("span");o.classList.add("apexcharts-tooltip-marker"),o.style.backgroundColor=i.globals.colors[a],r.appendChild(o);var l=document.createElement("div");l.classList.add("apexcharts-tooltip-text"),l.style.fontFamily=e.tConfig.style.fontFamily||i.config.chart.fontFamily,l.style.fontSize=e.tConfig.style.fontSize,["y","goals","z"].forEach((function(t){var e=document.createElement("div");e.classList.add("apexcharts-tooltip-".concat(t,"-group"));var i=document.createElement("span");i.classList.add("apexcharts-tooltip-text-".concat(t,"-label")),e.appendChild(i);var s=document.createElement("span");s.classList.add("apexcharts-tooltip-text-".concat(t,"-value")),e.appendChild(s),l.appendChild(e)})),r.appendChild(l),n.appendChild(r),s.push(r)},r=0;r<t;r++)a(r);return s}},{key:"addSVGEvents",value:function(){var t=this.w,e=t.config.chart.type,i=this.getElTooltip(),s=!("bar"!==e&&"candlestick"!==e&&"boxPlot"!==e&&"rangeBar"!==e),n="area"===e||"line"===e||"scatter"===e||"bubble"===e||"radar"===e,a=t.globals.dom.Paper.node,r=this.getElGrid();r&&(this.seriesBound=r.getBoundingClientRect());var o,l=[],h=[],c={hoverArea:a,elGrid:r,tooltipEl:i,tooltipY:l,tooltipX:h,ttItems:this.ttItems};if(t.globals.axisCharts&&(n?o=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):s?o=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-boxPlot-area, .apexcharts-series .apexcharts-rangebar-area"):"heatmap"!==e&&"treemap"!==e||(o=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap, .apexcharts-series .apexcharts-treemap")),o&&o.length))for(var d=0;d<o.length;d++)l.push(o[d].getAttribute("cy")),h.push(o[d].getAttribute("cx"));if(t.globals.xyCharts&&!this.showOnIntersect||t.globals.comboCharts&&!this.showOnIntersect||s&&this.tooltipUtil.hasBars()&&this.tConfig.shared)this.addPathsEventListeners([a],c);else if(s&&!t.globals.comboCharts||n&&this.showOnIntersect)this.addDatapointEventsListeners(c);else if(!t.globals.axisCharts||"heatmap"===e||"treemap"===e){var u=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series");this.addPathsEventListeners(u,c)}if(this.showOnIntersect){var p=t.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker");p.length>0&&this.addPathsEventListeners(p,c),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners(c)}}},{key:"drawFixedTooltipRect",value:function(){var t=this.w,e=this.getElTooltip(),i=e.getBoundingClientRect(),s=i.width+10,n=i.height+10,a=this.tConfig.fixed.offsetX,r=this.tConfig.fixed.offsetY,o=this.tConfig.fixed.position.toLowerCase();return o.indexOf("right")>-1&&(a=a+t.globals.svgWidth-s+10),o.indexOf("bottom")>-1&&(r=r+t.globals.svgHeight-n-10),e.style.left=a+"px",e.style.top=r+"px",{x:a,y:r,ttWidth:s,ttHeight:n}}},{key:"addDatapointEventsListeners",value:function(t){var e=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-boxPlot-area, .apexcharts-rangebar-area");this.addPathsEventListeners(e,t)}},{key:"addPathsEventListeners",value:function(t,e){for(var i=this,s=function(s){var n={paths:t[s],tooltipEl:e.tooltipEl,tooltipY:e.tooltipY,tooltipX:e.tooltipX,elGrid:e.elGrid,hoverArea:e.hoverArea,ttItems:e.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map((function(e){return t[s].addEventListener(e,i.onSeriesHover.bind(i,n),{capture:!1,passive:!0})}))},n=0;n<t.length;n++)s(n)}},{key:"onSeriesHover",value:function(t,e){var i=this,s=Date.now()-this.lastHoverTime;s>=100?this.seriesHover(t,e):(clearTimeout(this.seriesHoverTimeout),this.seriesHoverTimeout=setTimeout((function(){i.seriesHover(t,e)}),100-s))}},{key:"seriesHover",value:function(t,e){var i=this;this.lastHoverTime=Date.now();var s=[],n=this.w;n.config.chart.group&&(s=this.ctx.getGroupedCharts()),n.globals.axisCharts&&(n.globals.minX===-1/0&&n.globals.maxX===1/0||0===n.globals.dataPoints)||(s.length?s.forEach((function(s){var n=i.getElTooltip(s),a={paths:t.paths,tooltipEl:n,tooltipY:t.tooltipY,tooltipX:t.tooltipX,elGrid:t.elGrid,hoverArea:t.hoverArea,ttItems:s.w.globals.tooltip.ttItems};s.w.globals.minX===i.w.globals.minX&&s.w.globals.maxX===i.w.globals.maxX&&s.w.globals.tooltip.seriesHoverByContext({chartCtx:s,ttCtx:s.w.globals.tooltip,opt:a,e:e})})):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:t,e:e}))}},{key:"seriesHoverByContext",value:function(t){var e=t.chartCtx,i=t.ttCtx,s=t.opt,n=t.e,a=e.w,r=this.getElTooltip();r&&(i.tooltipRect={x:0,y:0,ttWidth:r.getBoundingClientRect().width,ttHeight:r.getBoundingClientRect().height},i.e=n,!i.tooltipUtil.hasBars()||a.globals.comboCharts||i.isBarShared||this.tConfig.onDatasetHover.highlightDataSeries&&new X(e).toggleSeriesOnHover(n,n.target.parentNode),i.fixedTooltip&&i.drawFixedTooltipRect(),a.globals.axisCharts?i.axisChartsTooltips({e:n,opt:s,tooltipRect:i.tooltipRect}):i.nonAxisChartsTooltips({e:n,opt:s,tooltipRect:i.tooltipRect}))}},{key:"axisChartsTooltips",value:function(t){var e,i,s=t.e,n=t.opt,a=this.w,r=n.elGrid.getBoundingClientRect(),o="touchmove"===s.type?s.touches[0].clientX:s.clientX,l="touchmove"===s.type?s.touches[0].clientY:s.clientY;if(this.clientY=l,this.clientX=o,a.globals.capturedSeriesIndex=-1,a.globals.capturedDataPointIndex=-1,l<r.top||l>r.top+r.height)this.handleMouseOut(n);else{if(Array.isArray(this.tConfig.enabledOnSeries)&&!a.config.tooltip.shared){var h=parseInt(n.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf(h)<0)return void this.handleMouseOut(n)}var c=this.getElTooltip(),d=this.getElXCrosshairs(),u=a.globals.xyCharts||"bar"===a.config.chart.type&&!a.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||a.globals.comboCharts&&this.tooltipUtil.hasBars();if("mousemove"===s.type||"touchmove"===s.type||"mouseup"===s.type){if(a.globals.collapsedSeries.length+a.globals.ancillaryCollapsedSeries.length===a.globals.series.length)return;null!==d&&d.classList.add("apexcharts-active");var p=this.yaxisTooltips.filter((function(t){return!0===t}));if(null!==this.ycrosshairs&&p.length&&this.ycrosshairs.classList.add("apexcharts-active"),u&&!this.showOnIntersect)this.handleStickyTooltip(s,o,l,n);else if("heatmap"===a.config.chart.type||"treemap"===a.config.chart.type){var g=this.intersect.handleHeatTreeTooltip({e:s,opt:n,x:e,y:i,type:a.config.chart.type});e=g.x,i=g.y,c.style.left=e+"px",c.style.top=i+"px"}else this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e:s,opt:n}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e:s,opt:n,x:e,y:i});if(this.yaxisTooltips.length)for(var f=0;f<a.config.yaxis.length;f++)this.axesTooltip.drawYaxisTooltipText(f,l,this.xyRatios);n.tooltipEl.classList.add("apexcharts-active")}else"mouseout"!==s.type&&"touchend"!==s.type||this.handleMouseOut(n)}}},{key:"nonAxisChartsTooltips",value:function(t){var e=t.e,i=t.opt,s=t.tooltipRect,n=this.w,a=i.paths.getAttribute("rel"),r=this.getElTooltip(),o=n.globals.dom.elWrap.getBoundingClientRect();if("mousemove"===e.type||"touchmove"===e.type){r.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:i.ttItems,i:parseInt(a,10)-1,shared:!1});var l=n.globals.clientX-o.left-s.ttWidth/2,h=n.globals.clientY-o.top-s.ttHeight-10;if(r.style.left=l+"px",r.style.top=h+"px",n.config.legend.tooltipHoverFormatter){var c=a-1,d=(0,n.config.legend.tooltipHoverFormatter)(this.legendLabels[c].getAttribute("data:default-text"),{seriesIndex:c,dataPointIndex:c,w:n});this.legendLabels[c].innerHTML=d}}else"mouseout"!==e.type&&"touchend"!==e.type||(r.classList.remove("apexcharts-active"),n.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach((function(t){var e=t.getAttribute("data:default-text");t.innerHTML=decodeURIComponent(e)})))}},{key:"handleStickyTooltip",value:function(t,e,i,s){var n=this.w,a=this.tooltipUtil.getNearestValues({context:this,hoverArea:s.hoverArea,elGrid:s.elGrid,clientX:e,clientY:i}),r=a.j,o=a.capturedSeries,l=s.elGrid.getBoundingClientRect();a.hoverX<0||a.hoverX>l.width?this.handleMouseOut(s):null!==o?this.handleStickyCapturedSeries(t,o,s,r):(this.tooltipUtil.isXoverlap(r)||n.globals.isBarHorizontal)&&this.create(t,this,0,r,s.ttItems)}},{key:"handleStickyCapturedSeries",value:function(t,e,i,s){var n=this.w;this.tConfig.shared||null!==n.globals.series[e][s]?void 0!==n.globals.series[e][s]?this.tConfig.shared&&this.tooltipUtil.isXoverlap(s)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(t,this,e,s,i.ttItems):this.create(t,this,e,s,i.ttItems,!1):this.tooltipUtil.isXoverlap(s)&&this.create(t,this,0,s,i.ttItems):this.handleMouseOut(i)}},{key:"deactivateHoverFilter",value:function(){for(var t=this.w,e=new C(this.ctx),i=t.globals.dom.Paper.select(".apexcharts-bar-area"),s=0;s<i.length;s++)e.pathMouseLeave(i[s])}},{key:"handleMouseOut",value:function(t){var e=this.w,i=this.getElXCrosshairs();if(t.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),"bubble"!==e.config.chart.type&&this.marker.resetPointsSize(),null!==i&&i.classList.remove("apexcharts-active"),null!==this.ycrosshairs&&this.ycrosshairs.classList.remove("apexcharts-active"),this.isXAxisTooltipEnabled&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.yaxisTooltips.length){null===this.yaxisTTEls&&(this.yaxisTTEls=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(var s=0;s<this.yaxisTTEls.length;s++)this.yaxisTTEls[s].classList.remove("apexcharts-active")}e.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach((function(t){var e=t.getAttribute("data:default-text");t.innerHTML=decodeURIComponent(e)}))}},{key:"markerClick",value:function(t,e,i){var s=this.w;"function"==typeof s.config.chart.events.markerClick&&s.config.chart.events.markerClick(t,this.ctx,{seriesIndex:e,dataPointIndex:i,w:s}),this.ctx.events.fireEvent("markerClick",[t,this.ctx,{seriesIndex:e,dataPointIndex:i,w:s}])}},{key:"create",value:function(t,e,i,s,n){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,r=this.w,o=e;"mouseup"===t.type&&this.markerClick(t,i,s),null===a&&(a=this.tConfig.shared);var l=this.tooltipUtil.hasMarkers(),h=this.tooltipUtil.getElBars();if(r.config.legend.tooltipHoverFormatter){var c=r.config.legend.tooltipHoverFormatter,d=Array.from(this.legendLabels);d.forEach((function(t){var e=t.getAttribute("data:default-text");t.innerHTML=decodeURIComponent(e)}));for(var u=0;u<d.length;u++){var p=d[u],g=parseInt(p.getAttribute("i"),10),f=decodeURIComponent(p.getAttribute("data:default-text")),m=c(f,{seriesIndex:a?g:i,dataPointIndex:s,w:r});if(a)p.innerHTML=r.globals.collapsedSeriesIndices.indexOf(g)<0?m:f;else if(p.innerHTML=g===i?m:f,i===g)break}}if(a){if(o.tooltipLabels.drawSeriesTexts({ttItems:n,i:i,j:s,shared:!this.showOnIntersect&&this.tConfig.shared}),l&&(r.globals.markers.largestSize>0?o.marker.enlargePoints(s):o.tooltipPosition.moveDynamicPointsOnHover(s)),this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(h),this.barSeriesHeight>0)){var v=new C(this.ctx),b=r.globals.dom.Paper.select(".apexcharts-bar-area[j='".concat(s,"']"));this.deactivateHoverFilter(),this.tooltipPosition.moveStickyTooltipOverBars(s);for(var x=0;x<b.length;x++)v.pathMouseEnter(b[x])}}else o.tooltipLabels.drawSeriesTexts({shared:!1,ttItems:n,i:i,j:s}),this.tooltipUtil.hasBars()&&o.tooltipPosition.moveStickyTooltipOverBars(s),l&&o.tooltipPosition.moveMarkers(i,s)}}]),t}(),kt=function(){function t(e){o(this,t),this.w=e.w,this.barCtx=e,this.totalFormatter=this.w.config.plotOptions.bar.dataLabels.total.formatter,this.totalFormatter||(this.totalFormatter=this.w.config.dataLabels.formatter)}return h(t,[{key:"handleBarDataLabels",value:function(t){var e=t.x,i=t.y,s=t.y1,n=t.y2,a=t.i,r=t.j,o=t.realIndex,l=t.series,h=t.barHeight,c=t.barWidth,d=t.barYPosition,u=t.visibleSeries,p=t.renderedPath,g=this.w,f=new C(this.barCtx.ctx),m=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[o]:this.barCtx.strokeWidth,v=e+parseFloat(c*u),b=i+parseFloat(h*u);g.globals.isXNumeric&&!g.globals.isBarHorizontal&&(v=e+parseFloat(c*(u+1)),b=i+parseFloat(h*(u+1))-m);var x,y=null,w=e,k=i,S={},_=g.config.dataLabels,A=this.barCtx.barOptions.dataLabels,I=this.barCtx.barOptions.dataLabels.total;void 0!==d&&this.barCtx.isRangeBar&&(b=d,k=d);var P=_.offsetX,T=_.offsetY,E={width:0,height:0};if(g.config.dataLabels.enabled){var L=this.barCtx.series[a][r];E=f.getTextRects(g.globals.yLabelFormatters[0](L),parseFloat(_.style.fontSize))}var M={x:e,y:i,i:a,j:r,realIndex:o,renderedPath:p,bcx:v,bcy:b,barHeight:h,barWidth:c,textRects:E,strokeWidth:m,dataLabelsX:w,dataLabelsY:k,dataLabelsConfig:_,barDataLabelsConfig:A,barTotalDataLabelsConfig:I,offX:P,offY:T};return S=this.barCtx.isHorizontal?this.calculateBarsDataLabelsPosition(M):this.calculateColumnsDataLabelsPosition(M),p.attr({cy:S.bcy,cx:S.bcx,j:r,val:l[a][r],barHeight:h,barWidth:c}),x=this.drawCalculatedDataLabels({x:S.dataLabelsX,y:S.dataLabelsY,val:this.barCtx.isRangeBar?[s,n]:l[a][r],i:o,j:r,barWidth:c,barHeight:h,textRects:E,dataLabelsConfig:_}),g.config.chart.stacked&&I.enabled&&(y=this.drawTotalDataLabels({x:S.totalDataLabelsX,y:S.totalDataLabelsY,realIndex:o,textAnchor:S.totalDataLabelsAnchor,val:this.getStackedTotalDataLabel({realIndex:o,j:r}),dataLabelsConfig:_,barTotalDataLabelsConfig:I})),{dataLabels:x,totalDataLabels:y}}},{key:"getStackedTotalDataLabel",value:function(t){var e=t.realIndex,i=t.j,s=this.w,n=this.barCtx.stackedSeriesTotals[i];return this.totalFormatter&&(n=this.totalFormatter(n,a(a({},s),{},{seriesIndex:e,dataPointIndex:i,w:s}))),n}},{key:"calculateColumnsDataLabelsPosition",value:function(t){var e,i,s,n=this.w,a=t.i,r=t.j,o=t.realIndex,l=t.y,h=t.bcx,c=t.barWidth,d=t.barHeight,u=t.textRects,p=t.dataLabelsY,g=t.dataLabelsConfig,f=t.barDataLabelsConfig,m=t.barTotalDataLabelsConfig,v=t.strokeWidth,b=t.offX,x=t.offY;d=Math.abs(d);var y="vertical"===n.config.plotOptions.bar.dataLabels.orientation;h-=v/2;var w=n.globals.gridWidth/n.globals.dataPoints;e=n.globals.isXNumeric?h-c/2+b:h-w+c/2+b,y&&(e=e+u.height/2-v/2-2);var k=this.barCtx.series[a][r]<0,S=l;switch(this.barCtx.isReversed&&(S=l-d+(k?2*d:0),l-=d),f.position){case"center":p=y?k?S+d/2+x:S+d/2-x:k?S-d/2+u.height/2+x:S+d/2+u.height/2-x;break;case"bottom":p=y?k?S+d+x:S+d-x:k?S-d+u.height+v+x:S+d-u.height/2+v-x;break;case"top":p=y?k?S+x:S-x:k?S-u.height/2-x:S+u.height+x}if(this.barCtx.lastActiveBarSerieIndex===o&&m.enabled){var _=new C(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:o,j:r}),g.fontSize);i=k?S-_.height/2-x-m.offsetY+18:S+_.height+x+m.offsetY-18,s=e+m.offsetX}return n.config.chart.stacked||(p<0?p=0+v:p+u.height/3>n.globals.gridHeight&&(p=n.globals.gridHeight-v)),{bcx:h,bcy:l,dataLabelsX:e,dataLabelsY:p,totalDataLabelsX:s,totalDataLabelsY:i,totalDataLabelsAnchor:"middle"}}},{key:"calculateBarsDataLabelsPosition",value:function(t){var e=this.w,i=t.x,s=t.i,n=t.j,a=t.realIndex,r=t.bcy,o=t.barHeight,l=t.barWidth,h=t.textRects,c=t.dataLabelsX,d=t.strokeWidth,u=t.dataLabelsConfig,p=t.barDataLabelsConfig,g=t.barTotalDataLabelsConfig,f=t.offX,m=t.offY,v=e.globals.gridHeight/e.globals.dataPoints;l=Math.abs(l);var b,x,y=r-(this.barCtx.isRangeBar?0:v)+o/2+h.height/2+m-3,w="start",k=this.barCtx.series[s][n]<0,S=i;switch(this.barCtx.isReversed&&(S=i+l-(k?2*l:0),i=e.globals.gridWidth-l),p.position){case"center":c=k?S+l/2-f:Math.max(h.width/2,S-l/2)+f;break;case"bottom":c=k?S+l-d-Math.round(h.width/2)-f:S-l+d+Math.round(h.width/2)+f;break;case"top":c=k?S-d+Math.round(h.width/2)-f:S-d-Math.round(h.width/2)+f}if(this.barCtx.lastActiveBarSerieIndex===a&&g.enabled){var _=new C(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:a,j:n}),u.fontSize);k?(b=S-d+Math.round(_.width/2)-f-g.offsetX-15,w="end"):b=S-d-Math.round(_.width/2)+f+g.offsetX+15,x=y+g.offsetY}return e.config.chart.stacked||(c<0?c=c+h.width+d:c+h.width/2>e.globals.gridWidth&&(c=e.globals.gridWidth-h.width-d)),{bcx:i,bcy:r,dataLabelsX:c,dataLabelsY:y,totalDataLabelsX:b,totalDataLabelsY:x,totalDataLabelsAnchor:w}}},{key:"drawCalculatedDataLabels",value:function(t){var e=t.x,i=t.y,s=t.val,n=t.i,r=t.j,o=t.textRects,l=t.barHeight,h=t.barWidth,c=t.dataLabelsConfig,d=this.w,u="rotate(0)";"vertical"===d.config.plotOptions.bar.dataLabels.orientation&&(u="rotate(-90, ".concat(e,", ").concat(i,")"));var p=new W(this.barCtx.ctx),g=new C(this.barCtx.ctx),f=c.formatter,m=null,v=d.globals.collapsedSeriesIndices.indexOf(n)>-1;if(c.enabled&&!v){m=g.group({class:"apexcharts-data-labels",transform:u});var b="";void 0!==s&&(b=f(s,a(a({},d),{},{seriesIndex:n,dataPointIndex:r,w:d})));var x=d.globals.series[n][r]<0,y=d.config.plotOptions.bar.dataLabels.position;"vertical"===d.config.plotOptions.bar.dataLabels.orientation&&("top"===y&&(c.textAnchor=x?"end":"start"),"center"===y&&(c.textAnchor="middle"),"bottom"===y&&(c.textAnchor=x?"end":"start")),this.barCtx.isRangeBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&h<g.getTextRects(b,parseFloat(c.style.fontSize)).width&&(b=""),d.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?o.width/1.6>Math.abs(h)&&(b=""):o.height/1.6>Math.abs(l)&&(b=""));var w=a({},c);this.barCtx.isHorizontal&&s<0&&("start"===c.textAnchor?w.textAnchor="end":"end"===c.textAnchor&&(w.textAnchor="start")),p.plotDataLabelsText({x:e,y:i,text:b,i:n,j:r,parent:m,dataLabelsConfig:w,alwaysDrawDataLabel:!0,offsetCorrection:!0})}return m}},{key:"drawTotalDataLabels",value:function(t){var e,i=t.x,s=t.y,n=t.val,a=t.realIndex,r=t.textAnchor,o=t.barTotalDataLabelsConfig,l=new C(this.barCtx.ctx);return o.enabled&&void 0!==i&&void 0!==s&&this.barCtx.lastActiveBarSerieIndex===a&&(e=l.drawText({x:i,y:s,foreColor:o.style.color,text:n,textAnchor:r,fontFamily:o.style.fontFamily,fontSize:o.style.fontSize,fontWeight:o.style.fontWeight})),e}}]),t}(),Ct=function(){function t(e){o(this,t),this.w=e.w,this.barCtx=e}return h(t,[{key:"initVariables",value:function(t){var e=this.w;this.barCtx.series=t,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(var i=0;i<t.length;i++)if(t[i].length>0&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=t[i].length),e.globals.isXNumeric)for(var s=0;s<t[i].length;s++)e.globals.seriesX[i][s]>e.globals.minX&&e.globals.seriesX[i][s]<e.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=e.globals.dataPoints;0===this.barCtx.seriesLen&&(this.barCtx.seriesLen=1),this.barCtx.zeroSerieses=[],this.barCtx.radiusOnSeriesNumber=t.length-1,e.globals.comboCharts||this.checkZeroSeries({series:t})}},{key:"initialPositions",value:function(){var t,e,i,s,n,a,r,o,l=this.w,h=l.globals.dataPoints;this.barCtx.isRangeBar&&(h=l.globals.labels.length);var c=this.barCtx.seriesLen;if(l.config.plotOptions.bar.rangeBarGroupRows&&(c=1),this.barCtx.isHorizontal)n=(i=l.globals.gridHeight/h)/c,l.globals.isXNumeric&&(n=(i=l.globals.gridHeight/this.barCtx.totalItems)/this.barCtx.seriesLen),n=n*parseInt(this.barCtx.barOptions.barHeight,10)/100,o=this.barCtx.baseLineInvertedY+l.globals.padHorizontal+(this.barCtx.isReversed?l.globals.gridWidth:0)-(this.barCtx.isReversed?2*this.barCtx.baseLineInvertedY:0),e=(i-n*this.barCtx.seriesLen)/2;else{if(s=l.globals.gridWidth/this.barCtx.visibleItems,l.config.xaxis.convertedCatToNumeric&&(s=l.globals.gridWidth/l.globals.dataPoints),a=s/this.barCtx.seriesLen*parseInt(this.barCtx.barOptions.columnWidth,10)/100,l.globals.isXNumeric){var d=this.barCtx.xRatio;l.config.xaxis.convertedCatToNumeric&&(d=this.barCtx.initialXRatio),l.globals.minXDiff&&.5!==l.globals.minXDiff&&l.globals.minXDiff/d>0&&(s=l.globals.minXDiff/d),(a=s/this.barCtx.seriesLen*parseInt(this.barCtx.barOptions.columnWidth,10)/100)<1&&(a=1)}r=l.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.yaxisIndex]-(this.barCtx.isReversed?l.globals.gridHeight:0)+(this.barCtx.isReversed?2*this.barCtx.baseLineY[this.barCtx.yaxisIndex]:0),t=l.globals.padHorizontal+(s-a*this.barCtx.seriesLen)/2}return{x:t,y:e,yDivision:i,xDivision:s,barHeight:n,barWidth:a,zeroH:r,zeroW:o}}},{key:"getPathFillColor",value:function(t,e,i,s){var n,a,r,o,l=this.w,h=new B(this.barCtx.ctx),c=null,d=this.barCtx.barOptions.distributed?i:e;return this.barCtx.barOptions.colors.ranges.length>0&&this.barCtx.barOptions.colors.ranges.map((function(s){t[e][i]>=s.from&&t[e][i]<=s.to&&(c=s.color)})),l.config.series[e].data[i]&&l.config.series[e].data[i].fillColor&&(c=l.config.series[e].data[i].fillColor),h.fillPath({seriesNumber:this.barCtx.barOptions.distributed?d:s,dataPointIndex:i,color:c,value:t[e][i],fillConfig:null===(n=l.config.series[e].data[i])||void 0===n?void 0:n.fill,fillType:null!==(a=l.config.series[e].data[i])&&void 0!==a&&null!==(r=a.fill)&&void 0!==r&&r.type?null===(o=l.config.series[e].data[i])||void 0===o?void 0:o.fill.type:l.config.fill.type})}},{key:"getStrokeWidth",value:function(t,e,i){var s=0,n=this.w;return void 0===this.barCtx.series[t][e]||null===this.barCtx.series[t][e]?this.barCtx.isNullValue=!0:this.barCtx.isNullValue=!1,n.config.stroke.show&&(this.barCtx.isNullValue||(s=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[i]:this.barCtx.strokeWidth)),s}},{key:"shouldApplyRadius",value:function(t){var e=this.w,i=!1;return e.config.plotOptions.bar.borderRadius>0&&(e.config.chart.stacked&&"last"===e.config.plotOptions.bar.borderRadiusWhenStacked?this.barCtx.lastActiveBarSerieIndex===t&&(i=!0):i=!0),i}},{key:"barBackground",value:function(t){var e=t.j,i=t.i,s=t.x1,n=t.x2,a=t.y1,r=t.y2,o=t.elSeries,l=this.w,h=new C(this.barCtx.ctx),c=new X(this.barCtx.ctx).getActiveConfigSeriesIndex();if(this.barCtx.barOptions.colors.backgroundBarColors.length>0&&c===i){e>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(e%=this.barCtx.barOptions.colors.backgroundBarColors.length);var d=this.barCtx.barOptions.colors.backgroundBarColors[e],u=h.drawRect(void 0!==s?s:0,void 0!==a?a:0,void 0!==n?n:l.globals.gridWidth,void 0!==r?r:l.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,d,this.barCtx.barOptions.colors.backgroundBarOpacity);o.add(u),u.node.classList.add("apexcharts-backgroundBar")}}},{key:"getColumnPaths",value:function(t){var e,i=t.barWidth,s=t.barXPosition,n=t.y1,a=t.y2,r=t.strokeWidth,o=t.realIndex,l=t.i,h=t.j,c=t.w,d=new C(this.barCtx.ctx);(r=Array.isArray(r)?r[o]:r)||(r=0);var u=i,p=s;null!==(e=c.config.series[o].data[h])&&void 0!==e&&e.columnWidthOffset&&(p=s-c.config.series[o].data[h].columnWidthOffset/2,u=i+c.config.series[o].data[h].columnWidthOffset);var g=p,f=p+u;n+=.001,a+=.001;var m=d.move(g,n),v=d.move(g,n),b=d.line(f-r,n);return c.globals.previousPaths.length>0&&(v=this.barCtx.getPreviousPath(o,h,!1)),m=m+d.line(g,a)+d.line(f-r,a)+d.line(f-r,n)+("around"===c.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),v=v+d.line(g,n)+b+b+b+b+b+d.line(g,n)+("around"===c.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),this.shouldApplyRadius(o)&&(m=d.roundPathCorners(m,c.config.plotOptions.bar.borderRadius)),c.config.chart.stacked&&(this.barCtx.yArrj.push(a),this.barCtx.yArrjF.push(Math.abs(n-a)),this.barCtx.yArrjVal.push(this.barCtx.series[l][h])),{pathTo:m,pathFrom:v}}},{key:"getBarpaths",value:function(t){var e,i=t.barYPosition,s=t.barHeight,n=t.x1,a=t.x2,r=t.strokeWidth,o=t.realIndex,l=t.i,h=t.j,c=t.w,d=new C(this.barCtx.ctx);(r=Array.isArray(r)?r[o]:r)||(r=0);var u=i,p=s;null!==(e=c.config.series[o].data[h])&&void 0!==e&&e.barHeightOffset&&(u=i-c.config.series[o].data[h].barHeightOffset/2,p=s+c.config.series[o].data[h].barHeightOffset);var g=u,f=u+p;n+=.001,a+=.001;var m=d.move(n,g),v=d.move(n,g);c.globals.previousPaths.length>0&&(v=this.barCtx.getPreviousPath(o,h,!1));var b=d.line(n,f-r);return m=m+d.line(a,g)+d.line(a,f-r)+b+("around"===c.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),v=v+d.line(n,g)+b+b+b+b+b+d.line(n,g)+("around"===c.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),this.shouldApplyRadius(o)&&(m=d.roundPathCorners(m,c.config.plotOptions.bar.borderRadius)),c.config.chart.stacked&&(this.barCtx.xArrj.push(a),this.barCtx.xArrjF.push(Math.abs(n-a)),this.barCtx.xArrjVal.push(this.barCtx.series[l][h])),{pathTo:m,pathFrom:v}}},{key:"checkZeroSeries",value:function(t){for(var e=t.series,i=this.w,s=0;s<e.length;s++){for(var n=0,a=0;a<e[i.globals.maxValsInArrayIndex].length;a++)n+=e[s][a];0===n&&this.barCtx.zeroSerieses.push(s)}for(var r=e.length-1;r>=0;r--)this.barCtx.zeroSerieses.indexOf(r)>-1&&r===this.radiusOnSeriesNumber&&(this.barCtx.radiusOnSeriesNumber-=1);for(var o=e.length-1;o>=0;o--)i.globals.collapsedSeriesIndices.indexOf(this.barCtx.radiusOnSeriesNumber)>-1&&(this.barCtx.radiusOnSeriesNumber-=1)}},{key:"getXForValue",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=i?e:null;return null!=t&&(s=e+t/this.barCtx.invertedYRatio-2*(this.barCtx.isReversed?t/this.barCtx.invertedYRatio:0)),s}},{key:"getYForValue",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=i?e:null;return null!=t&&(s=e-t/this.barCtx.yRatio[this.barCtx.yaxisIndex]+2*(this.barCtx.isReversed?t/this.barCtx.yRatio[this.barCtx.yaxisIndex]:0)),s}},{key:"getGoalValues",value:function(t,e,i,s,n){var a=this,r=this.w,o=[];return r.globals.seriesGoals[s]&&r.globals.seriesGoals[s][n]&&Array.isArray(r.globals.seriesGoals[s][n])&&r.globals.seriesGoals[s][n].forEach((function(s){var n;o.push((c(n={},t,"x"===t?a.getXForValue(s.value,e,!1):a.getYForValue(s.value,i,!1)),c(n,"attrs",s),n))})),o}},{key:"drawGoalLine",value:function(t){var e=t.barXPosition,i=t.barYPosition,s=t.goalX,n=t.goalY,a=t.barWidth,r=t.barHeight,o=new C(this.barCtx.ctx),l=o.group({className:"apexcharts-bar-goals-groups"}),h=null;return this.barCtx.isHorizontal?Array.isArray(s)&&s.forEach((function(t){var e=void 0!==t.attrs.strokeHeight?t.attrs.strokeHeight:r/2,s=i+e+r/2;h=o.drawLine(t.x,s-2*e,t.x,s,t.attrs.strokeColor?t.attrs.strokeColor:void 0,t.attrs.strokeDashArray,t.attrs.strokeWidth?t.attrs.strokeWidth:2,t.attrs.strokeLineCap),l.add(h)})):Array.isArray(n)&&n.forEach((function(t){var i=void 0!==t.attrs.strokeWidth?t.attrs.strokeWidth:a/2,s=e+i+a/2;h=o.drawLine(s-2*i,t.y,s,t.y,t.attrs.strokeColor?t.attrs.strokeColor:void 0,t.attrs.strokeDashArray,t.attrs.strokeHeight?t.attrs.strokeHeight:2,t.attrs.strokeLineCap),l.add(h)})),l}}]),t}(),St=function(){function t(e,i){o(this,t),this.ctx=e,this.w=e.w;var s=this.w;this.barOptions=s.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=s.config.stroke.width,this.isNullValue=!1,this.isRangeBar=s.globals.seriesRange.length&&this.isHorizontal,this.xyRatios=i,null!==this.xyRatios&&(this.xRatio=i.xRatio,this.initialXRatio=i.initialXRatio,this.yRatio=i.yRatio,this.invertedXRatio=i.invertedXRatio,this.invertedYRatio=i.invertedYRatio,this.baseLineY=i.baseLineY,this.baseLineInvertedY=i.baseLineInvertedY),this.yaxisIndex=0,this.seriesLen=0;var n=new X(this.ctx);this.lastActiveBarSerieIndex=n.getActiveConfigSeriesIndex("desc",["bar","column"]);var a=n.getBarSeriesIndices(),r=new S(this.ctx);this.stackedSeriesTotals=r.getStackedSeriesTotals(this.w.config.series.map((function(t,e){return-1===a.indexOf(e)?e:-1})).filter((function(t){return-1!==t}))),this.barHelpers=new Ct(this)}return h(t,[{key:"draw",value:function(t,e){var i=this.w,s=new C(this.ctx),n=new S(this.ctx,i);t=n.getLogSeries(t),this.series=t,this.yRatio=n.getLogYRatios(this.yRatio),this.barHelpers.initVariables(t);var r=s.group({class:"apexcharts-bar-series apexcharts-plot-series"});i.config.dataLabels.enabled&&this.totalItems>this.barOptions.dataLabels.maxItems&&console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering.");for(var o=0,l=0;o<t.length;o++,l++){var h,c,d,u,p=void 0,g=void 0,f=[],m=[],v=i.globals.comboCharts?e[o]:o,b=s.group({class:"apexcharts-series",rel:o+1,seriesName:y.escapeString(i.globals.seriesNames[v]),"data:realIndex":v});this.ctx.series.addCollapsedClassToSeries(b,v),t[o].length>0&&(this.visibleI=this.visibleI+1);var x=0,w=0;this.yRatio.length>1&&(this.yaxisIndex=v),this.isReversed=i.config.yaxis[this.yaxisIndex]&&i.config.yaxis[this.yaxisIndex].reversed;var k=this.barHelpers.initialPositions();g=k.y,x=k.barHeight,c=k.yDivision,u=k.zeroW,p=k.x,w=k.barWidth,h=k.xDivision,d=k.zeroH,this.horizontal||m.push(p+w/2);for(var _=s.group({class:"apexcharts-datalabels","data:realIndex":v}),A=s.group({class:"apexcharts-bar-goals-markers",style:"pointer-events: none"}),I=0;I<i.globals.dataPoints;I++){var P=this.barHelpers.getStrokeWidth(o,I,v),T=null,E={indexes:{i:o,j:I,realIndex:v,bc:l},x:p,y:g,strokeWidth:P,elSeries:b};this.isHorizontal?(T=this.drawBarPaths(a(a({},E),{},{barHeight:x,zeroW:u,yDivision:c})),w=this.series[o][I]/this.invertedYRatio):(T=this.drawColumnPaths(a(a({},E),{},{xDivision:h,barWidth:w,zeroH:d})),x=this.series[o][I]/this.yRatio[this.yaxisIndex]);var L=this.barHelpers.drawGoalLine({barXPosition:T.barXPosition,barYPosition:T.barYPosition,goalX:T.goalX,goalY:T.goalY,barHeight:x,barWidth:w});L&&A.add(L),g=T.y,p=T.x,I>0&&m.push(p+w/2),f.push(g);var M=this.barHelpers.getPathFillColor(t,o,I,v);this.renderSeries({realIndex:v,pathFill:M,j:I,i:o,pathFrom:T.pathFrom,pathTo:T.pathTo,strokeWidth:P,elSeries:b,x:p,y:g,series:t,barHeight:x,barWidth:w,elDataLabelsWrap:_,elGoalsMarkers:A,visibleSeries:this.visibleI,type:"bar"})}i.globals.seriesXvalues[v]=m,i.globals.seriesYvalues[v]=f,r.add(b)}return r}},{key:"renderSeries",value:function(t){var e=t.realIndex,i=t.pathFill,s=t.lineFill,n=t.j,a=t.i,r=t.pathFrom,o=t.pathTo,l=t.strokeWidth,h=t.elSeries,c=t.x,d=t.y,u=t.y1,p=t.y2,g=t.series,f=t.barHeight,m=t.barWidth,v=t.barYPosition,b=t.elDataLabelsWrap,x=t.elGoalsMarkers,y=t.visibleSeries,w=t.type,S=this.w,_=new C(this.ctx);s||(s=this.barOptions.distributed?S.globals.stroke.colors[n]:S.globals.stroke.colors[e]),S.config.series[a].data[n]&&S.config.series[a].data[n].strokeColor&&(s=S.config.series[a].data[n].strokeColor),this.isNullValue&&(i="none");var A=n/S.config.chart.animations.animateGradually.delay*(S.config.chart.animations.speed/S.globals.dataPoints)/2.4,I=_.renderPaths({i:a,j:n,realIndex:e,pathFrom:r,pathTo:o,stroke:s,strokeWidth:l,strokeLineCap:S.config.stroke.lineCap,fill:i,animationDelay:A,initialSpeed:S.config.chart.animations.speed,dataChangeSpeed:S.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(w,"-area")});I.attr("clip-path","url(#gridRectMask".concat(S.globals.cuid,")"));var P=S.config.forecastDataPoints;P.count>0&&n>=S.globals.dataPoints-P.count&&(I.node.setAttribute("stroke-dasharray",P.dashArray),I.node.setAttribute("stroke-width",P.strokeWidth),I.node.setAttribute("fill-opacity",P.fillOpacity)),void 0!==u&&void 0!==p&&(I.attr("data-range-y1",u),I.attr("data-range-y2",p)),new k(this.ctx).setSelectionFilter(I,e,n),h.add(I);var T=new kt(this).handleBarDataLabels({x:c,y:d,y1:u,y2:p,i:a,j:n,series:g,realIndex:e,barHeight:f,barWidth:m,barYPosition:v,renderedPath:I,visibleSeries:y});return null!==T.dataLabels&&b.add(T.dataLabels),T.totalDataLabels&&b.add(T.totalDataLabels),h.add(b),x&&h.add(x),h}},{key:"drawBarPaths",value:function(t){var e=t.indexes,i=t.barHeight,s=t.strokeWidth,n=t.zeroW,a=t.x,r=t.y,o=t.yDivision,l=t.elSeries,h=this.w,c=e.i,d=e.j;h.globals.isXNumeric&&(r=(h.globals.seriesX[c][d]-h.globals.minX)/this.invertedXRatio-i);var u=r+i*this.visibleI;a=this.barHelpers.getXForValue(this.series[c][d],n);var p=this.barHelpers.getBarpaths({barYPosition:u,barHeight:i,x1:n,x2:a,strokeWidth:s,series:this.series,realIndex:e.realIndex,i:c,j:d,w:h});return h.globals.isXNumeric||(r+=o),this.barHelpers.barBackground({j:d,i:c,y1:u-i*this.visibleI,y2:i*this.seriesLen,elSeries:l}),{pathTo:p.pathTo,pathFrom:p.pathFrom,x:a,y:r,goalX:this.barHelpers.getGoalValues("x",n,null,c,d),barYPosition:u}}},{key:"drawColumnPaths",value:function(t){var e=t.indexes,i=t.x,s=t.y,n=t.xDivision,a=t.barWidth,r=t.zeroH,o=t.strokeWidth,l=t.elSeries,h=this.w,c=e.realIndex,d=e.i,u=e.j,p=e.bc;if(h.globals.isXNumeric){var g=c;h.globals.seriesX[c].length||(g=h.globals.maxValsInArrayIndex),i=(h.globals.seriesX[g][u]-h.globals.minX)/this.xRatio-a*this.seriesLen/2}var f=i+a*this.visibleI;s=this.barHelpers.getYForValue(this.series[d][u],r);var m=this.barHelpers.getColumnPaths({barXPosition:f,barWidth:a,y1:r,y2:s,strokeWidth:o,series:this.series,realIndex:e.realIndex,i:d,j:u,w:h});return h.globals.isXNumeric||(i+=n),this.barHelpers.barBackground({bc:p,j:u,i:d,x1:f-o/2-a*this.visibleI,x2:a*this.seriesLen+o/2,elSeries:l}),{pathTo:m.pathTo,pathFrom:m.pathFrom,x:i,y:s,goalY:this.barHelpers.getGoalValues("y",null,r,d,u),barXPosition:f}}},{key:"getPreviousPath",value:function(t,e){for(var i,s=this.w,n=0;n<s.globals.previousPaths.length;n++){var a=s.globals.previousPaths[n];a.paths&&a.paths.length>0&&parseInt(a.realIndex,10)===parseInt(t,10)&&void 0!==s.globals.previousPaths[n].paths[e]&&(i=s.globals.previousPaths[n].paths[e].d)}return i}}]),t}(),_t=function(t){d(i,t);var e=f(i);function i(){return o(this,i),e.apply(this,arguments)}return h(i,[{key:"draw",value:function(t,e){var i=this,s=this.w;this.graphics=new C(this.ctx),this.bar=new St(this.ctx,this.xyRatios);var n=new S(this.ctx,s);t=n.getLogSeries(t),this.yRatio=n.getLogYRatios(this.yRatio),this.barHelpers.initVariables(t),"100%"===s.config.chart.stackType&&(t=s.globals.seriesPercent.slice()),this.series=t,this.totalItems=0,this.prevY=[],this.prevX=[],this.prevYF=[],this.prevXF=[],this.prevYVal=[],this.prevXVal=[],this.xArrj=[],this.xArrjF=[],this.xArrjVal=[],this.yArrj=[],this.yArrjF=[],this.yArrjVal=[];for(var r=0;r<t.length;r++)t[r].length>0&&(this.totalItems+=t[r].length);for(var o=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),l=0,h=0,c=function(n,r){var c=void 0,d=void 0,u=void 0,p=void 0,g=[],f=[],m=s.globals.comboCharts?e[n]:n;i.yRatio.length>1&&(i.yaxisIndex=m),i.isReversed=s.config.yaxis[i.yaxisIndex]&&s.config.yaxis[i.yaxisIndex].reversed;var v=i.graphics.group({class:"apexcharts-series",seriesName:y.escapeString(s.globals.seriesNames[m]),rel:n+1,"data:realIndex":m});i.ctx.series.addCollapsedClassToSeries(v,m);var b=i.graphics.group({class:"apexcharts-datalabels","data:realIndex":m}),x=i.graphics.group({class:"apexcharts-bar-goals-markers",style:"pointer-events: none"}),w=0,k=0,C=i.initialPositions(l,h,c,d,u,p);h=C.y,w=C.barHeight,d=C.yDivision,p=C.zeroW,l=C.x,k=C.barWidth,c=C.xDivision,u=C.zeroH,i.yArrj=[],i.yArrjF=[],i.yArrjVal=[],i.xArrj=[],i.xArrjF=[],i.xArrjVal=[],1===i.prevY.length&&i.prevY[0].every((function(t){return isNaN(t)}))&&(i.prevY[0]=i.prevY[0].map((function(t){return u})),i.prevYF[0]=i.prevYF[0].map((function(t){return 0})));for(var S=0;S<s.globals.dataPoints;S++){var _=i.barHelpers.getStrokeWidth(n,S,m),A={indexes:{i:n,j:S,realIndex:m,bc:r},strokeWidth:_,x:l,y:h,elSeries:v},I=null;i.isHorizontal?(I=i.drawStackedBarPaths(a(a({},A),{},{zeroW:p,barHeight:w,yDivision:d})),k=i.series[n][S]/i.invertedYRatio):(I=i.drawStackedColumnPaths(a(a({},A),{},{xDivision:c,barWidth:k,zeroH:u})),w=i.series[n][S]/i.yRatio[i.yaxisIndex]);var P=i.barHelpers.drawGoalLine({barXPosition:I.barXPosition,barYPosition:I.barYPosition,goalX:I.goalX,goalY:I.goalY,barHeight:w,barWidth:k});P&&x.add(P),h=I.y,l=I.x,g.push(l),f.push(h);var T=i.barHelpers.getPathFillColor(t,n,S,m);v=i.renderSeries({realIndex:m,pathFill:T,j:S,i:n,pathFrom:I.pathFrom,pathTo:I.pathTo,strokeWidth:_,elSeries:v,x:l,y:h,series:t,barHeight:w,barWidth:k,elDataLabelsWrap:b,elGoalsMarkers:x,type:"bar",visibleSeries:0})}s.globals.seriesXvalues[m]=g,s.globals.seriesYvalues[m]=f,i.prevY.push(i.yArrj),i.prevYF.push(i.yArrjF),i.prevYVal.push(i.yArrjVal),i.prevX.push(i.xArrj),i.prevXF.push(i.xArrjF),i.prevXVal.push(i.xArrjVal),o.add(v)},d=0,u=0;d<t.length;d++,u++)c(d,u);return o}},{key:"initialPositions",value:function(t,e,i,s,n,a){var r,o,l=this.w;return this.isHorizontal?(r=(r=s=l.globals.gridHeight/l.globals.dataPoints)*parseInt(l.config.plotOptions.bar.barHeight,10)/100,a=this.baseLineInvertedY+l.globals.padHorizontal+(this.isReversed?l.globals.gridWidth:0)-(this.isReversed?2*this.baseLineInvertedY:0),e=(s-r)/2):(o=i=l.globals.gridWidth/l.globals.dataPoints,o=l.globals.isXNumeric&&l.globals.dataPoints>1?(i=l.globals.minXDiff/this.xRatio)*parseInt(this.barOptions.columnWidth,10)/100:o*parseInt(l.config.plotOptions.bar.columnWidth,10)/100,n=l.globals.gridHeight-this.baseLineY[this.yaxisIndex]-(this.isReversed?l.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),t=l.globals.padHorizontal+(i-o)/2),{x:t,y:e,yDivision:s,xDivision:i,barHeight:r,barWidth:o,zeroH:n,zeroW:a}}},{key:"drawStackedBarPaths",value:function(t){for(var e,i=t.indexes,s=t.barHeight,n=t.strokeWidth,a=t.zeroW,r=t.x,o=t.y,l=t.yDivision,h=t.elSeries,c=this.w,d=o,u=i.i,p=i.j,g=0,f=0;f<this.prevXF.length;f++)g+=this.prevXF[f][p];if(u>0){var m=a;this.prevXVal[u-1][p]<0?m=this.series[u][p]>=0?this.prevX[u-1][p]+g-2*(this.isReversed?g:0):this.prevX[u-1][p]:this.prevXVal[u-1][p]>=0&&(m=this.series[u][p]>=0?this.prevX[u-1][p]:this.prevX[u-1][p]-g+2*(this.isReversed?g:0)),e=m}else e=a;r=null===this.series[u][p]?e:e+this.series[u][p]/this.invertedYRatio-2*(this.isReversed?this.series[u][p]/this.invertedYRatio:0);var v=this.barHelpers.getBarpaths({barYPosition:d,barHeight:s,x1:e,x2:r,strokeWidth:n,series:this.series,realIndex:i.realIndex,i:u,j:p,w:c});return this.barHelpers.barBackground({j:p,i:u,y1:d,y2:s,elSeries:h}),o+=l,{pathTo:v.pathTo,pathFrom:v.pathFrom,goalX:this.barHelpers.getGoalValues("x",a,null,u,p),barYPosition:d,x:r,y:o}}},{key:"drawStackedColumnPaths",value:function(t){var e=t.indexes,i=t.x,s=t.y,n=t.xDivision,a=t.barWidth,r=t.zeroH;t.strokeWidth;var o=t.elSeries,l=this.w,h=e.i,c=e.j,d=e.bc;if(l.globals.isXNumeric){var u=l.globals.seriesX[h][c];u||(u=0),i=(u-l.globals.minX)/this.xRatio-a/2}for(var p,g=i,f=0,m=0;m<this.prevYF.length;m++)f+=isNaN(this.prevYF[m][c])?0:this.prevYF[m][c];if(h>0&&!l.globals.isXNumeric||h>0&&l.globals.isXNumeric&&l.globals.seriesX[h-1][c]===l.globals.seriesX[h][c]){var v,b,x=Math.min(this.yRatio.length+1,h+1);if(void 0!==this.prevY[h-1])for(var y=1;y<x;y++)if(!isNaN(this.prevY[h-y][c])){b=this.prevY[h-y][c];break}for(var w=1;w<x;w++){if(this.prevYVal[h-w][c]<0){v=this.series[h][c]>=0?b-f+2*(this.isReversed?f:0):b;break}if(this.prevYVal[h-w][c]>=0){v=this.series[h][c]>=0?b:b+f-2*(this.isReversed?f:0);break}}void 0===v&&(v=l.globals.gridHeight),p=this.prevYF[0].every((function(t){return 0===t}))&&this.prevYF.slice(1,h).every((function(t){return t.every((function(t){return isNaN(t)}))}))?r:v}else p=r;s=p-this.series[h][c]/this.yRatio[this.yaxisIndex]+2*(this.isReversed?this.series[h][c]/this.yRatio[this.yaxisIndex]:0);var k=this.barHelpers.getColumnPaths({barXPosition:g,barWidth:a,y1:p,y2:s,yRatio:this.yRatio[this.yaxisIndex],strokeWidth:this.strokeWidth,series:this.series,realIndex:e.realIndex,i:h,j:c,w:l});return this.barHelpers.barBackground({bc:d,j:c,i:h,x1:g,x2:a,elSeries:o}),i+=n,{pathTo:k.pathTo,pathFrom:k.pathFrom,goalY:this.barHelpers.getGoalValues("y",null,r,h,c),barXPosition:g,x:l.globals.isXNumeric?i-n:i,y:s}}}]),i}(St),At=function(t){d(i,t);var e=f(i);function i(){return o(this,i),e.apply(this,arguments)}return h(i,[{key:"draw",value:function(t,e){var i=this,s=this.w,n=new C(this.ctx),r=new B(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick,this.boxOptions=this.w.config.plotOptions.boxPlot,this.isHorizontal=s.config.plotOptions.bar.horizontal;var o=new S(this.ctx,s);t=o.getLogSeries(t),this.series=t,this.yRatio=o.getLogYRatios(this.yRatio),this.barHelpers.initVariables(t);for(var l=n.group({class:"apexcharts-".concat(s.config.chart.type,"-series apexcharts-plot-series")}),h=function(o){i.isBoxPlot="boxPlot"===s.config.chart.type||"boxPlot"===s.config.series[o].type;var h,c,d,u,p,g,f=void 0,m=void 0,v=[],b=[],x=s.globals.comboCharts?e[o]:o,w=n.group({class:"apexcharts-series",seriesName:y.escapeString(s.globals.seriesNames[x]),rel:o+1,"data:realIndex":x});i.ctx.series.addCollapsedClassToSeries(w,x),t[o].length>0&&(i.visibleI=i.visibleI+1),i.yRatio.length>1&&(i.yaxisIndex=x);var k=i.barHelpers.initialPositions();m=k.y,p=k.barHeight,c=k.yDivision,u=k.zeroW,f=k.x,g=k.barWidth,h=k.xDivision,d=k.zeroH,b.push(f+g/2);for(var C=n.group({class:"apexcharts-datalabels","data:realIndex":x}),S=function(e){var n=i.barHelpers.getStrokeWidth(o,e,x),l=null,y={indexes:{i:o,j:e,realIndex:x},x:f,y:m,strokeWidth:n,elSeries:w};l=i.isHorizontal?i.drawHorizontalBoxPaths(a(a({},y),{},{yDivision:c,barHeight:p,zeroW:u})):i.drawVerticalBoxPaths(a(a({},y),{},{xDivision:h,barWidth:g,zeroH:d})),m=l.y,f=l.x,e>0&&b.push(f+g/2),v.push(m),l.pathTo.forEach((function(a,h){var c=!i.isBoxPlot&&i.candlestickOptions.wick.useFillColor?l.color[h]:s.globals.stroke.colors[o],d=r.fillPath({seriesNumber:x,dataPointIndex:e,color:l.color[h],value:t[o][e]});i.renderSeries({realIndex:x,pathFill:d,lineFill:c,j:e,i:o,pathFrom:l.pathFrom,pathTo:a,strokeWidth:n,elSeries:w,x:f,y:m,series:t,barHeight:p,barWidth:g,elDataLabelsWrap:C,visibleSeries:i.visibleI,type:s.config.chart.type})}))},_=0;_<s.globals.dataPoints;_++)S(_);s.globals.seriesXvalues[x]=b,s.globals.seriesYvalues[x]=v,l.add(w)},c=0;c<t.length;c++)h(c);return l}},{key:"drawVerticalBoxPaths",value:function(t){var e=t.indexes,i=t.x;t.y;var s=t.xDivision,n=t.barWidth,a=t.zeroH,r=t.strokeWidth,o=this.w,l=new C(this.ctx),h=e.i,c=e.j,d=!0,u=o.config.plotOptions.candlestick.colors.upward,p=o.config.plotOptions.candlestick.colors.downward,g="";this.isBoxPlot&&(g=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var f=this.yRatio[this.yaxisIndex],m=e.realIndex,v=this.getOHLCValue(m,c),b=a,x=a;v.o>v.c&&(d=!1);var y=Math.min(v.o,v.c),w=Math.max(v.o,v.c),k=v.m;o.globals.isXNumeric&&(i=(o.globals.seriesX[m][c]-o.globals.minX)/this.xRatio-n/2);var S=i+n*this.visibleI;void 0===this.series[h][c]||null===this.series[h][c]?(y=a,w=a):(y=a-y/f,w=a-w/f,b=a-v.h/f,x=a-v.l/f,k=a-v.m/f);var _=l.move(S,a),A=l.move(S+n/2,y);return o.globals.previousPaths.length>0&&(A=this.getPreviousPath(m,c,!0)),_=this.isBoxPlot?[l.move(S,y)+l.line(S+n/2,y)+l.line(S+n/2,b)+l.line(S+n/4,b)+l.line(S+n-n/4,b)+l.line(S+n/2,b)+l.line(S+n/2,y)+l.line(S+n,y)+l.line(S+n,k)+l.line(S,k)+l.line(S,y+r/2),l.move(S,k)+l.line(S+n,k)+l.line(S+n,w)+l.line(S+n/2,w)+l.line(S+n/2,x)+l.line(S+n-n/4,x)+l.line(S+n/4,x)+l.line(S+n/2,x)+l.line(S+n/2,w)+l.line(S,w)+l.line(S,k)+"z"]:[l.move(S,w)+l.line(S+n/2,w)+l.line(S+n/2,b)+l.line(S+n/2,w)+l.line(S+n,w)+l.line(S+n,y)+l.line(S+n/2,y)+l.line(S+n/2,x)+l.line(S+n/2,y)+l.line(S,y)+l.line(S,w-r/2)],A+=l.move(S,y),o.globals.isXNumeric||(i+=s),{pathTo:_,pathFrom:A,x:i,y:w,barXPosition:S,color:this.isBoxPlot?g:d?[u]:[p]}}},{key:"drawHorizontalBoxPaths",value:function(t){var e=t.indexes;t.x;var i=t.y,s=t.yDivision,n=t.barHeight,a=t.zeroW,r=t.strokeWidth,o=this.w,l=new C(this.ctx),h=e.i,c=e.j,d=this.boxOptions.colors.lower;this.isBoxPlot&&(d=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var u=this.invertedYRatio,p=e.realIndex,g=this.getOHLCValue(p,c),f=a,m=a,v=Math.min(g.o,g.c),b=Math.max(g.o,g.c),x=g.m;o.globals.isXNumeric&&(i=(o.globals.seriesX[p][c]-o.globals.minX)/this.invertedXRatio-n/2);var y=i+n*this.visibleI;void 0===this.series[h][c]||null===this.series[h][c]?(v=a,b=a):(v=a+v/u,b=a+b/u,f=a+g.h/u,m=a+g.l/u,x=a+g.m/u);var w=l.move(a,y),k=l.move(v,y+n/2);return o.globals.previousPaths.length>0&&(k=this.getPreviousPath(p,c,!0)),w=[l.move(v,y)+l.line(v,y+n/2)+l.line(f,y+n/2)+l.line(f,y+n/2-n/4)+l.line(f,y+n/2+n/4)+l.line(f,y+n/2)+l.line(v,y+n/2)+l.line(v,y+n)+l.line(x,y+n)+l.line(x,y)+l.line(v+r/2,y),l.move(x,y)+l.line(x,y+n)+l.line(b,y+n)+l.line(b,y+n/2)+l.line(m,y+n/2)+l.line(m,y+n-n/4)+l.line(m,y+n/4)+l.line(m,y+n/2)+l.line(b,y+n/2)+l.line(b,y)+l.line(x,y)+"z"],k+=l.move(v,y),o.globals.isXNumeric||(i+=s),{pathTo:w,pathFrom:k,x:b,y:i,barYPosition:y,color:d}}},{key:"getOHLCValue",value:function(t,e){var i=this.w;return{o:this.isBoxPlot?i.globals.seriesCandleH[t][e]:i.globals.seriesCandleO[t][e],h:this.isBoxPlot?i.globals.seriesCandleO[t][e]:i.globals.seriesCandleH[t][e],m:i.globals.seriesCandleM[t][e],l:this.isBoxPlot?i.globals.seriesCandleC[t][e]:i.globals.seriesCandleL[t][e],c:this.isBoxPlot?i.globals.seriesCandleL[t][e]:i.globals.seriesCandleC[t][e]}}}]),i}(St),It=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w}return h(t,[{key:"checkColorRange",value:function(){var t=this.w,e=!1,i=t.config.plotOptions[t.config.chart.type];return i.colorScale.ranges.length>0&&i.colorScale.ranges.map((function(t,i){t.from<=0&&(e=!0)})),e}},{key:"getShadeColor",value:function(t,e,i,s){var n=this.w,a=1,r=n.config.plotOptions[t].shadeIntensity,o=this.determineColor(t,e,i);n.globals.hasNegs||s?a=n.config.plotOptions[t].reverseNegativeShade?o.percent<0?o.percent/100*(1.25*r):(1-o.percent/100)*(1.25*r):o.percent<=0?1-(1+o.percent/100)*r:(1-o.percent/100)*r:(a=1-o.percent/100,"treemap"===t&&(a=(1-o.percent/100)*(1.25*r)));var l=o.color,h=new y;return n.config.plotOptions[t].enableShades&&(l="dark"===this.w.config.theme.mode?y.hexToRgba(h.shadeColor(-1*a,o.color),n.config.fill.opacity):y.hexToRgba(h.shadeColor(a,o.color),n.config.fill.opacity)),{color:l,colorProps:o}}},{key:"determineColor",value:function(t,e,i){var s=this.w,n=s.globals.series[e][i],a=s.config.plotOptions[t],r=a.colorScale.inverse?i:e;a.distributed&&"treemap"===s.config.chart.type&&(r=i);var o=s.globals.colors[r],l=null,h=Math.min.apply(Math,v(s.globals.series[e])),c=Math.max.apply(Math,v(s.globals.series[e]));a.distributed||"heatmap"!==t||(h=s.globals.minY,c=s.globals.maxY),void 0!==a.colorScale.min&&(h=a.colorScale.min<s.globals.minY?a.colorScale.min:s.globals.minY,c=a.colorScale.max>s.globals.maxY?a.colorScale.max:s.globals.maxY);var d=Math.abs(c)+Math.abs(h),u=100*n/(0===d?d-1e-6:d);return a.colorScale.ranges.length>0&&a.colorScale.ranges.map((function(t,e){if(n>=t.from&&n<=t.to){o=t.color,l=t.foreColor?t.foreColor:null,h=t.from,c=t.to;var i=Math.abs(c)+Math.abs(h);u=100*n/(0===i?i-1e-6:i)}})),{color:o,foreColor:l,percent:u}}},{key:"calculateDataLabels",value:function(t){var e=t.text,i=t.x,s=t.y,n=t.i,a=t.j,r=t.colorProps,o=t.fontSize,l=this.w.config.dataLabels,h=new C(this.ctx),c=new W(this.ctx),d=null;if(l.enabled){d=h.group({class:"apexcharts-data-labels"});var u=l.offsetX,p=l.offsetY,g=i+u,f=s+parseFloat(l.style.fontSize)/3+p;c.plotDataLabelsText({x:g,y:f,text:e,i:n,j:a,color:r.foreColor,parent:d,fontSize:o,dataLabelsConfig:l})}return d}},{key:"addListeners",value:function(t){var e=new C(this.ctx);t.node.addEventListener("mouseenter",e.pathMouseEnter.bind(this,t)),t.node.addEventListener("mouseleave",e.pathMouseLeave.bind(this,t)),t.node.addEventListener("mousedown",e.pathMouseDown.bind(this,t))}}]),t}(),Pt=function(){function t(e,i){o(this,t),this.ctx=e,this.w=e.w,this.xRatio=i.xRatio,this.yRatio=i.yRatio,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.helpers=new It(e),this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}return h(t,[{key:"draw",value:function(t){var e=this.w,i=new C(this.ctx),s=i.group({class:"apexcharts-heatmap"});s.attr("clip-path","url(#gridRectMask".concat(e.globals.cuid,")"));var n=e.globals.gridWidth/e.globals.dataPoints,a=e.globals.gridHeight/e.globals.series.length,r=0,o=!1;this.negRange=this.helpers.checkColorRange();var l=t.slice();e.config.yaxis[0].reversed&&(o=!0,l.reverse());for(var h=o?0:l.length-1;o?h<l.length:h>=0;o?h++:h--){var c=i.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:y.escapeString(e.globals.seriesNames[h]),rel:h+1,"data:realIndex":h});if(this.ctx.series.addCollapsedClassToSeries(c,h),e.config.chart.dropShadow.enabled){var d=e.config.chart.dropShadow;new k(this.ctx).dropShadow(c,d,h)}for(var u=0,p=e.config.plotOptions.heatmap.shadeIntensity,g=0;g<l[h].length;g++){var f=this.helpers.getShadeColor(e.config.chart.type,h,g,this.negRange),m=f.color,v=f.colorProps;"image"===e.config.fill.type&&(m=new B(this.ctx).fillPath({seriesNumber:h,dataPointIndex:g,opacity:e.globals.hasNegs?v.percent<0?1-(1+v.percent/100):p+v.percent/100:v.percent/100,patternID:y.randomId(),width:e.config.fill.image.width?e.config.fill.image.width:n,height:e.config.fill.image.height?e.config.fill.image.height:a}));var b=this.rectRadius,x=i.drawRect(u,r,n,a,b);if(x.attr({cx:u,cy:r}),x.node.classList.add("apexcharts-heatmap-rect"),c.add(x),x.attr({fill:m,i:h,index:h,j:g,val:l[h][g],"stroke-width":this.strokeWidth,stroke:e.config.plotOptions.heatmap.useFillColorAsStroke?m:e.globals.stroke.colors[0],color:m}),this.helpers.addListeners(x),e.config.chart.animations.enabled&&!e.globals.dataChanged){var w=1;e.globals.resized||(w=e.config.chart.animations.speed),this.animateHeatMap(x,u,r,n,a,w)}if(e.globals.dataChanged){var S=1;if(this.dynamicAnim.enabled&&e.globals.shouldAnimate){S=this.dynamicAnim.speed;var _=e.globals.previousPaths[h]&&e.globals.previousPaths[h][g]&&e.globals.previousPaths[h][g].color;_||(_="rgba(255, 255, 255, 0)"),this.animateHeatColor(x,y.isColorHex(_)?_:y.rgb2hex(_),y.isColorHex(m)?m:y.rgb2hex(m),S)}}var A=(0,e.config.dataLabels.formatter)(e.globals.series[h][g],{value:e.globals.series[h][g],seriesIndex:h,dataPointIndex:g,w:e}),I=this.helpers.calculateDataLabels({text:A,x:u+n/2,y:r+a/2,i:h,j:g,colorProps:v,series:l});null!==I&&c.add(I),u+=n}r+=a,s.add(c)}var P=e.globals.yAxisScale[0].result.slice();e.config.yaxis[0].reversed?P.unshift(""):P.push(""),e.globals.yAxisScale[0].result=P;var T=e.globals.gridHeight/e.globals.series.length;return e.config.yaxis[0].labels.offsetY=-T/2,s}},{key:"animateHeatMap",value:function(t,e,i,s,n,a){var r=new w(this.ctx);r.animateRect(t,{x:e+s/2,y:i+n/2,width:0,height:0},{x:e,y:i,width:s,height:n},a,(function(){r.animationCompleted(t)}))}},{key:"animateHeatColor",value:function(t,e,i,s){t.attr({fill:e}).animate(s).attr({fill:i})}}]),t}(),Tt=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w}return h(t,[{key:"drawYAxisTexts",value:function(t,e,i,s){var n=this.w,a=n.config.yaxis[0],r=n.globals.yLabelFormatters[0];return new C(this.ctx).drawText({x:t+a.labels.offsetX,y:e+a.labels.offsetY,text:r(s,i),textAnchor:"middle",fontSize:a.labels.style.fontSize,fontFamily:a.labels.style.fontFamily,foreColor:Array.isArray(a.labels.style.colors)?a.labels.style.colors[i]:a.labels.style.colors})}}]),t}(),Et=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w;var i=this.w;this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels,this.lineColorArr=void 0!==i.globals.stroke.colors?i.globals.stroke.colors:i.globals.colors,this.defaultSize=Math.min(i.globals.gridWidth,i.globals.gridHeight),this.centerY=this.defaultSize/2,this.centerX=i.globals.gridWidth/2,"radialBar"===i.config.chart.type?this.fullAngle=360:this.fullAngle=Math.abs(i.config.plotOptions.pie.endAngle-i.config.plotOptions.pie.startAngle),this.initialAngle=i.config.plotOptions.pie.startAngle%this.fullAngle,i.globals.radialSize=this.defaultSize/2.05-i.config.stroke.width-(i.config.chart.sparkline.enabled?0:i.config.chart.dropShadow.blur),this.donutSize=i.globals.radialSize*parseInt(i.config.plotOptions.pie.donut.size,10)/100,this.maxY=0,this.sliceLabels=[],this.sliceSizes=[],this.prevSectorAngleArr=[]}return h(t,[{key:"draw",value:function(t){var e=this,i=this.w,s=new C(this.ctx);if(this.ret=s.group({class:"apexcharts-pie"}),i.globals.noData)return this.ret;for(var n=0,a=0;a<t.length;a++)n+=y.negToZero(t[a]);var r=[],o=s.group();0===n&&(n=1e-5),t.forEach((function(t){e.maxY=Math.max(e.maxY,t)})),i.config.yaxis[0].max&&(this.maxY=i.config.yaxis[0].max),"back"===i.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret);for(var l=0;l<t.length;l++){var h=this.fullAngle*y.negToZero(t[l])/n;r.push(h),"polarArea"===this.chartType?(r[l]=this.fullAngle/t.length,this.sliceSizes.push(i.globals.radialSize*t[l]/this.maxY)):this.sliceSizes.push(i.globals.radialSize)}if(i.globals.dataChanged){for(var c,d=0,u=0;u<i.globals.previousPaths.length;u++)d+=y.negToZero(i.globals.previousPaths[u]);for(var p=0;p<i.globals.previousPaths.length;p++)c=this.fullAngle*y.negToZero(i.globals.previousPaths[p])/d,this.prevSectorAngleArr.push(c)}this.donutSize<0&&(this.donutSize=0);var g=i.config.plotOptions.pie.customScale,f=i.globals.gridWidth/2,m=i.globals.gridHeight/2,v=f-i.globals.gridWidth/2*g,b=m-i.globals.gridHeight/2*g;if("donut"===this.chartType){var x=s.drawCircle(this.donutSize);x.attr({cx:this.centerX,cy:this.centerY,fill:i.config.plotOptions.pie.donut.background?i.config.plotOptions.pie.donut.background:"transparent"}),o.add(x)}var w=this.drawArcs(r,t);if(this.sliceLabels.forEach((function(t){w.add(t)})),o.attr({transform:"translate(".concat(v,", ").concat(b,") scale(").concat(g,")")}),o.add(w),this.ret.add(o),this.donutDataLabels.show){var k=this.renderInnerDataLabels(this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show,translateX:v,translateY:b});this.ret.add(k)}return"front"===i.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret),this.ret}},{key:"drawArcs",value:function(t,e){var i=this.w,s=new k(this.ctx),n=new C(this.ctx),a=new B(this.ctx),r=n.group({class:"apexcharts-slices"}),o=this.initialAngle,l=this.initialAngle,h=this.initialAngle,c=this.initialAngle;this.strokeWidth=i.config.stroke.show?i.config.stroke.width:0;for(var d=0;d<t.length;d++){var u=n.group({class:"apexcharts-series apexcharts-pie-series",seriesName:y.escapeString(i.globals.seriesNames[d]),rel:d+1,"data:realIndex":d});r.add(u),l=c,h=(o=h)+t[d],c=l+this.prevSectorAngleArr[d];var p=h<o?this.fullAngle+h-o:h-o,g=a.fillPath({seriesNumber:d,size:this.sliceSizes[d],value:e[d]}),f=this.getChangedPath(l,c),m=n.drawPath({d:f,stroke:Array.isArray(this.lineColorArr)?this.lineColorArr[d]:this.lineColorArr,strokeWidth:0,fill:g,fillOpacity:i.config.fill.opacity,classes:"apexcharts-pie-area apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(d)});if(m.attr({index:0,j:d}),s.setSelectionFilter(m,0,d),i.config.chart.dropShadow.enabled){var v=i.config.chart.dropShadow;s.dropShadow(m,v,d)}this.addListeners(m,this.donutDataLabels),C.setAttrs(m.node,{"data:angle":p,"data:startAngle":o,"data:strokeWidth":this.strokeWidth,"data:value":e[d]});var b={x:0,y:0};"pie"===this.chartType||"polarArea"===this.chartType?b=y.polarToCartesian(this.centerX,this.centerY,i.globals.radialSize/1.25+i.config.plotOptions.pie.dataLabels.offset,(o+p/2)%this.fullAngle):"donut"===this.chartType&&(b=y.polarToCartesian(this.centerX,this.centerY,(i.globals.radialSize+this.donutSize)/2+i.config.plotOptions.pie.dataLabels.offset,(o+p/2)%this.fullAngle)),u.add(m);var x=0;if(!this.initialAnim||i.globals.resized||i.globals.dataChanged?this.animBeginArr.push(0):(0===(x=p/this.fullAngle*i.config.chart.animations.speed)&&(x=1),this.animDur=x+this.animDur,this.animBeginArr.push(this.animDur)),this.dynamicAnim&&i.globals.dataChanged?this.animatePaths(m,{size:this.sliceSizes[d],endAngle:h,startAngle:o,prevStartAngle:l,prevEndAngle:c,animateStartingPos:!0,i:d,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:i.config.chart.animations.dynamicAnimation.speed}):this.animatePaths(m,{size:this.sliceSizes[d],endAngle:h,startAngle:o,i:d,totalItems:t.length-1,animBeginArr:this.animBeginArr,dur:x}),i.config.plotOptions.pie.expandOnClick&&"polarArea"!==this.chartType&&m.click(this.pieClicked.bind(this,d)),void 0!==i.globals.selectedDataPoints[0]&&i.globals.selectedDataPoints[0].indexOf(d)>-1&&this.pieClicked(d),i.config.dataLabels.enabled){var w=b.x,S=b.y,_=100*p/this.fullAngle+"%";if(0!==p&&i.config.plotOptions.pie.dataLabels.minAngleToShowLabel<t[d]){var A=i.config.dataLabels.formatter;void 0!==A&&(_=A(i.globals.seriesPercent[d][0],{seriesIndex:d,w:i}));var I=i.globals.dataLabels.style.colors[d],P=n.group({class:"apexcharts-datalabels"}),T=n.drawText({x:w,y:S,text:_,textAnchor:"middle",fontSize:i.config.dataLabels.style.fontSize,fontFamily:i.config.dataLabels.style.fontFamily,fontWeight:i.config.dataLabels.style.fontWeight,foreColor:I});if(P.add(T),i.config.dataLabels.dropShadow.enabled){var E=i.config.dataLabels.dropShadow;s.dropShadow(T,E)}T.node.classList.add("apexcharts-pie-label"),i.config.chart.animations.animate&&!1===i.globals.resized&&(T.node.classList.add("apexcharts-pie-label-delay"),T.node.style.animationDelay=i.config.chart.animations.speed/940+"s"),this.sliceLabels.push(P)}}}return r}},{key:"addListeners",value:function(t,e){var i=new C(this.ctx);t.node.addEventListener("mouseenter",i.pathMouseEnter.bind(this,t)),t.node.addEventListener("mouseleave",i.pathMouseLeave.bind(this,t)),t.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,t.node,e)),t.node.addEventListener("mousedown",i.pathMouseDown.bind(this,t)),this.donutDataLabels.total.showAlways||(t.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,t.node,e)),t.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,t.node,e)))}},{key:"animatePaths",value:function(t,e){var i=this.w,s=e.endAngle<e.startAngle?this.fullAngle+e.endAngle-e.startAngle:e.endAngle-e.startAngle,n=s,a=e.startAngle,r=e.startAngle;void 0!==e.prevStartAngle&&void 0!==e.prevEndAngle&&(a=e.prevEndAngle,n=e.prevEndAngle<e.prevStartAngle?this.fullAngle+e.prevEndAngle-e.prevStartAngle:e.prevEndAngle-e.prevStartAngle),e.i===i.config.series.length-1&&(s+r>this.fullAngle?e.endAngle=e.endAngle-(s+r):s+r<this.fullAngle&&(e.endAngle=e.endAngle+(this.fullAngle-(s+r)))),s===this.fullAngle&&(s=this.fullAngle-.01),this.animateArc(t,a,r,s,n,e)}},{key:"animateArc",value:function(t,e,i,s,n,a){var r,o=this,l=this.w,h=new w(this.ctx),c=a.size;(isNaN(e)||isNaN(n))&&(e=i,n=s,a.dur=0);var d=s,u=i,p=e<i?this.fullAngle+e-i:e-i;l.globals.dataChanged&&a.shouldSetPrevPaths&&a.prevEndAngle&&(r=o.getPiePath({me:o,startAngle:a.prevStartAngle,angle:a.prevEndAngle<a.prevStartAngle?this.fullAngle+a.prevEndAngle-a.prevStartAngle:a.prevEndAngle-a.prevStartAngle,size:c}),t.attr({d:r})),0!==a.dur?t.animate(a.dur,l.globals.easing,a.animBeginArr[a.i]).afterAll((function(){"pie"!==o.chartType&&"donut"!==o.chartType&&"polarArea"!==o.chartType||this.animate(l.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":o.strokeWidth}),a.i===l.config.series.length-1&&h.animationCompleted(t)})).during((function(l){d=p+(s-p)*l,a.animateStartingPos&&(d=n+(s-n)*l,u=e-n+(i-(e-n))*l),r=o.getPiePath({me:o,startAngle:u,angle:d,size:c}),t.node.setAttribute("data:pathOrig",r),t.attr({d:r})})):(r=o.getPiePath({me:o,startAngle:u,angle:s,size:c}),a.isTrack||(l.globals.animationEnded=!0),t.node.setAttribute("data:pathOrig",r),t.attr({d:r,"stroke-width":o.strokeWidth}))}},{key:"pieClicked",value:function(t){var e,i=this.w,s=this,n=s.sliceSizes[t]+(i.config.plotOptions.pie.expandOnClick?4:0),a=i.globals.dom.Paper.select(".apexcharts-".concat(s.chartType.toLowerCase(),"-slice-").concat(t)).members[0];if("true"!==a.attr("data:pieClicked")){var r=i.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area");Array.prototype.forEach.call(r,(function(t){t.setAttribute("data:pieClicked","false");var e=t.getAttribute("data:pathOrig");t.setAttribute("d",e)})),a.attr("data:pieClicked","true");var o=parseInt(a.attr("data:startAngle"),10),l=parseInt(a.attr("data:angle"),10);e=s.getPiePath({me:s,startAngle:o,angle:l,size:n}),360!==l&&a.plot(e)}else{a.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(a.node,this.donutDataLabels);var h=a.attr("data:pathOrig");a.attr({d:h})}}},{key:"getChangedPath",value:function(t,e){var i="";return this.dynamicAnim&&this.w.globals.dataChanged&&(i=this.getPiePath({me:this,startAngle:t,angle:e-t,size:this.size})),i}},{key:"getPiePath",value:function(t){var e=t.me,i=t.startAngle,s=t.angle,n=t.size,a=i,r=Math.PI*(a-90)/180,o=s+i;Math.ceil(o)>=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle&&(o=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle-.01),Math.ceil(o)>this.fullAngle&&(o-=this.fullAngle);var l=Math.PI*(o-90)/180,h=e.centerX+n*Math.cos(r),c=e.centerY+n*Math.sin(r),d=e.centerX+n*Math.cos(l),u=e.centerY+n*Math.sin(l),p=y.polarToCartesian(e.centerX,e.centerY,e.donutSize,o),g=y.polarToCartesian(e.centerX,e.centerY,e.donutSize,a),f=s>180?1:0,m=["M",h,c,"A",n,n,0,f,1,d,u];return"donut"===e.chartType?[].concat(m,["L",p.x,p.y,"A",e.donutSize,e.donutSize,0,f,0,g.x,g.y,"L",h,c,"z"]).join(" "):"pie"===e.chartType||"polarArea"===e.chartType?[].concat(m,["L",e.centerX,e.centerY,"L",h,c]).join(" "):[].concat(m).join(" ")}},{key:"drawPolarElements",value:function(t){var e=this.w,i=new U(this.ctx),s=new C(this.ctx),n=new Tt(this.ctx),a=s.group(),r=s.group(),o=i.niceScale(0,Math.ceil(this.maxY),e.config.yaxis[0].tickAmount,0,!0),l=o.result.reverse(),h=o.result.length;this.maxY=o.niceMax;for(var c=e.globals.radialSize,d=c/(h-1),u=0;u<h-1;u++){var p=s.drawCircle(c);if(p.attr({cx:this.centerX,cy:this.centerY,fill:"none","stroke-width":e.config.plotOptions.polarArea.rings.strokeWidth,stroke:e.config.plotOptions.polarArea.rings.strokeColor}),e.config.yaxis[0].show){var g=n.drawYAxisTexts(this.centerX,this.centerY-c+parseInt(e.config.yaxis[0].labels.style.fontSize,10)/2,u,l[u]);r.add(g)}a.add(p),c-=d}this.drawSpokes(t),t.add(a),t.add(r)}},{key:"renderInnerDataLabels",value:function(t,e){var i=this.w,s=new C(this.ctx),n=s.group({class:"apexcharts-datalabels-group",transform:"translate(".concat(e.translateX?e.translateX:0,", ").concat(e.translateY?e.translateY:0,") scale(").concat(i.config.plotOptions.pie.customScale,")")}),a=t.total.show;n.node.style.opacity=e.opacity;var r,o,l=e.centerX,h=e.centerY;r=void 0===t.name.color?i.globals.colors[0]:t.name.color;var c=t.name.fontSize,d=t.name.fontFamily,u=t.name.fontWeight;o=void 0===t.value.color?i.config.chart.foreColor:t.value.color;var p=t.value.formatter,g="",f="";if(a?(r=t.total.color,c=t.total.fontSize,d=t.total.fontFamily,u=t.total.fontWeight,f=t.total.label,g=t.total.formatter(i)):1===i.globals.series.length&&(g=p(i.globals.series[0],i),f=i.globals.seriesNames[0]),f&&(f=t.name.formatter(f,t.total.show,i)),t.name.show){var m=s.drawText({x:l,y:h+parseFloat(t.name.offsetY),text:f,textAnchor:"middle",foreColor:r,fontSize:c,fontWeight:u,fontFamily:d});m.node.classList.add("apexcharts-datalabel-label"),n.add(m)}if(t.value.show){var v=t.name.show?parseFloat(t.value.offsetY)+16:t.value.offsetY,b=s.drawText({x:l,y:h+v,text:g,textAnchor:"middle",foreColor:o,fontWeight:t.value.fontWeight,fontSize:t.value.fontSize,fontFamily:t.value.fontFamily});b.node.classList.add("apexcharts-datalabel-value"),n.add(b)}return n}},{key:"printInnerLabels",value:function(t,e,i,s){var n,a=this.w;s?n=void 0===t.name.color?a.globals.colors[parseInt(s.parentNode.getAttribute("rel"),10)-1]:t.name.color:a.globals.series.length>1&&t.total.show&&(n=t.total.color);var r=a.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),o=a.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value");i=(0,t.value.formatter)(i,a),s||"function"!=typeof t.total.formatter||(i=t.total.formatter(a));var l=e===t.total.label;e=t.name.formatter(e,l,a),null!==r&&(r.textContent=e),null!==o&&(o.textContent=i),null!==r&&(r.style.fill=n)}},{key:"printDataLabelsInner",value:function(t,e){var i=this.w,s=t.getAttribute("data:value"),n=i.globals.seriesNames[parseInt(t.parentNode.getAttribute("rel"),10)-1];i.globals.series.length>1&&this.printInnerLabels(e,n,s,t);var a=i.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");null!==a&&(a.style.opacity=1)}},{key:"drawSpokes",value:function(t){var e=this,i=this.w,s=new C(this.ctx),n=i.config.plotOptions.polarArea.spokes;if(0!==n.strokeWidth){for(var a=[],r=360/i.globals.series.length,o=0;o<i.globals.series.length;o++)a.push(y.polarToCartesian(this.centerX,this.centerY,i.globals.radialSize,i.config.plotOptions.pie.startAngle+r*o));a.forEach((function(i,a){var r=s.drawLine(i.x,i.y,e.centerX,e.centerY,Array.isArray(n.connectorColors)?n.connectorColors[a]:n.connectorColors);t.add(r)}))}}},{key:"revertDataLabelsInner",value:function(t,e,i){var s=this,n=this.w,a=n.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group"),r=!1,o=n.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area"),l=function(t){var i=t.makeSliceOut,n=t.printLabel;Array.prototype.forEach.call(o,(function(t){"true"===t.getAttribute("data:pieClicked")&&(i&&(r=!0),n&&s.printDataLabelsInner(t,e))}))};if(l({makeSliceOut:!0,printLabel:!1}),e.total.show&&n.globals.series.length>1)r&&!e.total.showAlways?l({makeSliceOut:!1,printLabel:!0}):this.printInnerLabels(e,e.total.label,e.total.formatter(n));else if(l({makeSliceOut:!1,printLabel:!0}),!r)if(n.globals.selectedDataPoints.length&&n.globals.series.length>1)if(n.globals.selectedDataPoints[0].length>0){var h=n.globals.selectedDataPoints[0],c=n.globals.dom.baseEl.querySelector(".apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(h));this.printDataLabelsInner(c,e)}else a&&n.globals.selectedDataPoints.length&&0===n.globals.selectedDataPoints[0].length&&(a.style.opacity=0);else a&&n.globals.series.length>1&&(a.style.opacity=0)}}]),t}(),Lt=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;var i=this.w;this.graphics=new C(this.ctx),this.lineColorArr=void 0!==i.globals.stroke.colors?i.globals.stroke.colors:i.globals.colors,this.defaultSize=i.globals.svgHeight<i.globals.svgWidth?i.globals.gridHeight+1.5*i.globals.goldenPadding:i.globals.gridWidth,this.isLog=i.config.yaxis[0].logarithmic,this.coreUtils=new S(this.ctx),this.maxValue=this.isLog?this.coreUtils.getLogVal(i.globals.maxY,0):i.globals.maxY,this.minValue=this.isLog?this.coreUtils.getLogVal(this.w.globals.minY,0):i.globals.minY,this.polygons=i.config.plotOptions.radar.polygons,this.strokeWidth=i.config.stroke.show?i.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-i.config.chart.dropShadow.blur,i.config.xaxis.labels.show&&(this.size=this.size-i.globals.xAxisLabelsWidth/1.75),void 0!==i.config.plotOptions.radar.size&&(this.size=i.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}return h(t,[{key:"draw",value:function(t){var e=this,i=this.w,s=new B(this.ctx),n=[],r=new W(this.ctx);t.length&&(this.dataPointsLen=t[i.globals.maxValsInArrayIndex].length),this.disAngle=2*Math.PI/this.dataPointsLen;var o=i.globals.gridWidth/2,l=i.globals.gridHeight/2,h=o+i.config.plotOptions.radar.offsetX,c=l+i.config.plotOptions.radar.offsetY,d=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:"translate(".concat(h||0,", ").concat(c||0,")")}),u=[],p=null,g=null;if(this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),t.forEach((function(t,o){var l=t.length===i.globals.dataPoints,h=e.graphics.group().attr({class:"apexcharts-series","data:longestSeries":l,seriesName:y.escapeString(i.globals.seriesNames[o]),rel:o+1,"data:realIndex":o});e.dataRadiusOfPercent[o]=[],e.dataRadius[o]=[],e.angleArr[o]=[],t.forEach((function(t,i){var s=Math.abs(e.maxValue-e.minValue);t+=Math.abs(e.minValue),e.isLog&&(t=e.coreUtils.getLogVal(t,0)),e.dataRadiusOfPercent[o][i]=t/s,e.dataRadius[o][i]=e.dataRadiusOfPercent[o][i]*e.size,e.angleArr[o][i]=i*e.disAngle})),u=e.getDataPointsPos(e.dataRadius[o],e.angleArr[o]);var c=e.createPaths(u,{x:0,y:0});p=e.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),g=e.graphics.group({class:"apexcharts-datalabels","data:realIndex":o}),i.globals.delayedElements.push({el:p.node,index:o});var d={i:o,realIndex:o,animationDelay:o,initialSpeed:i.config.chart.animations.speed,dataChangeSpeed:i.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:i.globals.stroke.colors[o],strokeLineCap:i.config.stroke.lineCap},f=null;i.globals.previousPaths.length>0&&(f=e.getPreviousPath(o));for(var m=0;m<c.linePathsTo.length;m++){var v=e.graphics.renderPaths(a(a({},d),{},{pathFrom:null===f?c.linePathsFrom[m]:f,pathTo:c.linePathsTo[m],strokeWidth:Array.isArray(e.strokeWidth)?e.strokeWidth[o]:e.strokeWidth,fill:"none",drawShadow:!1}));h.add(v);var b=s.fillPath({seriesNumber:o}),x=e.graphics.renderPaths(a(a({},d),{},{pathFrom:null===f?c.areaPathsFrom[m]:f,pathTo:c.areaPathsTo[m],strokeWidth:0,fill:b,drawShadow:!1}));if(i.config.chart.dropShadow.enabled){var w=new k(e.ctx),C=i.config.chart.dropShadow;w.dropShadow(x,Object.assign({},C,{noUserSpaceOnUse:!0}),o)}h.add(x)}t.forEach((function(t,s){var n=new H(e.ctx).getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:o,dataPointIndex:s}),l=e.graphics.drawMarker(u[s].x,u[s].y,n);l.attr("rel",s),l.attr("j",s),l.attr("index",o),l.node.setAttribute("default-marker-size",n.pSize);var c=e.graphics.group({class:"apexcharts-series-markers"});c&&c.add(l),p.add(c),h.add(p);var d=i.config.dataLabels;if(d.enabled){var f=d.formatter(i.globals.series[o][s],{seriesIndex:o,dataPointIndex:s,w:i});r.plotDataLabelsText({x:u[s].x,y:u[s].y,text:f,textAnchor:"middle",i:o,j:o,parent:g,offsetCorrection:!1,dataLabelsConfig:a({},d)})}h.add(g)})),n.push(h)})),this.drawPolygons({parent:d}),i.config.xaxis.labels.show){var f=this.drawXAxisTexts();d.add(f)}return n.forEach((function(t){d.add(t)})),d.add(this.yaxisLabels),d}},{key:"drawPolygons",value:function(t){for(var e=this,i=this.w,s=t.parent,n=new Tt(this.ctx),a=i.globals.yAxisScale[0].result.reverse(),r=a.length,o=[],l=this.size/(r-1),h=0;h<r;h++)o[h]=l*h;o.reverse();var c=[],d=[];o.forEach((function(t,i){var s=y.getPolygonPos(t,e.dataPointsLen),n="";s.forEach((function(t,s){if(0===i){var a=e.graphics.drawLine(t.x,t.y,0,0,Array.isArray(e.polygons.connectorColors)?e.polygons.connectorColors[s]:e.polygons.connectorColors);d.push(a)}0===s&&e.yaxisLabelsTextsPos.push({x:t.x,y:t.y}),n+=t.x+","+t.y+" "})),c.push(n)})),c.forEach((function(t,n){var a=e.polygons.strokeColors,r=e.polygons.strokeWidth,o=e.graphics.drawPolygon(t,Array.isArray(a)?a[n]:a,Array.isArray(r)?r[n]:r,i.globals.radarPolygons.fill.colors[n]);s.add(o)})),d.forEach((function(t){s.add(t)})),i.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach((function(t,i){var s=n.drawYAxisTexts(t.x,t.y,i,a[i]);e.yaxisLabels.add(s)}))}},{key:"drawXAxisTexts",value:function(){var t=this,e=this.w,i=e.config.xaxis.labels,s=this.graphics.group({class:"apexcharts-xaxis"}),n=y.getPolygonPos(this.size,this.dataPointsLen);return e.globals.labels.forEach((function(r,o){var l=e.config.xaxis.labels.formatter,h=new W(t.ctx);if(n[o]){var c=t.getTextPos(n[o],t.size),d=l(r,{seriesIndex:-1,dataPointIndex:o,w:e});h.plotDataLabelsText({x:c.newX,y:c.newY,text:d,textAnchor:c.textAnchor,i:o,j:o,parent:s,color:Array.isArray(i.style.colors)&&i.style.colors[o]?i.style.colors[o]:"#a8a8a8",dataLabelsConfig:a({textAnchor:c.textAnchor,dropShadow:{enabled:!1}},i),offsetCorrection:!1})}})),s}},{key:"createPaths",value:function(t,e){var i=this,s=[],n=[],a=[],r=[];if(t.length){n=[this.graphics.move(e.x,e.y)],r=[this.graphics.move(e.x,e.y)];var o=this.graphics.move(t[0].x,t[0].y),l=this.graphics.move(t[0].x,t[0].y);t.forEach((function(e,s){o+=i.graphics.line(e.x,e.y),l+=i.graphics.line(e.x,e.y),s===t.length-1&&(o+="Z",l+="Z")})),s.push(o),a.push(l)}return{linePathsFrom:n,linePathsTo:s,areaPathsFrom:r,areaPathsTo:a}}},{key:"getTextPos",value:function(t,e){var i="middle",s=t.x,n=t.y;return Math.abs(t.x)>=10?t.x>0?(i="start",s+=10):t.x<0&&(i="end",s-=10):i="middle",Math.abs(t.y)>=e-10&&(t.y<0?n-=10:t.y>0&&(n+=10)),{textAnchor:i,newX:s,newY:n}}},{key:"getPreviousPath",value:function(t){for(var e=this.w,i=null,s=0;s<e.globals.previousPaths.length;s++){var n=e.globals.previousPaths[s];n.paths.length>0&&parseInt(n.realIndex,10)===parseInt(t,10)&&void 0!==e.globals.previousPaths[s].paths[0]&&(i=e.globals.previousPaths[s].paths[0].d)}return i}},{key:"getDataPointsPos",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.dataPointsLen;t=t||[],e=e||[];for(var s=[],n=0;n<i;n++){var a={};a.x=t[n]*Math.sin(e[n]),a.y=-t[n]*Math.cos(e[n]),s.push(a)}return s}}]),t}(),Mt=function(t){d(i,t);var e=f(i);function i(t){var s;o(this,i),(s=e.call(this,t)).ctx=t,s.w=t.w,s.animBeginArr=[0],s.animDur=0;var n=s.w;return s.startAngle=n.config.plotOptions.radialBar.startAngle,s.endAngle=n.config.plotOptions.radialBar.endAngle,s.totalAngle=Math.abs(n.config.plotOptions.radialBar.endAngle-n.config.plotOptions.radialBar.startAngle),s.trackStartAngle=n.config.plotOptions.radialBar.track.startAngle,s.trackEndAngle=n.config.plotOptions.radialBar.track.endAngle,s.donutDataLabels=s.w.config.plotOptions.radialBar.dataLabels,s.radialDataLabels=s.donutDataLabels,s.trackStartAngle||(s.trackStartAngle=s.startAngle),s.trackEndAngle||(s.trackEndAngle=s.endAngle),360===s.endAngle&&(s.endAngle=359.99),s.margin=parseInt(n.config.plotOptions.radialBar.track.margin,10),s}return h(i,[{key:"draw",value:function(t){var e=this.w,i=new C(this.ctx),s=i.group({class:"apexcharts-radialbar"});if(e.globals.noData)return s;var n=i.group(),a=this.defaultSize/2,r=e.globals.gridWidth/2,o=this.defaultSize/2.05;e.config.chart.sparkline.enabled||(o=o-e.config.stroke.width-e.config.chart.dropShadow.blur);var l=e.globals.fill.colors;if(e.config.plotOptions.radialBar.track.show){var h=this.drawTracks({size:o,centerX:r,centerY:a,colorArr:l,series:t});n.add(h)}var c=this.drawArcs({size:o,centerX:r,centerY:a,colorArr:l,series:t}),d=360;e.config.plotOptions.radialBar.startAngle<0&&(d=this.totalAngle);var u=(360-d)/360;if(e.globals.radialSize=o-o*u,this.radialDataLabels.value.show){var p=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY);e.globals.radialSize+=p*u}return n.add(c.g),"front"===e.config.plotOptions.radialBar.hollow.position&&(c.g.add(c.elHollow),c.dataLabels&&c.g.add(c.dataLabels)),s.add(n),s}},{key:"drawTracks",value:function(t){var e=this.w,i=new C(this.ctx),s=i.group({class:"apexcharts-tracks"}),n=new k(this.ctx),a=new B(this.ctx),r=this.getStrokeWidth(t);t.size=t.size-r/2;for(var o=0;o<t.series.length;o++){var l=i.group({class:"apexcharts-radialbar-track apexcharts-track"});s.add(l),l.attr({rel:o+1}),t.size=t.size-r-this.margin;var h=e.config.plotOptions.radialBar.track,c=a.fillPath({seriesNumber:0,size:t.size,fillColors:Array.isArray(h.background)?h.background[o]:h.background,solid:!0}),d=this.trackStartAngle,u=this.trackEndAngle;Math.abs(u)+Math.abs(d)>=360&&(u=360-Math.abs(this.startAngle)-.1);var p=i.drawPath({d:"",stroke:c,strokeWidth:r*parseInt(h.strokeWidth,10)/100,fill:"none",strokeOpacity:h.opacity,classes:"apexcharts-radialbar-area"});if(h.dropShadow.enabled){var g=h.dropShadow;n.dropShadow(p,g)}l.add(p),p.attr("id","apexcharts-radialbarTrack-"+o),this.animatePaths(p,{centerX:t.centerX,centerY:t.centerY,endAngle:u,startAngle:d,size:t.size,i:o,totalItems:2,animBeginArr:0,dur:0,isTrack:!0,easing:e.globals.easing})}return s}},{key:"drawArcs",value:function(t){var e=this.w,i=new C(this.ctx),s=new B(this.ctx),n=new k(this.ctx),a=i.group(),r=this.getStrokeWidth(t);t.size=t.size-r/2;var o=e.config.plotOptions.radialBar.hollow.background,l=t.size-r*t.series.length-this.margin*t.series.length-r*parseInt(e.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,h=l-e.config.plotOptions.radialBar.hollow.margin;void 0!==e.config.plotOptions.radialBar.hollow.image&&(o=this.drawHollowImage(t,a,l,o));var c=this.drawHollow({size:h,centerX:t.centerX,centerY:t.centerY,fill:o||"transparent"});if(e.config.plotOptions.radialBar.hollow.dropShadow.enabled){var d=e.config.plotOptions.radialBar.hollow.dropShadow;n.dropShadow(c,d)}var u=1;!this.radialDataLabels.total.show&&e.globals.series.length>1&&(u=0);var p=null;this.radialDataLabels.show&&(p=this.renderInnerDataLabels(this.radialDataLabels,{hollowSize:l,centerX:t.centerX,centerY:t.centerY,opacity:u})),"back"===e.config.plotOptions.radialBar.hollow.position&&(a.add(c),p&&a.add(p));var g=!1;e.config.plotOptions.radialBar.inverseOrder&&(g=!0);for(var f=g?t.series.length-1:0;g?f>=0:f<t.series.length;g?f--:f++){var m=i.group({class:"apexcharts-series apexcharts-radial-series",seriesName:y.escapeString(e.globals.seriesNames[f])});a.add(m),m.attr({rel:f+1,"data:realIndex":f}),this.ctx.series.addCollapsedClassToSeries(m,f),t.size=t.size-r-this.margin;var v=s.fillPath({seriesNumber:f,size:t.size,value:t.series[f]}),b=this.startAngle,x=void 0,w=y.negToZero(t.series[f]>100?100:t.series[f])/100,S=Math.round(this.totalAngle*w)+this.startAngle,_=void 0;e.globals.dataChanged&&(x=this.startAngle,_=Math.round(this.totalAngle*y.negToZero(e.globals.previousPaths[f])/100)+x),Math.abs(S)+Math.abs(b)>=360&&(S-=.01),Math.abs(_)+Math.abs(x)>=360&&(_-=.01);var A=S-b,I=Array.isArray(e.config.stroke.dashArray)?e.config.stroke.dashArray[f]:e.config.stroke.dashArray,P=i.drawPath({d:"",stroke:v,strokeWidth:r,fill:"none",fillOpacity:e.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+f,strokeDashArray:I});if(C.setAttrs(P.node,{"data:angle":A,"data:value":t.series[f]}),e.config.chart.dropShadow.enabled){var T=e.config.chart.dropShadow;n.dropShadow(P,T,f)}n.setSelectionFilter(P,0,f),this.addListeners(P,this.radialDataLabels),m.add(P),P.attr({index:0,j:f});var E=0;!this.initialAnim||e.globals.resized||e.globals.dataChanged||(E=e.config.chart.animations.speed),e.globals.dataChanged&&(E=e.config.chart.animations.dynamicAnimation.speed),this.animDur=E/(1.2*t.series.length)+this.animDur,this.animBeginArr.push(this.animDur),this.animatePaths(P,{centerX:t.centerX,centerY:t.centerY,endAngle:S,startAngle:b,prevEndAngle:_,prevStartAngle:x,size:t.size,i:f,totalItems:2,animBeginArr:this.animBeginArr,dur:E,shouldSetPrevPaths:!0,easing:e.globals.easing})}return{g:a,elHollow:c,dataLabels:p}}},{key:"drawHollow",value:function(t){var e=new C(this.ctx).drawCircle(2*t.size);return e.attr({class:"apexcharts-radialbar-hollow",cx:t.centerX,cy:t.centerY,r:t.size,fill:t.fill}),e}},{key:"drawHollowImage",value:function(t,e,i,s){var n=this.w,a=new B(this.ctx),r=y.randomId(),o=n.config.plotOptions.radialBar.hollow.image;if(n.config.plotOptions.radialBar.hollow.imageClipped)a.clippedImgArea({width:i,height:i,image:o,patternID:"pattern".concat(n.globals.cuid).concat(r)}),s="url(#pattern".concat(n.globals.cuid).concat(r,")");else{var l=n.config.plotOptions.radialBar.hollow.imageWidth,h=n.config.plotOptions.radialBar.hollow.imageHeight;if(void 0===l&&void 0===h){var c=n.globals.dom.Paper.image(o).loaded((function(e){this.move(t.centerX-e.width/2+n.config.plotOptions.radialBar.hollow.imageOffsetX,t.centerY-e.height/2+n.config.plotOptions.radialBar.hollow.imageOffsetY)}));e.add(c)}else{var d=n.globals.dom.Paper.image(o).loaded((function(e){this.move(t.centerX-l/2+n.config.plotOptions.radialBar.hollow.imageOffsetX,t.centerY-h/2+n.config.plotOptions.radialBar.hollow.imageOffsetY),this.size(l,h)}));e.add(d)}}return s}},{key:"getStrokeWidth",value:function(t){var e=this.w;return t.size*(100-parseInt(e.config.plotOptions.radialBar.hollow.size,10))/100/(t.series.length+1)-this.margin}}]),i}(Et),Ot=function(t){d(i,t);var e=f(i);function i(){return o(this,i),e.apply(this,arguments)}return h(i,[{key:"draw",value:function(t,e){var i=this.w,s=new C(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=t,this.seriesRangeStart=i.globals.seriesRangeStart,this.seriesRangeEnd=i.globals.seriesRangeEnd,this.barHelpers.initVariables(t);for(var n=s.group({class:"apexcharts-rangebar-series apexcharts-plot-series"}),r=0;r<t.length;r++){var o,l,h,c=void 0,d=void 0,u=void 0,p=i.globals.comboCharts?e[r]:r,g=s.group({class:"apexcharts-series",seriesName:y.escapeString(i.globals.seriesNames[p]),rel:r+1,"data:realIndex":p});this.ctx.series.addCollapsedClassToSeries(g,p),t[r].length>0&&(this.visibleI=this.visibleI+1);var f=0,m=0;this.yRatio.length>1&&(this.yaxisIndex=p);var v=this.barHelpers.initialPositions();d=v.y,h=v.zeroW,c=v.x,m=v.barWidth,o=v.xDivision,l=v.zeroH;for(var b=s.group({class:"apexcharts-datalabels","data:realIndex":p}),x=s.group({class:"apexcharts-rangebar-goals-markers",style:"pointer-events: none"}),w=0;w<i.globals.dataPoints;w++){var k=this.barHelpers.getStrokeWidth(r,w,p),S=this.seriesRangeStart[r][w],_=this.seriesRangeEnd[r][w],A=null,I=null,P={x:c,y:d,strokeWidth:k,elSeries:g};if(u=v.yDivision,f=v.barHeight,this.isHorizontal){I=d+f*this.visibleI;var T=this.seriesLen;i.config.plotOptions.bar.rangeBarGroupRows&&(T=1);var E=(u-f*T)/2;if(void 0===i.config.series[r].data[w])break;if(i.config.series[r].data[w].x){var L=this.detectOverlappingBars({i:r,j:w,barYPosition:I,srty:E,barHeight:f,yDivision:u,initPositions:v});f=L.barHeight,I=L.barYPosition}m=(A=this.drawRangeBarPaths(a({indexes:{i:r,j:w,realIndex:p},barHeight:f,barYPosition:I,zeroW:h,yDivision:u,y1:S,y2:_},P))).barWidth}else f=(A=this.drawRangeColumnPaths(a({indexes:{i:r,j:w,realIndex:p},zeroH:l,barWidth:m,xDivision:o},P))).barHeight;var M=this.barHelpers.drawGoalLine({barXPosition:A.barXPosition,barYPosition:I,goalX:A.goalX,goalY:A.goalY,barHeight:f,barWidth:m});M&&x.add(M),d=A.y,c=A.x;var O=this.barHelpers.getPathFillColor(t,r,w,p),D=i.globals.stroke.colors[p];this.renderSeries({realIndex:p,pathFill:O,lineFill:D,j:w,i:r,x:c,y:d,y1:S,y2:_,pathFrom:A.pathFrom,pathTo:A.pathTo,strokeWidth:k,elSeries:g,series:t,barHeight:f,barYPosition:I,barWidth:m,elDataLabelsWrap:b,elGoalsMarkers:x,visibleSeries:this.visibleI,type:"rangebar"})}n.add(g)}return n}},{key:"detectOverlappingBars",value:function(t){var e=t.i,i=t.j,s=t.barYPosition,n=t.srty,a=t.barHeight,r=t.yDivision,o=t.initPositions,l=this.w,h=[],c=l.config.series[e].data[i].rangeName,d=l.config.series[e].data[i].x,u=l.globals.labels.indexOf(d),p=l.globals.seriesRange[e].findIndex((function(t){return t.x===d&&t.overlaps.length>0}));return s=l.config.plotOptions.bar.rangeBarGroupRows?n+r*u:n+a*this.visibleI+r*u,p>-1&&!l.config.plotOptions.bar.rangeBarOverlap&&(h=l.globals.seriesRange[e][p].overlaps).indexOf(c)>-1&&(s=(a=o.barHeight/h.length)*this.visibleI+r*(100-parseInt(this.barOptions.barHeight,10))/100/2+a*(this.visibleI+h.indexOf(c))+r*u),{barYPosition:s,barHeight:a}}},{key:"drawRangeColumnPaths",value:function(t){var e=t.indexes,i=t.x;t.strokeWidth;var s=t.xDivision,n=t.barWidth,a=t.zeroH,r=this.w,o=e.i,l=e.j,h=this.yRatio[this.yaxisIndex],c=e.realIndex,d=this.getRangeValue(c,l),u=Math.min(d.start,d.end),p=Math.max(d.start,d.end);r.globals.isXNumeric&&(i=(r.globals.seriesX[o][l]-r.globals.minX)/this.xRatio-n/2);var g=i+n*this.visibleI;void 0===this.series[o][l]||null===this.series[o][l]?u=a:(u=a-u/h,p=a-p/h);var f=Math.abs(p-u),m=this.barHelpers.getColumnPaths({barXPosition:g,barWidth:n,y1:u,y2:p,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,realIndex:e.realIndex,i:c,j:l,w:r});return r.globals.isXNumeric||(i+=s),{pathTo:m.pathTo,pathFrom:m.pathFrom,barHeight:f,x:i,y:p,goalY:this.barHelpers.getGoalValues("y",null,a,o,l),barXPosition:g}}},{key:"drawRangeBarPaths",value:function(t){var e=t.indexes,i=t.y,s=t.y1,n=t.y2,a=t.yDivision,r=t.barHeight,o=t.barYPosition,l=t.zeroW,h=this.w,c=l+s/this.invertedYRatio,d=l+n/this.invertedYRatio,u=Math.abs(d-c),p=this.barHelpers.getBarpaths({barYPosition:o,barHeight:r,x1:c,x2:d,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:e.realIndex,realIndex:e.realIndex,j:e.j,w:h});return h.globals.isXNumeric||(i+=a),{pathTo:p.pathTo,pathFrom:p.pathFrom,barWidth:u,x:d,goalX:this.barHelpers.getGoalValues("x",l,null,e.realIndex,e.j),y:i}}},{key:"getRangeValue",value:function(t,e){var i=this.w;return{start:i.globals.seriesRangeStart[t][e],end:i.globals.seriesRangeEnd[t][e]}}}]),i}(St),Dt=function(){function t(e){o(this,t),this.w=e.w,this.lineCtx=e}return h(t,[{key:"sameValueSeriesFix",value:function(t,e){var i=this.w;if(("gradient"===i.config.fill.type||"gradient"===i.config.fill.type[t])&&new S(this.lineCtx.ctx,i).seriesHaveSameValues(t)){var s=e[t].slice();s[s.length-1]=s[s.length-1]+1e-6,e[t]=s}return e}},{key:"calculatePoints",value:function(t){var e=t.series,i=t.realIndex,s=t.x,n=t.y,a=t.i,r=t.j,o=t.prevY,l=this.w,h=[],c=[];if(0===r){var d=this.lineCtx.categoryAxisCorrection+l.config.markers.offsetX;l.globals.isXNumeric&&(d=(l.globals.seriesX[i][0]-l.globals.minX)/this.lineCtx.xRatio+l.config.markers.offsetX),h.push(d),c.push(y.isNumber(e[a][0])?o+l.config.markers.offsetY:null),h.push(s+l.config.markers.offsetX),c.push(y.isNumber(e[a][r+1])?n+l.config.markers.offsetY:null)}else h.push(s+l.config.markers.offsetX),c.push(y.isNumber(e[a][r+1])?n+l.config.markers.offsetY:null);return{x:h,y:c}}},{key:"checkPreviousPaths",value:function(t){for(var e=t.pathFromLine,i=t.pathFromArea,s=t.realIndex,n=this.w,a=0;a<n.globals.previousPaths.length;a++){var r=n.globals.previousPaths[a];("line"===r.type||"area"===r.type)&&r.paths.length>0&&parseInt(r.realIndex,10)===parseInt(s,10)&&("line"===r.type?(this.lineCtx.appendPathFrom=!1,e=n.globals.previousPaths[a].paths[0].d):"area"===r.type&&(this.lineCtx.appendPathFrom=!1,i=n.globals.previousPaths[a].paths[0].d,n.config.stroke.show&&n.globals.previousPaths[a].paths[1]&&(e=n.globals.previousPaths[a].paths[1].d)))}return{pathFromLine:e,pathFromArea:i}}},{key:"determineFirstPrevY",value:function(t){var e,i=t.i,s=t.series,n=t.prevY,a=t.lineYPosition,r=this.w;if(void 0!==(null===(e=s[i])||void 0===e?void 0:e[0]))n=(a=r.config.chart.stacked&&i>0?this.lineCtx.prevSeriesY[i-1][0]:this.lineCtx.zeroY)-s[i][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]+2*(this.lineCtx.isReversed?s[i][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]:0);else if(r.config.chart.stacked&&i>0&&void 0===s[i][0])for(var o=i-1;o>=0;o--)if(null!==s[o][0]&&void 0!==s[o][0]){n=a=this.lineCtx.prevSeriesY[o][0];break}return{prevY:n,lineYPosition:a}}}]),t}(),Rt=function(){function t(e,i,s){o(this,t),this.ctx=e,this.w=e.w,this.xyRatios=i,this.pointsChart=!("bubble"!==this.w.config.chart.type&&"scatter"!==this.w.config.chart.type)||s,this.scatter=new $(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new Dt(this),this.markers=new H(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}return h(t,[{key:"draw",value:function(t,e,i,s){var n=this.w,r=new C(this.ctx),o=n.globals.comboCharts?e:n.config.chart.type,l=r.group({class:"apexcharts-".concat(o,"-series apexcharts-plot-series")}),h=new S(this.ctx,n);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,t=h.getLogSeries(t),this.yRatio=h.getLogYRatios(this.yRatio);for(var c=[],d=0;d<t.length;d++){t=this.lineHelpers.sameValueSeriesFix(d,t);var u=n.globals.comboCharts?i[d]:d;this._initSerieVariables(t,d,u);var p=[],g=[],f=n.globals.padHorizontal+this.categoryAxisCorrection;this.ctx.series.addCollapsedClassToSeries(this.elSeries,u),n.globals.isXNumeric&&n.globals.seriesX.length>0&&(f=(n.globals.seriesX[u][0]-n.globals.minX)/this.xRatio),g.push(f);var m,v=f,b=void 0,x=v,y=this.zeroY,w=this.zeroY;y=this.lineHelpers.determineFirstPrevY({i:d,series:t,prevY:y,lineYPosition:0}).prevY,p.push(y),m=y,"rangeArea"===o&&(b=w=this.lineHelpers.determineFirstPrevY({i:d,series:s,prevY:w,lineYPosition:0}).prevY);var k={type:o,series:t,realIndex:u,i:d,x:f,y:1,pX:v,pY:m,pathsFrom:this._calculatePathsFrom({type:o,series:t,i:d,realIndex:u,prevX:x,prevY:y,prevY2:w}),linePaths:[],areaPaths:[],seriesIndex:i,lineYPosition:0,xArrj:g,yArrj:p,seriesRangeEnd:s},_=this._iterateOverDataPoints(a(a({},k),{},{iterations:"rangeArea"===o?t[d].length-1:void 0,isRangeStart:!0}));if("rangeArea"===o){var A=this._calculatePathsFrom({series:s,i:d,realIndex:u,prevX:x,prevY:w}),I=this._iterateOverDataPoints(a(a({},k),{},{series:s,pY:b,pathsFrom:A,iterations:s[d].length-1,isRangeStart:!1}));_.linePaths[0]=I.linePath+_.linePath,_.pathFromLine=I.pathFromLine+_.pathFromLine}this._handlePaths({type:o,realIndex:u,i:d,paths:_}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),c.push(this.elSeries)}if(n.config.chart.stacked)for(var P=c.length;P>0;P--)l.add(c[P-1]);else for(var T=0;T<c.length;T++)l.add(c[T]);return l}},{key:"_initSerieVariables",value:function(t,e,i){var s=this.w,n=new C(this.ctx);this.xDivision=s.globals.gridWidth/(s.globals.dataPoints-("on"===s.config.xaxis.tickPlacement?1:0)),this.strokeWidth=Array.isArray(s.config.stroke.width)?s.config.stroke.width[i]:s.config.stroke.width,this.yRatio.length>1&&(this.yaxisIndex=i),this.isReversed=s.config.yaxis[this.yaxisIndex]&&s.config.yaxis[this.yaxisIndex].reversed,this.zeroY=s.globals.gridHeight-this.baseLineY[this.yaxisIndex]-(this.isReversed?s.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),this.areaBottomY=this.zeroY,(this.zeroY>s.globals.gridHeight||"end"===s.config.plotOptions.area.fillTo)&&(this.areaBottomY=s.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=n.group({class:"apexcharts-series",seriesName:y.escapeString(s.globals.seriesNames[i])}),this.elPointsMain=n.group({class:"apexcharts-series-markers-wrap","data:realIndex":i}),this.elDataLabelsWrap=n.group({class:"apexcharts-datalabels","data:realIndex":i});var a=t[e].length===s.globals.dataPoints;this.elSeries.attr({"data:longestSeries":a,rel:e+1,"data:realIndex":i}),this.appendPathFrom=!0}},{key:"_calculatePathsFrom",value:function(t){var e,i,s,n,a=t.type,r=t.series,o=t.i,l=t.realIndex,h=t.prevX,c=t.prevY,d=t.prevY2,u=this.w,p=new C(this.ctx);if(null===r[o][0]){for(var g=0;g<r[o].length;g++)if(null!==r[o][g]){h=this.xDivision*g,c=this.zeroY-r[o][g]/this.yRatio[this.yaxisIndex],e=p.move(h,c),i=p.move(h,this.areaBottomY);break}}else e=p.move(h,c),"rangeArea"===a&&(e=p.move(h,d)+p.line(h,c)),i=p.move(h,this.areaBottomY)+p.line(h,c);if(s=p.move(-1,this.zeroY)+p.line(-1,this.zeroY),n=p.move(-1,this.zeroY)+p.line(-1,this.zeroY),u.globals.previousPaths.length>0){var f=this.lineHelpers.checkPreviousPaths({pathFromLine:s,pathFromArea:n,realIndex:l});s=f.pathFromLine,n=f.pathFromArea}return{prevX:h,prevY:c,linePath:e,areaPath:i,pathFromLine:s,pathFromArea:n}}},{key:"_handlePaths",value:function(t){var e=t.type,i=t.realIndex,s=t.i,n=t.paths,r=this.w,o=new C(this.ctx),l=new B(this.ctx);this.prevSeriesY.push(n.yArrj),r.globals.seriesXvalues[i]=n.xArrj,r.globals.seriesYvalues[i]=n.yArrj;var h=r.config.forecastDataPoints;if(h.count>0&&"rangeArea"!==e){var c=r.globals.seriesXvalues[i][r.globals.seriesXvalues[i].length-h.count-1],d=o.drawRect(c,0,r.globals.gridWidth,r.globals.gridHeight,0);r.globals.dom.elForecastMask.appendChild(d.node);var u=o.drawRect(0,0,c,r.globals.gridHeight,0);r.globals.dom.elNonForecastMask.appendChild(u.node)}this.pointsChart||r.globals.delayedElements.push({el:this.elPointsMain.node,index:i});var p={i:s,realIndex:i,animationDelay:s,initialSpeed:r.config.chart.animations.speed,dataChangeSpeed:r.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(e)};if("area"===e)for(var g=l.fillPath({seriesNumber:i}),f=0;f<n.areaPaths.length;f++){var m=o.renderPaths(a(a({},p),{},{pathFrom:n.pathFromArea,pathTo:n.areaPaths[f],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:g}));this.elSeries.add(m)}if(r.config.stroke.show&&!this.pointsChart){var v=null;if("line"===e)v=l.fillPath({seriesNumber:i,i:s});else if("solid"===r.config.stroke.fill.type)v=r.globals.stroke.colors[i];else{var b=r.config.fill;r.config.fill=r.config.stroke.fill,v=l.fillPath({seriesNumber:i,i:s}),r.config.fill=b}for(var x=0;x<n.linePaths.length;x++){var y=v;"rangeArea"===e&&(y=l.fillPath({seriesNumber:i}));var w=a(a({},p),{},{pathFrom:n.pathFromLine,pathTo:n.linePaths[x],stroke:v,strokeWidth:this.strokeWidth,strokeLineCap:r.config.stroke.lineCap,fill:"rangeArea"===e?y:"none"}),k=o.renderPaths(w);if(this.elSeries.add(k),k.attr("fill-rule","evenodd"),h.count>0&&"rangeArea"!==e){var S=o.renderPaths(w);S.node.setAttribute("stroke-dasharray",h.dashArray),h.strokeWidth&&S.node.setAttribute("stroke-width",h.strokeWidth),this.elSeries.add(S),S.attr("clip-path","url(#forecastMask".concat(r.globals.cuid,")")),k.attr("clip-path","url(#nonForecastMask".concat(r.globals.cuid,")"))}}}}},{key:"_iterateOverDataPoints",value:function(t){var e=t.type,i=t.series,s=t.iterations,n=t.realIndex,a=t.i,r=t.x,o=t.y,l=t.pX,h=t.pY,c=t.pathsFrom,d=t.linePaths,u=t.areaPaths,p=t.seriesIndex,g=t.lineYPosition,f=t.xArrj,m=t.yArrj,v=t.isRangeStart,b=t.seriesRangeEnd,x=this.w,w=new C(this.ctx),k=this.yRatio,S=c.prevY,_=c.linePath,A=c.areaPath,I=c.pathFromLine,P=c.pathFromArea,T=y.isNumber(x.globals.minYArr[n])?x.globals.minYArr[n]:x.globals.minY;s||(s=x.globals.dataPoints>1?x.globals.dataPoints-1:x.globals.dataPoints);for(var E=o,L=0;L<s;L++){var M=void 0===i[a][L+1]||null===i[a][L+1];if(x.globals.isXNumeric){var O=x.globals.seriesX[n][L+1];void 0===x.globals.seriesX[n][L+1]&&(O=x.globals.seriesX[n][s-1]),r=(O-x.globals.minX)/this.xRatio}else r+=this.xDivision;g=x.config.chart.stacked&&a>0&&x.globals.collapsedSeries.length<x.config.series.length-1?this.prevSeriesY[function(t){for(var e=t,i=0;i<x.globals.series.length;i++)if(x.globals.collapsedSeriesIndices.indexOf(t)>-1){e--;break}return e>=0?e:0}(a-1)][L+1]:this.zeroY,M?o=g-T/k[this.yaxisIndex]+2*(this.isReversed?T/k[this.yaxisIndex]:0):(o=g-i[a][L+1]/k[this.yaxisIndex]+2*(this.isReversed?i[a][L+1]/k[this.yaxisIndex]:0),"rangeArea"===e&&(E=g-b[a][L+1]/k[this.yaxisIndex]+2*(this.isReversed?b[a][L+1]/k[this.yaxisIndex]:0))),f.push(r),m.push(o);var D=this.lineHelpers.calculatePoints({series:i,x:r,y:o,realIndex:n,i:a,j:L,prevY:S}),R=this._createPaths({type:e,series:i,i:a,realIndex:n,j:L,x:r,y:o,y2:E,pX:l,pY:h,linePath:_,areaPath:A,linePaths:d,areaPaths:u,seriesIndex:p,isRangeStart:v});u=R.areaPaths,d=R.linePaths,l=R.pX,h=R.pY,A=R.areaPath,_=R.linePath,this.appendPathFrom&&(I+=w.line(r,this.zeroY),P+=w.line(r,this.zeroY)),this.handleNullDataPoints(i,D,a,L,n),this._handleMarkersAndLabels({type:e,pointsPos:D,i:a,j:L,realIndex:n,isRangeStart:v})}return{yArrj:m,xArrj:f,pathFromArea:P,areaPaths:u,pathFromLine:I,linePaths:d,linePath:_,areaPath:A}}},{key:"_handleMarkersAndLabels",value:function(t){var e=t.type,i=t.pointsPos,s=t.isRangeStart,n=t.i,a=t.j,r=t.realIndex,o=this.w,l=new W(this.ctx);if(this.pointsChart)this.scatter.draw(this.elSeries,a,{realIndex:r,pointsPos:i,zRatio:this.zRatio,elParent:this.elPointsMain});else{o.globals.series[n].length>1&&this.elPointsMain.node.classList.add("apexcharts-element-hidden");var h=this.markers.plotChartMarkers(i,r,a+1);null!==h&&this.elPointsMain.add(h)}var c=l.drawDataLabel({type:e,isRangeStart:s,pos:i,i:r,j:a+1});null!==c&&this.elDataLabelsWrap.add(c)}},{key:"_createPaths",value:function(t){var e=t.type,i=t.series,s=t.i,n=t.realIndex,a=t.j,r=t.x,o=t.y,l=t.y2,h=t.pX,c=t.pY,d=t.linePath,u=t.areaPath,p=t.linePaths,g=t.areaPaths,f=t.seriesIndex,m=t.isRangeStart,v=this.w,b=new C(this.ctx),x=v.config.stroke.curve,y=this.areaBottomY;if(Array.isArray(v.config.stroke.curve)&&(x=Array.isArray(f)?v.config.stroke.curve[f[s]]:v.config.stroke.curve[s]),"smooth"===x){var w=.35*(r-h);v.globals.hasNullValues?(null!==i[s][a]&&(null!==i[s][a+1]?(d=b.move(h,c)+b.curve(h+w,c,r-w,o,r+1,o),u=b.move(h+1,c)+b.curve(h+w,c,r-w,o,r+1,o)+b.line(r,y)+b.line(h,y)+"z"):(d=b.move(h,c),u=b.move(h,c)+"z")),p.push(d),g.push(u)):(d+=b.curve(h+w,c,r-w,o,r,o),u+=b.curve(h+w,c,r-w,o,r,o)),h=r,c=o,a===i[s].length-2&&(u=u+b.curve(h,c,r,o,r,y)+b.move(r,o)+"z","rangeArea"===e&&m?d=d+b.curve(h,c,r,o,r,l)+b.move(r,l)+"z":v.globals.hasNullValues||(p.push(d),g.push(u)))}else{if(null===i[s][a+1]){d+=b.move(r,o);var k=v.globals.isXNumeric?(v.globals.seriesX[n][a]-v.globals.minX)/this.xRatio:r-this.xDivision;u=u+b.line(k,y)+b.move(r,o)+"z"}null===i[s][a]&&(d+=b.move(r,o),u+=b.move(r,y)),"stepline"===x?(d=d+b.line(r,null,"H")+b.line(null,o,"V"),u=u+b.line(r,null,"H")+b.line(null,o,"V")):"straight"===x&&(d+=b.line(r,o),u+=b.line(r,o)),a===i[s].length-2&&(u=u+b.line(r,y)+b.move(r,o)+"z","rangeArea"===e&&m?d=d+b.line(r,l)+b.move(r,l)+"z":(p.push(d),g.push(u)))}return{linePaths:p,areaPaths:g,pX:h,pY:c,linePath:d,areaPath:u}}},{key:"handleNullDataPoints",value:function(t,e,i,s,n){var a=this.w;if(null===t[i][s]&&a.config.markers.showNullDataPoints||1===t[i].length){var r=this.markers.plotChartMarkers(e,n,s+1,this.strokeWidth-a.config.markers.strokeWidth/2,!0);null!==r&&this.elPointsMain.add(r)}}}]),t}();window.TreemapSquared={},window.TreemapSquared.generate=function(){function t(e,i,s,n){this.xoffset=e,this.yoffset=i,this.height=n,this.width=s,this.shortestEdge=function(){return Math.min(this.height,this.width)},this.getCoordinates=function(t){var e,i=[],s=this.xoffset,n=this.yoffset,r=a(t)/this.height,o=a(t)/this.width;if(this.width>=this.height)for(e=0;e<t.length;e++)i.push([s,n,s+r,n+t[e]/r]),n+=t[e]/r;else for(e=0;e<t.length;e++)i.push([s,n,s+t[e]/o,n+o]),s+=t[e]/o;return i},this.cutArea=function(e){var i;if(this.width>=this.height){var s=e/this.height,n=this.width-s;i=new t(this.xoffset+s,this.yoffset,n,this.height)}else{var a=e/this.width,r=this.height-a;i=new t(this.xoffset,this.yoffset+a,this.width,r)}return i}}function e(e,s,n,r,o){r=void 0===r?0:r,o=void 0===o?0:o;var l=i(function(t,e){var i,s=[],n=e/a(t);for(i=0;i<t.length;i++)s[i]=t[i]*n;return s}(e,s*n),[],new t(r,o,s,n),[]);return function(t){var e,i,s=[];for(e=0;e<t.length;e++)for(i=0;i<t[e].length;i++)s.push(t[e][i]);return s}(l)}function i(t,e,n,r){var o,l,h;if(0!==t.length)return o=n.shortestEdge(),function(t,e,i){var n;if(0===t.length)return!0;(n=t.slice()).push(e);var a=s(t,i),r=s(n,i);return a>=r}(e,l=t[0],o)?(e.push(l),i(t.slice(1),e,n,r)):(h=n.cutArea(a(e),r),r.push(n.getCoordinates(e)),i(t,[],h,r)),r;r.push(n.getCoordinates(e))}function s(t,e){var i=Math.min.apply(Math,t),s=Math.max.apply(Math,t),n=a(t);return Math.max(Math.pow(e,2)*s/Math.pow(n,2),Math.pow(n,2)/(Math.pow(e,2)*i))}function n(t){return t&&t.constructor===Array}function a(t){var e,i=0;for(e=0;e<t.length;e++)i+=t[e];return i}function r(t){var e,i=0;if(n(t[0]))for(e=0;e<t.length;e++)i+=r(t[e]);else i=a(t);return i}return function t(i,s,a,o,l){o=void 0===o?0:o,l=void 0===l?0:l;var h,c,d=[],u=[];if(n(i[0])){for(c=0;c<i.length;c++)d[c]=r(i[c]);for(h=e(d,s,a,o,l),c=0;c<i.length;c++)u.push(t(i[c],h[c][2]-h[c][0],h[c][3]-h[c][1],h[c][0],h[c][1]))}else u=e(i,s,a,o,l);return u}}();var Nt,zt,Ft=function(){function t(e,i){o(this,t),this.ctx=e,this.w=e.w,this.strokeWidth=this.w.config.stroke.width,this.helpers=new It(e),this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.labels=[]}return h(t,[{key:"draw",value:function(t){var e=this,i=this.w,s=new C(this.ctx),n=new B(this.ctx),a=s.group({class:"apexcharts-treemap"});if(i.globals.noData)return a;var r=[];return t.forEach((function(t){var e=t.map((function(t){return Math.abs(t)}));r.push(e)})),this.negRange=this.helpers.checkColorRange(),i.config.series.forEach((function(t,i){t.data.forEach((function(t){Array.isArray(e.labels[i])||(e.labels[i]=[]),e.labels[i].push(t.x)}))})),window.TreemapSquared.generate(r,i.globals.gridWidth,i.globals.gridHeight).forEach((function(r,o){var l=s.group({class:"apexcharts-series apexcharts-treemap-series",seriesName:y.escapeString(i.globals.seriesNames[o]),rel:o+1,"data:realIndex":o});if(i.config.chart.dropShadow.enabled){var h=i.config.chart.dropShadow;new k(e.ctx).dropShadow(a,h,o)}var c=s.group({class:"apexcharts-data-labels"});r.forEach((function(a,r){var h=a[0],c=a[1],d=a[2],u=a[3],p=s.drawRect(h,c,d-h,u-c,0,"#fff",1,e.strokeWidth,i.config.plotOptions.treemap.useFillColorAsStroke?f:i.globals.stroke.colors[o]);p.attr({cx:h,cy:c,index:o,i:o,j:r,width:d-h,height:u-c});var g=e.helpers.getShadeColor(i.config.chart.type,o,r,e.negRange),f=g.color;void 0!==i.config.series[o].data[r]&&i.config.series[o].data[r].fillColor&&(f=i.config.series[o].data[r].fillColor);var m=n.fillPath({color:f,seriesNumber:o,dataPointIndex:r});p.node.classList.add("apexcharts-treemap-rect"),p.attr({fill:m}),e.helpers.addListeners(p);var v={x:h+(d-h)/2,y:c+(u-c)/2,width:0,height:0},b={x:h,y:c,width:d-h,height:u-c};if(i.config.chart.animations.enabled&&!i.globals.dataChanged){var x=1;i.globals.resized||(x=i.config.chart.animations.speed),e.animateTreemap(p,v,b,x)}if(i.globals.dataChanged){var y=1;e.dynamicAnim.enabled&&i.globals.shouldAnimate&&(y=e.dynamicAnim.speed,i.globals.previousPaths[o]&&i.globals.previousPaths[o][r]&&i.globals.previousPaths[o][r].rect&&(v=i.globals.previousPaths[o][r].rect),e.animateTreemap(p,v,b,y))}var w=e.getFontSize(a),k=i.config.dataLabels.formatter(e.labels[o][r],{value:i.globals.series[o][r],seriesIndex:o,dataPointIndex:r,w:i}),C=e.helpers.calculateDataLabels({text:k,x:(h+d)/2,y:(c+u)/2+e.strokeWidth/2+w/3,i:o,j:r,colorProps:g,fontSize:w,series:t});i.config.dataLabels.enabled&&C&&e.rotateToFitLabel(C,w,k,h,c,d,u),l.add(p),null!==C&&l.add(C)})),l.add(c),a.add(l)})),a}},{key:"getFontSize",value:function(t){var e,i,s,n,a=this.w,r=function t(e){var i,s=0;if(Array.isArray(e[0]))for(i=0;i<e.length;i++)s+=t(e[i]);else for(i=0;i<e.length;i++)s+=e[i].length;return s}(this.labels)/function t(e){var i,s=0;if(Array.isArray(e[0]))for(i=0;i<e.length;i++)s+=t(e[i]);else for(i=0;i<e.length;i++)s+=1;return s}(this.labels);return e=t[2]-t[0],i=t[3]-t[1],s=e*i,n=Math.pow(s,.5),Math.min(n/r,parseInt(a.config.dataLabels.style.fontSize,10))}},{key:"rotateToFitLabel",value:function(t,e,i,s,n,a,r){var o=new C(this.ctx),l=o.getTextRects(i,e);if(l.width+this.w.config.stroke.width+5>a-s&&l.width<=r-n){var h=o.rotateAroundCenter(t.node);t.node.setAttribute("transform","rotate(-90 ".concat(h.x," ").concat(h.y,")"))}}},{key:"animateTreemap",value:function(t,e,i,s){var n=new w(this.ctx);n.animateRect(t,{x:e.x,y:e.y,width:e.width,height:e.height},{x:i.x,y:i.y,width:i.width,height:i.height},s,(function(){n.animationCompleted(t)}))}}]),t}(),Bt=86400,Ht=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}return h(t,[{key:"calculateTimeScaleTicks",value:function(t,e){var i=this,s=this.w;if(s.globals.allSeriesCollapsed)return s.globals.labels=[],s.globals.timescaleLabels=[],[];var n=new M(this.ctx),r=(e-t)/864e5;this.determineInterval(r),s.globals.disableZoomIn=!1,s.globals.disableZoomOut=!1,r<.00011574074074074075?s.globals.disableZoomIn=!0:r>5e4&&(s.globals.disableZoomOut=!0);var o=n.getTimeUnitsfromTimestamp(t,e,this.utc),l=s.globals.gridWidth/r,h=l/24,c=h/60,d=c/60,u=Math.floor(24*r),p=Math.floor(1440*r),g=Math.floor(r*Bt),f=Math.floor(r),m=Math.floor(r/30),v=Math.floor(r/365),b={minMillisecond:o.minMillisecond,minSecond:o.minSecond,minMinute:o.minMinute,minHour:o.minHour,minDate:o.minDate,minMonth:o.minMonth,minYear:o.minYear},x={firstVal:b,currentMillisecond:b.minMillisecond,currentSecond:b.minSecond,currentMinute:b.minMinute,currentHour:b.minHour,currentMonthDate:b.minDate,currentDate:b.minDate,currentMonth:b.minMonth,currentYear:b.minYear,daysWidthOnXAxis:l,hoursWidthOnXAxis:h,minutesWidthOnXAxis:c,secondsWidthOnXAxis:d,numberOfSeconds:g,numberOfMinutes:p,numberOfHours:u,numberOfDays:f,numberOfMonths:m,numberOfYears:v};switch(this.tickInterval){case"years":this.generateYearScale(x);break;case"months":case"half_year":this.generateMonthScale(x);break;case"months_days":case"months_fortnight":case"days":case"week_days":this.generateDayScale(x);break;case"hours":this.generateHourScale(x);break;case"minutes_fives":case"minutes":this.generateMinuteScale(x);break;case"seconds_tens":case"seconds_fives":case"seconds":this.generateSecondScale(x)}var y=this.timeScaleArray.map((function(t){var e={position:t.position,unit:t.unit,year:t.year,day:t.day?t.day:1,hour:t.hour?t.hour:0,month:t.month+1};return"month"===t.unit?a(a({},e),{},{day:1,value:t.value+1}):"day"===t.unit||"hour"===t.unit?a(a({},e),{},{value:t.value}):"minute"===t.unit?a(a({},e),{},{value:t.value,minute:t.value}):"second"===t.unit?a(a({},e),{},{value:t.value,minute:t.minute,second:t.second}):t}));return y.filter((function(t){var e=1,n=Math.ceil(s.globals.gridWidth/120),a=t.value;void 0!==s.config.xaxis.tickAmount&&(n=s.config.xaxis.tickAmount),y.length>n&&(e=Math.floor(y.length/n));var r=!1,o=!1;switch(i.tickInterval){case"years":"year"===t.unit&&(r=!0);break;case"half_year":e=7,"year"===t.unit&&(r=!0);break;case"months":e=1,"year"===t.unit&&(r=!0);break;case"months_fortnight":e=15,"year"!==t.unit&&"month"!==t.unit||(r=!0),30===a&&(o=!0);break;case"months_days":e=10,"month"===t.unit&&(r=!0),30===a&&(o=!0);break;case"week_days":e=8,"month"===t.unit&&(r=!0);break;case"days":e=1,"month"===t.unit&&(r=!0);break;case"hours":"day"===t.unit&&(r=!0);break;case"minutes_fives":case"seconds_fives":a%5!=0&&(o=!0);break;case"seconds_tens":a%10!=0&&(o=!0)}if("hours"===i.tickInterval||"minutes_fives"===i.tickInterval||"seconds_tens"===i.tickInterval||"seconds_fives"===i.tickInterval){if(!o)return!0}else if((a%e==0||r)&&!o)return!0}))}},{key:"recalcDimensionsBasedOnFormat",value:function(t,e){var i=this.w,s=this.formatDates(t),n=this.removeOverlappingTS(s);i.globals.timescaleLabels=n.slice(),new ct(this.ctx).plotCoords()}},{key:"determineInterval",value:function(t){var e=24*t,i=60*e;switch(!0){case t/365>5:this.tickInterval="years";break;case t>800:this.tickInterval="half_year";break;case t>180:this.tickInterval="months";break;case t>90:this.tickInterval="months_fortnight";break;case t>60:this.tickInterval="months_days";break;case t>30:this.tickInterval="week_days";break;case t>2:this.tickInterval="days";break;case e>2.4:this.tickInterval="hours";break;case i>15:this.tickInterval="minutes_fives";break;case i>5:this.tickInterval="minutes";break;case i>1:this.tickInterval="seconds_tens";break;case 60*i>20:this.tickInterval="seconds_fives";break;default:this.tickInterval="seconds"}}},{key:"generateYearScale",value:function(t){var e=t.firstVal,i=t.currentMonth,s=t.currentYear,n=t.daysWidthOnXAxis,a=t.numberOfYears,r=e.minYear,o=0,l=new M(this.ctx),h="year";if(e.minDate>1||e.minMonth>0){var c=l.determineRemainingDaysOfYear(e.minYear,e.minMonth,e.minDate);o=(l.determineDaysOfYear(e.minYear)-c+1)*n,r=e.minYear+1,this.timeScaleArray.push({position:o,value:r,unit:h,year:r,month:y.monthMod(i+1)})}else 1===e.minDate&&0===e.minMonth&&this.timeScaleArray.push({position:o,value:r,unit:h,year:s,month:y.monthMod(i+1)});for(var d=r,u=o,p=0;p<a;p++)d++,u=l.determineDaysOfYear(d-1)*n+u,this.timeScaleArray.push({position:u,value:d,unit:h,year:d,month:1})}},{key:"generateMonthScale",value:function(t){var e=t.firstVal,i=t.currentMonthDate,s=t.currentMonth,n=t.currentYear,a=t.daysWidthOnXAxis,r=t.numberOfMonths,o=s,l=0,h=new M(this.ctx),c="month",d=0;if(e.minDate>1){l=(h.determineDaysOfMonths(s+1,e.minYear)-i+1)*a,o=y.monthMod(s+1);var u=n+d,p=y.monthMod(o),g=o;0===o&&(c="year",g=u,p=1,u+=d+=1),this.timeScaleArray.push({position:l,value:g,unit:c,year:u,month:p})}else this.timeScaleArray.push({position:l,value:o,unit:c,year:n,month:y.monthMod(s)});for(var f=o+1,m=l,v=0,b=1;v<r;v++,b++){0===(f=y.monthMod(f))?(c="year",d+=1):c="month";var x=this._getYear(n,f,d);m=h.determineDaysOfMonths(f,x)*a+m;var w=0===f?x:f;this.timeScaleArray.push({position:m,value:w,unit:c,year:x,month:0===f?1:f}),f++}}},{key:"generateDayScale",value:function(t){var e=t.firstVal,i=t.currentMonth,s=t.currentYear,n=t.hoursWidthOnXAxis,a=t.numberOfDays,r=new M(this.ctx),o="day",l=e.minDate+1,h=l,c=function(t,e,i){return t>r.determineDaysOfMonths(e+1,i)?(h=1,o="month",u=e+=1,e):e},d=(24-e.minHour)*n,u=l,p=c(h,i,s);0===e.minHour&&1===e.minDate?(d=0,u=y.monthMod(e.minMonth),o="month",h=e.minDate,a++):1!==e.minDate&&0===e.minHour&&0===e.minMinute&&(d=0,l=e.minDate,u=l,p=c(h=l,i,s)),this.timeScaleArray.push({position:d,value:u,unit:o,year:this._getYear(s,p,0),month:y.monthMod(p),day:h});for(var g=d,f=0;f<a;f++){o="day",p=c(h+=1,p,this._getYear(s,p,0));var m=this._getYear(s,p,0);g=24*n+g;var v=1===h?y.monthMod(p):h;this.timeScaleArray.push({position:g,value:v,unit:o,year:m,month:y.monthMod(p),day:v})}}},{key:"generateHourScale",value:function(t){var e=t.firstVal,i=t.currentDate,s=t.currentMonth,n=t.currentYear,a=t.minutesWidthOnXAxis,r=t.numberOfHours,o=new M(this.ctx),l="hour",h=function(t,e){return t>o.determineDaysOfMonths(e+1,n)&&(f=1,e+=1),{month:e,date:f}},c=function(t,e){return t>o.determineDaysOfMonths(e+1,n)?e+=1:e},d=60-(e.minMinute+e.minSecond/60),u=d*a,p=e.minHour+1,g=p+1;60===d&&(u=0,g=(p=e.minHour)+1);var f=i,m=c(f,s);this.timeScaleArray.push({position:u,value:p,unit:l,day:f,hour:g,year:n,month:y.monthMod(m)});for(var v=u,b=0;b<r;b++){l="hour",g>=24&&(g=0,l="day",m=h(f+=1,m).month,m=c(f,m));var x=this._getYear(n,m,0);v=0===g&&0===b?d*a:60*a+v;var w=0===g?f:g;this.timeScaleArray.push({position:v,value:w,unit:l,hour:g,day:f,year:x,month:y.monthMod(m)}),g++}}},{key:"generateMinuteScale",value:function(t){for(var e=t.currentMillisecond,i=t.currentSecond,s=t.currentMinute,n=t.currentHour,a=t.currentDate,r=t.currentMonth,o=t.currentYear,l=t.minutesWidthOnXAxis,h=t.secondsWidthOnXAxis,c=t.numberOfMinutes,d=s+1,u=a,p=r,g=o,f=n,m=(60-i-e/1e3)*h,v=0;v<c;v++)d>=60&&(d=0,24===(f+=1)&&(f=0)),this.timeScaleArray.push({position:m,value:d,unit:"minute",hour:f,minute:d,day:u,year:this._getYear(g,p,0),month:y.monthMod(p)}),m+=l,d++}},{key:"generateSecondScale",value:function(t){for(var e=t.currentMillisecond,i=t.currentSecond,s=t.currentMinute,n=t.currentHour,a=t.currentDate,r=t.currentMonth,o=t.currentYear,l=t.secondsWidthOnXAxis,h=t.numberOfSeconds,c=i+1,d=s,u=a,p=r,g=o,f=n,m=(1e3-e)/1e3*l,v=0;v<h;v++)c>=60&&(c=0,++d>=60&&(d=0,24===++f&&(f=0))),this.timeScaleArray.push({position:m,value:c,unit:"second",hour:f,minute:d,second:c,day:u,year:this._getYear(g,p,0),month:y.monthMod(p)}),m+=l,c++}},{key:"createRawDateString",value:function(t,e){var i=t.year;return 0===t.month&&(t.month=1),i+="-"+("0"+t.month.toString()).slice(-2),"day"===t.unit?i+="day"===t.unit?"-"+("0"+e).slice(-2):"-01":i+="-"+("0"+(t.day?t.day:"1")).slice(-2),"hour"===t.unit?i+="hour"===t.unit?"T"+("0"+e).slice(-2):"T00":i+="T"+("0"+(t.hour?t.hour:"0")).slice(-2),"minute"===t.unit?i+=":"+("0"+e).slice(-2):i+=":"+(t.minute?("0"+t.minute).slice(-2):"00"),"second"===t.unit?i+=":"+("0"+e).slice(-2):i+=":00",this.utc&&(i+=".000Z"),i}},{key:"formatDates",value:function(t){var e=this,i=this.w;return t.map((function(t){var s=t.value.toString(),n=new M(e.ctx),a=e.createRawDateString(t,s),r=n.getDate(n.parseDate(a));if(e.utc||(r=n.getDate(n.parseDateWithTimezone(a))),void 0===i.config.xaxis.labels.format){var o="dd MMM",l=i.config.xaxis.labels.datetimeFormatter;"year"===t.unit&&(o=l.year),"month"===t.unit&&(o=l.month),"day"===t.unit&&(o=l.day),"hour"===t.unit&&(o=l.hour),"minute"===t.unit&&(o=l.minute),"second"===t.unit&&(o=l.second),s=n.formatDate(r,o)}else s=n.formatDate(r,i.config.xaxis.labels.format);return{dateString:a,position:t.position,value:s,unit:t.unit,year:t.year,month:t.month}}))}},{key:"removeOverlappingTS",value:function(t){var e,i=this,s=new C(this.ctx),n=!1;t.length>0&&t[0].value&&t.every((function(e){return e.value.length===t[0].value.length}))&&(n=!0,e=s.getTextRects(t[0].value).width);var a=0,r=t.map((function(r,o){if(o>0&&i.w.config.xaxis.labels.hideOverlappingLabels){var l=n?e:s.getTextRects(t[a].value).width,h=t[a].position;return r.position>h+l+10?(a=o,r):null}return r}));return r.filter((function(t){return null!==t}))}},{key:"_getYear",value:function(t,e,i){return t+Math.floor(e/12)+i}}]),t}(),$t=function(){function t(e,i){o(this,t),this.ctx=i,this.w=i.w,this.el=e}return h(t,[{key:"setupElements",value:function(){var t=this.w.globals,e=this.w.config,i=e.chart.type;t.axisCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble","radar","heatmap","treemap"].indexOf(i)>-1,t.xyCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble"].indexOf(i)>-1,t.isBarHorizontal=("bar"===e.chart.type||"rangeBar"===e.chart.type||"boxPlot"===e.chart.type)&&e.plotOptions.bar.horizontal,t.chartClass=".apexcharts"+t.chartID,t.dom.baseEl=this.el,t.dom.elWrap=document.createElement("div"),C.setAttrs(t.dom.elWrap,{id:t.chartClass.substring(1),class:"apexcharts-canvas "+t.chartClass.substring(1)}),this.el.appendChild(t.dom.elWrap),t.dom.Paper=new window.SVG.Doc(t.dom.elWrap),t.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:"translate(".concat(e.chart.offsetX,", ").concat(e.chart.offsetY,")")}),t.dom.Paper.node.style.background=e.chart.background,this.setSVGDimensions(),t.dom.elGraphical=t.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),t.dom.elAnnotations=t.dom.Paper.group().attr({class:"apexcharts-annotations"}),t.dom.elDefs=t.dom.Paper.defs(),t.dom.elLegendWrap=document.createElement("div"),t.dom.elLegendWrap.classList.add("apexcharts-legend"),t.dom.elWrap.appendChild(t.dom.elLegendWrap),t.dom.Paper.add(t.dom.elGraphical),t.dom.elGraphical.add(t.dom.elDefs)}},{key:"plotChartType",value:function(t,e){var i=this.w,s=i.config,n=i.globals,a={series:[],i:[]},r={series:[],i:[]},o={series:[],i:[]},l={series:[],i:[]},h={series:[],i:[]},c={series:[],i:[]},d={series:[],i:[]},u={series:[],i:[]},p={series:[],seriesRangeEnd:[],i:[]};n.series.map((function(e,g){var f=0;void 0!==t[g].type?("column"===t[g].type||"bar"===t[g].type?(n.series.length>1&&s.plotOptions.bar.horizontal&&console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"),h.series.push(e),h.i.push(g),f++,i.globals.columnSeries=h.series):"area"===t[g].type?(r.series.push(e),r.i.push(g),f++):"line"===t[g].type?(a.series.push(e),a.i.push(g),f++):"scatter"===t[g].type?(o.series.push(e),o.i.push(g)):"bubble"===t[g].type?(l.series.push(e),l.i.push(g),f++):"candlestick"===t[g].type?(c.series.push(e),c.i.push(g),f++):"boxPlot"===t[g].type?(d.series.push(e),d.i.push(g),f++):"rangeBar"===t[g].type?(u.series.push(e),u.i.push(g),f++):"rangeArea"===t[g].type?(p.series.push(n.seriesRangeStart[g]),p.seriesRangeEnd.push(n.seriesRangeEnd[g]),p.i.push(g),f++):console.warn("You have specified an unrecognized chart type. Available types for this property are line/area/column/bar/scatter/bubble"),f>1&&(n.comboCharts=!0)):(a.series.push(e),a.i.push(g))}));var g=new Rt(this.ctx,e),f=new At(this.ctx,e);this.ctx.pie=new Et(this.ctx);var m=new Mt(this.ctx);this.ctx.rangeBar=new Ot(this.ctx,e);var v=new Lt(this.ctx),b=[];if(n.comboCharts){if(r.series.length>0&&b.push(g.draw(r.series,"area",r.i)),h.series.length>0)if(i.config.chart.stacked){var x=new _t(this.ctx,e);b.push(x.draw(h.series,h.i))}else this.ctx.bar=new St(this.ctx,e),b.push(this.ctx.bar.draw(h.series,h.i));if(p.series.length>0&&b.push(g.draw(p.series,"rangeArea",p.i,p.seriesRangeEnd)),a.series.length>0&&b.push(g.draw(a.series,"line",a.i)),c.series.length>0&&b.push(f.draw(c.series,c.i)),d.series.length>0&&b.push(f.draw(d.series,d.i)),u.series.length>0&&b.push(this.ctx.rangeBar.draw(u.series,u.i)),o.series.length>0){var y=new Rt(this.ctx,e,!0);b.push(y.draw(o.series,"scatter",o.i))}if(l.series.length>0){var w=new Rt(this.ctx,e,!0);b.push(w.draw(l.series,"bubble",l.i))}}else switch(s.chart.type){case"line":b=g.draw(n.series,"line");break;case"area":b=g.draw(n.series,"area");break;case"bar":s.chart.stacked?b=new _t(this.ctx,e).draw(n.series):(this.ctx.bar=new St(this.ctx,e),b=this.ctx.bar.draw(n.series));break;case"candlestick":b=new At(this.ctx,e).draw(n.series);break;case"boxPlot":b=new At(this.ctx,e).draw(n.series);break;case"rangeBar":b=this.ctx.rangeBar.draw(n.series);break;case"rangeArea":b=g.draw(n.seriesRangeStart,"rangeArea",void 0,n.seriesRangeEnd);break;case"heatmap":b=new Pt(this.ctx,e).draw(n.series);break;case"treemap":b=new Ft(this.ctx,e).draw(n.series);break;case"pie":case"donut":case"polarArea":b=this.ctx.pie.draw(n.series);break;case"radialBar":b=m.draw(n.series);break;case"radar":b=v.draw(n.series);break;default:b=g.draw(n.series)}return b}},{key:"setSVGDimensions",value:function(){var t=this.w.globals,e=this.w.config;t.svgWidth=e.chart.width,t.svgHeight=e.chart.height;var i=y.getDimensions(this.el),s=e.chart.width.toString().split(/[0-9]+/g).pop();"%"===s?y.isNumber(i[0])&&(0===i[0].width&&(i=y.getDimensions(this.el.parentNode)),t.svgWidth=i[0]*parseInt(e.chart.width,10)/100):"px"!==s&&""!==s||(t.svgWidth=parseInt(e.chart.width,10));var n=e.chart.height.toString().split(/[0-9]+/g).pop();if("auto"!==t.svgHeight&&""!==t.svgHeight)if("%"===n){var a=y.getDimensions(this.el.parentNode);t.svgHeight=a[1]*parseInt(e.chart.height,10)/100}else t.svgHeight=parseInt(e.chart.height,10);else t.axisCharts?t.svgHeight=t.svgWidth/1.61:t.svgHeight=t.svgWidth/1.2;if(t.svgWidth<0&&(t.svgWidth=0),t.svgHeight<0&&(t.svgHeight=0),C.setAttrs(t.dom.Paper.node,{width:t.svgWidth,height:t.svgHeight}),"%"!==n){var r=e.chart.sparkline.enabled?0:t.axisCharts?e.chart.parentHeightOffset:0;t.dom.Paper.node.parentNode.parentNode.style.minHeight=t.svgHeight+r+"px"}t.dom.elWrap.style.width=t.svgWidth+"px",t.dom.elWrap.style.height=t.svgHeight+"px"}},{key:"shiftGraphPosition",value:function(){var t=this.w.globals,e=t.translateY,i={transform:"translate("+t.translateX+", "+e+")"};C.setAttrs(t.dom.elGraphical.node,i)}},{key:"resizeNonAxisCharts",value:function(){var t=this.w,e=t.globals,i=0,s=t.config.chart.sparkline.enabled?1:15;s+=t.config.grid.padding.bottom,"top"!==t.config.legend.position&&"bottom"!==t.config.legend.position||!t.config.legend.show||t.config.legend.floating||(i=new ut(this.ctx).legendHelpers.getLegendBBox().clwh+10);var n=t.globals.dom.baseEl.querySelector(".apexcharts-radialbar, .apexcharts-pie"),a=2.05*t.globals.radialSize;if(n&&!t.config.chart.sparkline.enabled&&0!==t.config.plotOptions.radialBar.startAngle){var r=y.getBoundingClientRect(n);a=r.bottom;var o=r.bottom-r.top;a=Math.max(2.05*t.globals.radialSize,o)}var l=a+e.translateY+i+s;e.dom.elLegendForeign&&e.dom.elLegendForeign.setAttribute("height",l),t.config.chart.height&&String(t.config.chart.height).indexOf("%")>0||(e.dom.elWrap.style.height=l+"px",C.setAttrs(e.dom.Paper.node,{height:l}),e.dom.Paper.node.parentNode.parentNode.style.minHeight=l+"px")}},{key:"coreCalculations",value:function(){new K(this.ctx).init()}},{key:"resetGlobals",value:function(){var t=this,e=function(){return t.w.config.series.map((function(t){return[]}))},i=new z,s=this.w.globals;i.initGlobalVars(s),s.seriesXvalues=e(),s.seriesYvalues=e()}},{key:"isMultipleY",value:function(){if(this.w.config.yaxis.constructor===Array&&this.w.config.yaxis.length>1)return this.w.globals.isMultipleYAxis=!0,!0}},{key:"xySettings",value:function(){var t=null,e=this.w;if(e.globals.axisCharts){if("back"===e.config.xaxis.crosshairs.position&&new it(this.ctx).drawXCrosshairs(),"back"===e.config.yaxis[0].crosshairs.position&&new it(this.ctx).drawYCrosshairs(),"datetime"===e.config.xaxis.type&&void 0===e.config.xaxis.labels.formatter){this.ctx.timeScale=new Ht(this.ctx);var i=[];isFinite(e.globals.minX)&&isFinite(e.globals.maxX)&&!e.globals.isBarHorizontal?i=this.ctx.timeScale.calculateTimeScaleTicks(e.globals.minX,e.globals.maxX):e.globals.isBarHorizontal&&(i=this.ctx.timeScale.calculateTimeScaleTicks(e.globals.minY,e.globals.maxY)),this.ctx.timeScale.recalcDimensionsBasedOnFormat(i)}t=new S(this.ctx).getCalculatedRatios()}return t}},{key:"updateSourceChart",value:function(t){this.ctx.w.globals.selection=void 0,this.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:t.w.globals.minX,max:t.w.globals.maxX}}}},!1,!1)}},{key:"setupBrushHandler",value:function(){var t=this,e=this.w;if(e.config.chart.brush.enabled&&"function"!=typeof e.config.chart.events.selection){var i=e.config.chart.brush.targets||[e.config.chart.brush.target];i.forEach((function(e){var i=ApexCharts.getChartByID(e);i.w.globals.brushSource=t.ctx,"function"!=typeof i.w.config.chart.events.zoomed&&(i.w.config.chart.events.zoomed=function(){t.updateSourceChart(i)}),"function"!=typeof i.w.config.chart.events.scrolled&&(i.w.config.chart.events.scrolled=function(){t.updateSourceChart(i)})})),e.config.chart.events.selection=function(t,s){i.forEach((function(t){var i=ApexCharts.getChartByID(t),n=y.clone(e.config.yaxis);if(e.config.chart.brush.autoScaleYaxis&&1===i.w.globals.series.length){var r=new U(i);n=r.autoScaleY(i,n,s)}var o=i.w.config.yaxis.reduce((function(t,e,s){return[].concat(v(t),[a(a({},i.w.config.yaxis[s]),{},{min:n[0].min,max:n[0].max})])}),[]);i.ctx.updateHelpers._updateOptions({xaxis:{min:s.xaxis.min,max:s.xaxis.max},yaxis:o},!1,!1,!1,!1)}))}}}}]),t}(),Wt=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w}return h(t,[{key:"_updateOptions",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new Promise((function(o){var l=[e.ctx];n&&(l=e.ctx.getSyncedCharts()),e.ctx.w.globals.isExecCalled&&(l=[e.ctx],e.ctx.w.globals.isExecCalled=!1),l.forEach((function(n,h){var c=n.w;if(c.globals.shouldAnimate=s,i||(c.globals.resized=!0,c.globals.dataChanged=!0,s&&n.series.getPreviousPaths()),t&&"object"===r(t)&&(n.config=new N(t),t=S.extendArrayProps(n.config,t,c),n.w.globals.chartID!==e.ctx.w.globals.chartID&&delete t.series,c.config=y.extend(c.config,t),a&&(c.globals.lastXAxis=t.xaxis?y.clone(t.xaxis):[],c.globals.lastYAxis=t.yaxis?y.clone(t.yaxis):[],c.globals.initialConfig=y.extend({},c.config),c.globals.initialSeries=y.clone(c.config.series),t.series))){for(var d=0;d<c.globals.collapsedSeriesIndices.length;d++){var u=c.config.series[c.globals.collapsedSeriesIndices[d]];c.globals.collapsedSeries[d].data=c.globals.axisCharts?u.data.slice():u}for(var p=0;p<c.globals.ancillaryCollapsedSeriesIndices.length;p++){var g=c.config.series[c.globals.ancillaryCollapsedSeriesIndices[p]];c.globals.ancillaryCollapsedSeries[p].data=c.globals.axisCharts?g.data.slice():g}n.series.emptyCollapsedSeries(c.config.series)}return n.update(t).then((function(){h===l.length-1&&o(n)}))}))}))}},{key:"_updateSeries",value:function(t,e){var i=this,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise((function(n){var a,r=i.w;return r.globals.shouldAnimate=e,r.globals.dataChanged=!0,e&&i.ctx.series.getPreviousPaths(),r.globals.axisCharts?(0===(a=t.map((function(t,e){return i._extendSeries(t,e)}))).length&&(a=[{data:[]}]),r.config.series=a):r.config.series=t.slice(),s&&(r.globals.initialConfig.series=y.clone(r.config.series),r.globals.initialSeries=y.clone(r.config.series)),i.ctx.update().then((function(){n(i.ctx)}))}))}},{key:"_extendSeries",value:function(t,e){var i=this.w,s=i.config.series[e];return a(a({},i.config.series[e]),{},{name:t.name?t.name:s&&s.name,color:t.color?t.color:s&&s.color,type:t.type?t.type:s&&s.type,data:t.data?t.data:s&&s.data})}},{key:"toggleDataPointSelection",value:function(t,e){var i=this.w,s=null,n=".apexcharts-series[data\\:realIndex='".concat(t,"']");return i.globals.axisCharts?s=i.globals.dom.Paper.select("".concat(n," path[j='").concat(e,"'], ").concat(n," circle[j='").concat(e,"'], ").concat(n," rect[j='").concat(e,"']")).members[0]:void 0===e&&(s=i.globals.dom.Paper.select("".concat(n," path[j='").concat(t,"']")).members[0],"pie"!==i.config.chart.type&&"polarArea"!==i.config.chart.type&&"donut"!==i.config.chart.type||this.ctx.pie.pieClicked(t)),s?(new C(this.ctx).pathMouseDown(s,null),s.node?s.node:null):(console.warn("toggleDataPointSelection: Element not found"),null)}},{key:"forceXAxisUpdate",value:function(t){var e=this.w;if(["min","max"].forEach((function(i){void 0!==t.xaxis[i]&&(e.config.xaxis[i]=t.xaxis[i],e.globals.lastXAxis[i]=t.xaxis[i])})),t.xaxis.categories&&t.xaxis.categories.length&&(e.config.xaxis.categories=t.xaxis.categories),e.config.xaxis.convertedCatToNumeric){var i=new R(t);t=i.convertCatToNumericXaxis(t,this.ctx)}return t}},{key:"forceYAxisUpdate",value:function(t){return t.chart&&t.chart.stacked&&"100%"===t.chart.stackType&&(Array.isArray(t.yaxis)?t.yaxis.forEach((function(e,i){t.yaxis[i].min=0,t.yaxis[i].max=100})):(t.yaxis.min=0,t.yaxis.max=100)),t}},{key:"revertDefaultAxisMinMax",value:function(t){var e=this,i=this.w,s=i.globals.lastXAxis,n=i.globals.lastYAxis;t&&t.xaxis&&(s=t.xaxis),t&&t.yaxis&&(n=t.yaxis),i.config.xaxis.min=s.min,i.config.xaxis.max=s.max;var a=function(t){void 0!==n[t]&&(i.config.yaxis[t].min=n[t].min,i.config.yaxis[t].max=n[t].max)};i.config.yaxis.map((function(t,s){i.globals.zoomed||void 0!==n[s]?a(s):void 0!==e.ctx.opts.yaxis[s]&&(t.min=e.ctx.opts.yaxis[s].min,t.max=e.ctx.opts.yaxis[s].max)}))}}]),t}();Nt="undefined"!=typeof window?window:void 0,zt=function(t,e){var i=(void 0!==this?this:t).SVG=function(t){if(i.supported)return t=new i.Doc(t),i.parser.draw||i.prepare(),t};if(i.ns="http://www.w3.org/2000/svg",i.xmlns="http://www.w3.org/2000/xmlns/",i.xlink="http://www.w3.org/1999/xlink",i.svgjs="http://svgjs.dev",i.supported=!0,!i.supported)return!1;i.did=1e3,i.eid=function(t){return"Svgjs"+d(t)+i.did++},i.create=function(t){var i=e.createElementNS(this.ns,t);return i.setAttribute("id",this.eid(t)),i},i.extend=function(){var t,e;e=(t=[].slice.call(arguments)).pop();for(var s=t.length-1;s>=0;s--)if(t[s])for(var n in e)t[s].prototype[n]=e[n];i.Set&&i.Set.inherit&&i.Set.inherit()},i.invent=function(t){var e="function"==typeof t.create?t.create:function(){this.constructor.call(this,i.create(t.create))};return t.inherit&&(e.prototype=new t.inherit),t.extend&&i.extend(e,t.extend),t.construct&&i.extend(t.parent||i.Container,t.construct),e},i.adopt=function(e){return e?e.instance?e.instance:((s="svg"==e.nodeName?e.parentNode instanceof t.SVGElement?new i.Nested:new i.Doc:"linearGradient"==e.nodeName?new i.Gradient("linear"):"radialGradient"==e.nodeName?new i.Gradient("radial"):i[d(e.nodeName)]?new(i[d(e.nodeName)]):new i.Element(e)).type=e.nodeName,s.node=e,e.instance=s,s instanceof i.Doc&&s.namespace().defs(),s.setData(JSON.parse(e.getAttribute("svgjs:data"))||{}),s):null;var s},i.prepare=function(){var t=e.getElementsByTagName("body")[0],s=(t?new i.Doc(t):i.adopt(e.documentElement).nested()).size(2,0);i.parser={body:t||e.documentElement,draw:s.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:s.polyline().node,path:s.path().node,native:i.create("svg")}},i.parser={native:i.create("svg")},e.addEventListener("DOMContentLoaded",(function(){i.parser.draw||i.prepare()}),!1),i.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},i.utils={map:function(t,e){for(var i=t.length,s=[],n=0;n<i;n++)s.push(e(t[n]));return s},filter:function(t,e){for(var i=t.length,s=[],n=0;n<i;n++)e(t[n])&&s.push(t[n]);return s},filterSVGElements:function(e){return this.filter(e,(function(e){return e instanceof t.SVGElement}))}},i.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},i.Color=function(t){var e,s;this.r=0,this.g=0,this.b=0,t&&("string"==typeof t?i.regex.isRgb.test(t)?(e=i.regex.rgb.exec(t.replace(i.regex.whitespace,"")),this.r=parseInt(e[1]),this.g=parseInt(e[2]),this.b=parseInt(e[3])):i.regex.isHex.test(t)&&(e=i.regex.hex.exec(4==(s=t).length?["#",s.substring(1,2),s.substring(1,2),s.substring(2,3),s.substring(2,3),s.substring(3,4),s.substring(3,4)].join(""):s),this.r=parseInt(e[1],16),this.g=parseInt(e[2],16),this.b=parseInt(e[3],16)):"object"===r(t)&&(this.r=t.r,this.g=t.g,this.b=t.b))},i.extend(i.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+u(this.r)+u(this.g)+u(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(t){return this.destination=new i.Color(t),this},at:function(t){return this.destination?(t=t<0?0:t>1?1:t,new i.Color({r:~~(this.r+(this.destination.r-this.r)*t),g:~~(this.g+(this.destination.g-this.g)*t),b:~~(this.b+(this.destination.b-this.b)*t)})):this}}),i.Color.test=function(t){return t+="",i.regex.isHex.test(t)||i.regex.isRgb.test(t)},i.Color.isRgb=function(t){return t&&"number"==typeof t.r&&"number"==typeof t.g&&"number"==typeof t.b},i.Color.isColor=function(t){return i.Color.isRgb(t)||i.Color.test(t)},i.Array=function(t,e){0==(t=(t||[]).valueOf()).length&&e&&(t=e.valueOf()),this.value=this.parse(t)},i.extend(i.Array,{toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(t){return t=t.valueOf(),Array.isArray(t)?t:this.split(t)}}),i.PointArray=function(t,e){i.Array.call(this,t,e||[[0,0]])},i.PointArray.prototype=new i.Array,i.PointArray.prototype.constructor=i.PointArray;for(var s={M:function(t,e,i){return e.x=i.x=t[0],e.y=i.y=t[1],["M",e.x,e.y]},L:function(t,e){return e.x=t[0],e.y=t[1],["L",t[0],t[1]]},H:function(t,e){return e.x=t[0],["H",t[0]]},V:function(t,e){return e.y=t[0],["V",t[0]]},C:function(t,e){return e.x=t[4],e.y=t[5],["C",t[0],t[1],t[2],t[3],t[4],t[5]]},Q:function(t,e){return e.x=t[2],e.y=t[3],["Q",t[0],t[1],t[2],t[3]]},Z:function(t,e,i){return e.x=i.x,e.y=i.y,["Z"]}},n="mlhvqtcsaz".split(""),a=0,o=n.length;a<o;++a)s[n[a]]=function(t){return function(e,i,n){if("H"==t)e[0]=e[0]+i.x;else if("V"==t)e[0]=e[0]+i.y;else if("A"==t)e[5]=e[5]+i.x,e[6]=e[6]+i.y;else for(var a=0,r=e.length;a<r;++a)e[a]=e[a]+(a%2?i.y:i.x);if(s&&"function"==typeof s[t])return s[t](e,i,n)}}(n[a].toUpperCase());i.PathArray=function(t,e){i.Array.call(this,t,e||[["M",0,0]])},i.PathArray.prototype=new i.Array,i.PathArray.prototype.constructor=i.PathArray,i.extend(i.PathArray,{toString:function(){return function(t){for(var e=0,i=t.length,s="";e<i;e++)s+=t[e][0],null!=t[e][1]&&(s+=t[e][1],null!=t[e][2]&&(s+=" ",s+=t[e][2],null!=t[e][3]&&(s+=" ",s+=t[e][3],s+=" ",s+=t[e][4],null!=t[e][5]&&(s+=" ",s+=t[e][5],s+=" ",s+=t[e][6],null!=t[e][7]&&(s+=" ",s+=t[e][7])))));return s+" "}(this.value)},move:function(t,e){var i=this.bbox();return i.x,i.y,this},at:function(t){if(!this.destination)return this;for(var e=this.value,s=this.destination.value,n=[],a=new i.PathArray,r=0,o=e.length;r<o;r++){n[r]=[e[r][0]];for(var l=1,h=e[r].length;l<h;l++)n[r][l]=e[r][l]+(s[r][l]-e[r][l])*t;"A"===n[r][0]&&(n[r][4]=+(0!=n[r][4]),n[r][5]=+(0!=n[r][5]))}return a.value=n,a},parse:function(t){if(t instanceof i.PathArray)return t.valueOf();var e,n={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};t="string"==typeof t?t.replace(i.regex.numbersWithDots,h).replace(i.regex.pathLetters," $& ").replace(i.regex.hyphen,"$1 -").trim().split(i.regex.delimiter):t.reduce((function(t,e){return[].concat.call(t,e)}),[]);var a=[],r=new i.Point,o=new i.Point,l=0,c=t.length;do{i.regex.isPathLetter.test(t[l])?(e=t[l],++l):"M"==e?e="L":"m"==e&&(e="l"),a.push(s[e].call(null,t.slice(l,l+=n[e.toUpperCase()]).map(parseFloat),r,o))}while(c>l);return a},bbox:function(){return i.parser.draw||i.prepare(),i.parser.path.setAttribute("d",this.toString()),i.parser.path.getBBox()}}),i.Number=i.invent({create:function(t,e){this.value=0,this.unit=e||"","number"==typeof t?this.value=isNaN(t)?0:isFinite(t)?t:t<0?-34e37:34e37:"string"==typeof t?(e=t.match(i.regex.numberAndUnit))&&(this.value=parseFloat(e[1]),"%"==e[5]?this.value/=100:"s"==e[5]&&(this.value*=1e3),this.unit=e[5]):t instanceof i.Number&&(this.value=t.valueOf(),this.unit=t.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(t){return t=new i.Number(t),new i.Number(this+t,this.unit||t.unit)},minus:function(t){return t=new i.Number(t),new i.Number(this-t,this.unit||t.unit)},times:function(t){return t=new i.Number(t),new i.Number(this*t,this.unit||t.unit)},divide:function(t){return t=new i.Number(t),new i.Number(this/t,this.unit||t.unit)},to:function(t){var e=new i.Number(this);return"string"==typeof t&&(e.unit=t),e},morph:function(t){return this.destination=new i.Number(t),t.relative&&(this.destination.value+=this.value),this},at:function(t){return this.destination?new i.Number(this.destination).minus(this).times(t).plus(this):this}}}),i.Element=i.invent({create:function(t){this._stroke=i.defaults.attrs.stroke,this._event=null,this.dom={},(this.node=t)&&(this.type=t.nodeName,this.node.instance=this,this._stroke=t.getAttribute("stroke")||this._stroke)},extend:{x:function(t){return this.attr("x",t)},y:function(t){return this.attr("y",t)},cx:function(t){return null==t?this.x()+this.width()/2:this.x(t-this.width()/2)},cy:function(t){return null==t?this.y()+this.height()/2:this.y(t-this.height()/2)},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},width:function(t){return this.attr("width",t)},height:function(t){return this.attr("height",t)},size:function(t,e){var s=p(this,t,e);return this.width(new i.Number(s.width)).height(new i.Number(s.height))},clone:function(t){this.writeDataToDom();var e=m(this.node.cloneNode(!0));return t?t.add(e):this.after(e),e},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(t){return this.after(t).remove(),t},addTo:function(t){return t.put(this)},putIn:function(t){return t.add(this)},id:function(t){return this.attr("id",t)},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var t=this.attr("class");return null==t?[]:t.trim().split(i.regex.delimiter)},hasClass:function(t){return-1!=this.classes().indexOf(t)},addClass:function(t){if(!this.hasClass(t)){var e=this.classes();e.push(t),this.attr("class",e.join(" "))}return this},removeClass:function(t){return this.hasClass(t)&&this.attr("class",this.classes().filter((function(e){return e!=t})).join(" ")),this},toggleClass:function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)},reference:function(t){return i.get(this.attr(t))},parent:function(e){var s=this;if(!s.node.parentNode)return null;if(s=i.adopt(s.node.parentNode),!e)return s;for(;s&&s.node instanceof t.SVGElement;){if("string"==typeof e?s.matches(e):s instanceof e)return s;if(!s.node.parentNode||"#document"==s.node.parentNode.nodeName)return null;s=i.adopt(s.node.parentNode)}},doc:function(){return this instanceof i.Doc?this:this.parent(i.Doc)},parents:function(t){var e=[],i=this;do{if(!(i=i.parent(t))||!i.node)break;e.push(i)}while(i.parent);return e},matches:function(t){return function(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector).call(t,e)}(this.node,t)},native:function(){return this.node},svg:function(t){var s=e.createElement("svg");if(!(t&&this instanceof i.Parent))return s.appendChild(t=e.createElement("svg")),this.writeDataToDom(),t.appendChild(this.node.cloneNode(!0)),s.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");s.innerHTML="<svg>"+t.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var n=0,a=s.firstChild.childNodes.length;n<a;n++)this.node.appendChild(s.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each((function(){this.writeDataToDom()})),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(t){return this.dom=t,this},is:function(t){return function(t,e){return t instanceof e}(this,t)}}}),i.easing={"-":function(t){return t},"<>":function(t){return-Math.cos(t*Math.PI)/2+.5},">":function(t){return Math.sin(t*Math.PI/2)},"<":function(t){return 1-Math.cos(t*Math.PI/2)}},i.morph=function(t){return function(e,s){return new i.MorphObj(e,s).at(t)}},i.Situation=i.invent({create:function(t){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new i.Number(t.duration).valueOf(),this.delay=new i.Number(t.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=t.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),i.FX=i.invent({create:function(t){this._target=t,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(t,e,s){"object"===r(t)&&(e=t.ease,s=t.delay,t=t.duration);var n=new i.Situation({duration:t||1e3,delay:s||0,ease:i.easing[e||"-"]||e});return this.queue(n),this},target:function(t){return t&&t instanceof i.Element?(this._target=t,this):this._target},timeToAbsPos:function(t){return(t-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(t){return this.situation.duration/this._speed*t+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=t.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){t.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(t){return("function"==typeof t||t instanceof i.Situation)&&this.situations.push(t),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof i.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var t,e=this.situation;if(e.init)return this;for(var s in e.animations){t=this.target()[s](),Array.isArray(t)||(t=[t]),Array.isArray(e.animations[s])||(e.animations[s]=[e.animations[s]]);for(var n=t.length;n--;)e.animations[s][n]instanceof i.Number&&(t[n]=new i.Number(t[n])),e.animations[s][n]=t[n].morph(e.animations[s][n])}for(var s in e.attrs)e.attrs[s]=new i.MorphObj(this.target().attr(s),e.attrs[s]);for(var s in e.styles)e.styles[s]=new i.MorphObj(this.target().style(s),e.styles[s]);return e.initialTransformation=this.target().matrixify(),e.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(t,e){var i=this.active;return this.active=!1,e&&this.clearQueue(),t&&this.situation&&(!i&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},after:function(t){var e=this.last();return this.target().on("finished.fx",(function i(s){s.detail.situation==e&&(t.call(this,e),this.off("finished.fx",i))})),this._callStart()},during:function(t){var e=this.last(),s=function(s){s.detail.situation==e&&t.call(this,s.detail.pos,i.morph(s.detail.pos),s.detail.eased,e)};return this.target().off("during.fx",s).on("during.fx",s),this.after((function(){this.off("during.fx",s)})),this._callStart()},afterAll:function(t){var e=function e(i){t.call(this),this.off("allfinished.fx",e)};return this.target().off("allfinished.fx",e).on("allfinished.fx",e),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(t,e,i){return this.last()[i||"animations"][t]=e,this._callStart()},step:function(t){var e,i,s;t||(this.absPos=this.timeToAbsPos(+new Date)),!1!==this.situation.loops?(e=Math.max(this.absPos,0),i=Math.floor(e),!0===this.situation.loops||i<this.situation.loops?(this.pos=e-i,s=this.situation.loop,this.situation.loop=i):(this.absPos=this.situation.loops,this.pos=1,s=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=Boolean((this.situation.loop-s)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos),this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var n=this.situation.ease(this.pos);for(var a in this.situation.once)a>this.lastPos&&a<=n&&(this.situation.once[a].call(this.target(),this.pos,n),delete this.situation.once[a]);return this.active&&this.target().fire("during",{pos:this.pos,eased:n,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=n,this):this},eachAt:function(){var t,e=this,s=this.target(),n=this.situation;for(var a in n.animations)t=[].concat(n.animations[a]).map((function(t){return"string"!=typeof t&&t.at?t.at(n.ease(e.pos),e.pos):t})),s[a].apply(s,t);for(var a in n.attrs)t=[a].concat(n.attrs[a]).map((function(t){return"string"!=typeof t&&t.at?t.at(n.ease(e.pos),e.pos):t})),s.attr.apply(s,t);for(var a in n.styles)t=[a].concat(n.styles[a]).map((function(t){return"string"!=typeof t&&t.at?t.at(n.ease(e.pos),e.pos):t})),s.style.apply(s,t);if(n.transforms.length){t=n.initialTransformation,a=0;for(var r=n.transforms.length;a<r;a++){var o=n.transforms[a];o instanceof i.Matrix?t=o.relative?t.multiply((new i.Matrix).morph(o).at(n.ease(this.pos))):t.morph(o).at(n.ease(this.pos)):(o.relative||o.undo(t.extract()),t=t.multiply(o.at(n.ease(this.pos))))}s.matrix(t)}return this},once:function(t,e,i){var s=this.last();return i||(t=s.ease(t)),s.once[t]=e,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:i.Element,construct:{animate:function(t,e,s){return(this.fx||(this.fx=new i.FX(this))).animate(t,e,s)},delay:function(t){return(this.fx||(this.fx=new i.FX(this))).delay(t)},stop:function(t,e){return this.fx&&this.fx.stop(t,e),this},finish:function(){return this.fx&&this.fx.finish(),this}}}),i.MorphObj=i.invent({create:function(t,e){return i.Color.isColor(e)?new i.Color(t).morph(e):i.regex.delimiter.test(t)?i.regex.pathLetters.test(t)?new i.PathArray(t).morph(e):new i.Array(t).morph(e):i.regex.numberAndUnit.test(e)?new i.Number(t).morph(e):(this.value=t,void(this.destination=e))},extend:{at:function(t,e){return e<1?this.value:this.destination},valueOf:function(){return this.value}}}),i.extend(i.FX,{attr:function(t,e,i){if("object"===r(t))for(var s in t)this.attr(s,t[s]);else this.add(t,e,"attrs");return this},plot:function(t,e,i,s){return 4==arguments.length?this.plot([t,e,i,s]):this.add("plot",new(this.target().morphArray)(t))}}),i.Box=i.invent({create:function(t,e,s,n){if(!("object"!==r(t)||t instanceof i.Element))return i.Box.call(this,null!=t.left?t.left:t.x,null!=t.top?t.top:t.y,t.width,t.height);4==arguments.length&&(this.x=t,this.y=e,this.width=s,this.height=n),v(this)}}),i.BBox=i.invent({create:function(t){if(i.Box.apply(this,[].slice.call(arguments)),t instanceof i.Element){var s;try{if(!e.documentElement.contains){for(var n=t.node;n.parentNode;)n=n.parentNode;if(n!=e)throw new Error("Element not in the dom")}s=t.node.getBBox()}catch(e){if(t instanceof i.Shape){i.parser.draw||i.prepare();var a=t.clone(i.parser.draw.instance).show();a&&a.node&&"function"==typeof a.node.getBBox&&(s=a.node.getBBox()),a&&"function"==typeof a.remove&&a.remove()}else s={x:t.node.clientLeft,y:t.node.clientTop,width:t.node.clientWidth,height:t.node.clientHeight}}i.Box.call(this,s)}},inherit:i.Box,parent:i.Element,construct:{bbox:function(){return new i.BBox(this)}}}),i.BBox.prototype.constructor=i.BBox,i.Matrix=i.invent({create:function(t){var e=f([1,0,0,1,0,0]);t=null===t?e:t instanceof i.Element?t.matrixify():"string"==typeof t?f(t.split(i.regex.delimiter).map(parseFloat)):6==arguments.length?f([].slice.call(arguments)):Array.isArray(t)?f(t):t&&"object"===r(t)?t:e;for(var s=x.length-1;s>=0;--s)this[x[s]]=null!=t[x[s]]?t[x[s]]:e[x[s]]},extend:{extract:function(){var t=g(this,0,1);g(this,1,0);var e=180/Math.PI*Math.atan2(t.y,t.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(e*Math.PI/180)+this.f*Math.sin(e*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(e*Math.PI/180)+this.e*Math.sin(-e*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),rotation:e,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new i.Matrix(this)}},clone:function(){return new i.Matrix(this)},morph:function(t){return this.destination=new i.Matrix(t),this},multiply:function(t){return new i.Matrix(this.native().multiply(function(t){return t instanceof i.Matrix||(t=new i.Matrix(t)),t}(t).native()))},inverse:function(){return new i.Matrix(this.native().inverse())},translate:function(t,e){return new i.Matrix(this.native().translate(t||0,e||0))},native:function(){for(var t=i.parser.native.createSVGMatrix(),e=x.length-1;e>=0;e--)t[x[e]]=this[x[e]];return t},toString:function(){return"matrix("+b(this.a)+","+b(this.b)+","+b(this.c)+","+b(this.d)+","+b(this.e)+","+b(this.f)+")"}},parent:i.Element,construct:{ctm:function(){return new i.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof i.Nested){var t=this.rect(1,1),e=t.node.getScreenCTM();return t.remove(),new i.Matrix(e)}return new i.Matrix(this.node.getScreenCTM())}}}),i.Point=i.invent({create:function(t,e){var i;i=Array.isArray(t)?{x:t[0],y:t[1]}:"object"===r(t)?{x:t.x,y:t.y}:null!=t?{x:t,y:null!=e?e:t}:{x:0,y:0},this.x=i.x,this.y=i.y},extend:{clone:function(){return new i.Point(this)},morph:function(t,e){return this.destination=new i.Point(t,e),this}}}),i.extend(i.Element,{point:function(t,e){return new i.Point(t,e).transform(this.screenCTM().inverse())}}),i.extend(i.Element,{attr:function(t,e,s){if(null==t){for(t={},s=(e=this.node.attributes).length-1;s>=0;s--)t[e[s].nodeName]=i.regex.isNumber.test(e[s].nodeValue)?parseFloat(e[s].nodeValue):e[s].nodeValue;return t}if("object"===r(t))for(var n in t)this.attr(n,t[n]);else if(null===e)this.node.removeAttribute(t);else{if(null==e)return null==(e=this.node.getAttribute(t))?i.defaults.attrs[t]:i.regex.isNumber.test(e)?parseFloat(e):e;"stroke-width"==t?this.attr("stroke",parseFloat(e)>0?this._stroke:null):"stroke"==t&&(this._stroke=e),"fill"!=t&&"stroke"!=t||(i.regex.isImage.test(e)&&(e=this.doc().defs().image(e,0,0)),e instanceof i.Image&&(e=this.doc().defs().pattern(0,0,(function(){this.add(e)})))),"number"==typeof e?e=new i.Number(e):i.Color.isColor(e)?e=new i.Color(e):Array.isArray(e)&&(e=new i.Array(e)),"leading"==t?this.leading&&this.leading(e):"string"==typeof s?this.node.setAttributeNS(s,t,e.toString()):this.node.setAttribute(t,e.toString()),!this.rebuild||"font-size"!=t&&"x"!=t||this.rebuild(t,e)}return this}}),i.extend(i.Element,{transform:function(t,e){var s;return"object"!==r(t)?(s=new i.Matrix(this).extract(),"string"==typeof t?s[t]:s):(s=new i.Matrix(this),e=!!e||!!t.relative,null!=t.a&&(s=e?s.multiply(new i.Matrix(t)):new i.Matrix(t)),this.attr("transform",s))}}),i.extend(i.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(i.regex.transforms).slice(0,-1).map((function(t){var e=t.trim().split("(");return[e[0],e[1].split(i.regex.delimiter).map((function(t){return parseFloat(t)}))]})).reduce((function(t,e){return"matrix"==e[0]?t.multiply(f(e[1])):t[e[0]].apply(t,e[1])}),new i.Matrix)},toParent:function(t){if(this==t)return this;var e=this.screenCTM(),i=t.screenCTM().inverse();return this.addTo(t).untransform().transform(i.multiply(e)),this},toDoc:function(){return this.toParent(this.doc())}}),i.Transformation=i.invent({create:function(t,e){if(arguments.length>1&&"boolean"!=typeof e)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(t))for(var i=0,s=this.arguments.length;i<s;++i)this[this.arguments[i]]=t[i];else if(t&&"object"===r(t))for(i=0,s=this.arguments.length;i<s;++i)this[this.arguments[i]]=t[this.arguments[i]];this.inversed=!1,!0===e&&(this.inversed=!0)}}),i.Translate=i.invent({parent:i.Matrix,inherit:i.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),i.extend(i.Element,{style:function(t,e){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"===r(t))for(var s in t)this.style(s,t[s]);else{if(!i.regex.isCss.test(t))return this.node.style[c(t)];for(t=t.split(/\s*;\s*/).filter((function(t){return!!t})).map((function(t){return t.split(/\s*:\s*/)}));e=t.pop();)this.style(e[0],e[1])}else this.node.style[c(t)]=null===e||i.regex.isBlank.test(e)?"":e;return this}}),i.Parent=i.invent({create:function(t){this.constructor.call(this,t)},inherit:i.Element,extend:{children:function(){return i.utils.map(i.utils.filterSVGElements(this.node.childNodes),(function(t){return i.adopt(t)}))},add:function(t,e){return null==e?this.node.appendChild(t.node):t.node!=this.node.childNodes[e]&&this.node.insertBefore(t.node,this.node.childNodes[e]),this},put:function(t,e){return this.add(t,e),t},has:function(t){return this.index(t)>=0},index:function(t){return[].slice.call(this.node.childNodes).indexOf(t.node)},get:function(t){return i.adopt(this.node.childNodes[t])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(t,e){for(var s=this.children(),n=0,a=s.length;n<a;n++)s[n]instanceof i.Element&&t.apply(s[n],[n,s]),e&&s[n]instanceof i.Container&&s[n].each(t,e);return this},removeElement:function(t){return this.node.removeChild(t.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),i.extend(i.Parent,{ungroup:function(t,e){return 0===e||this instanceof i.Defs||this.node==i.parser.draw||(t=t||(this instanceof i.Doc?this:this.parent(i.Parent)),e=e||1/0,this.each((function(){return this instanceof i.Defs?this:this instanceof i.Parent?this.ungroup(t,e-1):this.toParent(t)})),this.node.firstChild||this.remove()),this},flatten:function(t,e){return this.ungroup(t,e)}}),i.Container=i.invent({create:function(t){this.constructor.call(this,t)},inherit:i.Parent}),i.ViewBox=i.invent({parent:i.Container,construct:{}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach((function(t){i.Element.prototype[t]=function(e){return i.on(this.node,t,e),this}})),i.listeners=[],i.handlerMap=[],i.listenerId=0,i.on=function(t,e,s,n,a){var r=s.bind(n||t.instance||t),o=(i.handlerMap.indexOf(t)+1||i.handlerMap.push(t))-1,l=e.split(".")[0],h=e.split(".")[1]||"*";i.listeners[o]=i.listeners[o]||{},i.listeners[o][l]=i.listeners[o][l]||{},i.listeners[o][l][h]=i.listeners[o][l][h]||{},s._svgjsListenerId||(s._svgjsListenerId=++i.listenerId),i.listeners[o][l][h][s._svgjsListenerId]=r,t.addEventListener(l,r,a||{passive:!0})},i.off=function(t,e,s){var n=i.handlerMap.indexOf(t),a=e&&e.split(".")[0],r=e&&e.split(".")[1],o="";if(-1!=n)if(s){if("function"==typeof s&&(s=s._svgjsListenerId),!s)return;i.listeners[n][a]&&i.listeners[n][a][r||"*"]&&(t.removeEventListener(a,i.listeners[n][a][r||"*"][s],!1),delete i.listeners[n][a][r||"*"][s])}else if(r&&a){if(i.listeners[n][a]&&i.listeners[n][a][r]){for(var l in i.listeners[n][a][r])i.off(t,[a,r].join("."),l);delete i.listeners[n][a][r]}}else if(r)for(var h in i.listeners[n])for(var o in i.listeners[n][h])r===o&&i.off(t,[h,r].join("."));else if(a){if(i.listeners[n][a]){for(var o in i.listeners[n][a])i.off(t,[a,o].join("."));delete i.listeners[n][a]}}else{for(var h in i.listeners[n])i.off(t,h);delete i.listeners[n],delete i.handlerMap[n]}},i.extend(i.Element,{on:function(t,e,s,n){return i.on(this.node,t,e,s,n),this},off:function(t,e){return i.off(this.node,t,e),this},fire:function(e,s){return e instanceof t.Event?this.node.dispatchEvent(e):this.node.dispatchEvent(e=new i.CustomEvent(e,{detail:s,cancelable:!0})),this._event=e,this},event:function(){return this._event}}),i.Defs=i.invent({create:"defs",inherit:i.Container}),i.G=i.invent({create:"g",inherit:i.Container,extend:{x:function(t){return null==t?this.transform("x"):this.transform({x:t-this.x()},!0)}},construct:{group:function(){return this.put(new i.G)}}}),i.Doc=i.invent({create:function(t){t&&("svg"==(t="string"==typeof t?e.getElementById(t):t).nodeName?this.constructor.call(this,t):(this.constructor.call(this,i.create("svg")),t.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:i.Container,extend:{namespace:function(){return this.attr({xmlns:i.ns,version:"1.1"}).attr("xmlns:xlink",i.xlink,i.xmlns).attr("xmlns:svgjs",i.svgjs,i.xmlns)},defs:function(){var t;return this._defs||((t=this.node.getElementsByTagName("defs")[0])?this._defs=i.adopt(t):this._defs=new i.Defs,this.node.appendChild(this._defs.node)),this._defs},parent:function(){return this.node.parentNode&&"#document"!=this.node.parentNode.nodeName?this.node.parentNode:null},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,i.parser.draw&&!i.parser.draw.parentNode&&this.node.appendChild(i.parser.draw),this},clone:function(t){this.writeDataToDom();var e=this.node,i=m(e.cloneNode(!0));return t?(t.node||t).appendChild(i.node):e.parentNode.insertBefore(i.node,e.nextSibling),i}}}),i.extend(i.Element,{}),i.Gradient=i.invent({create:function(t){this.constructor.call(this,i.create(t+"Gradient")),this.type=t},inherit:i.Container,extend:{at:function(t,e,s){return this.put(new i.Stop).update(t,e,s)},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(t,e,s){return"transform"==t&&(t="gradientTransform"),i.Container.prototype.attr.call(this,t,e,s)}},construct:{gradient:function(t,e){return this.defs().gradient(t,e)}}}),i.extend(i.Gradient,i.FX,{from:function(t,e){return"radial"==(this._target||this).type?this.attr({fx:new i.Number(t),fy:new i.Number(e)}):this.attr({x1:new i.Number(t),y1:new i.Number(e)})},to:function(t,e){return"radial"==(this._target||this).type?this.attr({cx:new i.Number(t),cy:new i.Number(e)}):this.attr({x2:new i.Number(t),y2:new i.Number(e)})}}),i.extend(i.Defs,{gradient:function(t,e){return this.put(new i.Gradient(t)).update(e)}}),i.Stop=i.invent({create:"stop",inherit:i.Element,extend:{update:function(t){return("number"==typeof t||t instanceof i.Number)&&(t={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",new i.Number(t.offset)),this}}}),i.Pattern=i.invent({create:"pattern",inherit:i.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},toString:function(){return this.fill()},attr:function(t,e,s){return"transform"==t&&(t="patternTransform"),i.Container.prototype.attr.call(this,t,e,s)}},construct:{pattern:function(t,e,i){return this.defs().pattern(t,e,i)}}}),i.extend(i.Defs,{pattern:function(t,e,s){return this.put(new i.Pattern).update(s).attr({x:0,y:0,width:t,height:e,patternUnits:"userSpaceOnUse"})}}),i.Shape=i.invent({create:function(t){this.constructor.call(this,t)},inherit:i.Element}),i.Symbol=i.invent({create:"symbol",inherit:i.Container,construct:{symbol:function(){return this.put(new i.Symbol)}}}),i.Use=i.invent({create:"use",inherit:i.Shape,extend:{element:function(t,e){return this.attr("href",(e||"")+"#"+t,i.xlink)}},construct:{use:function(t,e){return this.put(new i.Use).element(t,e)}}}),i.Rect=i.invent({create:"rect",inherit:i.Shape,construct:{rect:function(t,e){return this.put(new i.Rect).size(t,e)}}}),i.Circle=i.invent({create:"circle",inherit:i.Shape,construct:{circle:function(t){return this.put(new i.Circle).rx(new i.Number(t).divide(2)).move(0,0)}}}),i.extend(i.Circle,i.FX,{rx:function(t){return this.attr("r",t)},ry:function(t){return this.rx(t)}}),i.Ellipse=i.invent({create:"ellipse",inherit:i.Shape,construct:{ellipse:function(t,e){return this.put(new i.Ellipse).size(t,e).move(0,0)}}}),i.extend(i.Ellipse,i.Rect,i.FX,{rx:function(t){return this.attr("rx",t)},ry:function(t){return this.attr("ry",t)}}),i.extend(i.Circle,i.Ellipse,{x:function(t){return null==t?this.cx()-this.rx():this.cx(t+this.rx())},y:function(t){return null==t?this.cy()-this.ry():this.cy(t+this.ry())},cx:function(t){return null==t?this.attr("cx"):this.attr("cx",t)},cy:function(t){return null==t?this.attr("cy"):this.attr("cy",t)},width:function(t){return null==t?2*this.rx():this.rx(new i.Number(t).divide(2))},height:function(t){return null==t?2*this.ry():this.ry(new i.Number(t).divide(2))},size:function(t,e){var s=p(this,t,e);return this.rx(new i.Number(s.width).divide(2)).ry(new i.Number(s.height).divide(2))}}),i.Line=i.invent({create:"line",inherit:i.Shape,extend:{array:function(){return new i.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(t,e,s,n){return null==t?this.array():(t=void 0!==e?{x1:t,y1:e,x2:s,y2:n}:new i.PointArray(t).toLine(),this.attr(t))},move:function(t,e){return this.attr(this.array().move(t,e).toLine())},size:function(t,e){var i=p(this,t,e);return this.attr(this.array().size(i.width,i.height).toLine())}},construct:{line:function(t,e,s,n){return i.Line.prototype.plot.apply(this.put(new i.Line),null!=t?[t,e,s,n]:[0,0,0,0])}}}),i.Polyline=i.invent({create:"polyline",inherit:i.Shape,construct:{polyline:function(t){return this.put(new i.Polyline).plot(t||new i.PointArray)}}}),i.Polygon=i.invent({create:"polygon",inherit:i.Shape,construct:{polygon:function(t){return this.put(new i.Polygon).plot(t||new i.PointArray)}}}),i.extend(i.Polyline,i.Polygon,{array:function(){return this._array||(this._array=new i.PointArray(this.attr("points")))},plot:function(t){return null==t?this.array():this.clear().attr("points","string"==typeof t?t:this._array=new i.PointArray(t))},clear:function(){return delete this._array,this},move:function(t,e){return this.attr("points",this.array().move(t,e))},size:function(t,e){var i=p(this,t,e);return this.attr("points",this.array().size(i.width,i.height))}}),i.extend(i.Line,i.Polyline,i.Polygon,{morphArray:i.PointArray,x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},width:function(t){var e=this.bbox();return null==t?e.width:this.size(t,e.height)},height:function(t){var e=this.bbox();return null==t?e.height:this.size(e.width,t)}}),i.Path=i.invent({create:"path",inherit:i.Shape,extend:{morphArray:i.PathArray,array:function(){return this._array||(this._array=new i.PathArray(this.attr("d")))},plot:function(t){return null==t?this.array():this.clear().attr("d","string"==typeof t?t:this._array=new i.PathArray(t))},clear:function(){return delete this._array,this}},construct:{path:function(t){return this.put(new i.Path).plot(t||new i.PathArray)}}}),i.Image=i.invent({create:"image",inherit:i.Shape,extend:{load:function(e){if(!e)return this;var s=this,n=new t.Image;return i.on(n,"load",(function(){i.off(n);var t=s.parent(i.Pattern);null!==t&&(0==s.width()&&0==s.height()&&s.size(n.width,n.height),t&&0==t.width()&&0==t.height()&&t.size(s.width(),s.height()),"function"==typeof s._loaded&&s._loaded.call(s,{width:n.width,height:n.height,ratio:n.width/n.height,url:e}))})),i.on(n,"error",(function(t){i.off(n),"function"==typeof s._error&&s._error.call(s,t)})),this.attr("href",n.src=this.src=e,i.xlink)},loaded:function(t){return this._loaded=t,this},error:function(t){return this._error=t,this}},construct:{image:function(t,e,s){return this.put(new i.Image).load(t).size(e||0,s||e||0)}}}),i.Text=i.invent({create:function(){this.constructor.call(this,i.create("text")),this.dom.leading=new i.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",i.defaults.attrs["font-family"])},inherit:i.Shape,extend:{x:function(t){return null==t?this.attr("x"):this.attr("x",t)},text:function(t){if(void 0===t){t="";for(var e=this.node.childNodes,s=0,n=e.length;s<n;++s)0!=s&&3!=e[s].nodeType&&1==i.adopt(e[s]).dom.newLined&&(t+="\n"),t+=e[s].textContent;return t}if(this.clear().build(!0),"function"==typeof t)t.call(this,this);else{s=0;for(var a=(t=t.split("\n")).length;s<a;s++)this.tspan(t[s]).newLine()}return this.build(!1).rebuild()},size:function(t){return this.attr("font-size",t).rebuild()},leading:function(t){return null==t?this.dom.leading:(this.dom.leading=new i.Number(t),this.rebuild())},lines:function(){var t=(this.textPath&&this.textPath()||this).node,e=i.utils.map(i.utils.filterSVGElements(t.childNodes),(function(t){return i.adopt(t)}));return new i.Set(e)},rebuild:function(t){if("boolean"==typeof t&&(this._rebuild=t),this._rebuild){var e=this,s=0,n=this.dom.leading*new i.Number(this.attr("font-size"));this.lines().each((function(){this.dom.newLined&&(e.textPath()||this.attr("x",e.attr("x")),"\n"==this.text()?s+=n:(this.attr("dy",n+s),s=0))})),this.fire("rebuild")}return this},build:function(t){return this._build=!!t,this},setData:function(t){return this.dom=t,this.dom.leading=new i.Number(t.leading||1.3),this}},construct:{text:function(t){return this.put(new i.Text).text(t)},plain:function(t){return this.put(new i.Text).plain(t)}}}),i.Tspan=i.invent({create:"tspan",inherit:i.Shape,extend:{text:function(t){return null==t?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof t?t.call(this,this):this.plain(t),this)},dx:function(t){return this.attr("dx",t)},dy:function(t){return this.attr("dy",t)},newLine:function(){var t=this.parent(i.Text);return this.dom.newLined=!0,this.dy(t.dom.leading*t.attr("font-size")).attr("x",t.x())}}}),i.extend(i.Text,i.Tspan,{plain:function(t){return!1===this._build&&this.clear(),this.node.appendChild(e.createTextNode(t)),this},tspan:function(t){var e=(this.textPath&&this.textPath()||this).node,s=new i.Tspan;return!1===this._build&&this.clear(),e.appendChild(s.node),s.text(t)},clear:function(){for(var t=(this.textPath&&this.textPath()||this).node;t.hasChildNodes();)t.removeChild(t.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),i.TextPath=i.invent({create:"textPath",inherit:i.Parent,parent:i.Text,construct:{morphArray:i.PathArray,array:function(){var t=this.track();return t?t.array():null},plot:function(t){var e=this.track(),i=null;return e&&(i=e.plot(t)),null==t?i:this},track:function(){var t=this.textPath();if(t)return t.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return i.adopt(this.node.firstChild)}}}),i.Nested=i.invent({create:function(){this.constructor.call(this,i.create("svg")),this.style("overflow","visible")},inherit:i.Container,construct:{nested:function(){return this.put(new i.Nested)}}});var l={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(t,e){return"color"==e?t:t+"-"+e}};function h(t,e,s,n){return s+n.replace(i.regex.dots," .")}function c(t){return t.toLowerCase().replace(/-(.)/g,(function(t,e){return e.toUpperCase()}))}function d(t){return t.charAt(0).toUpperCase()+t.slice(1)}function u(t){var e=t.toString(16);return 1==e.length?"0"+e:e}function p(t,e,i){if(null==e||null==i){var s=t.bbox();null==e?e=s.width/s.height*i:null==i&&(i=s.height/s.width*e)}return{width:e,height:i}}function g(t,e,i){return{x:e*t.a+i*t.c+0,y:e*t.b+i*t.d+0}}function f(t){return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}function m(e){for(var s=e.childNodes.length-1;s>=0;s--)e.childNodes[s]instanceof t.SVGElement&&m(e.childNodes[s]);return i.adopt(e).id(i.eid(e.nodeName))}function v(t){return null==t.x&&(t.x=0,t.y=0,t.width=0,t.height=0),t.w=t.width,t.h=t.height,t.x2=t.x+t.width,t.y2=t.y+t.height,t.cx=t.x+t.width/2,t.cy=t.y+t.height/2,t}function b(t){return Math.abs(t)>1e-37?t:0}["fill","stroke"].forEach((function(t){var e={};e[t]=function(e){if(void 0===e)return this;if("string"==typeof e||i.Color.isRgb(e)||e&&"function"==typeof e.fill)this.attr(t,e);else for(var s=l[t].length-1;s>=0;s--)null!=e[l[t][s]]&&this.attr(l.prefix(t,l[t][s]),e[l[t][s]]);return this},i.extend(i.Element,i.FX,e)})),i.extend(i.Element,i.FX,{translate:function(t,e){return this.transform({x:t,y:e})},matrix:function(t){return this.attr("transform",new i.Matrix(6==arguments.length?[].slice.call(arguments):t))},opacity:function(t){return this.attr("opacity",t)},dx:function(t){return this.x(new i.Number(t).plus(this instanceof i.FX?0:this.x()),!0)},dy:function(t){return this.y(new i.Number(t).plus(this instanceof i.FX?0:this.y()),!0)}}),i.extend(i.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(t){return this.node.getPointAtLength(t)}}),i.Set=i.invent({create:function(t){Array.isArray(t)?this.members=t:this.clear()},extend:{add:function(){for(var t=[].slice.call(arguments),e=0,i=t.length;e<i;e++)this.members.push(t[e]);return this},remove:function(t){var e=this.index(t);return e>-1&&this.members.splice(e,1),this},each:function(t){for(var e=0,i=this.members.length;e<i;e++)t.apply(this.members[e],[e,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(t){return this.index(t)>=0},index:function(t){return this.members.indexOf(t)},get:function(t){return this.members[t]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members}},construct:{set:function(t){return new i.Set(t)}}}),i.FX.Set=i.invent({create:function(t){this.set=t}}),i.Set.inherit=function(){var t=[];for(var e in i.Shape.prototype)"function"==typeof i.Shape.prototype[e]&&"function"!=typeof i.Set.prototype[e]&&t.push(e);for(var e in t.forEach((function(t){i.Set.prototype[t]=function(){for(var e=0,s=this.members.length;e<s;e++)this.members[e]&&"function"==typeof this.members[e][t]&&this.members[e][t].apply(this.members[e],arguments);return"animate"==t?this.fx||(this.fx=new i.FX.Set(this)):this}})),t=[],i.FX.prototype)"function"==typeof i.FX.prototype[e]&&"function"!=typeof i.FX.Set.prototype[e]&&t.push(e);t.forEach((function(t){i.FX.Set.prototype[t]=function(){for(var e=0,i=this.set.members.length;e<i;e++)this.set.members[e].fx[t].apply(this.set.members[e].fx,arguments);return this}}))},i.extend(i.Element,{}),i.extend(i.Element,{remember:function(t,e){if("object"===r(arguments[0]))for(var i in t)this.remember(i,t[i]);else{if(1==arguments.length)return this.memory()[t];this.memory()[t]=e}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var t=arguments.length-1;t>=0;t--)delete this.memory()[arguments[t]];return this},memory:function(){return this._memory||(this._memory={})}}),i.get=function(t){var s=e.getElementById(function(t){var e=(t||"").toString().match(i.regex.reference);if(e)return e[1]}(t)||t);return i.adopt(s)},i.select=function(t,s){return new i.Set(i.utils.map((s||e).querySelectorAll(t),(function(t){return i.adopt(t)})))},i.extend(i.Parent,{select:function(t){return i.select(t,this.node)}});var x="abcdef".split("");if("function"!=typeof t.CustomEvent){var y=function(t,i){i=i||{bubbles:!1,cancelable:!1,detail:void 0};var s=e.createEvent("CustomEvent");return s.initCustomEvent(t,i.bubbles,i.cancelable,i.detail),s};y.prototype=t.Event.prototype,i.CustomEvent=y}else i.CustomEvent=t.CustomEvent;return i},s=function(){return zt(Nt,Nt.document)}.call(e,i,e,t),void 0!==s&&(t.exports=s),
/*! svg.filter.js - v2.0.2 - 2016-02-24
  * https://github.com/wout/svg.filter.js
  * Copyright (c) 2016 Wout Fierens; Licensed MIT */
function(){SVG.Filter=SVG.invent({create:"filter",inherit:SVG.Parent,extend:{source:"SourceGraphic",sourceAlpha:"SourceAlpha",background:"BackgroundImage",backgroundAlpha:"BackgroundAlpha",fill:"FillPaint",stroke:"StrokePaint",autoSetIn:!0,put:function(t,e){return this.add(t,e),!t.attr("in")&&this.autoSetIn&&t.attr("in",this.source),t.attr("result")||t.attr("result",t),t},blend:function(t,e,i){return this.put(new SVG.BlendEffect(t,e,i))},colorMatrix:function(t,e){return this.put(new SVG.ColorMatrixEffect(t,e))},convolveMatrix:function(t){return this.put(new SVG.ConvolveMatrixEffect(t))},componentTransfer:function(t){return this.put(new SVG.ComponentTransferEffect(t))},composite:function(t,e,i){return this.put(new SVG.CompositeEffect(t,e,i))},flood:function(t,e){return this.put(new SVG.FloodEffect(t,e))},offset:function(t,e){return this.put(new SVG.OffsetEffect(t,e))},image:function(t){return this.put(new SVG.ImageEffect(t))},merge:function(){var t=[void 0];for(var e in arguments)t.push(arguments[e]);return this.put(new(SVG.MergeEffect.bind.apply(SVG.MergeEffect,t)))},gaussianBlur:function(t,e){return this.put(new SVG.GaussianBlurEffect(t,e))},morphology:function(t,e){return this.put(new SVG.MorphologyEffect(t,e))},diffuseLighting:function(t,e,i){return this.put(new SVG.DiffuseLightingEffect(t,e,i))},displacementMap:function(t,e,i,s,n){return this.put(new SVG.DisplacementMapEffect(t,e,i,s,n))},specularLighting:function(t,e,i,s){return this.put(new SVG.SpecularLightingEffect(t,e,i,s))},tile:function(){return this.put(new SVG.TileEffect)},turbulence:function(t,e,i,s,n){return this.put(new SVG.TurbulenceEffect(t,e,i,s,n))},toString:function(){return"url(#"+this.attr("id")+")"}}}),SVG.extend(SVG.Defs,{filter:function(t){var e=this.put(new SVG.Filter);return"function"==typeof t&&t.call(e,e),e}}),SVG.extend(SVG.Container,{filter:function(t){return this.defs().filter(t)}}),SVG.extend(SVG.Element,SVG.G,SVG.Nested,{filter:function(t){return this.filterer=t instanceof SVG.Element?t:this.doc().filter(t),this.doc()&&this.filterer.doc()!==this.doc()&&this.doc().defs().add(this.filterer),this.attr("filter",this.filterer),this.filterer},unfilter:function(t){return this.filterer&&!0===t&&this.filterer.remove(),delete this.filterer,this.attr("filter",null)}}),SVG.Effect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(t){return null==t?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",t)},result:function(t){return null==t?this.attr("result"):this.attr("result",t)},toString:function(){return this.result()}}}),SVG.ParentEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Parent,extend:{in:function(t){return null==t?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",t)},result:function(t){return null==t?this.attr("result"):this.attr("result",t)},toString:function(){return this.result()}}});var t={blend:function(t,e){return this.parent()&&this.parent().blend(this,t,e)},colorMatrix:function(t,e){return this.parent()&&this.parent().colorMatrix(t,e).in(this)},convolveMatrix:function(t){return this.parent()&&this.parent().convolveMatrix(t).in(this)},componentTransfer:function(t){return this.parent()&&this.parent().componentTransfer(t).in(this)},composite:function(t,e){return this.parent()&&this.parent().composite(this,t,e)},flood:function(t,e){return this.parent()&&this.parent().flood(t,e)},offset:function(t,e){return this.parent()&&this.parent().offset(t,e).in(this)},image:function(t){return this.parent()&&this.parent().image(t)},merge:function(){return this.parent()&&this.parent().merge.apply(this.parent(),[this].concat(arguments))},gaussianBlur:function(t,e){return this.parent()&&this.parent().gaussianBlur(t,e).in(this)},morphology:function(t,e){return this.parent()&&this.parent().morphology(t,e).in(this)},diffuseLighting:function(t,e,i){return this.parent()&&this.parent().diffuseLighting(t,e,i).in(this)},displacementMap:function(t,e,i,s){return this.parent()&&this.parent().displacementMap(this,t,e,i,s)},specularLighting:function(t,e,i,s){return this.parent()&&this.parent().specularLighting(t,e,i,s).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(t,e,i,s,n){return this.parent()&&this.parent().turbulence(t,e,i,s,n).in(this)}};SVG.extend(SVG.Effect,t),SVG.extend(SVG.ParentEffect,t),SVG.ChildEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(t){this.attr("in",t)}}});var e={blend:function(t,e,i){this.attr({in:t,in2:e,mode:i||"normal"})},colorMatrix:function(t,e){"matrix"==t&&(e=n(e)),this.attr({type:t,values:void 0===e?null:e})},convolveMatrix:function(t){t=n(t),this.attr({order:Math.sqrt(t.split(" ").length),kernelMatrix:t})},composite:function(t,e,i){this.attr({in:t,in2:e,operator:i})},flood:function(t,e){this.attr("flood-color",t),null!=e&&this.attr("flood-opacity",e)},offset:function(t,e){this.attr({dx:t,dy:e})},image:function(t){this.attr("href",t,SVG.xlink)},displacementMap:function(t,e,i,s,n){this.attr({in:t,in2:e,scale:i,xChannelSelector:s,yChannelSelector:n})},gaussianBlur:function(t,e){null!=t||null!=e?this.attr("stdDeviation",a(Array.prototype.slice.call(arguments))):this.attr("stdDeviation","0 0")},morphology:function(t,e){this.attr({operator:t,radius:e})},tile:function(){},turbulence:function(t,e,i,s,n){this.attr({numOctaves:e,seed:i,stitchTiles:s,baseFrequency:t,type:n})}},i={merge:function(){var t;if(arguments[0]instanceof SVG.Set){var e=this;arguments[0].each((function(t){this instanceof SVG.MergeNode?e.put(this):(this instanceof SVG.Effect||this instanceof SVG.ParentEffect)&&e.put(new SVG.MergeNode(this))}))}else{t=Array.isArray(arguments[0])?arguments[0]:arguments;for(var i=0;i<t.length;i++)t[i]instanceof SVG.MergeNode?this.put(t[i]):this.put(new SVG.MergeNode(t[i]))}},componentTransfer:function(t){if(this.rgb=new SVG.Set,["r","g","b","a"].forEach(function(t){this[t]=new(SVG["Func"+t.toUpperCase()])("identity"),this.rgb.add(this[t]),this.node.appendChild(this[t].node)}.bind(this)),t)for(var e in t.rgb&&(["r","g","b"].forEach(function(e){this[e].attr(t.rgb)}.bind(this)),delete t.rgb),t)this[e].attr(t[e])},diffuseLighting:function(t,e,i){this.attr({surfaceScale:t,diffuseConstant:e,kernelUnitLength:i})},specularLighting:function(t,e,i,s){this.attr({surfaceScale:t,diffuseConstant:e,specularExponent:i,kernelUnitLength:s})}},s={distantLight:function(t,e){this.attr({azimuth:t,elevation:e})},pointLight:function(t,e,i){this.attr({x:t,y:e,z:i})},spotLight:function(t,e,i,s,n,a){this.attr({x:t,y:e,z:i,pointsAtX:s,pointsAtY:n,pointsAtZ:a})},mergeNode:function(t){this.attr("in",t)}};function n(t){return Array.isArray(t)&&(t=new SVG.Array(t)),t.toString().replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}function a(t){if(!Array.isArray(t))return t;for(var e=0,i=t.length,s=[];e<i;e++)s.push(t[e]);return s.join(" ")}function r(){var t=function(){};for(var e in"function"==typeof arguments[arguments.length-1]&&(t=arguments[arguments.length-1],Array.prototype.splice.call(arguments,arguments.length-1,1)),arguments)for(var i in arguments[e])t(arguments[e][i],i,arguments[e])}["r","g","b","a"].forEach((function(t){s["Func"+t.toUpperCase()]=function(t){switch(this.attr("type",t),t){case"table":this.attr("tableValues",arguments[1]);break;case"linear":this.attr("slope",arguments[1]),this.attr("intercept",arguments[2]);break;case"gamma":this.attr("amplitude",arguments[1]),this.attr("exponent",arguments[2]),this.attr("offset",arguments[2])}}})),r(e,(function(t,e){var i=e.charAt(0).toUpperCase()+e.slice(1);SVG[i+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+i)),t.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.Effect,extend:{}})})),r(i,(function(t,e){var i=e.charAt(0).toUpperCase()+e.slice(1);SVG[i+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+i)),t.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.ParentEffect,extend:{}})})),r(s,(function(t,e){var i=e.charAt(0).toUpperCase()+e.slice(1);SVG[i]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+i)),t.apply(this,arguments)},inherit:SVG.ChildEffect,extend:{}})})),SVG.extend(SVG.MergeEffect,{in:function(t){return t instanceof SVG.MergeNode?this.add(t,0):this.add(new SVG.MergeNode(t),0),this}}),SVG.extend(SVG.CompositeEffect,SVG.BlendEffect,SVG.DisplacementMapEffect,{in2:function(t){return null==t?this.parent()&&this.parent().select('[result="'+this.attr("in2")+'"]').get(0)||this.attr("in2"):this.attr("in2",t)}}),SVG.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]}}.call(void 0),function(){function t(t,n,a,r,o,l,h){for(var c=t.slice(n,a||h),d=r.slice(o,l||h),u=0,p={pos:[0,0],start:[0,0]},g={pos:[0,0],start:[0,0]};;){if(c[u]=e.call(p,c[u]),d[u]=e.call(g,d[u]),c[u][0]!=d[u][0]||"M"==c[u][0]||"A"==c[u][0]&&(c[u][4]!=d[u][4]||c[u][5]!=d[u][5])?(Array.prototype.splice.apply(c,[u,1].concat(s.call(p,c[u]))),Array.prototype.splice.apply(d,[u,1].concat(s.call(g,d[u])))):(c[u]=i.call(p,c[u]),d[u]=i.call(g,d[u])),++u==c.length&&u==d.length)break;u==c.length&&c.push(["C",p.pos[0],p.pos[1],p.pos[0],p.pos[1],p.pos[0],p.pos[1]]),u==d.length&&d.push(["C",g.pos[0],g.pos[1],g.pos[0],g.pos[1],g.pos[0],g.pos[1]])}return{start:c,dest:d}}function e(t){switch(t[0]){case"z":case"Z":t[0]="L",t[1]=this.start[0],t[2]=this.start[1];break;case"H":t[0]="L",t[2]=this.pos[1];break;case"V":t[0]="L",t[2]=t[1],t[1]=this.pos[0];break;case"T":t[0]="Q",t[3]=t[1],t[4]=t[2],t[1]=this.reflection[1],t[2]=this.reflection[0];break;case"S":t[0]="C",t[6]=t[4],t[5]=t[3],t[4]=t[2],t[3]=t[1],t[2]=this.reflection[1],t[1]=this.reflection[0]}return t}function i(t){var e=t.length;return this.pos=[t[e-2],t[e-1]],-1!="SCQT".indexOf(t[0])&&(this.reflection=[2*this.pos[0]-t[e-4],2*this.pos[1]-t[e-3]]),t}function s(t){var e=[t];switch(t[0]){case"M":return this.pos=this.start=[t[1],t[2]],e;case"L":t[5]=t[3]=t[1],t[6]=t[4]=t[2],t[1]=this.pos[0],t[2]=this.pos[1];break;case"Q":t[6]=t[4],t[5]=t[3],t[4]=1*t[4]/3+2*t[2]/3,t[3]=1*t[3]/3+2*t[1]/3,t[2]=1*this.pos[1]/3+2*t[2]/3,t[1]=1*this.pos[0]/3+2*t[1]/3;break;case"A":e=function(t,e){var i,s,n,a,r,o,l,h,c,d,u,p,g,f,m,v,b,x,y,w,k,C,S,_,A,I,P=Math.abs(e[1]),T=Math.abs(e[2]),E=e[3]%360,L=e[4],M=e[5],O=e[6],D=e[7],R=new SVG.Point(t),N=new SVG.Point(O,D),z=[];if(0===P||0===T||R.x===N.x&&R.y===N.y)return[["C",R.x,R.y,N.x,N.y,N.x,N.y]];for(i=new SVG.Point((R.x-N.x)/2,(R.y-N.y)/2).transform((new SVG.Matrix).rotate(E)),(s=i.x*i.x/(P*P)+i.y*i.y/(T*T))>1&&(P*=s=Math.sqrt(s),T*=s),n=(new SVG.Matrix).rotate(E).scale(1/P,1/T).rotate(-E),R=R.transform(n),N=N.transform(n),a=[N.x-R.x,N.y-R.y],o=a[0]*a[0]+a[1]*a[1],r=Math.sqrt(o),a[0]/=r,a[1]/=r,l=o<4?Math.sqrt(1-o/4):0,L===M&&(l*=-1),h=new SVG.Point((N.x+R.x)/2+l*-a[1],(N.y+R.y)/2+l*a[0]),c=new SVG.Point(R.x-h.x,R.y-h.y),d=new SVG.Point(N.x-h.x,N.y-h.y),u=Math.acos(c.x/Math.sqrt(c.x*c.x+c.y*c.y)),c.y<0&&(u*=-1),p=Math.acos(d.x/Math.sqrt(d.x*d.x+d.y*d.y)),d.y<0&&(p*=-1),M&&u>p&&(p+=2*Math.PI),!M&&u<p&&(p-=2*Math.PI),f=Math.ceil(2*Math.abs(u-p)/Math.PI),v=[],b=u,g=(p-u)/f,m=4*Math.tan(g/4)/3,k=0;k<=f;k++)y=Math.cos(b),x=Math.sin(b),w=new SVG.Point(h.x+y,h.y+x),v[k]=[new SVG.Point(w.x+m*x,w.y-m*y),w,new SVG.Point(w.x-m*x,w.y+m*y)],b+=g;for(v[0][0]=v[0][1].clone(),v[v.length-1][2]=v[v.length-1][1].clone(),n=(new SVG.Matrix).rotate(E).scale(P,T).rotate(-E),k=0,C=v.length;k<C;k++)v[k][0]=v[k][0].transform(n),v[k][1]=v[k][1].transform(n),v[k][2]=v[k][2].transform(n);for(k=1,C=v.length;k<C;k++)S=(w=v[k-1][2]).x,_=w.y,A=(w=v[k][0]).x,I=w.y,O=(w=v[k][1]).x,D=w.y,z.push(["C",S,_,A,I,O,D]);return z}(this.pos,t),t=e[0]}return t[0]="C",this.pos=[t[5],t[6]],this.reflection=[2*t[5]-t[3],2*t[6]-t[4]],e}function n(t,e){if(!1===e)return!1;for(var i=e,s=t.length;i<s;++i)if("M"==t[i][0])return i;return!1}SVG.extend(SVG.PathArray,{morph:function(e){for(var i=this.value,s=this.parse(e),a=0,r=0,o=!1,l=!1;!1!==a||!1!==r;){var h;o=n(i,!1!==a&&a+1),l=n(s,!1!==r&&r+1),!1===a&&(a=0==(h=new SVG.PathArray(c.start).bbox()).height||0==h.width?i.push(i[0])-1:i.push(["M",h.x+h.width/2,h.y+h.height/2])-1),!1===r&&(r=0==(h=new SVG.PathArray(c.dest).bbox()).height||0==h.width?s.push(s[0])-1:s.push(["M",h.x+h.width/2,h.y+h.height/2])-1);var c=t(i,a,o,s,r,l);i=i.slice(0,a).concat(c.start,!1===o?[]:i.slice(o)),s=s.slice(0,r).concat(c.dest,!1===l?[]:s.slice(l)),a=!1!==o&&a+c.start.length,r=!1!==l&&r+c.dest.length}return this.value=i,this.destination=new SVG.PathArray,this.destination.value=s,this}})}(),
/*! svg.draggable.js - v2.2.2 - 2019-01-08
  * https://github.com/svgdotjs/svg.draggable.js
  * Copyright (c) 2019 Wout Fierens; Licensed MIT */
function(){function t(t){t.remember("_draggable",this),this.el=t}t.prototype.init=function(t,e){var i=this;this.constraint=t,this.value=e,this.el.on("mousedown.drag",(function(t){i.start(t)})),this.el.on("touchstart.drag",(function(t){i.start(t)}))},t.prototype.transformPoint=function(t,e){var i=(t=t||window.event).changedTouches&&t.changedTouches[0]||t;return this.p.x=i.clientX-(e||0),this.p.y=i.clientY,this.p.matrixTransform(this.m)},t.prototype.getBBox=function(){var t=this.el.bbox();return this.el instanceof SVG.Nested&&(t=this.el.rbox()),(this.el instanceof SVG.G||this.el instanceof SVG.Use||this.el instanceof SVG.Nested)&&(t.x=this.el.x(),t.y=this.el.y()),t},t.prototype.start=function(t){if("click"!=t.type&&"mousedown"!=t.type&&"mousemove"!=t.type||1==(t.which||t.buttons)){var e=this;if(this.el.fire("beforedrag",{event:t,handler:this}),!this.el.event().defaultPrevented){t.preventDefault(),t.stopPropagation(),this.parent=this.parent||this.el.parent(SVG.Nested)||this.el.parent(SVG.Doc),this.p=this.parent.node.createSVGPoint(),this.m=this.el.node.getScreenCTM().inverse();var i,s=this.getBBox();if(this.el instanceof SVG.Text)switch(i=this.el.node.getComputedTextLength(),this.el.attr("text-anchor")){case"middle":i/=2;break;case"start":i=0}this.startPoints={point:this.transformPoint(t,i),box:s,transform:this.el.transform()},SVG.on(window,"mousemove.drag",(function(t){e.drag(t)})),SVG.on(window,"touchmove.drag",(function(t){e.drag(t)})),SVG.on(window,"mouseup.drag",(function(t){e.end(t)})),SVG.on(window,"touchend.drag",(function(t){e.end(t)})),this.el.fire("dragstart",{event:t,p:this.startPoints.point,m:this.m,handler:this})}}},t.prototype.drag=function(t){var e=this.getBBox(),i=this.transformPoint(t),s=this.startPoints.box.x+i.x-this.startPoints.point.x,n=this.startPoints.box.y+i.y-this.startPoints.point.y,a=this.constraint,r=i.x-this.startPoints.point.x,o=i.y-this.startPoints.point.y;if(this.el.fire("dragmove",{event:t,p:i,m:this.m,handler:this}),this.el.event().defaultPrevented)return i;if("function"==typeof a){var l=a.call(this.el,s,n,this.m);"boolean"==typeof l&&(l={x:l,y:l}),!0===l.x?this.el.x(s):!1!==l.x&&this.el.x(l.x),!0===l.y?this.el.y(n):!1!==l.y&&this.el.y(l.y)}else"object"==typeof a&&(null!=a.minX&&s<a.minX?r=(s=a.minX)-this.startPoints.box.x:null!=a.maxX&&s>a.maxX-e.width&&(r=(s=a.maxX-e.width)-this.startPoints.box.x),null!=a.minY&&n<a.minY?o=(n=a.minY)-this.startPoints.box.y:null!=a.maxY&&n>a.maxY-e.height&&(o=(n=a.maxY-e.height)-this.startPoints.box.y),null!=a.snapToGrid&&(s-=s%a.snapToGrid,n-=n%a.snapToGrid,r-=r%a.snapToGrid,o-=o%a.snapToGrid),this.el instanceof SVG.G?this.el.matrix(this.startPoints.transform).transform({x:r,y:o},!0):this.el.move(s,n));return i},t.prototype.end=function(t){var e=this.drag(t);this.el.fire("dragend",{event:t,p:e,m:this.m,handler:this}),SVG.off(window,"mousemove.drag"),SVG.off(window,"touchmove.drag"),SVG.off(window,"mouseup.drag"),SVG.off(window,"touchend.drag")},SVG.extend(SVG.Element,{draggable:function(e,i){"function"!=typeof e&&"object"!=typeof e||(i=e,e=!0);var s=this.remember("_draggable")||new t(this);return(e=void 0===e||e)?s.init(i||{},e):(this.off("mousedown.drag"),this.off("touchstart.drag")),this}})}.call(void 0),function(){function t(t){this.el=t,t.remember("_selectHandler",this),this.pointSelection={isSelected:!1},this.rectSelection={isSelected:!1},this.pointsList={lt:[0,0],rt:["width",0],rb:["width","height"],lb:[0,"height"],t:["width",0],r:["width","height"],b:["width","height"],l:[0,"height"]},this.pointCoord=function(t,e,i){var s="string"!=typeof t?t:e[t];return i?s/2:s},this.pointCoords=function(t,e){var i=this.pointsList[t];return{x:this.pointCoord(i[0],e,"t"===t||"b"===t),y:this.pointCoord(i[1],e,"r"===t||"l"===t)}}}t.prototype.init=function(t,e){var i=this.el.bbox();this.options={};var s=this.el.selectize.defaults.points;for(var n in this.el.selectize.defaults)this.options[n]=this.el.selectize.defaults[n],void 0!==e[n]&&(this.options[n]=e[n]);var a=["points","pointsExclude"];for(var n in a){var r=this.options[a[n]];"string"==typeof r?r=r.length>0?r.split(/\s*,\s*/i):[]:"boolean"==typeof r&&"points"===a[n]&&(r=r?s:[]),this.options[a[n]]=r}this.options.points=[s,this.options.points].reduce((function(t,e){return t.filter((function(t){return e.indexOf(t)>-1}))})),this.options.points=[this.options.points,this.options.pointsExclude].reduce((function(t,e){return t.filter((function(t){return e.indexOf(t)<0}))})),this.parent=this.el.parent(),this.nested=this.nested||this.parent.group(),this.nested.matrix(new SVG.Matrix(this.el).translate(i.x,i.y)),this.options.deepSelect&&-1!==["line","polyline","polygon"].indexOf(this.el.type)?this.selectPoints(t):this.selectRect(t),this.observe(),this.cleanup()},t.prototype.selectPoints=function(t){return this.pointSelection.isSelected=t,this.pointSelection.set||(this.pointSelection.set=this.parent.set(),this.drawPoints()),this},t.prototype.getPointArray=function(){var t=this.el.bbox();return this.el.array().valueOf().map((function(e){return[e[0]-t.x,e[1]-t.y]}))},t.prototype.drawPoints=function(){for(var t=this,e=this.getPointArray(),i=0,s=e.length;i<s;++i){var n=function(e){return function(i){(i=i||window.event).preventDefault?i.preventDefault():i.returnValue=!1,i.stopPropagation();var s=i.pageX||i.touches[0].pageX,n=i.pageY||i.touches[0].pageY;t.el.fire("point",{x:s,y:n,i:e,event:i})}}(i),a=this.drawPoint(e[i][0],e[i][1]).addClass(this.options.classPoints).addClass(this.options.classPoints+"_point").on("touchstart",n).on("mousedown",n);this.pointSelection.set.add(a)}},t.prototype.drawPoint=function(t,e){var i=this.options.pointType;switch(i){case"circle":return this.drawCircle(t,e);case"rect":return this.drawRect(t,e);default:if("function"==typeof i)return i.call(this,t,e);throw new Error("Unknown "+i+" point type!")}},t.prototype.drawCircle=function(t,e){return this.nested.circle(this.options.pointSize).center(t,e)},t.prototype.drawRect=function(t,e){return this.nested.rect(this.options.pointSize,this.options.pointSize).center(t,e)},t.prototype.updatePointSelection=function(){var t=this.getPointArray();this.pointSelection.set.each((function(e){this.cx()===t[e][0]&&this.cy()===t[e][1]||this.center(t[e][0],t[e][1])}))},t.prototype.updateRectSelection=function(){var t=this,e=this.el.bbox();if(this.rectSelection.set.get(0).attr({width:e.width,height:e.height}),this.options.points.length&&this.options.points.map((function(i,s){var n=t.pointCoords(i,e);t.rectSelection.set.get(s+1).center(n.x,n.y)})),this.options.rotationPoint){var i=this.rectSelection.set.length();this.rectSelection.set.get(i-1).center(e.width/2,20)}},t.prototype.selectRect=function(t){var e=this,i=this.el.bbox();function s(t){return function(i){(i=i||window.event).preventDefault?i.preventDefault():i.returnValue=!1,i.stopPropagation();var s=i.pageX||i.touches[0].pageX,n=i.pageY||i.touches[0].pageY;e.el.fire(t,{x:s,y:n,event:i})}}if(this.rectSelection.isSelected=t,this.rectSelection.set=this.rectSelection.set||this.parent.set(),this.rectSelection.set.get(0)||this.rectSelection.set.add(this.nested.rect(i.width,i.height).addClass(this.options.classRect)),this.options.points.length&&this.rectSelection.set.length()<2&&(this.options.points.map((function(t,n){var a=e.pointCoords(t,i),r=e.drawPoint(a.x,a.y).attr("class",e.options.classPoints+"_"+t).on("mousedown",s(t)).on("touchstart",s(t));e.rectSelection.set.add(r)})),this.rectSelection.set.each((function(){this.addClass(e.options.classPoints)}))),this.options.rotationPoint&&(this.options.points&&!this.rectSelection.set.get(9)||!this.options.points&&!this.rectSelection.set.get(1))){var n=function(t){(t=t||window.event).preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation();var i=t.pageX||t.touches[0].pageX,s=t.pageY||t.touches[0].pageY;e.el.fire("rot",{x:i,y:s,event:t})},a=this.drawPoint(i.width/2,20).attr("class",this.options.classPoints+"_rot").on("touchstart",n).on("mousedown",n);this.rectSelection.set.add(a)}},t.prototype.handler=function(){var t=this.el.bbox();this.nested.matrix(new SVG.Matrix(this.el).translate(t.x,t.y)),this.rectSelection.isSelected&&this.updateRectSelection(),this.pointSelection.isSelected&&this.updatePointSelection()},t.prototype.observe=function(){var t=this;if(MutationObserver)if(this.rectSelection.isSelected||this.pointSelection.isSelected)this.observerInst=this.observerInst||new MutationObserver((function(){t.handler()})),this.observerInst.observe(this.el.node,{attributes:!0});else try{this.observerInst.disconnect(),delete this.observerInst}catch(t){}else this.el.off("DOMAttrModified.select"),(this.rectSelection.isSelected||this.pointSelection.isSelected)&&this.el.on("DOMAttrModified.select",(function(){t.handler()}))},t.prototype.cleanup=function(){!this.rectSelection.isSelected&&this.rectSelection.set&&(this.rectSelection.set.each((function(){this.remove()})),this.rectSelection.set.clear(),delete this.rectSelection.set),!this.pointSelection.isSelected&&this.pointSelection.set&&(this.pointSelection.set.each((function(){this.remove()})),this.pointSelection.set.clear(),delete this.pointSelection.set),this.pointSelection.isSelected||this.rectSelection.isSelected||(this.nested.remove(),delete this.nested)},SVG.extend(SVG.Element,{selectize:function(e,i){return"object"==typeof e&&(i=e,e=!0),(this.remember("_selectHandler")||new t(this)).init(void 0===e||e,i||{}),this}}),SVG.Element.prototype.selectize.defaults={points:["lt","rt","rb","lb","t","r","b","l"],pointsExclude:[],classRect:"svg_select_boundingRect",classPoints:"svg_select_points",pointSize:7,rotationPoint:!0,deepSelect:!1,pointType:"circle"}}(),function(){(function(){function t(t){t.remember("_resizeHandler",this),this.el=t,this.parameters={},this.lastUpdateCall=null,this.p=t.doc().node.createSVGPoint()}t.prototype.transformPoint=function(t,e,i){return this.p.x=t-(this.offset.x-window.pageXOffset),this.p.y=e-(this.offset.y-window.pageYOffset),this.p.matrixTransform(i||this.m)},t.prototype._extractPosition=function(t){return{x:null!=t.clientX?t.clientX:t.touches[0].clientX,y:null!=t.clientY?t.clientY:t.touches[0].clientY}},t.prototype.init=function(t){var e=this;if(this.stop(),"stop"!==t){for(var i in this.options={},this.el.resize.defaults)this.options[i]=this.el.resize.defaults[i],void 0!==t[i]&&(this.options[i]=t[i]);this.el.on("lt.resize",(function(t){e.resize(t||window.event)})),this.el.on("rt.resize",(function(t){e.resize(t||window.event)})),this.el.on("rb.resize",(function(t){e.resize(t||window.event)})),this.el.on("lb.resize",(function(t){e.resize(t||window.event)})),this.el.on("t.resize",(function(t){e.resize(t||window.event)})),this.el.on("r.resize",(function(t){e.resize(t||window.event)})),this.el.on("b.resize",(function(t){e.resize(t||window.event)})),this.el.on("l.resize",(function(t){e.resize(t||window.event)})),this.el.on("rot.resize",(function(t){e.resize(t||window.event)})),this.el.on("point.resize",(function(t){e.resize(t||window.event)})),this.update()}},t.prototype.stop=function(){return this.el.off("lt.resize"),this.el.off("rt.resize"),this.el.off("rb.resize"),this.el.off("lb.resize"),this.el.off("t.resize"),this.el.off("r.resize"),this.el.off("b.resize"),this.el.off("l.resize"),this.el.off("rot.resize"),this.el.off("point.resize"),this},t.prototype.resize=function(t){var e=this;this.m=this.el.node.getScreenCTM().inverse(),this.offset={x:window.pageXOffset,y:window.pageYOffset};var i=this._extractPosition(t.detail.event);if(this.parameters={type:this.el.type,p:this.transformPoint(i.x,i.y),x:t.detail.x,y:t.detail.y,box:this.el.bbox(),rotation:this.el.transform().rotation},"text"===this.el.type&&(this.parameters.fontSize=this.el.attr()["font-size"]),void 0!==t.detail.i){var s=this.el.array().valueOf();this.parameters.i=t.detail.i,this.parameters.pointCoords=[s[t.detail.i][0],s[t.detail.i][1]]}switch(t.type){case"lt":this.calc=function(t,e){var i=this.snapToGrid(t,e);if(this.parameters.box.width-i[0]>0&&this.parameters.box.height-i[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+i[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-i[0]);i=this.checkAspectRatio(i),this.el.move(this.parameters.box.x+i[0],this.parameters.box.y+i[1]).size(this.parameters.box.width-i[0],this.parameters.box.height-i[1])}};break;case"rt":this.calc=function(t,e){var i=this.snapToGrid(t,e,2);if(this.parameters.box.width+i[0]>0&&this.parameters.box.height-i[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-i[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+i[0]);i=this.checkAspectRatio(i,!0),this.el.move(this.parameters.box.x,this.parameters.box.y+i[1]).size(this.parameters.box.width+i[0],this.parameters.box.height-i[1])}};break;case"rb":this.calc=function(t,e){var i=this.snapToGrid(t,e,0);if(this.parameters.box.width+i[0]>0&&this.parameters.box.height+i[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-i[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+i[0]);i=this.checkAspectRatio(i),this.el.move(this.parameters.box.x,this.parameters.box.y).size(this.parameters.box.width+i[0],this.parameters.box.height+i[1])}};break;case"lb":this.calc=function(t,e){var i=this.snapToGrid(t,e,1);if(this.parameters.box.width-i[0]>0&&this.parameters.box.height+i[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+i[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-i[0]);i=this.checkAspectRatio(i,!0),this.el.move(this.parameters.box.x+i[0],this.parameters.box.y).size(this.parameters.box.width-i[0],this.parameters.box.height+i[1])}};break;case"t":this.calc=function(t,e){var i=this.snapToGrid(t,e,2);if(this.parameters.box.height-i[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y+i[1]).height(this.parameters.box.height-i[1])}};break;case"r":this.calc=function(t,e){var i=this.snapToGrid(t,e,0);if(this.parameters.box.width+i[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).width(this.parameters.box.width+i[0])}};break;case"b":this.calc=function(t,e){var i=this.snapToGrid(t,e,0);if(this.parameters.box.height+i[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).height(this.parameters.box.height+i[1])}};break;case"l":this.calc=function(t,e){var i=this.snapToGrid(t,e,1);if(this.parameters.box.width-i[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x+i[0],this.parameters.box.y).width(this.parameters.box.width-i[0])}};break;case"rot":this.calc=function(t,e){var i=t+this.parameters.p.x,s=e+this.parameters.p.y,n=Math.atan2(this.parameters.p.y-this.parameters.box.y-this.parameters.box.height/2,this.parameters.p.x-this.parameters.box.x-this.parameters.box.width/2),a=Math.atan2(s-this.parameters.box.y-this.parameters.box.height/2,i-this.parameters.box.x-this.parameters.box.width/2),r=this.parameters.rotation+180*(a-n)/Math.PI+this.options.snapToAngle/2;this.el.center(this.parameters.box.cx,this.parameters.box.cy).rotate(r-r%this.options.snapToAngle,this.parameters.box.cx,this.parameters.box.cy)};break;case"point":this.calc=function(t,e){var i=this.snapToGrid(t,e,this.parameters.pointCoords[0],this.parameters.pointCoords[1]),s=this.el.array().valueOf();s[this.parameters.i][0]=this.parameters.pointCoords[0]+i[0],s[this.parameters.i][1]=this.parameters.pointCoords[1]+i[1],this.el.plot(s)}}this.el.fire("resizestart",{dx:this.parameters.x,dy:this.parameters.y,event:t}),SVG.on(window,"touchmove.resize",(function(t){e.update(t||window.event)})),SVG.on(window,"touchend.resize",(function(){e.done()})),SVG.on(window,"mousemove.resize",(function(t){e.update(t||window.event)})),SVG.on(window,"mouseup.resize",(function(){e.done()}))},t.prototype.update=function(t){if(t){var e=this._extractPosition(t),i=this.transformPoint(e.x,e.y),s=i.x-this.parameters.p.x,n=i.y-this.parameters.p.y;this.lastUpdateCall=[s,n],this.calc(s,n),this.el.fire("resizing",{dx:s,dy:n,event:t})}else this.lastUpdateCall&&this.calc(this.lastUpdateCall[0],this.lastUpdateCall[1])},t.prototype.done=function(){this.lastUpdateCall=null,SVG.off(window,"mousemove.resize"),SVG.off(window,"mouseup.resize"),SVG.off(window,"touchmove.resize"),SVG.off(window,"touchend.resize"),this.el.fire("resizedone")},t.prototype.snapToGrid=function(t,e,i,s){var n;return void 0!==s?n=[(i+t)%this.options.snapToGrid,(s+e)%this.options.snapToGrid]:(i=null==i?3:i,n=[(this.parameters.box.x+t+(1&i?0:this.parameters.box.width))%this.options.snapToGrid,(this.parameters.box.y+e+(2&i?0:this.parameters.box.height))%this.options.snapToGrid]),t<0&&(n[0]-=this.options.snapToGrid),e<0&&(n[1]-=this.options.snapToGrid),t-=Math.abs(n[0])<this.options.snapToGrid/2?n[0]:n[0]-(t<0?-this.options.snapToGrid:this.options.snapToGrid),e-=Math.abs(n[1])<this.options.snapToGrid/2?n[1]:n[1]-(e<0?-this.options.snapToGrid:this.options.snapToGrid),this.constraintToBox(t,e,i,s)},t.prototype.constraintToBox=function(t,e,i,s){var n,a,r=this.options.constraint||{};return void 0!==s?(n=i,a=s):(n=this.parameters.box.x+(1&i?0:this.parameters.box.width),a=this.parameters.box.y+(2&i?0:this.parameters.box.height)),void 0!==r.minX&&n+t<r.minX&&(t=r.minX-n),void 0!==r.maxX&&n+t>r.maxX&&(t=r.maxX-n),void 0!==r.minY&&a+e<r.minY&&(e=r.minY-a),void 0!==r.maxY&&a+e>r.maxY&&(e=r.maxY-a),[t,e]},t.prototype.checkAspectRatio=function(t,e){if(!this.options.saveAspectRatio)return t;var i=t.slice(),s=this.parameters.box.width/this.parameters.box.height,n=this.parameters.box.width+t[0],a=this.parameters.box.height-t[1],r=n/a;return r<s?(i[1]=n/s-this.parameters.box.height,e&&(i[1]=-i[1])):r>s&&(i[0]=this.parameters.box.width-a*s,e&&(i[0]=-i[0])),i},SVG.extend(SVG.Element,{resize:function(e){return(this.remember("_resizeHandler")||new t(this)).init(e||{}),this}}),SVG.Element.prototype.resize.defaults={snapToAngle:.1,snapToGrid:1,constraint:{},saveAspectRatio:!1}}).call(this)}(),void 0===window.Apex&&(window.Apex={});var Xt=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w}return h(t,[{key:"initModules",value:function(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","zoomX","toggleDataPointSelection","dataURI","exportToCSV","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","mouseleave","touchstart","touchmove","touchleave","mouseup","touchend"],this.ctx.animations=new w(this.ctx),this.ctx.axes=new et(this.ctx),this.ctx.core=new $t(this.ctx.el,this.ctx),this.ctx.config=new N({}),this.ctx.data=new Y(this.ctx),this.ctx.grid=new q(this.ctx),this.ctx.graphics=new C(this.ctx),this.ctx.coreUtils=new S(this.ctx),this.ctx.crosshairs=new it(this.ctx),this.ctx.events=new J(this.ctx),this.ctx.exports=new G(this.ctx),this.ctx.localization=new tt(this.ctx),this.ctx.options=new E,this.ctx.responsive=new st(this.ctx),this.ctx.series=new X(this.ctx),this.ctx.theme=new nt(this.ctx),this.ctx.formatters=new V(this.ctx),this.ctx.titleSubtitle=new at(this.ctx),this.ctx.legend=new ut(this.ctx),this.ctx.toolbar=new pt(this.ctx),this.ctx.tooltip=new wt(this.ctx),this.ctx.dimensions=new ct(this.ctx),this.ctx.updateHelpers=new Wt(this.ctx),this.ctx.zoomPanSelection=new gt(this.ctx),this.ctx.w.globals.tooltip=new wt(this.ctx)}}]),t}(),Yt=function(){function t(e){o(this,t),this.ctx=e,this.w=e.w}return h(t,[{key:"clear",value:function(t){var e=t.isUpdating;this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements({isUpdating:e})}},{key:"killSVG",value:function(t){t.each((function(t,e){this.removeClass("*"),this.off(),this.stop()}),!0),t.ungroup(),t.clear()}},{key:"clearDomElements",value:function(t){var e=this,i=t.isUpdating,s=this.w.globals.dom.Paper.node;s.parentNode&&s.parentNode.parentNode&&!i&&(s.parentNode.parentNode.style.minHeight="unset");var n=this.w.globals.dom.baseEl;n&&this.ctx.eventList.forEach((function(t){n.removeEventListener(t,e.ctx.events.documentEvent)}));var a=this.w.globals.dom;if(null!==this.ctx.el)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(a.Paper),a.Paper.remove(),a.elWrap=null,a.elGraphical=null,a.elAnnotations=null,a.elLegendWrap=null,a.baseEl=null,a.elGridRect=null,a.elGridRectMask=null,a.elGridRectMarkerMask=null,a.elForecastMask=null,a.elNonForecastMask=null,a.elDefs=null}}]),t}(),Vt=new WeakMap,Zt=function(){function t(e,i){o(this,t),this.opts=i,this.ctx=this,this.w=new F(i).init(),this.el=e,this.w.globals.cuid=y.randomId(),this.w.globals.chartID=this.w.config.chart.id?y.escapeString(this.w.config.chart.id):this.w.globals.cuid,new Xt(this).initModules(),this.create=y.bind(this.create,this),this.windowResizeHandler=this._windowResizeHandler.bind(this),this.parentResizeHandler=this._parentResizeCallback.bind(this)}return h(t,[{key:"render",value:function(){var t=this;return new Promise((function(e,i){if(null!==t.el){void 0===Apex._chartInstances&&(Apex._chartInstances=[]),t.w.config.chart.id&&Apex._chartInstances.push({id:t.w.globals.chartID,group:t.w.config.chart.group,chart:t}),t.setLocale(t.w.config.chart.defaultLocale);var s=t.w.config.chart.events.beforeMount;if("function"==typeof s&&s(t,t.w),t.events.fireEvent("beforeMount",[t,t.w]),window.addEventListener("resize",t.windowResizeHandler),function(t,e){var i=!1;if(t.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){var s=t.getBoundingClientRect();"none"!==t.style.display&&0!==s.width||(i=!0)}var n=new ResizeObserver((function(s){i&&e.call(t,s),i=!0}));t.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Array.from(t.children).forEach((function(t){return n.observe(t)})):n.observe(t),Vt.set(e,n)}(t.el.parentNode,t.parentResizeHandler),!t.css){var n=t.el.getRootNode&&t.el.getRootNode(),a=y.is("ShadowRoot",n),r=t.el.ownerDocument,o=r.getElementById("apexcharts-css");!a&&o||(t.css=document.createElement("style"),t.css.id="apexcharts-css",t.css.textContent='@keyframes opaque {\n  0% {\n      opacity: 0\n  }\n\n  to {\n      opacity: 1\n  }\n}\n\n@keyframes resizeanim {\n  0%,to {\n      opacity: 0\n  }\n}\n\n.apexcharts-canvas {\n  position: relative;\n  user-select: none\n}\n\n.apexcharts-canvas ::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 6px\n}\n\n.apexcharts-canvas ::-webkit-scrollbar-thumb {\n  border-radius: 4px;\n  background-color: rgba(0,0,0,.5);\n  box-shadow: 0 0 1px rgba(255,255,255,.5);\n  -webkit-box-shadow: 0 0 1px rgba(255,255,255,.5)\n}\n\n.apexcharts-inner {\n  position: relative\n}\n\n.apexcharts-text tspan {\n  font-family: inherit\n}\n\n.legend-mouseover-inactive {\n  transition: .15s ease all;\n  opacity: .2\n}\n\n.apexcharts-legend-text {\n  padding-left: 15px;\n  margin-left: -15px;\n}\n\n.apexcharts-series-collapsed {\n  opacity: 0\n}\n\n.apexcharts-tooltip {\n  border-radius: 5px;\n  box-shadow: 2px 2px 6px -4px #999;\n  cursor: default;\n  font-size: 14px;\n  left: 62px;\n  opacity: 0;\n  pointer-events: none;\n  position: absolute;\n  top: 20px;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  white-space: nowrap;\n  z-index: 12;\n  transition: .15s ease all\n}\n\n.apexcharts-tooltip.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-tooltip.apexcharts-theme-light {\n  border: 1px solid #e3e3e3;\n  background: rgba(255,255,255,.96)\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark {\n  color: #fff;\n  background: rgba(30,30,30,.8)\n}\n\n.apexcharts-tooltip * {\n  font-family: inherit\n}\n\n.apexcharts-tooltip-title {\n  padding: 6px;\n  font-size: 15px;\n  margin-bottom: 4px\n}\n\n.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {\n  background: #eceff1;\n  border-bottom: 1px solid #ddd\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {\n  background: rgba(0,0,0,.7);\n  border-bottom: 1px solid #333\n}\n\n.apexcharts-tooltip-text-goals-value,.apexcharts-tooltip-text-y-value,.apexcharts-tooltip-text-z-value {\n  display: inline-block;\n  margin-left: 5px;\n  font-weight: 600\n}\n\n.apexcharts-tooltip-text-goals-label:empty,.apexcharts-tooltip-text-goals-value:empty,.apexcharts-tooltip-text-y-label:empty,.apexcharts-tooltip-text-y-value:empty,.apexcharts-tooltip-text-z-value:empty,.apexcharts-tooltip-title:empty {\n  display: none\n}\n\n.apexcharts-tooltip-text-goals-label,.apexcharts-tooltip-text-goals-value {\n  padding: 6px 0 5px\n}\n\n.apexcharts-tooltip-goals-group,.apexcharts-tooltip-text-goals-label,.apexcharts-tooltip-text-goals-value {\n  display: flex\n}\n\n.apexcharts-tooltip-text-goals-label:not(:empty),.apexcharts-tooltip-text-goals-value:not(:empty) {\n  margin-top: -6px\n}\n\n.apexcharts-tooltip-marker {\n  width: 12px;\n  height: 12px;\n  position: relative;\n  top: 0;\n  margin-right: 10px;\n  border-radius: 50%\n}\n\n.apexcharts-tooltip-series-group {\n  padding: 0 10px;\n  display: none;\n  text-align: left;\n  justify-content: left;\n  align-items: center\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {\n  opacity: 1\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active,.apexcharts-tooltip-series-group:last-child {\n  padding-bottom: 4px\n}\n\n.apexcharts-tooltip-series-group-hidden {\n  opacity: 0;\n  height: 0;\n  line-height: 0;\n  padding: 0!important\n}\n\n.apexcharts-tooltip-y-group {\n  padding: 6px 0 5px\n}\n\n.apexcharts-custom-tooltip,.apexcharts-tooltip-box {\n  padding: 4px 8px\n}\n\n.apexcharts-tooltip-boxPlot {\n  display: flex;\n  flex-direction: column-reverse\n}\n\n.apexcharts-tooltip-box>div {\n  margin: 4px 0\n}\n\n.apexcharts-tooltip-box span.value {\n  font-weight: 700\n}\n\n.apexcharts-tooltip-rangebar {\n  padding: 5px 8px\n}\n\n.apexcharts-tooltip-rangebar .category {\n  font-weight: 600;\n  color: #777\n}\n\n.apexcharts-tooltip-rangebar .series-name {\n  font-weight: 700;\n  display: block;\n  margin-bottom: 5px\n}\n\n.apexcharts-xaxistooltip,.apexcharts-yaxistooltip {\n  opacity: 0;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #eceff1;\n  border: 1px solid #90a4ae\n}\n\n.apexcharts-xaxistooltip {\n  padding: 9px 10px;\n  transition: .15s ease all\n}\n\n.apexcharts-xaxistooltip.apexcharts-theme-dark {\n  background: rgba(0,0,0,.7);\n  border: 1px solid rgba(0,0,0,.5);\n  color: #fff\n}\n\n.apexcharts-xaxistooltip:after,.apexcharts-xaxistooltip:before {\n  left: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none\n}\n\n.apexcharts-xaxistooltip:after {\n  border-color: transparent;\n  border-width: 6px;\n  margin-left: -6px\n}\n\n.apexcharts-xaxistooltip:before {\n  border-color: transparent;\n  border-width: 7px;\n  margin-left: -7px\n}\n\n.apexcharts-xaxistooltip-bottom:after,.apexcharts-xaxistooltip-bottom:before {\n  bottom: 100%\n}\n\n.apexcharts-xaxistooltip-top:after,.apexcharts-xaxistooltip-top:before {\n  top: 100%\n}\n\n.apexcharts-xaxistooltip-bottom:after {\n  border-bottom-color: #eceff1\n}\n\n.apexcharts-xaxistooltip-bottom:before {\n  border-bottom-color: #90a4ae\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after,.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {\n  border-bottom-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-xaxistooltip-top:after {\n  border-top-color: #eceff1\n}\n\n.apexcharts-xaxistooltip-top:before {\n  border-top-color: #90a4ae\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:after,.apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {\n  border-top-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-xaxistooltip.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-yaxistooltip {\n  padding: 4px 10px\n}\n\n.apexcharts-yaxistooltip.apexcharts-theme-dark {\n  background: rgba(0,0,0,.7);\n  border: 1px solid rgba(0,0,0,.5);\n  color: #fff\n}\n\n.apexcharts-yaxistooltip:after,.apexcharts-yaxistooltip:before {\n  top: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none\n}\n\n.apexcharts-yaxistooltip:after {\n  border-color: transparent;\n  border-width: 6px;\n  margin-top: -6px\n}\n\n.apexcharts-yaxistooltip:before {\n  border-color: transparent;\n  border-width: 7px;\n  margin-top: -7px\n}\n\n.apexcharts-yaxistooltip-left:after,.apexcharts-yaxistooltip-left:before {\n  left: 100%\n}\n\n.apexcharts-yaxistooltip-right:after,.apexcharts-yaxistooltip-right:before {\n  right: 100%\n}\n\n.apexcharts-yaxistooltip-left:after {\n  border-left-color: #eceff1\n}\n\n.apexcharts-yaxistooltip-left:before {\n  border-left-color: #90a4ae\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:after,.apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {\n  border-left-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-yaxistooltip-right:after {\n  border-right-color: #eceff1\n}\n\n.apexcharts-yaxistooltip-right:before {\n  border-right-color: #90a4ae\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:after,.apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {\n  border-right-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-yaxistooltip.apexcharts-active {\n  opacity: 1\n}\n\n.apexcharts-yaxistooltip-hidden {\n  display: none\n}\n\n.apexcharts-xcrosshairs,.apexcharts-ycrosshairs {\n  pointer-events: none;\n  opacity: 0;\n  transition: .15s ease all\n}\n\n.apexcharts-xcrosshairs.apexcharts-active,.apexcharts-ycrosshairs.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-ycrosshairs-hidden {\n  opacity: 0\n}\n\n.apexcharts-selection-rect {\n  cursor: move\n}\n\n.svg_select_boundingRect,.svg_select_points_rot {\n  pointer-events: none;\n  opacity: 0;\n  visibility: hidden\n}\n\n.apexcharts-selection-rect+g .svg_select_boundingRect,.apexcharts-selection-rect+g .svg_select_points_rot {\n  opacity: 0;\n  visibility: hidden\n}\n\n.apexcharts-selection-rect+g .svg_select_points_l,.apexcharts-selection-rect+g .svg_select_points_r {\n  cursor: ew-resize;\n  opacity: 1;\n  visibility: visible\n}\n\n.svg_select_points {\n  fill: #efefef;\n  stroke: #333;\n  rx: 2\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-zoom {\n  cursor: crosshair\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-pan {\n  cursor: move\n}\n\n.apexcharts-menu-icon,.apexcharts-pan-icon,.apexcharts-reset-icon,.apexcharts-selection-icon,.apexcharts-toolbar-custom-icon,.apexcharts-zoom-icon,.apexcharts-zoomin-icon,.apexcharts-zoomout-icon {\n  cursor: pointer;\n  width: 20px;\n  height: 20px;\n  line-height: 24px;\n  color: #6e8192;\n  text-align: center\n}\n\n.apexcharts-menu-icon svg,.apexcharts-reset-icon svg,.apexcharts-zoom-icon svg,.apexcharts-zoomin-icon svg,.apexcharts-zoomout-icon svg {\n  fill: #6e8192\n}\n\n.apexcharts-selection-icon svg {\n  fill: #444;\n  transform: scale(.76)\n}\n\n.apexcharts-theme-dark .apexcharts-menu-icon svg,.apexcharts-theme-dark .apexcharts-pan-icon svg,.apexcharts-theme-dark .apexcharts-reset-icon svg,.apexcharts-theme-dark .apexcharts-selection-icon svg,.apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg,.apexcharts-theme-dark .apexcharts-zoom-icon svg,.apexcharts-theme-dark .apexcharts-zoomin-icon svg,.apexcharts-theme-dark .apexcharts-zoomout-icon svg {\n  fill: #f3f4f5\n}\n\n.apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg,.apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,.apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg {\n  fill: #008ffb\n}\n\n.apexcharts-theme-light .apexcharts-menu-icon:hover svg,.apexcharts-theme-light .apexcharts-reset-icon:hover svg,.apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,.apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,.apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,.apexcharts-theme-light .apexcharts-zoomout-icon:hover svg {\n  fill: #333\n}\n\n.apexcharts-menu-icon,.apexcharts-selection-icon {\n  position: relative\n}\n\n.apexcharts-reset-icon {\n  margin-left: 5px\n}\n\n.apexcharts-menu-icon,.apexcharts-reset-icon,.apexcharts-zoom-icon {\n  transform: scale(.85)\n}\n\n.apexcharts-zoomin-icon,.apexcharts-zoomout-icon {\n  transform: scale(.7)\n}\n\n.apexcharts-zoomout-icon {\n  margin-right: 3px\n}\n\n.apexcharts-pan-icon {\n  transform: scale(.62);\n  position: relative;\n  left: 1px;\n  top: 0\n}\n\n.apexcharts-pan-icon svg {\n  fill: #fff;\n  stroke: #6e8192;\n  stroke-width: 2\n}\n\n.apexcharts-pan-icon.apexcharts-selected svg {\n  stroke: #008ffb\n}\n\n.apexcharts-pan-icon:not(.apexcharts-selected):hover svg {\n  stroke: #333\n}\n\n.apexcharts-toolbar {\n  position: absolute;\n  z-index: 11;\n  max-width: 176px;\n  text-align: right;\n  border-radius: 3px;\n  padding: 0 6px 2px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center\n}\n\n.apexcharts-menu {\n  background: #fff;\n  position: absolute;\n  top: 100%;\n  border: 1px solid #ddd;\n  border-radius: 3px;\n  padding: 3px;\n  right: 10px;\n  opacity: 0;\n  min-width: 110px;\n  transition: .15s ease all;\n  pointer-events: none\n}\n\n.apexcharts-menu.apexcharts-menu-open {\n  opacity: 1;\n  pointer-events: all;\n  transition: .15s ease all\n}\n\n.apexcharts-menu-item {\n  padding: 6px 7px;\n  font-size: 12px;\n  cursor: pointer\n}\n\n.apexcharts-theme-light .apexcharts-menu-item:hover {\n  background: #eee\n}\n\n.apexcharts-theme-dark .apexcharts-menu {\n  background: rgba(0,0,0,.7);\n  color: #fff\n}\n\n@media screen and (min-width:768px) {\n  .apexcharts-canvas:hover .apexcharts-toolbar {\n      opacity: 1\n  }\n}\n\n.apexcharts-canvas .apexcharts-element-hidden,.apexcharts-datalabel.apexcharts-element-hidden,.apexcharts-hide .apexcharts-series-points {\n  opacity: 0\n}\n\n.apexcharts-datalabel,.apexcharts-datalabel-label,.apexcharts-datalabel-value,.apexcharts-datalabels,.apexcharts-pie-label {\n  cursor: default;\n  pointer-events: none\n}\n\n.apexcharts-pie-label-delay {\n  opacity: 0;\n  animation-name: opaque;\n  animation-duration: .3s;\n  animation-fill-mode: forwards;\n  animation-timing-function: ease\n}\n\n.apexcharts-annotation-rect,.apexcharts-area-series .apexcharts-area,.apexcharts-area-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,.apexcharts-gridline,.apexcharts-line,.apexcharts-line-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,.apexcharts-point-annotation-label,.apexcharts-radar-series path,.apexcharts-radar-series polygon,.apexcharts-toolbar svg,.apexcharts-tooltip .apexcharts-marker,.apexcharts-xaxis-annotation-label,.apexcharts-yaxis-annotation-label,.apexcharts-zoom-rect {\n  pointer-events: none\n}\n\n.apexcharts-marker {\n  transition: .15s ease all\n}\n\n.resize-triggers {\n  animation: 1ms resizeanim;\n  visibility: hidden;\n  opacity: 0;\n  height: 100%;\n  width: 100%;\n  overflow: hidden\n}\n\n.contract-trigger:before,.resize-triggers,.resize-triggers>div {\n  content: " ";\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0\n}\n\n.resize-triggers>div {\n  height: 100%;\n  width: 100%;\n  background: #eee;\n  overflow: auto\n}\n\n.contract-trigger:before {\n  overflow: hidden;\n  width: 200%;\n  height: 200%\n}\n',a?n.prepend(t.css):r.head.appendChild(t.css))}var l=t.create(t.w.config.series,{});if(!l)return e(t);t.mount(l).then((function(){"function"==typeof t.w.config.chart.events.mounted&&t.w.config.chart.events.mounted(t,t.w),t.events.fireEvent("mounted",[t,t.w]),e(l)})).catch((function(t){i(t)}))}else i(new Error("Element not found"))}))}},{key:"create",value:function(t,e){var i=this.w;new Xt(this).initModules();var s=this.w.globals;if(s.noData=!1,s.animationEnded=!1,this.responsive.checkResponsiveConfig(e),i.config.xaxis.convertedCatToNumeric&&new R(i.config).convertCatToNumericXaxis(i.config,this.ctx),null===this.el)return s.animationEnded=!0,null;if(this.core.setupElements(),"treemap"===i.config.chart.type&&(i.config.grid.show=!1,i.config.yaxis[0].show=!1),0===s.svgWidth)return s.animationEnded=!0,null;var n=S.checkComboSeries(t);s.comboCharts=n.comboCharts,s.comboBarCount=n.comboBarCount;var a=t.every((function(t){return t.data&&0===t.data.length}));(0===t.length||a)&&this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(t),this.theme.init(),new H(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),s.noData&&s.collapsedSeries.length!==s.series.length&&!i.config.legend.showForSingleSeries||this.legend.init(),this.series.hasAllSeriesEqualX(),s.axisCharts&&(this.core.coreCalculations(),"category"!==i.config.xaxis.type&&this.formatters.setLabelFormatters(),this.ctx.toolbar.minX=i.globals.minX,this.ctx.toolbar.maxX=i.globals.maxX),this.formatters.heatmapLabelFormatters(),new S(this).getLargestMarkerSize(),this.dimensions.plotCoords();var r=this.core.xySettings();this.grid.createGridMask();var o=this.core.plotChartType(t,r),l=new W(this);l.bringForward(),i.config.dataLabels.background.enabled&&l.dataLabelsBackground(),this.core.shiftGraphPosition();var h={plot:{left:i.globals.translateX,top:i.globals.translateY,width:i.globals.gridWidth,height:i.globals.gridHeight}};return{elGraph:o,xyRatios:r,elInner:i.globals.dom.elGraphical,dimensions:h}}},{key:"mount",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=this,s=i.w;return new Promise((function(n,a){if(null===i.el)return a(new Error("Not enough data to display or target element not found"));(null===e||s.globals.allSeriesCollapsed)&&i.series.handleNoData(),i.grid=new q(i);var r=i.grid.drawGrid();"treemap"!==s.config.chart.type&&i.axes.drawAxis(s.config.chart.type,r),i.annotations=new L(i),i.annotations.drawImageAnnos(),i.annotations.drawTextAnnos(),"back"===s.config.grid.position&&r&&s.globals.dom.elGraphical.add(r.el);var o=new j(t.ctx,r),l=new Q(t.ctx,r);if(null!==r&&(o.xAxisLabelCorrections(r.xAxisTickWidth),l.setYAxisTextAlignments(),s.config.yaxis.map((function(t,e){-1===s.globals.ignoreYAxisIndexes.indexOf(e)&&l.yAxisTitleRotate(e,t.opposite)}))),"back"===s.config.annotations.position&&(s.globals.dom.Paper.add(s.globals.dom.elAnnotations),i.annotations.drawAxesAnnotations()),Array.isArray(e.elGraph))for(var h=0;h<e.elGraph.length;h++)s.globals.dom.elGraphical.add(e.elGraph[h]);else s.globals.dom.elGraphical.add(e.elGraph);if("front"===s.config.grid.position&&r&&s.globals.dom.elGraphical.add(r.el),r&&r.elGridBorders&&r.elGridBorders.node&&s.globals.dom.elGraphical.add(r.elGridBorders),"front"===s.config.xaxis.crosshairs.position&&i.crosshairs.drawXCrosshairs(),"front"===s.config.yaxis[0].crosshairs.position&&i.crosshairs.drawYCrosshairs(),"front"===s.config.annotations.position&&(s.globals.dom.Paper.add(s.globals.dom.elAnnotations),i.annotations.drawAxesAnnotations()),!s.globals.noData){if(s.config.tooltip.enabled&&!s.globals.noData&&i.w.globals.tooltip.drawTooltip(e.xyRatios),s.globals.axisCharts&&(s.globals.isXNumeric||s.config.xaxis.convertedCatToNumeric||s.globals.isRangeBar))(s.config.chart.zoom.enabled||s.config.chart.selection&&s.config.chart.selection.enabled||s.config.chart.pan&&s.config.chart.pan.enabled)&&i.zoomPanSelection.init({xyRatios:e.xyRatios});else{var c=s.config.chart.toolbar.tools;["zoom","zoomin","zoomout","selection","pan","reset"].forEach((function(t){c[t]=!1}))}s.config.chart.toolbar.show&&!s.globals.allSeriesCollapsed&&i.toolbar.createToolbar()}s.globals.memory.methodsToExec.length>0&&s.globals.memory.methodsToExec.forEach((function(t){t.method(t.params,!1,t.context)})),s.globals.axisCharts||s.globals.noData||i.core.resizeNonAxisCharts(),n(i)}))}},{key:"destroy",value:function(){var t,e;window.removeEventListener("resize",this.windowResizeHandler),this.el.parentNode,t=this.parentResizeHandler,(e=Vt.get(t))&&(e.disconnect(),Vt.delete(t));var i=this.w.config.chart.id;i&&Apex._chartInstances.forEach((function(t,e){t.id===y.escapeString(i)&&Apex._chartInstances.splice(e,1)})),new Yt(this.ctx).clear({isUpdating:!1})}},{key:"updateOptions",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=this.w;return r.globals.selection=void 0,t.series&&(this.series.resetSeries(!1,!0,!1),t.series.length&&t.series[0].data&&(t.series=t.series.map((function(t,i){return e.updateHelpers._extendSeries(t,i)}))),this.updateHelpers.revertDefaultAxisMinMax()),t.xaxis&&(t=this.updateHelpers.forceXAxisUpdate(t)),t.yaxis&&(t=this.updateHelpers.forceYAxisUpdate(t)),r.globals.collapsedSeriesIndices.length>0&&this.series.clearPreviousPaths(),t.theme&&(t=this.theme.updateThemeOptions(t)),this.updateHelpers._updateOptions(t,i,s,n,a)}},{key:"updateSeries",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(t,e,i)}},{key:"appendSeries",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=this.w.config.series.slice();return s.push(t),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(s,e,i)}},{key:"appendData",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this;i.w.globals.dataChanged=!0,i.series.getPreviousPaths();for(var s=i.w.config.series.slice(),n=0;n<s.length;n++)if(null!==t[n]&&void 0!==t[n])for(var a=0;a<t[n].data.length;a++)s[n].data.push(t[n].data[a]);return i.w.config.series=s,e&&(i.w.globals.initialSeries=y.clone(i.w.config.series)),this.update()}},{key:"update",value:function(t){var e=this;return new Promise((function(i,s){new Yt(e.ctx).clear({isUpdating:!0});var n=e.create(e.w.config.series,t);if(!n)return i(e);e.mount(n).then((function(){"function"==typeof e.w.config.chart.events.updated&&e.w.config.chart.events.updated(e,e.w),e.events.fireEvent("updated",[e,e.w]),e.w.globals.isDirty=!0,i(e)})).catch((function(t){s(t)}))}))}},{key:"getSyncedCharts",value:function(){var t=this.getGroupedCharts(),e=[this];return t.length&&(e=[],t.forEach((function(t){e.push(t)}))),e}},{key:"getGroupedCharts",value:function(){var t=this;return Apex._chartInstances.filter((function(t){if(t.group)return!0})).map((function(e){return t.w.config.chart.group===e.group?e.chart:t}))}},{key:"toggleSeries",value:function(t){return this.series.toggleSeries(t)}},{key:"highlightSeriesOnLegendHover",value:function(t,e){return this.series.toggleSeriesOnHover(t,e)}},{key:"showSeries",value:function(t){this.series.showSeries(t)}},{key:"hideSeries",value:function(t){this.series.hideSeries(t)}},{key:"resetSeries",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.series.resetSeries(t,e)}},{key:"addEventListener",value:function(t,e){this.events.addEventListener(t,e)}},{key:"removeEventListener",value:function(t,e){this.events.removeEventListener(t,e)}},{key:"addXaxisAnnotation",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,s=this;i&&(s=i),s.annotations.addXaxisAnnotationExternal(t,e,s)}},{key:"addYaxisAnnotation",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,s=this;i&&(s=i),s.annotations.addYaxisAnnotationExternal(t,e,s)}},{key:"addPointAnnotation",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,s=this;i&&(s=i),s.annotations.addPointAnnotationExternal(t,e,s)}},{key:"clearAnnotations",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=this;t&&(e=t),e.annotations.clearAnnotations(e)}},{key:"removeAnnotation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=this;e&&(i=e),i.annotations.removeAnnotation(i,t)}},{key:"getChartArea",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}},{key:"getSeriesTotalXRange",value:function(t,e){return this.coreUtils.getSeriesTotalsXRange(t,e)}},{key:"getHighestValueInSeries",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=new K(this.ctx);return e.getMinYMaxY(t).highestY}},{key:"getLowestValueInSeries",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=new K(this.ctx);return e.getMinYMaxY(t).lowestY}},{key:"getSeriesTotal",value:function(){return this.w.globals.seriesTotals}},{key:"toggleDataPointSelection",value:function(t,e){return this.updateHelpers.toggleDataPointSelection(t,e)}},{key:"zoomX",value:function(t,e){this.ctx.toolbar.zoomUpdateOptions(t,e)}},{key:"setLocale",value:function(t){this.localization.setCurrentLocaleValues(t)}},{key:"dataURI",value:function(t){return new G(this.ctx).dataURI(t)}},{key:"exportToCSV",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=new G(this.ctx);return e.exportToCSV(t)}},{key:"paper",value:function(){return this.w.globals.dom.Paper}},{key:"_parentResizeCallback",value:function(){this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}},{key:"_windowResize",value:function(){var t=this;clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout((function(){t.w.globals.resized=!0,t.w.globals.dataChanged=!1,t.ctx.update()}),150)}},{key:"_windowResizeHandler",value:function(){var t=this.w.config.chart.redrawOnWindowResize;"function"==typeof t&&(t=t()),t&&this._windowResize()}}],[{key:"getChartByID",value:function(t){var e=y.escapeString(t),i=Apex._chartInstances.filter((function(t){return t.id===e}))[0];return i&&i.chart}},{key:"initOnLoad",value:function(){for(var e=document.querySelectorAll("[data-apexcharts]"),i=0;i<e.length;i++)new t(e[i],JSON.parse(e[i].getAttribute("data-options"))).render()}},{key:"exec",value:function(t,e){var i=this.getChartByID(t);if(i){i.w.globals.isExecCalled=!0;var s=null;if(-1!==i.publicMethods.indexOf(e)){for(var n=arguments.length,a=new Array(n>2?n-2:0),r=2;r<n;r++)a[r-2]=arguments[r];s=i[e].apply(i,a)}return s}}},{key:"merge",value:function(t,e){return y.extend(t,e)}}]),t}();return Zt}))},2838:function(){},7166:function(t,e,i){(function(e,s){t.exports=s(i(7514))})(0,(function(t){"use strict";function e(t){return e="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function i(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}t=t&&t.hasOwnProperty("default")?t["default"]:t;var s={props:{options:{type:Object},type:{type:String},series:{type:Array,required:!0,default:function(){return[]}},width:{default:"100%"},height:{default:"auto"}},data:function(){return{chart:null}},beforeMount:function(){window.ApexCharts=t},mounted:function(){this.init()},created:function(){var t=this;this.$watch("options",(function(e){!t.chart&&e?t.init():t.chart.updateOptions(t.options)})),this.$watch("series",(function(e){!t.chart&&e?t.init():t.chart.updateSeries(t.series)}));var e=["type","width","height"];e.forEach((function(e){t.$watch(e,(function(){t.refresh()}))}))},beforeDestroy:function(){this.chart&&this.destroy()},render:function(t){return t("div")},methods:{init:function(){var e=this,i={chart:{type:this.type||this.options.chart.type||"line",height:this.height,width:this.width,events:{}},series:this.series};Object.keys(this.$listeners).forEach((function(t){i.chart.events[t]=e.$listeners[t]}));var s=this.extend(this.options,i);return this.chart=new t(this.$el,s),this.chart.render()},isObject:function(t){return t&&"object"===e(t)&&!Array.isArray(t)&&null!=t},extend:function(t,e){var s=this;"function"!==typeof Object.assign&&function(){Object.assign=function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var s=arguments[i];if(void 0!==s&&null!==s)for(var n in s)s.hasOwnProperty(n)&&(e[n]=s[n])}return e}}();var n=Object.assign({},t);return this.isObject(t)&&this.isObject(e)&&Object.keys(e).forEach((function(a){s.isObject(e[a])&&a in t?n[a]=s.extend(t[a],e[a]):Object.assign(n,i({},a,e[a]))})),n},refresh:function(){return this.destroy(),this.init()},destroy:function(){this.chart.destroy()},updateSeries:function(t,e){return this.chart.updateSeries(t,e)},updateOptions:function(t,e,i,s){return this.chart.updateOptions(t,e,i,s)},toggleSeries:function(t){return this.chart.toggleSeries(t)},showSeries:function(t){this.chart.showSeries(t)},hideSeries:function(t){this.chart.hideSeries(t)},appendSeries:function(t,e){return this.chart.appendSeries(t,e)},resetSeries:function(){this.chart.resetSeries()},zoomX:function(t,e){this.chart.zoomX(t,e)},toggleDataPointSelection:function(t,e){this.chart.toggleDataPointSelection(t,e)},appendData:function(t){return this.chart.appendData(t)},addText:function(t){this.chart.addText(t)},addImage:function(t){this.chart.addImage(t)},addShape:function(t){this.chart.addShape(t)},dataURI:function(){return this.chart.dataURI()},setLocale:function(t){return this.chart.setLocale(t)},addXaxisAnnotation:function(t,e){this.chart.addXaxisAnnotation(t,e)},addYaxisAnnotation:function(t,e){this.chart.addYaxisAnnotation(t,e)},addPointAnnotation:function(t,e){this.chart.addPointAnnotation(t,e)},removeAnnotation:function(t,e){this.chart.removeAnnotation(t,e)},clearAnnotations:function(){this.chart.clearAnnotations()}}},n=s;return window.ApexCharts=t,n.install=function(e){e.ApexCharts=t,window.ApexCharts=t,Object.defineProperty(e.prototype,"$apexcharts",{get:function(){return t}})},n}))},4910:function(t,e,i){t.exports=function(t){function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var i={};return e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=20)}([function(t,e,i){"use strict";function s(t){var e,i=function(){return void 0===e&&(e=t()),e};return i.clear=function(){e=void 0},i}function n(t,e){return void 0!==t&&-1!==t.indexOf(e)}Object.defineProperty(e,"__esModule",{value:!0});var a=i(3);e.colors=["white","black"],e.invRanks=[8,7,6,5,4,3,2,1],e.allKeys=(r=Array.prototype).concat.apply(r,a.files.map((function(t){return a.ranks.map((function(e){return t+e}))}))),e.pos2key=function(t){return e.allKeys[8*t[0]+t[1]-9]},e.key2pos=function(t){return[t.charCodeAt(0)-96,t.charCodeAt(1)-48]},e.memo=s,e.timer=function(){var t;return{start:function(){t=Date.now()},cancel:function(){t=void 0},stop:function(){if(!t)return 0;var e=Date.now()-t;return t=void 0,e}}},e.opposite=function(t){return"white"===t?"black":"white"},e.containsX=n,e.distanceSq=function(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)},e.samePiece=function(t,e){return t.role===e.role&&t.color===e.color},e.computeIsTrident=function(){return window.navigator.userAgent.indexOf("Trident/")>-1};var r,o=function(t,e,i,s){return[(e?t[0]-1:8-t[0])*i,(e?8-t[1]:t[1]-1)*s]};e.posToTranslateAbs=function(t){var e=t.width/8,i=t.height/8;return function(t,s){return o(t,s,e,i)}},e.posToTranslateRel=function(t,e){return o(t,e,12.5,12.5)},e.translateAbs=function(t,e){t.style.transform="translate("+e[0]+"px,"+e[1]+"px)"},e.translateRel=function(t,e){t.style.left=e[0]+"%",t.style.top=e[1]+"%"},e.setVisible=function(t,e){t.style.visibility=e?"visible":"hidden"},e.eventPosition=function(t){return t.clientX||0===t.clientX?[t.clientX,t.clientY]:t.touches&&t.targetTouches[0]?[t.targetTouches[0].clientX,t.targetTouches[0].clientY]:void 0},e.isRightButton=function(t){return 2===t.buttons||2===t.button},e.createEl=function(t,e){var i=document.createElement(t);return e&&(i.className=e),i},e.raf=(window.requestAnimationFrame||window.setTimeout).bind(window)},function(t,e,i){"use strict";function s(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];t&&setTimeout((function(){return t.apply(void 0,e)}),1)}function n(t){t.orientation=O.opposite(t.orientation),t.animation.current=t.draggable.current=t.selected=void 0}function a(t){t.lastMove=void 0,y(t),h(t),d(t)}function r(t,e){for(var i in e){var s=e[i];s?t.pieces[i]=s:delete t.pieces[i]}}function o(t,e){if(!0===e&&(e=t.turnColor),e)for(var i in t.pieces)"king"===t.pieces[i].role&&t.pieces[i].color===e&&(t.check=i);else t.check=void 0}function l(t,e,i,n){d(t),t.premovable.current=[e,i],s(t.premovable.events.set,e,i,n)}function h(t){t.premovable.current&&(t.premovable.current=void 0,s(t.premovable.events.unset))}function c(t,e,i){h(t),t.predroppable.current={role:e,key:i},s(t.predroppable.events.set,e,i)}function d(t){var e=t.predroppable;e.current&&(e.current=void 0,s(e.events.unset))}function u(t,e,i){if(!t.autoCastle)return!1;var s=t.pieces[e];if("king"!==s.role)return!1;var n=O.key2pos(e);if(5!==n[0])return!1;if(1!==n[1]&&8!==n[1])return!1;var a,r,o,l=O.key2pos(i);if(7===l[0]||8===l[0])a=O.pos2key([8,n[1]]),r=O.pos2key([6,n[1]]),o=O.pos2key([7,n[1]]);else{if(3!==l[0]&&1!==l[0])return!1;a=O.pos2key([1,n[1]]),r=O.pos2key([4,n[1]]),o=O.pos2key([3,n[1]])}var h=t.pieces[a];return"rook"===h.role&&(delete t.pieces[e],delete t.pieces[a],t.pieces[o]=s,t.pieces[r]=h,!0)}function p(t,e,i){if(e===i||!t.pieces[e])return!1;var n=t.pieces[i]&&t.pieces[i].color!==t.pieces[e].color?t.pieces[i]:void 0;return i==t.selected&&y(t),s(t.events.move,e,i,n),u(t,e,i)||(t.pieces[i]=t.pieces[e],delete t.pieces[e]),t.lastMove=[e,i],t.check=void 0,s(t.events.change),n||!0}function g(t,e,i,n){if(t.pieces[i]){if(!n)return!1;delete t.pieces[i]}return s(t.events.dropNewPiece,e,i),t.pieces[i]=e,t.lastMove=[i],t.check=void 0,s(t.events.change),t.movable.dests=void 0,t.turnColor=O.opposite(t.turnColor),!0}function f(t,e,i){var s=p(t,e,i);return s&&(t.movable.dests=void 0,t.turnColor=O.opposite(t.turnColor),t.animation.current=void 0),s}function m(t,e,i){if(k(t,e,i)){var n=f(t,e,i);if(n){var a=t.hold.stop();y(t);var r={premove:!1,ctrlKey:t.stats.ctrlKey,holdTime:a};return!0!==n&&(r.captured=n),s(t.movable.events.after,e,i,r),!0}}else _(t,e,i)?(l(t,e,i,{ctrlKey:t.stats.ctrlKey}),y(t)):w(t,i)||S(t,i)?(x(t,i),t.hold.start()):y(t);return!1}function v(t,e,i,n){if(C(t,e,i)||n){var a=t.pieces[e];delete t.pieces[e],g(t,a,i,n),s(t.movable.events.afterNewPiece,a.role,i,{predrop:!1})}else A(t,e,i)?c(t,t.pieces[e].role,i):(h(t),d(t));delete t.pieces[e],y(t)}function b(t,e,i){t.selected?t.selected!==e||t.draggable.enabled?(t.selectable.enabled||i)&&t.selected!==e?m(t,t.selected,e)&&(t.stats.dragged=!1):t.hold.start():(y(t),t.hold.cancel()):(w(t,e)||S(t,e))&&(x(t,e),t.hold.start()),s(t.events.select,e)}function x(t,e){t.selected=e,S(t,e)?t.premovable.dests=D.default(t.pieces,e,t.premovable.castle):t.premovable.dests=void 0}function y(t){t.selected=void 0,t.premovable.dests=void 0,t.hold.cancel()}function w(t,e){var i=t.pieces[e];return i&&("both"===t.movable.color||t.movable.color===i.color&&t.turnColor===i.color)}function k(t,e,i){return e!==i&&w(t,e)&&(t.movable.free||!!t.movable.dests&&O.containsX(t.movable.dests[e],i))}function C(t,e,i){var s=t.pieces[e];return s&&i&&(e===i||!t.pieces[i])&&("both"===t.movable.color||t.movable.color===s.color&&t.turnColor===s.color)}function S(t,e){var i=t.pieces[e];return i&&t.premovable.enabled&&t.movable.color===i.color&&t.turnColor!==i.color}function _(t,e,i){return e!==i&&S(t,e)&&O.containsX(D.default(t.pieces,e,t.premovable.castle),i)}function A(t,e,i){var s=t.pieces[e];return s&&i&&(!t.pieces[i]||t.pieces[i].color!==t.movable.color)&&t.predroppable.enabled&&("pawn"!==s.role||"1"!==i[1]&&"8"!==i[1])&&t.movable.color===s.color&&t.turnColor!==s.color}function I(t,e){var i=t.pieces[e];return i&&t.draggable.enabled&&("both"===t.movable.color||t.movable.color===i.color&&(t.turnColor===i.color||t.premovable.enabled))}function P(t){var e=t.premovable.current;if(!e)return!1;var i=e[0],n=e[1],a=!1;if(k(t,i,n)){var r=f(t,i,n);if(r){var o={premove:!0};!0!==r&&(o.captured=r),s(t.movable.events.after,i,n,o),a=!0}}return h(t),a}function T(t,e){var i=t.predroppable.current,n=!1;return!!i&&(e(i)&&g(t,{role:i.role,color:t.movable.color},i.key)&&(s(t.movable.events.afterNewPiece,i.role,i.key,{predrop:!0}),n=!0),d(t),n)}function E(t){h(t),d(t),y(t)}function L(t){t.movable.color=t.movable.dests=t.animation.current=void 0,E(t)}function M(t,e,i){var s=Math.ceil((t[0]-i.left)/i.width*8);e||(s=9-s);var n=Math.ceil(8-(t[1]-i.top)/i.height*8);return e||(n=9-n),s>0&&s<9&&n>0&&n<9?O.pos2key([s,n]):void 0}Object.defineProperty(e,"__esModule",{value:!0});var O=i(0),D=i(15);e.callUserFunction=s,e.toggleOrientation=n,e.reset=a,e.setPieces=r,e.setCheck=o,e.unsetPremove=h,e.unsetPredrop=d,e.baseMove=p,e.baseNewPiece=g,e.userMove=m,e.dropNewPiece=v,e.selectSquare=b,e.setSelected=x,e.unselect=y,e.canMove=k,e.isDraggable=I,e.playPremove=P,e.playPredrop=T,e.cancelMove=E,e.stop=L,e.getKeyAtDomPos=M},function(t,e,i){"use strict";function s(t){"start"===t&&(t=e.initial);for(var i={},s=8,n=0,r=0,l=t;r<l.length;r++){var h=l[r];switch(h){case" ":return i;case"/":if(0===--s)return i;n=0;break;case"~":i[a.pos2key([n,s])].promoted=!0;break;default:var c=h.charCodeAt(0);if(c<57)n+=c-48;else{++n;var d=h.toLowerCase();i[a.pos2key([n,s])]={role:o[d],color:h===d?"black":"white"}}}}return i}function n(t){var e,i;return a.invRanks.map((function(s){return r.ranks.map((function(n){return e=t[a.pos2key([n,s])],e?(i=l[e.role],"white"===e.color?i.toUpperCase():i):"1"})).join("")})).join("/").replace(/1{2,}/g,(function(t){return t.length.toString()}))}Object.defineProperty(e,"__esModule",{value:!0});var a=i(0),r=i(3);e.initial="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR";var o={p:"pawn",r:"rook",n:"knight",b:"bishop",q:"queen",k:"king"},l={pawn:"p",rook:"r",knight:"n",bishop:"b",queen:"q",king:"k"};e.read=s,e.write=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.files=["a","b","c","d","e","f","g","h"],e.ranks=[1,2,3,4,5,6,7,8]},function(t,e,i){"use strict";function s(t,e){return e.animation.enabled?h(t,e):n(t,e)}function n(t,e){var i=t(e);return e.dom.redraw(),i}function a(t,e){return{key:t,pos:p.key2pos(t),piece:e}}function r(t,e){return e.sort((function(e,i){return p.distanceSq(t.pos,e.pos)-p.distanceSq(t.pos,i.pos)}))[0]}function o(t,e){var i,s,n,o,l={},h=[],c={},d=[],u=[],g={};for(n in t)g[n]=a(n,t[n]);for(var f=0,m=p.allKeys;f<m.length;f++){var v=m[f];i=e.pieces[v],s=g[v],i?s?p.samePiece(i,s.piece)||(d.push(s),u.push(a(v,i))):u.push(a(v,i)):s&&d.push(s)}return u.forEach((function(t){(s=r(t,d.filter((function(e){return p.samePiece(t.piece,e.piece)}))))&&(o=[s.pos[0]-t.pos[0],s.pos[1]-t.pos[1]],l[t.key]=o.concat(o),h.push(s.key))})),d.forEach((function(t){p.containsX(h,t.key)||e.items&&e.items(t.pos,t.key)||(c[t.key]=t.piece)})),{anims:l,fadings:c}}function l(t,e){var i=t.animation.current;if(void 0!==i){var s=1-(e-i.start)*i.frequency;if(s<=0)t.animation.current=void 0,t.dom.redrawNow();else{var n=d(s);for(var a in i.plan.anims){var r=i.plan.anims[a];r[2]=r[0]*n,r[3]=r[1]*n}t.dom.redrawNow(!0),p.raf((function(e){return void 0===e&&(e=g.now()),l(t,e)}))}}else t.dom.destroyed||t.dom.redrawNow()}function h(t,e){var i=u({},e.pieces),s=t(e),n=o(i,e);if(c(n.anims)&&c(n.fadings))e.dom.redraw();else{var a=e.animation.current&&e.animation.current.start;e.animation.current={start:g.now(),frequency:1/e.animation.duration,plan:n},a||l(e,g.now())}return s}function c(t){for(var e in t)return!1;return!0}function d(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1}var u=this&&this.__assign||Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var n in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t};Object.defineProperty(e,"__esModule",{value:!0});var p=i(0);e.anim=s,e.render=n;var g=void 0!==window.performance?window.performance:Date},function(t,e,i){"use strict";function s(t,e){if(e.movable&&e.movable.dests&&(t.movable.dests=void 0),n(t,e),e.fen&&(t.pieces=l.read(e.fen),t.drawable.shapes=[]),e.hasOwnProperty("check")&&o.setCheck(t,e.check||!1),e.hasOwnProperty("lastMove")&&!e.lastMove?t.lastMove=void 0:e.lastMove&&(t.lastMove=e.lastMove),t.selected&&o.setSelected(t,t.selected),(!t.animation.duration||t.animation.duration<100)&&(t.animation.enabled=!1),!t.movable.rookCastle&&t.movable.dests){var i="white"===t.movable.color?1:8,s="e"+i,a=t.movable.dests[s];if(!a||"king"!==t.pieces[s].role)return;t.movable.dests[s]=a.filter((function(t){return!(t==="a"+i&&-1!==a.indexOf("c"+i)||t==="h"+i&&-1!==a.indexOf("g"+i))}))}}function n(t,e){for(var i in e)a(t[i])&&a(e[i])?n(t[i],e[i]):t[i]=e[i]}function a(t){return"object"===(void 0===t?"undefined":r(t))}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var o=i(1),l=i(2);e.configure=s},function(t,e,i){"use strict";function s(t,e){if(!(void 0!==e.button&&0!==e.button||e.touches&&e.touches.length>1)){e.preventDefault();var i="white"===t.orientation,s=t.dom.bounds(),n=p.eventPosition(e),r=u.getKeyAtDomPos(n,i,s);if(r){var o=t.pieces[r],l=t.selected;l||!t.drawable.enabled||!t.drawable.eraseOnClick&&o&&o.color===t.turnColor||g.clear(t);var h=!!t.premovable.current,m=!!t.predroppable.current;t.stats.ctrlKey=e.ctrlKey,t.selected&&u.canMove(t,t.selected,r)?f.anim((function(t){return u.selectSquare(t,r)}),t):u.selectSquare(t,r);var v=t.selected===r,b=d(t,r);if(o&&b&&v&&u.isDraggable(t,r)){var x=c(r,i,s);t.draggable.current={orig:r,origPos:p.key2pos(r),piece:o,rel:n,epos:n,pos:[0,0],dec:t.draggable.centerPiece?[n[0]-(x.left+x.width/2),n[1]-(x.top+x.height/2)]:[0,0],started:t.draggable.autoDistance&&t.stats.dragged,element:b,previouslySelected:l,originTarget:e.target},b.cgDragging=!0,b.classList.add("dragging");var y=t.dom.elements.ghost;y&&(y.className="ghost "+o.color+" "+o.role,p.translateAbs(y,p.posToTranslateAbs(s)(p.key2pos(r),i)),p.setVisible(y,!0)),a(t)}else h&&u.unsetPremove(t),m&&u.unsetPredrop(t);t.dom.redraw()}}}function n(t,e,i,s){t.pieces.a0=e,t.dom.redraw();var n=p.eventPosition(i),r="white"===t.orientation,o=t.dom.bounds(),l=c("a0",r,o),h=[(r?0:7)*l.width+o.left,(r?8:-1)*l.height+o.top];t.draggable.current={orig:"a0",origPos:p.key2pos("a0"),piece:e,rel:h,epos:n,pos:[n[0]-h[0],n[1]-h[1]],dec:[-l.width/2,-l.height/2],started:!0,element:function(){return d(t,"a0")},originTarget:i.target,newPiece:!0,force:s||!1},a(t)}function a(t){p.raf((function(){var e=t.draggable.current;if(e){t.animation.current&&t.animation.current.plan.anims[e.orig]&&(t.animation.current=void 0);var i=t.pieces[e.orig];if(i&&p.samePiece(i,e.piece)){if(!e.started&&p.distanceSq(e.epos,e.rel)>=Math.pow(t.draggable.distance,2)&&(e.started=!0),e.started){if("function"==typeof e.element){var s=e.element();if(!s)return;e.element=s,e.element.cgDragging=!0,e.element.classList.add("dragging")}var n="white"===t.orientation,r=t.dom.bounds();e.pos=[e.epos[0]-e.rel[0],e.epos[1]-e.rel[1]];var o=p.posToTranslateAbs(r)(e.origPos,n);o[0]+=e.pos[0]+e.dec[0],o[1]+=e.pos[1]+e.dec[1],p.translateAbs(e.element,o)}}else l(t);a(t)}}))}function r(t,e){t.draggable.current&&(!e.touches||e.touches.length<2)&&(t.draggable.current.epos=p.eventPosition(e))}function o(t,e){var i=t.draggable.current;if(i){if("touchend"===e.type&&i&&i.originTarget!==e.target&&!i.newPiece)return void(t.draggable.current=void 0);u.unsetPremove(t),u.unsetPredrop(t);var s=p.eventPosition(e)||i.epos,n=u.getKeyAtDomPos(s,"white"===t.orientation,t.dom.bounds());n&&i.started?i.newPiece?u.dropNewPiece(t,i.orig,n,i.force):(t.stats.ctrlKey=e.ctrlKey,u.userMove(t,i.orig,n)&&(t.stats.dragged=!0)):i.newPiece?delete t.pieces[i.orig]:t.draggable.deleteOnDropOff&&(delete t.pieces[i.orig],u.callUserFunction(t.events.change)),(!i||i.orig!==i.previouslySelected||i.orig!==n&&n)&&t.selectable.enabled||u.unselect(t),h(t),t.draggable.current=void 0,t.dom.redraw()}}function l(t){var e=t.draggable.current;e&&(e.newPiece&&delete t.pieces[e.orig],t.draggable.current=void 0,u.unselect(t),h(t),t.dom.redraw())}function h(t){var e=t.dom.elements;e.ghost&&p.setVisible(e.ghost,!1)}function c(t,e,i){var s=p.key2pos(t);return e||(s[0]=9-s[0],s[1]=9-s[1]),{left:i.left+i.width*(s[0]-1)/8,top:i.top+i.height*(8-s[1])/8,width:i.width/8,height:i.height/8}}function d(t,e){for(var i=t.dom.elements.board.firstChild;i;){if(i.cgKey===e&&"PIECE"===i.tagName)return i;i=i.nextSibling}}Object.defineProperty(e,"__esModule",{value:!0});var u=i(1),p=i(0),g=i(7),f=i(4);e.start=s,e.dragNewPiece=n,e.move=r,e.end=o,e.cancel=l},function(t,e,i){"use strict";function s(t,e){if(!(e.touches&&e.touches.length>1)){e.stopPropagation(),e.preventDefault(),e.ctrlKey?p.unselect(t):p.cancelMove(t);var i=g.eventPosition(e),s=p.getKeyAtDomPos(i,"white"===t.orientation,t.dom.bounds());s&&(t.drawable.current={orig:s,pos:i,brush:h(e)},n(t))}}function n(t){g.raf((function(){var e=t.drawable.current;if(e){var i=p.getKeyAtDomPos(e.pos,"white"===t.orientation,t.dom.bounds());i!==e.mouseSq&&(e.mouseSq=i,e.dest=i!==e.orig?i:void 0,t.dom.redrawNow()),n(t)}}))}function a(t,e){t.drawable.current&&(t.drawable.current.pos=g.eventPosition(e))}function r(t){var e=t.drawable.current;e&&(e.mouseSq&&d(t.drawable,e),o(t))}function o(t){t.drawable.current&&(t.drawable.current=void 0,t.dom.redraw())}function l(t){t.drawable.shapes.length&&(t.drawable.shapes=[],t.dom.redraw(),u(t.drawable))}function h(t){var e=t.shiftKey&&g.isRightButton(t)?1:0,i=t.altKey?2:0;return f[e+i]}function c(t){return function(e){return!t(e)}}function d(t,e){var i=function(t){return t.orig===e.orig&&t.dest===e.dest},s=t.shapes.filter(i)[0];s&&(t.shapes=t.shapes.filter(c(i))),s&&s.brush===e.brush||t.shapes.push(e),u(t)}function u(t){t.onChange&&t.onChange(t.shapes)}Object.defineProperty(e,"__esModule",{value:!0});var p=i(1),g=i(0),f=["green","red","blue","yellow"];e.start=s,e.processDraw=n,e.move=a,e.end=r,e.cancel=o,e.clear=l},function(t,e,i){"use strict";function s(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function n(t,e){var i=t.drawable,s=i.current,n=s&&s.mouseSq?s:void 0,l={};i.shapes.concat(i.autoShapes).concat(n?[n]:[]).forEach((function(t){t.dest&&(l[t.dest]=(l[t.dest]||0)+1)}));var h=i.shapes.concat(i.autoShapes).map((function(t){return{shape:t,current:!1,hash:o(t,l,!1)}}));n&&h.push({shape:n,current:!0,hash:o(n,l,!0)});var c=h.map((function(t){return t.hash})).join("");if(c!==t.drawable.prevSvgHash){t.drawable.prevSvgHash=c;var d=e.firstChild;a(i,h,d),r(t,h,i.brushes,l,e,d)}}function a(t,e,i){var s,n={};e.forEach((function(e){e.shape.dest&&(s=t.brushes[e.shape.brush],e.shape.modifiers&&(s=v(s,e.shape.modifiers)),n[s.key]=s)}));for(var a={},r=i.firstChild;r;)a[r.getAttribute("cgKey")]=!0,r=r.nextSibling;for(var o in n)a[o]||i.appendChild(g(n[o]))}function r(t,e,i,s,n,a){void 0===C&&(C=S.computeIsTrident());var r=t.dom.bounds(),o={},l=[];e.forEach((function(t){o[t.hash]=!1}));for(var h,d=a.nextSibling;d;)h=d.getAttribute("cgHash"),o.hasOwnProperty(h)?o[h]=!0:l.push(d),d=d.nextSibling;l.forEach((function(t){return n.removeChild(t)})),e.forEach((function(e){o[e.hash]||n.appendChild(c(t,e,i,s,r))}))}function o(t,e,i){var s=t.orig,n=t.dest,a=t.brush,r=t.piece,o=t.modifiers;return[i,s,n,a,n&&e[n]>1,r&&l(r),o&&h(o)].filter((function(t){return t})).join("")}function l(t){return[t.color,t.role,t.scale].filter((function(t){return t})).join("")}function h(t){return""+(t.lineWidth||"")}function c(t,e,i,s,n){var a,r=e.shape,o=e.current,l=e.hash;if(r.piece)a=p(t.drawable.pieces.baseUrl,m(S.key2pos(r.orig),t.orientation),r.piece,n);else{var h=m(S.key2pos(r.orig),t.orientation);if(r.orig&&r.dest){var c=i[r.brush];r.modifiers&&(c=v(c,r.modifiers)),a=u(c,h,m(S.key2pos(r.dest),t.orientation),o,s[r.dest]>1,n)}else a=d(i[r.brush],h,o,n)}return a.setAttribute("cgHash",l),a}function d(t,e,i,n){var a=k(e,n),r=b(n),o=(n.width+n.height)/32;return f(s("circle"),{stroke:t.color,"stroke-width":r[i?0:1],fill:"none",opacity:y(t,i),cx:a[0],cy:a[1],r:o-r[1]/2})}function u(t,e,i,n,a,r){var o=w(r,a&&!n),l=k(e,r),h=k(i,r),c=h[0]-l[0],d=h[1]-l[1],u=Math.atan2(d,c),p=Math.cos(u)*o,g=Math.sin(u)*o;return f(s("line"),{stroke:t.color,"stroke-width":x(t,n,r),"stroke-linecap":"round","marker-end":C?void 0:"url(#arrowhead-"+t.key+")",opacity:y(t,n),x1:l[0],y1:l[1],x2:h[0]-p,y2:h[1]-g})}function p(t,e,i,n){var a=k(e,n),r=n.width/8*(i.scale||1),o=i.color[0]+("knight"===i.role?"n":i.role[0]).toUpperCase();return f(s("image"),{className:i.role+" "+i.color,x:a[0]-r/2,y:a[1]-r/2,width:r,height:r,href:t+o+".svg"})}function g(t){var e=f(s("marker"),{id:"arrowhead-"+t.key,orient:"auto",markerWidth:4,markerHeight:8,refX:2.05,refY:2.01});return e.appendChild(f(s("path"),{d:"M0,0 V4 L3,2 Z",fill:t.color})),e.setAttribute("cgKey",t.key),e}function f(t,e){for(var i in e)t.setAttribute(i,e[i]);return t}function m(t,e){return"white"===e?t:[9-t[0],9-t[1]]}function v(t,e){var i={color:t.color,opacity:Math.round(10*t.opacity)/10,lineWidth:Math.round(e.lineWidth||t.lineWidth)};return i.key=[t.key,e.lineWidth].filter((function(t){return t})).join(""),i}function b(t){var e=t.width/512;return[3*e,4*e]}function x(t,e,i){return(t.lineWidth||10)*(e?.85:1)/512*i.width}function y(t,e){return(t.opacity||1)*(e?.9:1)}function w(t,e){return C?0:(e?20:10)/512*t.width}function k(t,e){return[(t[0]-.5)*e.width/8,(8.5-t[1])*e.height/8]}Object.defineProperty(e,"__esModule",{value:!0});var C,S=i(0);e.createElement=s,e.renderSvg=n},function(t,e,i){var s=i(22)(i(21),i(23),null,null);t.exports=s.exports},function(t,e,i){var s,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(t){function e(){ht=new Array(128),ct={w:H,b:H},dt=B,ut={w:0,b:0},pt=H,gt=0,ft=1,mt=[],vt={},l(r())}function i(){s(j)}function s(t){var i=t.split(/\s+/),s=i[0],n=0;if(!a(t).valid)return!1;e();for(var o=0;o<s.length;o++){var h=s.charAt(o);if("/"===h)n+=8;else if(O(h))n+=parseInt(h,10);else{var d=h<"a"?B:F;c({type:h.toLowerCase(),color:d},L(n)),n++}}return dt=i[1],i[2].indexOf("K")>-1&&(ut.w|=it.KSIDE_CASTLE),i[2].indexOf("Q")>-1&&(ut.w|=it.QSIDE_CASTLE),i[2].indexOf("k")>-1&&(ut.b|=it.KSIDE_CASTLE),i[2].indexOf("q")>-1&&(ut.b|=it.QSIDE_CASTLE),pt="-"===i[3]?H:ot[i[3]],gt=parseInt(i[4],10),ft=parseInt(i[5],10),l(r()),!0}function a(t){var e={0:"No errors.",1:"FEN string must contain six space-delimited fields.",2:"6th field (move number) must be a positive integer.",3:"5th field (half move counter) must be a non-negative integer.",4:"4th field (en-passant square) is invalid.",5:"3rd field (castling availability) is invalid.",6:"2nd field (side to move) is invalid.",7:"1st field (piece positions) does not contain 8 '/'-delimited rows.",8:"1st field (piece positions) is invalid [consecutive numbers].",9:"1st field (piece positions) is invalid [invalid piece].",10:"1st field (piece positions) is invalid [row too large].",11:"Illegal en-passant square"},i=t.split(/\s+/);if(6!==i.length)return{valid:!1,error_number:1,error:e[1]};if(isNaN(i[5])||parseInt(i[5],10)<=0)return{valid:!1,error_number:2,error:e[2]};if(isNaN(i[4])||parseInt(i[4],10)<0)return{valid:!1,error_number:3,error:e[3]};if(!/^(-|[abcdefgh][36])$/.test(i[3]))return{valid:!1,error_number:4,error:e[4]};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(i[2]))return{valid:!1,error_number:5,error:e[5]};if(!/^(w|b)$/.test(i[1]))return{valid:!1,error_number:6,error:e[6]};var s=i[0].split("/");if(8!==s.length)return{valid:!1,error_number:7,error:e[7]};for(var n=0;n<s.length;n++){for(var a=0,r=!1,o=0;o<s[n].length;o++)if(isNaN(s[n][o])){if(!/^[prnbqkPRNBQK]$/.test(s[n][o]))return{valid:!1,error_number:9,error:e[9]};a+=1,r=!1}else{if(r)return{valid:!1,error_number:8,error:e[8]};a+=parseInt(s[n][o],10),r=!0}if(8!==a)return{valid:!1,error_number:10,error:e[10]}}return"3"==i[3][1]&&"w"==i[1]||"6"==i[3][1]&&"b"==i[1]?{valid:!1,error_number:11,error:e[11]}:{valid:!0,error_number:0,error:e[0]}}function r(){for(var t=0,e="",i=ot.a8;i<=ot.h1;i++){if(null==ht[i])t++;else{t>0&&(e+=t,t=0);var s=ht[i].color,n=ht[i].type;e+=s===B?n.toUpperCase():n.toLowerCase()}i+1&136&&(t>0&&(e+=t),i!==ot.h1&&(e+="/"),t=0,i+=8)}var a="";ut[B]&it.KSIDE_CASTLE&&(a+="K"),ut[B]&it.QSIDE_CASTLE&&(a+="Q"),ut[F]&it.KSIDE_CASTLE&&(a+="k"),ut[F]&it.QSIDE_CASTLE&&(a+="q"),a=a||"-";var r=pt===H?"-":L(pt);return[e,dt,a,r,gt,ft].join(" ")}function o(t){for(var e=0;e<t.length;e+=2)"string"==typeof t[e]&&"string"==typeof t[e+1]&&(vt[t[e]]=t[e+1]);return vt}function l(t){mt.length>0||(t!==j?(vt.SetUp="1",vt.FEN=t):(delete vt.SetUp,delete vt.FEN))}function h(t){var e=ht[ot[t]];return e?{type:e.type,color:e.color}:null}function c(t,e){if(!("type"in t)||!("color"in t))return!1;if(-1===G.indexOf(t.type.toLowerCase()))return!1;if(!(e in ot))return!1;var i=ot[e];return(t.type!=Z||ct[t.color]==H||ct[t.color]==i)&&(ht[i]={type:t.type,color:t.color},t.type===Z&&(ct[t.color]=i),l(r()),!0)}function d(t){var e=h(t);return ht[ot[t]]=null,e&&e.type===Z&&(ct[e.color]=H),l(r()),e}function u(t,e,i,s,n){var a={color:dt,from:e,to:i,flags:s,piece:t[e].type};return n&&(a.flags|=it.PROMOTION,a.promotion=n),t[i]?a.captured=t[i].type:s&it.EP_CAPTURE&&(a.captured=$),a}function p(t){function e(t,e,i,s,n){if(t[i].type!==$||T(s)!==rt&&T(s)!==st)e.push(u(t,i,s,n));else for(var a=[V,Y,X,W],r=0,o=a.length;r<o;r++)e.push(u(t,i,s,n,a[r]))}var i=[],s=dt,n=M(s),a={b:at,w:nt},r=ot.a8,o=ot.h1,l=!1,h=!(void 0!==t&&"legal"in t)||t.legal;if(void 0!==t&&"square"in t){if(!(t.square in ot))return[];r=o=ot[t.square],l=!0}for(var c=r;c<=o;c++)if(136&c)c+=7;else{var d=ht[c];if(null!=d&&d.color===s)if(d.type===$){var p=c+U[s][0];if(null==ht[p]){e(ht,i,c,p,it.NORMAL);p=c+U[s][1];a[s]===T(c)&&null==ht[p]&&e(ht,i,c,p,it.BIG_PAWN)}for(g=2;g<4;g++){p=c+U[s][g];136&p||(null!=ht[p]&&ht[p].color===n?e(ht,i,c,p,it.CAPTURE):p===pt&&e(ht,i,c,pt,it.EP_CAPTURE))}}else for(var g=0,f=K[d.type].length;g<f;g++){var b=K[d.type][g];for(p=c;;){if(136&(p+=b))break;if(null!=ht[p]){if(ht[p].color===s)break;e(ht,i,c,p,it.CAPTURE);break}if(e(ht,i,c,p,it.NORMAL),"n"===d.type||"k"===d.type)break}}}if(!l||o===ct[s]){if(ut[s]&it.KSIDE_CASTLE){var x=ct[s],y=x+2;null!=ht[x+1]||null!=ht[y]||m(n,ct[s])||m(n,x+1)||m(n,y)||e(ht,i,ct[s],y,it.KSIDE_CASTLE)}if(ut[s]&it.QSIDE_CASTLE){x=ct[s],y=x-2;null!=ht[x-1]||null!=ht[x-2]||null!=ht[x-3]||m(n,ct[s])||m(n,x-1)||m(n,y)||e(ht,i,ct[s],y,it.QSIDE_CASTLE)}}if(!h)return i;var w=[];for(c=0,f=i.length;c<f;c++)S(i[c]),v(s)||w.push(i[c]),_();return w}function g(t,e){var i="";if(t.flags&it.KSIDE_CASTLE)i="O-O";else if(t.flags&it.QSIDE_CASTLE)i="O-O-O";else{var s=A(t,e);t.piece!==$&&(i+=t.piece.toUpperCase()+s),t.flags&(it.CAPTURE|it.EP_CAPTURE)&&(t.piece===$&&(i+=L(t.from)[0]),i+="x"),i+=L(t.to),t.flags&it.PROMOTION&&(i+="="+t.promotion.toUpperCase())}return S(t),b()&&(x()?i+="#":i+="+"),_(),i}function f(t){return t.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function m(t,e){for(var i=ot.a8;i<=ot.h1;i++)if(136&i)i+=7;else if(null!=ht[i]&&ht[i].color===t){var s=ht[i],n=i-e,a=n+119;if(Q[a]&1<<tt[s.type]){if(s.type===$){if(n>0){if(s.color===B)return!0}else if(s.color===F)return!0;continue}if("n"===s.type||"k"===s.type)return!0;for(var r=J[a],o=i+r,l=!1;o!==e;){if(null!=ht[o]){l=!0;break}o+=r}if(!l)return!0}}return!1}function v(t){return m(M(t),ct[t])}function b(){return v(dt)}function x(){return b()&&0===p().length}function y(){return!b()&&0===p().length}function w(){for(var t={},e=[],i=0,s=0,n=ot.a8;n<=ot.h1;n++)if(s=(s+1)%2,136&n)n+=7;else{var a=ht[n];a&&(t[a.type]=a.type in t?t[a.type]+1:1,a.type===X&&e.push(s),i++)}if(2===i)return!0;if(3===i&&(1===t[X]||1===t[W]))return!0;if(i===t[X]+2){var r=0,o=e.length;for(n=0;n<o;n++)r+=e[n];if(0===r||r===o)return!0}return!1}function k(){for(var t=[],e={},i=!1;;){var s=_();if(!s)break;t.push(s)}for(;;){var n=r().split(" ").slice(0,4).join(" ");if(e[n]=n in e?e[n]+1:1,e[n]>=3&&(i=!0),!t.length)break;S(t.pop())}return i}function C(t){mt.push({move:t,kings:{b:ct.b,w:ct.w},turn:dt,castling:{b:ut.b,w:ut.w},ep_square:pt,half_moves:gt,move_number:ft})}function S(t){var e=dt,i=M(e);if(C(t),ht[t.to]=ht[t.from],ht[t.from]=null,t.flags&it.EP_CAPTURE&&(dt===F?ht[t.to-16]=null:ht[t.to+16]=null),t.flags&it.PROMOTION&&(ht[t.to]={type:t.promotion,color:e}),ht[t.to].type===Z){if(ct[ht[t.to].color]=t.to,t.flags&it.KSIDE_CASTLE){var s=t.to-1,n=t.to+1;ht[s]=ht[n],ht[n]=null}else if(t.flags&it.QSIDE_CASTLE){s=t.to+1,n=t.to-2;ht[s]=ht[n],ht[n]=null}ut[e]=""}if(ut[e])for(var a=0,r=lt[e].length;a<r;a++)if(t.from===lt[e][a].square&&ut[e]&lt[e][a].flag){ut[e]^=lt[e][a].flag;break}if(ut[i])for(a=0,r=lt[i].length;a<r;a++)if(t.to===lt[i][a].square&&ut[i]&lt[i][a].flag){ut[i]^=lt[i][a].flag;break}pt=t.flags&it.BIG_PAWN?"b"===dt?t.to-16:t.to+16:H,t.piece===$||t.flags&(it.CAPTURE|it.EP_CAPTURE)?gt=0:gt++,dt===F&&ft++,dt=M(dt)}function _(){var t=mt.pop();if(null==t)return null;var e=t.move;ct=t.kings,dt=t.turn,ut=t.castling,pt=t.ep_square,gt=t.half_moves,ft=t.move_number;var i,s,n=dt,a=M(dt);if(ht[e.from]=ht[e.to],ht[e.from].type=e.piece,ht[e.to]=null,e.flags&it.CAPTURE)ht[e.to]={type:e.captured,color:a};else if(e.flags&it.EP_CAPTURE){var r;r=n===F?e.to-16:e.to+16,ht[r]={type:$,color:a}}e.flags&(it.KSIDE_CASTLE|it.QSIDE_CASTLE)&&(e.flags&it.KSIDE_CASTLE?(i=e.to+1,s=e.to-1):e.flags&it.QSIDE_CASTLE&&(i=e.to-2,s=e.to+1),ht[i]=ht[s],ht[s]=null);return e}function A(t,e){for(var i=p({legal:!e}),s=t.from,n=t.to,a=t.piece,r=0,o=0,l=0,h=0,c=i.length;h<c;h++){var d=i[h].from,u=i[h].to;a===i[h].piece&&s!==d&&n===u&&(r++,T(s)===T(d)&&o++,E(s)===E(d)&&l++)}return r>0?o>0&&l>0?L(s):l>0?L(s).charAt(1):L(s).charAt(0):""}function I(){for(var t="   +------------------------+\n",e=ot.a8;e<=ot.h1;e++){if(0===E(e)&&(t+=" "+"87654321"[T(e)]+" |"),null==ht[e])t+=" . ";else{var i=ht[e].type;t+=" "+(ht[e].color===B?i.toUpperCase():i.toLowerCase())+" "}e+1&136&&(t+="|\n",e+=8)}return t+="   +------------------------+\n",t+"     a  b  c  d  e  f  g  h\n"}function P(t,e){var i=f(t);if(e){var s=i.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/);if(s)var n=s[1],a=s[2],r=s[3],o=s[4]}for(var l=p(),h=0,c=l.length;h<c;h++){if(i===f(g(l[h]))||e&&i===f(g(l[h],!0)))return l[h];if(s&&(!n||n.toLowerCase()==l[h].piece)&&ot[a]==l[h].from&&ot[r]==l[h].to&&(!o||o.toLowerCase()==l[h].promotion))return l[h]}return null}function T(t){return t>>4}function E(t){return 15&t}function L(t){var e=E(t),i=T(t);return"abcdefgh".substring(e,e+1)+"87654321".substring(i,i+1)}function M(t){return t===B?F:B}function O(t){return-1!=="0123456789".indexOf(t)}function D(t){var e=R(t);e.san=g(e,!1),e.to=L(e.to),e.from=L(e.from);var i="";for(var s in it)it[s]&e.flags&&(i+=et[s]);return e.flags=i,e}function R(t){var e=t instanceof Array?[]:{};for(var i in t)"object"===(void 0===i?"undefined":n(i))?e[i]=R(t[i]):e[i]=t[i];return e}function N(t){return t.replace(/^\s+|\s+$/g,"")}function z(t){for(var e=p({legal:!1}),i=0,s=dt,n=0,a=e.length;n<a;n++){if(S(e[n]),!v(s))if(t-1>0){var r=z(t-1);i+=r}else i++;_()}return i}var F="b",B="w",H=-1,$="p",W="n",X="b",Y="r",V="q",Z="k",G="pnbrqkPNBRQK",j="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",q=["1-0","0-1","1/2-1/2","*"],U={b:[16,32,17,15],w:[-16,-32,-17,-15]},K={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},Q=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],J=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],tt={p:0,n:1,b:2,r:3,q:4,k:5},et={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},it={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},st=7,nt=6,at=1,rt=0,ot={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},lt={w:[{square:ot.a1,flag:it.QSIDE_CASTLE},{square:ot.h1,flag:it.KSIDE_CASTLE}],b:[{square:ot.a8,flag:it.QSIDE_CASTLE},{square:ot.h8,flag:it.KSIDE_CASTLE}]},ht=new Array(128),ct={w:H,b:H},dt=B,ut={w:0,b:0},pt=H,gt=0,ft=1,mt=[],vt={};return s(void 0===t?j:t),{WHITE:B,BLACK:F,PAWN:$,KNIGHT:W,BISHOP:X,ROOK:Y,QUEEN:V,KING:Z,SQUARES:function(){for(var t=[],e=ot.a8;e<=ot.h1;e++)136&e?e+=7:t.push(L(e));return t}(),FLAGS:et,load:function(t){return s(t)},reset:function(){return i()},moves:function(t){for(var e=p(t),i=[],s=0,n=e.length;s<n;s++)void 0!==t&&"verbose"in t&&t.verbose?i.push(D(e[s])):i.push(g(e[s],!1));return i},in_check:function(){return b()},in_checkmate:function(){return x()},in_stalemate:function(){return y()},in_draw:function(){return gt>=100||y()||w()||k()},insufficient_material:function(){return w()},in_threefold_repetition:function(){return k()},game_over:function(){return gt>=100||x()||y()||w()||k()},validate_fen:function(t){return a(t)},fen:function(){return r()},pgn:function(t){var e="object"===(void 0===t?"undefined":n(t))&&"string"==typeof t.newline_char?t.newline_char:"\n",i="object"===(void 0===t?"undefined":n(t))&&"number"==typeof t.max_width?t.max_width:0,s=[],a=!1;for(var r in vt)s.push("["+r+' "'+vt[r]+'"]'+e),a=!0;a&&mt.length&&s.push(e);for(var o=[];mt.length>0;)o.push(_());for(var l=[],h="";o.length>0;){var c=o.pop();mt.length||"b"!==c.color?"w"===c.color&&(h.length&&l.push(h),h=ft+"."):h=ft+". ...",h=h+" "+g(c,!1),S(c)}if(h.length&&l.push(h),void 0!==vt.Result&&l.push(vt.Result),0===i)return s.join("")+l.join(" ");var d=0;for(r=0;r<l.length;r++)d+l[r].length>i&&0!==r?(" "===s[s.length-1]&&s.pop(),s.push(e),d=0):0!==r&&(s.push(" "),d++),s.push(l[r]),d+=l[r].length;return s.join("")},load_pgn:function(t,e){function a(t){return t.replace(/\\/g,"\\")}var r=void 0!==e&&"sloppy"in e&&e.sloppy,l="object"===(void 0===e?"undefined":n(e))&&"string"==typeof e.newline_char?e.newline_char:"\r?\n",h=new RegExp("^(\\[(.|"+a(l)+")*\\])("+a(l)+")*1.("+a(l)+"|.)*$","g"),c=t.replace(h,"$1");"["!==c[0]&&(c=""),i();var d=function(t,e){for(var i="object"===(void 0===e?"undefined":n(e))&&"string"==typeof e.newline_char?e.newline_char:"\r?\n",s={},r=t.split(new RegExp(a(i))),o="",l="",h=0;h<r.length;h++)o=r[h].replace(/^\[([A-Z][A-Za-z]*)\s.*\]$/,"$1"),l=r[h].replace(/^\[[A-Za-z]+\s"(.*)"\]$/,"$1"),N(o).length>0&&(s[o]=l);return s}(c,e);for(var u in d)o([u,d[u]]);if("1"===d.SetUp&&(!("FEN"in d)||!s(d.FEN)))return!1;var p=t.replace(c,"").replace(new RegExp(a(l),"g")," ");p=p.replace(/(\{[^}]+\})+?/g,"");for(var g=/(\([^\(\)]+\))+?/g;g.test(p);)p=p.replace(g,"");p=p.replace(/\d+\.(\.\.)?/g,""),p=p.replace(/\.\.\./g,""),p=p.replace(/\$\d+/g,"");var f=N(p).split(new RegExp(/\s+/));f=f.join(",").replace(/,,+/g,",").split(",");for(var m="",v=0;v<f.length-1;v++){if(null==(m=P(f[v],r)))return!1;S(m)}if(m=f[f.length-1],q.indexOf(m)>-1)(function(t){for(var e in t)return!0;return!1})(vt)&&void 0===vt.Result&&o(["Result",m]);else{if(null==(m=P(m,r)))return!1;S(m)}return!0},header:function(){return o(arguments)},ascii:function(){return I()},turn:function(){return dt},move:function(t,e){var i=void 0!==e&&"sloppy"in e&&e.sloppy,s=null;if("string"==typeof t)s=P(t,i);else if("object"===(void 0===t?"undefined":n(t)))for(var a=p(),r=0,o=a.length;r<o;r++)if(!(t.from!==L(a[r].from)||t.to!==L(a[r].to)||"promotion"in a[r]&&t.promotion!==a[r].promotion)){s=a[r];break}if(!s)return null;var l=D(s);return S(s),l},undo:function(){var t=_();return t?D(t):null},clear:function(){return e()},put:function(t,e){return c(t,e)},get:function(t){return h(t)},remove:function(t){return d(t)},perft:function(t){return z(t)},square_color:function(t){if(t in ot){var e=ot[t];return(T(e)+E(e))%2==0?"light":"dark"}return null},history:function(t){for(var e=[],i=[],s=(void 0!==t&&"verbose"in t&&t.verbose);mt.length>0;)e.push(_());for(;e.length>0;){var n=e.pop();s?i.push(D(n)):i.push(g(n)),S(n)}return i}}};e.Chess=a,void 0!==(s=function(){return a}.call(e,i,e,t))&&(t.exports=s)},function(t,e,i){"use strict";function s(t,e){function i(){n.toggleOrientation(t),e()}return{set:function(e){e.orientation&&e.orientation!==t.orientation&&i(),(e.fen?o.anim:o.render)((function(t){return r.configure(t,e)}),t)},state:t,getFen:function(){return a.write(t.pieces)},toggleOrientation:i,setPieces:function(e){o.anim((function(t){return n.setPieces(t,e)}),t)},selectSquare:function(e,i){e?o.anim((function(t){return n.selectSquare(t,e,i)}),t):t.selected&&(n.unselect(t),t.dom.redraw())},move:function(e,i){o.anim((function(t){return n.baseMove(t,e,i)}),t)},newPiece:function(e,i){o.anim((function(t){return n.baseNewPiece(t,e,i)}),t)},playPremove:function(){if(t.premovable.current){if(o.anim(n.playPremove,t))return!0;t.dom.redraw()}return!1},playPredrop:function(e){if(t.predroppable.current){var i=n.playPredrop(t,e);return t.dom.redraw(),i}return!1},cancelPremove:function(){o.render(n.unsetPremove,t)},cancelPredrop:function(){o.render(n.unsetPredrop,t)},cancelMove:function(){o.render((function(t){n.cancelMove(t),l.cancel(t)}),t)},stop:function(){o.render((function(t){n.stop(t),l.cancel(t)}),t)},explode:function(e){h.default(t,e)},setAutoShapes:function(e){o.render((function(t){return t.drawable.autoShapes=e}),t)},setShapes:function(e){o.render((function(t){return t.drawable.shapes=e}),t)},getKeyAtDomPos:function(e){return n.getKeyAtDomPos(e,"white"===t.orientation,t.dom.bounds())},redrawAll:e,dragNewPiece:function(e,i,s){l.dragNewPiece(t,e,i,s)},destroy:function(){n.stop(t),t.dom.unbind&&t.dom.unbind(),t.dom.destroyed=!0}}}Object.defineProperty(e,"__esModule",{value:!0});var n=i(1),a=i(2),r=i(5),o=i(4),l=i(6),h=i(14);e.start=s},function(t,e,i){"use strict";function s(t,e){function i(){var e=s.dom&&s.dom.unbind;t.classList.add("cg-board-wrap");var a=u.memo((function(){return t.getBoundingClientRect()})),r=s.viewOnly&&!s.drawable.visible,o=l.default(t,s,r?void 0:a()),p=function(t){c.default(s),!t&&o.svg&&d.renderSvg(s,o.svg)};s.dom={elements:o,bounds:a,redraw:n(p),redrawNow:p,unbind:e,relative:r},s.drawable.prevSvgHash="",p(!1),h.bindBoard(s),e||(s.dom.unbind=h.bindDocument(s,i))}var s=o.defaults();return r.configure(s,e||{}),i(),a.start(s,i)}function n(t){var e=!1;return function(){e||(e=!0,u.raf((function(){t(),e=!1})))}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(11),r=i(5),o=i(17),l=i(18),h=i(13),c=i(16),d=i(8),u=i(0);e.Chessground=s},function(t,e,i){"use strict";function s(t){if(!t.viewOnly){var e=t.dom.elements.board,i=r(t);e.addEventListener("touchstart",i),e.addEventListener("mousedown",i),(t.disableContextMenu||t.drawable.enabled)&&e.addEventListener("contextmenu",(function(t){return t.preventDefault()}))}}function n(t,e){var i=[];if(!t.dom.relative&&t.resizable){var s=function(){t.dom.bounds.clear(),c.raf(e)};i.push(a(document.body,"chessground.resize",s))}if(!t.viewOnly){var n=o(t,l.move,h.move),r=o(t,l.end,h.end);["touchmove","mousemove"].forEach((function(t){return i.push(a(document,t,n))})),["touchend","mouseup"].forEach((function(t){return i.push(a(document,t,r))}));var d=function(){return t.dom.bounds.clear()};i.push(a(window,"scroll",d,{passive:!0})),i.push(a(window,"resize",d,{passive:!0}))}return function(){return i.forEach((function(t){return t()}))}}function a(t,e,i,s){return t.addEventListener(e,i,s),function(){return t.removeEventListener(e,i)}}function r(t){return function(e){t.draggable.current?l.cancel(t):t.drawable.current?h.cancel(t):e.shiftKey||c.isRightButton(e)?t.drawable.enabled&&h.start(t,e):t.viewOnly||l.start(t,e)}}function o(t,e,i){return function(s){s.shiftKey||c.isRightButton(s)?t.drawable.enabled&&i(t,s):t.viewOnly||e(t,s)}}Object.defineProperty(e,"__esModule",{value:!0});var l=i(6),h=i(7),c=i(0);e.bindBoard=s,e.bindDocument=n},function(t,e,i){"use strict";function s(t,e){t.exploding={stage:1,keys:e},t.dom.redraw(),setTimeout((function(){n(t,2),setTimeout((function(){return n(t,void 0)}),120)}),120)}function n(t,e){t.exploding&&(e?t.exploding.stage=e:t.exploding=void 0,t.dom.redraw())}Object.defineProperty(e,"__esModule",{value:!0}),e.default=s},function(t,e,i){"use strict";function s(t,e){return Math.abs(t-e)}function n(t){return function(e,i,n,a){return s(e,n)<2&&("white"===t?a===i+1||i<=2&&a===i+2&&e===n:a===i-1||i>=7&&a===i-2&&e===n)}}function a(t,e,i){return function(n,a,r,o){return s(n,r)<2&&s(a,o)<2||i&&a===o&&a===("white"===t?1:8)&&(5===n&&(3===r||7===r)||l.containsX(e,r))}}function r(t,e){var i;return Object.keys(t).filter((function(s){return(i=t[s])&&i.color===e&&"rook"===i.role})).map((function(t){return l.key2pos(t)[0]}))}function o(t,e,i){var s,o=t[e],p=l.key2pos(e);switch(o.role){case"pawn":s=n(o.color);break;case"knight":s=h;break;case"bishop":s=c;break;case"rook":s=d;break;case"queen":s=u;break;case"king":s=a(o.color,r(t,o.color),i)}return l.allKeys.map(l.key2pos).filter((function(t){return(p[0]!==t[0]||p[1]!==t[1])&&s(p[0],p[1],t[0],t[1])})).map(l.pos2key)}Object.defineProperty(e,"__esModule",{value:!0});var l=i(0),h=function(t,e,i,n){var a=s(t,i),r=s(e,n);return 1===a&&2===r||2===a&&1===r},c=function(t,e,i,n){return s(t,i)===s(e,n)},d=function(t,e,i,s){return t===i||e===s},u=function(t,e,i,s){return c(t,e,i,s)||d(t,e,i,s)};e.default=o},function(t,e,i){"use strict";function s(t){var e,i,s,c,p,g,f,m,v,b,x,y="white"===t.orientation,w=t.dom.relative?u.posToTranslateRel:u.posToTranslateAbs(t.dom.bounds()),k=t.dom.relative?u.translateRel:u.translateAbs,C=t.dom.elements.board,S=t.pieces,_=t.animation.current,A=_?_.plan.anims:{},I=_?_.plan.fadings:{},P=t.draggable.current,T=h(t),E={},L={},M={},O={},D=Object.keys(S);for(s=C.firstChild;s;){if(e=s.cgKey,n(s))if(c=S[e],g=A[e],f=I[e],p=s.cgPiece,!s.cgDragging||P&&P.orig===e||(s.classList.remove("dragging"),k(s,w(d.key2pos(e),y)),s.cgDragging=!1),!f&&s.cgFading&&(s.cgFading=!1,s.classList.remove("fading")),c){if(g&&s.cgAnimating&&p===l(c)){var R=d.key2pos(e);R[0]+=g[2],R[1]+=g[3],s.classList.add("anim"),k(s,w(R,y))}else s.cgAnimating&&(s.cgAnimating=!1,s.classList.remove("anim"),k(s,w(d.key2pos(e),y)),t.addPieceZIndex&&(s.style.zIndex=o(d.key2pos(e),y)));p!==l(c)||f&&s.cgFading?f&&p===l(f)?(s.classList.add("fading"),s.cgFading=!0):M[p]?M[p].push(s):M[p]=[s]:E[e]=!0}else M[p]?M[p].push(s):M[p]=[s];else if(a(s)){var N=s.className;T[e]===N?L[e]=!0:O[N]?O[N].push(s):O[N]=[s]}s=s.nextSibling}for(var z in T)if(!L[z]){b=O[T[z]],x=b&&b.pop();var F=w(d.key2pos(z),y);if(x)x.cgKey=z,k(x,F);else{var B=d.createEl("square",T[z]);B.cgKey=z,k(B,F),C.insertBefore(B,C.firstChild)}}for(var H in D)if(e=D[H],i=S[e],g=A[e],!E[e])if(m=M[l(i)],v=m&&m.pop()){v.cgKey=e,v.cgFading&&(v.classList.remove("fading"),v.cgFading=!1);R=d.key2pos(e);t.addPieceZIndex&&(v.style.zIndex=o(R,y)),g&&(v.cgAnimating=!0,v.classList.add("anim"),R[0]+=g[2],R[1]+=g[3]),k(v,w(R,y))}else{var $=l(i),W=d.createEl("piece",$);R=d.key2pos(e);W.cgPiece=$,W.cgKey=e,g&&(W.cgAnimating=!0,R[0]+=g[2],R[1]+=g[3]),k(W,w(R,y)),t.addPieceZIndex&&(W.style.zIndex=o(R,y)),C.appendChild(W)}for(var X in M)r(t,M[X]);for(var X in O)r(t,O[X])}function n(t){return"PIECE"===t.tagName}function a(t){return"SQUARE"===t.tagName}function r(t,e){for(var i in e)t.dom.elements.board.removeChild(e[i])}function o(t,e){var i=2+8*(t[1]-1)+(8-t[0]);return e&&(i=67-i),i+""}function l(t){return t.color+" "+t.role}function h(t){var e,i,s={};if(t.lastMove&&t.highlight.lastMove)for(e in t.lastMove)c(s,t.lastMove[e],"last-move");if(t.check&&t.highlight.check&&c(s,t.check,"check"),t.selected&&(c(s,t.selected,"selected"),t.movable.showDests)){var n=t.movable.dests&&t.movable.dests[t.selected];if(n)for(e in n)i=n[e],c(s,i,"move-dest"+(t.pieces[i]?" oc":""));var a=t.premovable.dests;if(a)for(e in a)i=a[e],c(s,i,"premove-dest"+(t.pieces[i]?" oc":""))}var r=t.premovable.current;if(r)for(e in r)c(s,r[e],"current-premove");else t.predroppable.current&&c(s,t.predroppable.current.key,"current-premove");var o=t.exploding;if(o)for(e in o.keys)c(s,o.keys[e],"exploding"+o.stage);return s}function c(t,e,i){t[e]?t[e]+=" "+i:t[e]=i}Object.defineProperty(e,"__esModule",{value:!0});var d=i(0),u=i(0);e.default=s},function(t,e,i){"use strict";function s(){return{pieces:n.read(n.initial),orientation:"white",turnColor:"white",coordinates:!0,autoCastle:!0,viewOnly:!1,disableContextMenu:!1,resizable:!0,addPieceZIndex:!1,pieceKey:!1,highlight:{lastMove:!0,check:!0},animation:{enabled:!0,duration:200},movable:{free:!0,color:"both",showDests:!0,events:{},rookCastle:!0},premovable:{enabled:!0,showDests:!0,castle:!0,events:{}},predroppable:{enabled:!1,events:{}},draggable:{enabled:!0,distance:3,autoDistance:!0,centerPiece:!0,showGhost:!0,deleteOnDropOff:!1},selectable:{enabled:!0},stats:{dragged:!("ontouchstart"in window)},events:{},drawable:{enabled:!0,visible:!0,eraseOnClick:!0,shapes:[],autoShapes:[],brushes:{green:{key:"g",color:"#15781B",opacity:1,lineWidth:10},red:{key:"r",color:"#882020",opacity:1,lineWidth:10},blue:{key:"b",color:"#003088",opacity:1,lineWidth:10},yellow:{key:"y",color:"#e68f00",opacity:1,lineWidth:10},paleBlue:{key:"pb",color:"#003088",opacity:.4,lineWidth:15},paleGreen:{key:"pg",color:"#15781B",opacity:.4,lineWidth:15},paleRed:{key:"pr",color:"#882020",opacity:.4,lineWidth:15},paleGrey:{key:"pgr",color:"#4a4a4a",opacity:.35,lineWidth:15}},pieces:{baseUrl:"https://lichess1.org/assets/piece/cburnett/"},prevSvgHash:""},hold:a.timer()}}Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),a=i(0);e.defaults=s},function(t,e,i){"use strict";function s(t,e,i){t.innerHTML="",t.classList.add("cg-board-wrap"),a.colors.forEach((function(i){t.classList.toggle("orientation-"+i,e.orientation===i)})),t.classList.toggle("manipulable",!e.viewOnly);var s,l,h=a.createEl("div","cg-board");if(t.appendChild(h),e.drawable.visible&&i&&(s=o.createElement("svg"),s.appendChild(o.createElement("defs")),t.appendChild(s)),e.coordinates){var c="black"===e.orientation?" black":"";t.appendChild(n(r.ranks,"ranks"+c)),t.appendChild(n(r.files,"files"+c))}return i&&e.draggable.showGhost&&(l=a.createEl("piece","ghost"),a.setVisible(l,!1),t.appendChild(l)),{board:h,ghost:l,svg:s}}function n(t,e){var i,s=a.createEl("coords",e);for(var n in t)i=a.createEl("coord"),i.textContent=t[n],s.appendChild(i);return s}Object.defineProperty(e,"__esModule",{value:!0});var a=i(0),r=i(3),o=i(8);e.default=s},function(t,e,i){"use strict";function s(t){return t.filter((function(t,e,i){return e===i.indexOf(t)}))}e.a=s},function(t,e,s){"use strict";function n(t){t.component("chessboard",r.a)}Object.defineProperty(e,"__esModule",{value:!0}),e.install=n;var a=s(9),r=s.n(a);s.d(e,"chessboard",(function(){return r.a}));var o={version:"0.6.7",install:n};e.default=o;var l=null;"undefined"!=typeof window?l=window.Vue:"undefined"!=typeof i.g&&(l=i.g.Vue),l&&l.use(o)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(10),n=i.n(s),a=i(12),r=(i.n(a),i(19));e.default={name:"chessboard",props:{fen:{type:String,default:""},free:{type:Boolean,default:!1},showThreats:{type:Boolean,default:!1},onPromotion:{type:Function,default:function(){return"q"}},orientation:{type:String,default:"white"}},watch:{fen:function(t){this.fen=t,this.loadPosition()},orientation:function(t){this.orientation=t,this.loadPosition()},showThreats:function(t){this.showThreats=t,this.showThreats&&this.paintThreats()}},methods:{possibleMoves:function(){var t=this,e={};return this.game.SQUARES.forEach((function(i){var s=t.game.moves({square:i,verbose:!0});s.length&&(e[i]=s.map((function(t){return t.to})))})),e},opponentMoves:function(){var t=this.game.pgn(),e=this.game.fen().split(" ");if(e[1]="w"===e[1]?"b":"w",e=e.join(" "),this.game.load(e)){var i=this.game.moves({verbose:!0});return this.game.load_pgn(t),i}return[]},toColor:function(){return"w"===this.game.turn()?"white":"black"},paintThreats:function(){var t=this.game.moves({verbose:!0}),e=[];t.forEach((function(t){e.push({orig:t.to,brush:"yellow"}),t.captured&&e.push({orig:t.from,dest:t.to,brush:"red"}),t.san.includes("+")&&e.push({orig:t.from,dest:t.to,brush:"blue"})})),this.board.setShapes(e)},calculatePromotions:function(){var t=this.game.moves({verbose:!0});this.promotions=[];var e=!0,i=!1,s=void 0;try{for(var n,a=t[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){var r=n.value;r.promotion&&this.promotions.push(r)}}catch(o){i=!0,s=o}finally{try{!e&&a.return&&a.return()}finally{if(i)throw s}}},isPromotion:function(t,e){return this.promotions.filter((function(i){return i.from===t&&i.to===e})).length>0},changeTurn:function(){var t=this;return function(e,i,s){t.isPromotion(e,i)&&(t.promoteTo=t.onPromotion()),t.game.move({from:e,to:i,promotion:t.promoteTo}),t.board.set({fen:t.game.fen(),turnColor:t.toColor(),movable:{color:t.toColor(),dests:t.possibleMoves()}}),t.calculatePromotions(),t.afterMove()}},afterMove:function(){this.showThreats&&this.paintThreats();var t=this.countThreats(this.toColor())||{};t.history=this.game.history(),t.fen=this.game.fen(),this.$emit("onMove",t)},countThreats:function(t){var e={},s=0,n=0,a=this.game.moves({verbose:!0});return t!==this.toColor()&&(a=this.opponentMoves()),0===a.length?null:(a.forEach((function(t){t.captured&&s++,t.san.includes("+")&&n++})),e["legal_"+t]=i.i(r.a)(a.map((function(t){return t.from+t.to}))).length,e["checks_"+t]=n,e["threat_"+t]=s,e.turn=t,e)},loadPosition:function(){this.game.load(this.fen),this.board=i.i(a.Chessground)(this.$refs.board,{fen:this.game.fen(),turnColor:this.toColor(),movable:{color:this.toColor(),free:this.free,dests:this.possibleMoves()},orientation:this.orientation}),this.board.set({movable:{events:{after:this.changeTurn()}}}),this.afterMove()}},mounted:function(){this.loadPosition()},created:function(){this.game=new n.a,this.board=null,this.promotions=[],this.promoteTo="q"}}},function(t,e){t.exports=function(t,e,i,s){var n,a=t=t||{},r=typeof t.default;"object"!==r&&"function"!==r||(n=t,a=t.default);var o="function"==typeof a?a.options:a;if(e&&(o.render=e.render,o.staticRenderFns=e.staticRenderFns),i&&(o._scopeId=i),s){var l=o.computed||(o.computed={});Object.keys(s).forEach((function(t){var e=s[t];l[t]=function(){return e}}))}return{esModule:n,exports:a,options:o}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"blue merida"},[i("div",{ref:"board",staticClass:"cg-board-wrap"}),t._v(" "),i("br")])},staticRenderFns:[]}}])},8205:function(t,e,i){"use strict";var s=i(3381);e["Z"]=s.Z},4063:function(t,e,i){"use strict";i.d(e,{Z:function(){return rt}});var s=i(8131),n=i(144),a=n["default"].extend({name:"v-data",inheritAttrs:!1,props:{items:{type:Array,default:()=>[]},options:{type:Object,default:()=>({})},sortBy:{type:[String,Array]},sortDesc:{type:[Boolean,Array]},customSort:{type:Function,default:s.xl},mustSort:Boolean,multiSort:Boolean,page:{type:Number,default:1},itemsPerPage:{type:Number,default:10},groupBy:{type:[String,Array],default:()=>[]},groupDesc:{type:[Boolean,Array],default:()=>[]},customGroup:{type:Function,default:s.sD},locale:{type:String,default:"en-US"},disableSort:Boolean,disablePagination:Boolean,disableFiltering:Boolean,search:String,customFilter:{type:Function,default:s.KT},serverItemsLength:{type:Number,default:-1}},data(){let t={page:this.page,itemsPerPage:this.itemsPerPage,sortBy:(0,s.TI)(this.sortBy),sortDesc:(0,s.TI)(this.sortDesc),groupBy:(0,s.TI)(this.groupBy),groupDesc:(0,s.TI)(this.groupDesc),mustSort:this.mustSort,multiSort:this.multiSort};this.options&&(t=Object.assign(t,this.options));const{sortBy:e,sortDesc:i,groupBy:n,groupDesc:a}=t,r=e.length-i.length,o=n.length-a.length;return r>0&&t.sortDesc.push(...(0,s.kg)(r,!1)),o>0&&t.groupDesc.push(...(0,s.kg)(o,!1)),{internalOptions:t}},computed:{itemsLength(){return this.serverItemsLength>=0?this.serverItemsLength:this.filteredItems.length},pageCount(){return this.internalOptions.itemsPerPage<=0?1:Math.ceil(this.itemsLength/this.internalOptions.itemsPerPage)},pageStart(){return-1!==this.internalOptions.itemsPerPage&&this.items.length?(this.internalOptions.page-1)*this.internalOptions.itemsPerPage:0},pageStop(){return-1===this.internalOptions.itemsPerPage?this.itemsLength:this.items.length?Math.min(this.itemsLength,this.internalOptions.page*this.internalOptions.itemsPerPage):0},isGrouped(){return!!this.internalOptions.groupBy.length},pagination(){return{page:this.internalOptions.page,itemsPerPage:this.internalOptions.itemsPerPage,pageStart:this.pageStart,pageStop:this.pageStop,pageCount:this.pageCount,itemsLength:this.itemsLength}},filteredItems(){let t=this.items.slice();return!this.disableFiltering&&this.serverItemsLength<=0&&(t=this.customFilter(t,this.search)),t},computedItems(){let t=this.filteredItems.slice();return(!this.disableSort||this.internalOptions.groupBy.length)&&this.serverItemsLength<=0&&(t=this.sortItems(t)),!this.disablePagination&&this.serverItemsLength<=0&&(t=this.paginateItems(t)),t},groupedItems(){return this.isGrouped?this.groupItems(this.computedItems):null},scopedProps(){return{sort:this.sort,sortArray:this.sortArray,group:this.group,items:this.computedItems,options:this.internalOptions,updateOptions:this.updateOptions,pagination:this.pagination,groupedItems:this.groupedItems,originalItemsLength:this.items.length}},computedOptions(){return{...this.options}}},watch:{computedOptions:{handler(t,e){(0,s.vZ)(t,e)||this.updateOptions(t)},deep:!0,immediate:!0},internalOptions:{handler(t,e){(0,s.vZ)(t,e)||this.$emit("update:options",t)},deep:!0,immediate:!0},page(t){this.updateOptions({page:t})},"internalOptions.page"(t){this.$emit("update:page",t)},itemsPerPage(t){this.updateOptions({itemsPerPage:t})},"internalOptions.itemsPerPage"(t){this.$emit("update:items-per-page",t)},sortBy(t){this.updateOptions({sortBy:(0,s.TI)(t)})},"internalOptions.sortBy"(t,e){!(0,s.vZ)(t,e)&&this.$emit("update:sort-by",Array.isArray(this.sortBy)?t:t[0])},sortDesc(t){this.updateOptions({sortDesc:(0,s.TI)(t)})},"internalOptions.sortDesc"(t,e){!(0,s.vZ)(t,e)&&this.$emit("update:sort-desc",Array.isArray(this.sortDesc)?t:t[0])},groupBy(t){this.updateOptions({groupBy:(0,s.TI)(t)})},"internalOptions.groupBy"(t,e){!(0,s.vZ)(t,e)&&this.$emit("update:group-by",Array.isArray(this.groupBy)?t:t[0])},groupDesc(t){this.updateOptions({groupDesc:(0,s.TI)(t)})},"internalOptions.groupDesc"(t,e){!(0,s.vZ)(t,e)&&this.$emit("update:group-desc",Array.isArray(this.groupDesc)?t:t[0])},multiSort(t){this.updateOptions({multiSort:t})},"internalOptions.multiSort"(t){this.$emit("update:multi-sort",t)},mustSort(t){this.updateOptions({mustSort:t})},"internalOptions.mustSort"(t){this.$emit("update:must-sort",t)},pageCount:{handler(t){this.$emit("page-count",t)},immediate:!0},computedItems:{handler(t){this.$emit("current-items",t)},immediate:!0},pagination:{handler(t,e){(0,s.vZ)(t,e)||this.$emit("pagination",this.pagination)},immediate:!0}},methods:{toggle(t,e,i,n,a,r){let o=e.slice(),l=i.slice();const h=o.findIndex((e=>e===t));return h<0?(r||(o=[],l=[]),o.push(t),l.push(!1)):h>=0&&!l[h]?l[h]=!0:a?l[h]=!1:(o.splice(h,1),l.splice(h,1)),(0,s.vZ)(o,e)&&(0,s.vZ)(l,i)||(n=1),{by:o,desc:l,page:n}},group(t){const{by:e,desc:i,page:s}=this.toggle(t,this.internalOptions.groupBy,this.internalOptions.groupDesc,this.internalOptions.page,!0,!1);this.updateOptions({groupBy:e,groupDesc:i,page:s})},sort(t){if(Array.isArray(t))return this.sortArray(t);const{by:e,desc:i,page:s}=this.toggle(t,this.internalOptions.sortBy,this.internalOptions.sortDesc,this.internalOptions.page,this.internalOptions.mustSort,this.internalOptions.multiSort);this.updateOptions({sortBy:e,sortDesc:i,page:s})},sortArray(t){const e=t.map((t=>{const e=this.internalOptions.sortBy.findIndex((e=>e===t));return e>-1&&this.internalOptions.sortDesc[e]}));this.updateOptions({sortBy:t,sortDesc:e})},updateOptions(t){this.internalOptions={...this.internalOptions,...t,page:this.serverItemsLength<0?Math.max(1,Math.min(t.page||this.internalOptions.page,this.pageCount)):t.page||this.internalOptions.page}},sortItems(t){let e=[],i=[];return this.disableSort||(e=this.internalOptions.sortBy,i=this.internalOptions.sortDesc),this.internalOptions.groupBy.length&&(e=[...this.internalOptions.groupBy,...e],i=[...this.internalOptions.groupDesc,...i]),this.customSort(t,e,i,this.locale)},groupItems(t){return this.customGroup(t,this.internalOptions.groupBy,this.internalOptions.groupDesc)},paginateItems(t){return-1===this.serverItemsLength&&t.length<=this.pageStart&&(this.internalOptions.page=Math.max(1,Math.ceil(t.length/this.internalOptions.itemsPerPage))||1),t.slice(this.pageStart,this.pageStop)}},render(){return this.$scopedSlots.default&&this.$scopedSlots.default(this.scopedProps)}}),r=(i(2838),i(5530)),o=i(6930),l=i(9524),h=i(5836),c=i(1302),d=i(2066),u=i(4552),p=i(9367),g=i(2412),f=i(8219),m=(0,r.Z)(h.Z,g.Z,p.Z,d.Z,(0,c.d)("chipGroup"),(0,u.d)("inputValue")).extend({name:"v-chip",props:{active:{type:Boolean,default:!0},activeClass:{type:String,default(){return this.chipGroup?this.chipGroup.activeClass:""}},close:Boolean,closeIcon:{type:String,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},disabled:Boolean,draggable:Boolean,filter:Boolean,filterIcon:{type:String,default:"$complete"},label:Boolean,link:Boolean,outlined:Boolean,pill:Boolean,tag:{type:String,default:"span"},textColor:String,value:null},data:()=>({proxyClass:"v-chip--active"}),computed:{classes(){return{"v-chip":!0,...p.Z.options.computed.classes.call(this),"v-chip--clickable":this.isClickable,"v-chip--disabled":this.disabled,"v-chip--draggable":this.draggable,"v-chip--label":this.label,"v-chip--link":this.isLink,"v-chip--no-color":!this.color,"v-chip--outlined":this.outlined,"v-chip--pill":this.pill,"v-chip--removable":this.hasClose,...this.themeClasses,...this.sizeableClasses,...this.groupClasses}},hasClose(){return Boolean(this.close)},isClickable(){return Boolean(p.Z.options.computed.isClickable.call(this)||this.chipGroup)}},created(){const t=[["outline","outlined"],["selected","input-value"],["value","active"],["@input","@active.sync"]];t.forEach((([t,e])=>{this.$attrs.hasOwnProperty(t)&&(0,f.fK)(t,e,this)}))},methods:{click(t){this.$emit("click",t),this.chipGroup&&this.toggle()},genFilter(){const t=[];return this.isActive&&t.push(this.$createElement(l.Z,{staticClass:"v-chip__filter",props:{left:!0}},this.filterIcon)),this.$createElement(o.Zq,t)},genClose(){return this.$createElement(l.Z,{staticClass:"v-chip__close",props:{right:!0,size:18},attrs:{"aria-label":this.$vuetify.lang.t(this.closeLabel)},on:{click:t=>{t.stopPropagation(),t.preventDefault(),this.$emit("click:close"),this.$emit("update:active",!1)}}},this.closeIcon)},genContent(){return this.$createElement("span",{staticClass:"v-chip__content"},[this.filter&&this.genFilter(),this.$slots.default,this.hasClose&&this.genClose()])}},render(t){const e=[this.genContent()];let{tag:i,data:s}=this.generateRouteLink();s.attrs={...s.attrs,draggable:this.draggable?"true":void 0,tabindex:this.chipGroup&&!this.disabled?0:s.attrs.tabindex},s.directives.push({name:"show",value:this.active}),s=this.setBackgroundColor(this.color,s);const n=this.textColor||this.outlined&&this.color;return t(i,this.setTextColor(n,s),e)}}),v=m,b=i(3328),x=b.Z,y=i(293),w=i(9088),k=i(7559),C=n["default"].extend({name:"v-simple-checkbox",functional:!0,directives:{Ripple:y.Z},props:{...h.Z.options.props,...d.Z.options.props,disabled:Boolean,ripple:{type:Boolean,default:!0},value:Boolean,indeterminate:Boolean,indeterminateIcon:{type:String,default:"$checkboxIndeterminate"},onIcon:{type:String,default:"$checkboxOn"},offIcon:{type:String,default:"$checkboxOff"}},render(t,{props:e,data:i,listeners:n}){const a=[];let r=e.offIcon;if(e.indeterminate?r=e.indeterminateIcon:e.value&&(r=e.onIcon),a.push(t(w.Z,h.Z.options.methods.setTextColor(e.value&&e.color,{props:{disabled:e.disabled,dark:e.dark,light:e.light}}),r)),e.ripple&&!e.disabled){const i=t("div",h.Z.options.methods.setTextColor(e.color,{staticClass:"v-input--selection-controls__ripple",directives:[{def:y.Z,name:"ripple",value:{center:!0}}]}));a.push(i)}return t("div",(0,k.ZP)(i,{class:{"v-simple-checkbox":!0,"v-simple-checkbox--disabled":e.disabled},on:{click:t=>{t.stopPropagation(),i.on&&i.on.input&&!e.disabled&&(0,s.TI)(i.on.input).forEach((t=>t(!e.value)))}}}),[t("div",{staticClass:"v-input--selection-controls__input"},a)])}}),S=i(7690),_=S.Z,A=(0,r.Z)(d.Z).extend({name:"v-subheader",props:{inset:Boolean},render(t){return t("div",{staticClass:"v-subheader",class:{"v-subheader--inset":this.inset,...this.themeClasses},attrs:this.$attrs,on:this.$listeners},this.$slots.default)}}),I=A,P=i(1667),T=i(3444),E=i(1722),L=i(7970),M=(0,r.Z)(h.Z,d.Z).extend({name:"v-select-list",directives:{ripple:y.Z},props:{action:Boolean,dense:Boolean,hideSelected:Boolean,items:{type:Array,default:()=>[]},itemDisabled:{type:[String,Array,Function],default:"disabled"},itemText:{type:[String,Array,Function],default:"text"},itemValue:{type:[String,Array,Function],default:"value"},noDataText:String,noFilter:Boolean,searchInput:null,selectedItems:{type:Array,default:()=>[]}},computed:{parsedItems(){return this.selectedItems.map((t=>this.getValue(t)))},tileActiveClass(){return Object.keys(this.setTextColor(this.color).class||{}).join(" ")},staticNoDataTile(){const t={attrs:{role:void 0},on:{mousedown:t=>t.preventDefault()}};return this.$createElement(P.Z,t,[this.genTileContent(this.noDataText)])}},methods:{genAction(t,e){return this.$createElement(T.Z,[this.$createElement(C,{props:{color:this.color,value:e,ripple:!1},on:{input:()=>this.$emit("select",t)}})])},genDivider(t){return this.$createElement(_,{props:t})},genFilteredText(t){if(t=t||"",!this.searchInput||this.noFilter)return t;const{start:e,middle:i,end:s}=this.getMaskedCharacters(t);return[e,this.genHighlight(i),s]},genHeader(t){return this.$createElement(I,{props:t},t.header)},genHighlight(t){return this.$createElement("span",{staticClass:"v-list-item__mask"},t)},getMaskedCharacters(t){const e=(this.searchInput||"").toString().toLocaleLowerCase(),i=t.toLocaleLowerCase().indexOf(e);if(i<0)return{start:t,middle:"",end:""};const s=t.slice(0,i),n=t.slice(i,i+e.length),a=t.slice(i+e.length);return{start:s,middle:n,end:a}},genTile({item:t,index:e,disabled:i=null,value:s=!1}){s||(s=this.hasItem(t)),t===Object(t)&&(i=null!==i?i:this.getDisabled(t));const n={attrs:{"aria-selected":String(s),id:`list-item-${this._uid}-${e}`,role:"option"},on:{mousedown:t=>{t.preventDefault()},click:()=>i||this.$emit("select",t)},props:{activeClass:this.tileActiveClass,disabled:i,ripple:!0,inputValue:s}};if(!this.$scopedSlots.item)return this.$createElement(P.Z,n,[this.action&&!this.hideSelected&&this.items.length>0?this.genAction(t,s):null,this.genTileContent(t,e)]);const a=this,r=this.$scopedSlots.item({parent:a,item:t,attrs:{...n.attrs,...n.props},on:n.on});return this.needsTile(r)?this.$createElement(P.Z,n,r):r},genTileContent(t,e=0){return this.$createElement(E.km,[this.$createElement(E.V9,[this.genFilteredText(this.getText(t))])])},hasItem(t){return this.parsedItems.indexOf(this.getValue(t))>-1},needsTile(t){return 1!==t.length||null==t[0].componentOptions||"v-list-item"!==t[0].componentOptions.Ctor.options.name},getDisabled(t){return Boolean((0,s.qF)(t,this.itemDisabled,!1))},getText(t){return String((0,s.qF)(t,this.itemText,t))},getValue(t){return(0,s.qF)(t,this.itemValue,this.getText(t))}},render(){const t=[],e=this.items.length;for(let i=0;i<e;i++){const e=this.items[i];this.hideSelected&&this.hasItem(e)||(null==e?t.push(this.genTile({item:e,index:i})):e.header?t.push(this.genHeader(e)):e.divider?t.push(this.genDivider(e)):t.push(this.genTile({item:e,index:i})))}return t.length||t.push(this.$slots["no-data"]||this.staticNoDataTile),this.$slots["prepend-item"]&&t.unshift(this.$slots["prepend-item"]),this.$slots["append-item"]&&t.push(this.$slots["append-item"]),this.$createElement(L.Z,{staticClass:"v-select-list",class:this.themeClasses,attrs:{role:"listbox",tabindex:-1},props:{dense:this.dense}},t)}}),O=i(2926),D=i(9007),R=i(8789),N=i(4665),z=n["default"].extend({name:"filterable",props:{noDataText:{type:String,default:"$vuetify.noDataText"}}}),F=i(3664);const B={closeOnClick:!1,closeOnContentClick:!1,disableKeys:!0,openOnClick:!1,maxHeight:304},H=(0,r.Z)(D.Z,R.Z,N.Z,z);var $=H.extend().extend({name:"v-select",directives:{ClickOutside:F.Z},props:{appendIcon:{type:String,default:"$dropdown"},attach:{type:null,default:!1},cacheItems:Boolean,chips:Boolean,clearable:Boolean,deletableChips:Boolean,disableLookup:Boolean,eager:Boolean,hideSelected:Boolean,items:{type:Array,default:()=>[]},itemColor:{type:String,default:"primary"},itemDisabled:{type:[String,Array,Function],default:"disabled"},itemText:{type:[String,Array,Function],default:"text"},itemValue:{type:[String,Array,Function],default:"value"},menuProps:{type:[String,Array,Object],default:()=>B},multiple:Boolean,openOnClear:Boolean,returnObject:Boolean,smallChips:Boolean},data(){return{cachedItems:this.cacheItems?this.items:[],menuIsBooted:!1,isMenuActive:!1,lastItem:20,lazyValue:void 0!==this.value?this.value:this.multiple?[]:void 0,selectedIndex:-1,selectedItems:[],keyboardLookupPrefix:"",keyboardLookupLastTime:0}},computed:{allItems(){return this.filterDuplicates(this.cachedItems.concat(this.items))},classes(){return{...D.Z.options.computed.classes.call(this),"v-select":!0,"v-select--chips":this.hasChips,"v-select--chips--small":this.smallChips,"v-select--is-menu-active":this.isMenuActive,"v-select--is-multi":this.multiple}},computedItems(){return this.allItems},computedOwns(){return`list-${this._uid}`},computedCounterValue(){var t;const e=this.multiple?this.selectedItems:(null!==(t=this.getText(this.selectedItems[0]))&&void 0!==t?t:"").toString();return"function"===typeof this.counterValue?this.counterValue(e):e.length},directives(){return this.isFocused?[{name:"click-outside",value:{handler:this.blur,closeConditional:this.closeConditional,include:()=>this.getOpenDependentElements()}}]:void 0},dynamicHeight(){return"auto"},hasChips(){return this.chips||this.smallChips},hasSlot(){return Boolean(this.hasChips||this.$scopedSlots.selection)},isDirty(){return this.selectedItems.length>0},listData(){const t=this.$vnode&&this.$vnode.context.$options._scopeId,e=t?{[t]:!0}:{};return{attrs:{...e,id:this.computedOwns},props:{action:this.multiple,color:this.itemColor,dense:this.dense,hideSelected:this.hideSelected,items:this.virtualizedItems,itemDisabled:this.itemDisabled,itemText:this.itemText,itemValue:this.itemValue,noDataText:this.$vuetify.lang.t(this.noDataText),selectedItems:this.selectedItems},on:{select:this.selectItem},scopedSlots:{item:this.$scopedSlots.item}}},staticList(){return(this.$slots["no-data"]||this.$slots["prepend-item"]||this.$slots["append-item"])&&(0,f.N6)("assert: staticList should not be called if slots are used"),this.$createElement(M,this.listData)},virtualizedItems(){return this.$_menuProps.auto?this.computedItems:this.computedItems.slice(0,this.lastItem)},menuCanShow:()=>!0,$_menuProps(){let t="string"===typeof this.menuProps?this.menuProps.split(","):this.menuProps;return Array.isArray(t)&&(t=t.reduce(((t,e)=>(t[e.trim()]=!0,t)),{})),{...B,eager:this.eager,value:this.menuCanShow&&this.isMenuActive,nudgeBottom:t.offsetY?1:0,...t}}},watch:{internalValue(t){this.initialValue=t,this.setSelectedItems(),this.multiple&&this.$nextTick((()=>{var t;null===(t=this.$refs.menu)||void 0===t||t.updateDimensions()}))},isMenuActive(t){window.setTimeout((()=>this.onMenuActiveChange(t)))},items:{immediate:!0,handler(t){this.cacheItems&&this.$nextTick((()=>{this.cachedItems=this.filterDuplicates(this.cachedItems.concat(t))})),this.setSelectedItems()}}},methods:{blur(t){D.Z.options.methods.blur.call(this,t),this.isMenuActive=!1,this.isFocused=!1,this.selectedIndex=-1,this.setMenuIndex(-1)},activateMenu(){this.isInteractive&&!this.isMenuActive&&(this.isMenuActive=!0)},clearableCallback(){this.setValue(this.multiple?[]:null),this.setMenuIndex(-1),this.$nextTick((()=>this.$refs.input&&this.$refs.input.focus())),this.openOnClear&&(this.isMenuActive=!0)},closeConditional(t){return!this.isMenuActive||!this._isDestroyed&&(!this.getContent()||!this.getContent().contains(t.target))&&this.$el&&!this.$el.contains(t.target)&&t.target!==this.$el},filterDuplicates(t){const e=new Map;for(let i=0;i<t.length;++i){const s=t[i];if(null==s)continue;if(s.header||s.divider){e.set(s,s);continue}const n=this.getValue(s);!e.has(n)&&e.set(n,s)}return Array.from(e.values())},findExistingIndex(t){const e=this.getValue(t);return(this.internalValue||[]).findIndex((t=>this.valueComparator(this.getValue(t),e)))},getContent(){return this.$refs.menu&&this.$refs.menu.$refs.content},genChipSelection(t,e){const i=this.isDisabled||this.getDisabled(t),s=!i&&this.isInteractive;return this.$createElement(v,{staticClass:"v-chip--select",attrs:{tabindex:-1},props:{close:this.deletableChips&&s,disabled:i,inputValue:e===this.selectedIndex,small:this.smallChips},on:{click:t=>{s&&(t.stopPropagation(),this.selectedIndex=e)},"click:close":()=>this.onChipInput(t)},key:JSON.stringify(this.getValue(t))},this.getText(t))},genCommaSelection(t,e,i){const s=e===this.selectedIndex&&this.computedColor,n=this.isDisabled||this.getDisabled(t);return this.$createElement("div",this.setTextColor(s,{staticClass:"v-select__selection v-select__selection--comma",class:{"v-select__selection--disabled":n},key:JSON.stringify(this.getValue(t))}),`${this.getText(t)}${i?"":", "}`)},genDefaultSlot(){const t=this.genSelections(),e=this.genInput();return Array.isArray(t)?t.push(e):(t.children=t.children||[],t.children.push(e)),[this.genFieldset(),this.$createElement("div",{staticClass:"v-select__slot",directives:this.directives},[this.genLabel(),this.prefix?this.genAffix("prefix"):null,t,this.suffix?this.genAffix("suffix"):null,this.genClearIcon(),this.genIconSlot(),this.genHiddenInput()]),this.genMenu(),this.genProgress()]},genIcon(t,e,i){const s=O.Z.options.methods.genIcon.call(this,t,e,i);return"append"===t&&(s.children[0].data=(0,k.ZP)(s.children[0].data,{attrs:{tabindex:s.children[0].componentOptions.listeners&&"-1","aria-hidden":"true","aria-label":void 0}})),s},genInput(){const t=D.Z.options.methods.genInput.call(this);return delete t.data.attrs.name,t.data=(0,k.ZP)(t.data,{domProps:{value:null},attrs:{readonly:!0,type:"text","aria-readonly":String(this.isReadonly),"aria-activedescendant":(0,s.vO)(this.$refs.menu,"activeTile.id"),autocomplete:(0,s.vO)(t.data,"attrs.autocomplete","off"),placeholder:this.isDirty||!this.persistentPlaceholder&&!this.isFocused&&this.hasLabel?void 0:this.placeholder},on:{keypress:this.onKeyPress}}),t},genHiddenInput(){return this.$createElement("input",{domProps:{value:this.lazyValue},attrs:{type:"hidden",name:this.attrs$.name}})},genInputSlot(){const t=D.Z.options.methods.genInputSlot.call(this);return t.data.attrs={...t.data.attrs,role:"button","aria-haspopup":"listbox","aria-expanded":String(this.isMenuActive),"aria-owns":this.computedOwns},t},genList(){return this.$slots["no-data"]||this.$slots["prepend-item"]||this.$slots["append-item"]?this.genListWithSlot():this.staticList},genListWithSlot(){const t=["prepend-item","no-data","append-item"].filter((t=>this.$slots[t])).map((t=>this.$createElement("template",{slot:t},this.$slots[t])));return this.$createElement(M,{...this.listData},t)},genMenu(){const t=this.$_menuProps;return t.activator=this.$refs["input-slot"],""===this.attach||!0===this.attach||"attach"===this.attach?t.attach=this.$el:t.attach=this.attach,this.$createElement(x,{attrs:{role:void 0},props:t,on:{input:t=>{this.isMenuActive=t,this.isFocused=t},scroll:this.onScroll},ref:"menu"},[this.genList()])},genSelections(){let t=this.selectedItems.length;const e=new Array(t);let i;i=this.$scopedSlots.selection?this.genSlotSelection:this.hasChips?this.genChipSelection:this.genCommaSelection;while(t--)e[t]=i(this.selectedItems[t],t,t===e.length-1);return this.$createElement("div",{staticClass:"v-select__selections"},e)},genSlotSelection(t,e){return this.$scopedSlots.selection({attrs:{class:"v-chip--select"},parent:this,item:t,index:e,select:t=>{t.stopPropagation(),this.selectedIndex=e},selected:e===this.selectedIndex,disabled:!this.isInteractive})},getMenuIndex(){return this.$refs.menu?this.$refs.menu.listIndex:-1},getDisabled(t){return(0,s.qF)(t,this.itemDisabled,!1)},getText(t){return(0,s.qF)(t,this.itemText,t)},getValue(t){return(0,s.qF)(t,this.itemValue,this.getText(t))},onBlur(t){t&&this.$emit("blur",t)},onChipInput(t){this.multiple?this.selectItem(t):this.setValue(null),0===this.selectedItems.length?this.isMenuActive=!0:this.isMenuActive=!1,this.selectedIndex=-1},onClick(t){this.isInteractive&&(this.isAppendInner(t.target)||(this.isMenuActive=!0),this.isFocused||(this.isFocused=!0,this.$emit("focus")),this.$emit("click",t))},onEscDown(t){t.preventDefault(),this.isMenuActive&&(t.stopPropagation(),this.isMenuActive=!1)},onKeyPress(t){if(this.multiple||!this.isInteractive||this.disableLookup)return;const e=1e3,i=performance.now();i-this.keyboardLookupLastTime>e&&(this.keyboardLookupPrefix=""),this.keyboardLookupPrefix+=t.key.toLowerCase(),this.keyboardLookupLastTime=i;const s=this.allItems.findIndex((t=>{var e;const i=(null!==(e=this.getText(t))&&void 0!==e?e:"").toString();return i.toLowerCase().startsWith(this.keyboardLookupPrefix)})),n=this.allItems[s];-1!==s&&(this.lastItem=Math.max(this.lastItem,s+5),this.setValue(this.returnObject?n:this.getValue(n)),this.$nextTick((()=>this.$refs.menu.getTiles())),setTimeout((()=>this.setMenuIndex(s))))},onKeyDown(t){if(this.isReadonly&&t.keyCode!==s.Do.tab)return;const e=t.keyCode,i=this.$refs.menu;return this.$emit("keydown",t),i?(this.isMenuActive&&[s.Do.up,s.Do.down,s.Do.home,s.Do.end,s.Do.enter].includes(e)&&this.$nextTick((()=>{i.changeListIndex(t),this.$emit("update:list-index",i.listIndex)})),[s.Do.enter,s.Do.space].includes(e)&&this.activateMenu(),!this.isMenuActive&&[s.Do.up,s.Do.down,s.Do.home,s.Do.end].includes(e)?this.onUpDown(t):e===s.Do.esc?this.onEscDown(t):e===s.Do.tab?this.onTabDown(t):e===s.Do.space?this.onSpaceDown(t):void 0):void 0},onMenuActiveChange(t){if(this.multiple&&!t||this.getMenuIndex()>-1)return;const e=this.$refs.menu;if(e&&this.isDirty){this.$refs.menu.getTiles();for(let t=0;t<e.tiles.length;t++)if("true"===e.tiles[t].getAttribute("aria-selected")){this.setMenuIndex(t);break}}},onMouseUp(t){this.hasMouseDown&&3!==t.which&&this.isInteractive&&this.isAppendInner(t.target)&&this.$nextTick((()=>this.isMenuActive=!this.isMenuActive)),D.Z.options.methods.onMouseUp.call(this,t)},onScroll(){if(this.isMenuActive){if(this.lastItem>this.computedItems.length)return;const t=this.getContent().scrollHeight-(this.getContent().scrollTop+this.getContent().clientHeight)<200;t&&(this.lastItem+=20)}else requestAnimationFrame((()=>this.getContent().scrollTop=0))},onSpaceDown(t){t.preventDefault()},onTabDown(t){const e=this.$refs.menu;if(!e)return;const i=e.activeTile;!this.multiple&&i&&this.isMenuActive?(t.preventDefault(),t.stopPropagation(),i.click()):this.blur(t)},onUpDown(t){const e=this.$refs.menu;if(!e)return;if(t.preventDefault(),this.multiple)return this.activateMenu();const i=t.keyCode;e.isBooted=!0,window.requestAnimationFrame((()=>{if(e.getTiles(),!e.hasClickableTiles)return this.activateMenu();switch(i){case s.Do.up:e.prevTile();break;case s.Do.down:e.nextTile();break;case s.Do.home:e.firstTile();break;case s.Do.end:e.lastTile();break}this.selectItem(this.allItems[this.getMenuIndex()])}))},selectItem(t){if(this.multiple){const e=(this.internalValue||[]).slice(),i=this.findExistingIndex(t);if(-1!==i?e.splice(i,1):e.push(t),this.setValue(e.map((t=>this.returnObject?t:this.getValue(t)))),this.hideSelected)this.setMenuIndex(-1);else{const e=this.allItems.indexOf(t);~e&&(this.$nextTick((()=>this.$refs.menu.getTiles())),setTimeout((()=>this.setMenuIndex(e))))}}else this.setValue(this.returnObject?t:this.getValue(t)),this.isMenuActive=!1},setMenuIndex(t){this.$refs.menu&&(this.$refs.menu.listIndex=t)},setSelectedItems(){const t=[],e=this.multiple&&Array.isArray(this.internalValue)?this.internalValue:[this.internalValue];for(const i of e){const e=this.allItems.findIndex((t=>this.valueComparator(this.getValue(t),this.getValue(i))));e>-1&&t.push(this.allItems[e])}this.selectedItems=t},setValue(t){this.valueComparator(t,this.internalValue)||(this.internalValue=t,this.$emit("change",t))},isAppendInner(t){const e=this.$refs["append-inner"];return e&&(e===t||e.contains(t))}}}),W=i(8205),X=n["default"].extend({name:"v-data-footer",props:{options:{type:Object,required:!0},pagination:{type:Object,required:!0},itemsPerPageOptions:{type:Array,default:()=>[5,10,15,-1]},prevIcon:{type:String,default:"$prev"},nextIcon:{type:String,default:"$next"},firstIcon:{type:String,default:"$first"},lastIcon:{type:String,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},itemsPerPageAllText:{type:String,default:"$vuetify.dataFooter.itemsPerPageAll"},showFirstLastPage:Boolean,showCurrentPage:Boolean,disablePagination:Boolean,disableItemsPerPage:Boolean,pageText:{type:String,default:"$vuetify.dataFooter.pageText"}},computed:{disableNextPageIcon(){return this.options.itemsPerPage<=0||this.options.page*this.options.itemsPerPage>=this.pagination.itemsLength||this.pagination.pageStop<0},computedDataItemsPerPageOptions(){return this.itemsPerPageOptions.map((t=>"object"===typeof t?t:this.genDataItemsPerPageOption(t)))}},methods:{updateOptions(t){this.$emit("update:options",Object.assign({},this.options,t))},onFirstPage(){this.updateOptions({page:1})},onPreviousPage(){this.updateOptions({page:this.options.page-1})},onNextPage(){this.updateOptions({page:this.options.page+1})},onLastPage(){this.updateOptions({page:this.pagination.pageCount})},onChangeItemsPerPage(t){this.updateOptions({itemsPerPage:t,page:1})},genDataItemsPerPageOption(t){return{text:-1===t?this.$vuetify.lang.t(this.itemsPerPageAllText):String(t),value:t}},genItemsPerPageSelect(){let t=this.options.itemsPerPage;const e=this.computedDataItemsPerPageOptions;return e.length<=1?null:(e.find((e=>e.value===t))||(t=e[0]),this.$createElement("div",{staticClass:"v-data-footer__select"},[this.$vuetify.lang.t(this.itemsPerPageText),this.$createElement($,{attrs:{"aria-label":this.$vuetify.lang.t(this.itemsPerPageText)},props:{disabled:this.disableItemsPerPage,items:e,value:t,hideDetails:!0,auto:!0,minWidth:"75px"},on:{input:this.onChangeItemsPerPage}})]))},genPaginationInfo(){let t=[""];const e=this.pagination.itemsLength;let i=this.pagination.pageStart,s=this.pagination.pageStop;return this.pagination.itemsLength&&this.pagination.itemsPerPage?(i=this.pagination.pageStart+1,s=e<this.pagination.pageStop||this.pagination.pageStop<0?e:this.pagination.pageStop,t=this.$scopedSlots["page-text"]?[this.$scopedSlots["page-text"]({pageStart:i,pageStop:s,itemsLength:e})]:[this.$vuetify.lang.t(this.pageText,i,s,e)]):this.$scopedSlots["page-text"]&&(t=[this.$scopedSlots["page-text"]({pageStart:i,pageStop:s,itemsLength:e})]),this.$createElement("div",{class:"v-data-footer__pagination"},t)},genIcon(t,e,i,s){return this.$createElement(W.Z,{props:{disabled:e||this.disablePagination,icon:!0,text:!0},on:{click:t},attrs:{"aria-label":i}},[this.$createElement(l.Z,s)])},genIcons(){const t=[],e=[];return t.push(this.genIcon(this.onPreviousPage,1===this.options.page,this.$vuetify.lang.t("$vuetify.dataFooter.prevPage"),this.$vuetify.rtl?this.nextIcon:this.prevIcon)),e.push(this.genIcon(this.onNextPage,this.disableNextPageIcon,this.$vuetify.lang.t("$vuetify.dataFooter.nextPage"),this.$vuetify.rtl?this.prevIcon:this.nextIcon)),this.showFirstLastPage&&(t.unshift(this.genIcon(this.onFirstPage,1===this.options.page,this.$vuetify.lang.t("$vuetify.dataFooter.firstPage"),this.$vuetify.rtl?this.lastIcon:this.firstIcon)),e.push(this.genIcon(this.onLastPage,this.options.page>=this.pagination.pageCount||-1===this.options.itemsPerPage,this.$vuetify.lang.t("$vuetify.dataFooter.lastPage"),this.$vuetify.rtl?this.firstIcon:this.lastIcon))),[this.$createElement("div",{staticClass:"v-data-footer__icons-before"},t),this.showCurrentPage&&this.$createElement("span",[this.options.page.toString()]),this.$createElement("div",{staticClass:"v-data-footer__icons-after"},e)]}},render(){return this.$createElement("div",{staticClass:"v-data-footer"},[(0,s.z9)(this,"prepend"),this.genItemsPerPageSelect(),this.genPaginationInfo(),this.genIcons()])}}),Y=i(9989),V=(0,r.Z)(Y.Z,d.Z).extend({name:"v-data-iterator",props:{...a.options.props,itemKey:{type:String,default:"id"},value:{type:Array,default:()=>[]},singleSelect:Boolean,expanded:{type:Array,default:()=>[]},mobileBreakpoint:{...Y.Z.options.props.mobileBreakpoint,default:600},singleExpand:Boolean,loading:[Boolean,String],noResultsText:{type:String,default:"$vuetify.dataIterator.noResultsText"},noDataText:{type:String,default:"$vuetify.noDataText"},loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideDefaultFooter:Boolean,footerProps:Object,selectableKey:{type:String,default:"isSelectable"}},data:()=>({selection:{},expansion:{},internalCurrentItems:[],shiftKeyDown:!1,lastEntry:-1}),computed:{everyItem(){return!!this.selectableItems.length&&this.selectableItems.every((t=>this.isSelected(t)))},someItems(){return this.selectableItems.some((t=>this.isSelected(t)))},sanitizedFooterProps(){return(0,s.$x)(this.footerProps)},selectableItems(){return this.internalCurrentItems.filter((t=>this.isSelectable(t)))}},watch:{value:{handler(t){this.selection=t.reduce(((t,e)=>(t[(0,s.vO)(e,this.itemKey)]=e,t)),{})},immediate:!0},selection(t,e){(0,s.vZ)(Object.keys(t),Object.keys(e))||this.$emit("input",Object.values(t))},expanded:{handler(t){this.expansion=t.reduce(((t,e)=>(t[(0,s.vO)(e,this.itemKey)]=!0,t)),{})},immediate:!0},expansion(t,e){if((0,s.vZ)(t,e))return;const i=Object.keys(t).filter((e=>t[e])),n=i.length?this.items.filter((t=>i.includes(String((0,s.vO)(t,this.itemKey))))):[];this.$emit("update:expanded",n)}},created(){const t=[["disable-initial-sort","sort-by"],["filter","custom-filter"],["pagination","options"],["total-items","server-items-length"],["hide-actions","hide-default-footer"],["rows-per-page-items","footer-props.items-per-page-options"],["rows-per-page-text","footer-props.items-per-page-text"],["prev-icon","footer-props.prev-icon"],["next-icon","footer-props.next-icon"]];t.forEach((([t,e])=>{this.$attrs.hasOwnProperty(t)&&(0,f.fK)(t,e,this)}));const e=["expand","content-class","content-props","content-tag"];e.forEach((t=>{this.$attrs.hasOwnProperty(t)&&(0,f.Jk)(t)}))},mounted(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)},beforeDestroy(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)},methods:{onKeyDown(t){t.keyCode===s.Do.shift&&(this.shiftKeyDown=!0)},onKeyUp(t){t.keyCode===s.Do.shift&&(this.shiftKeyDown=!1)},toggleSelectAll(t){const e=Object.assign({},this.selection);for(let i=0;i<this.selectableItems.length;i++){const n=this.selectableItems[i];if(!this.isSelectable(n))continue;const a=(0,s.vO)(n,this.itemKey);t?e[a]=n:delete e[a]}this.selection=e,this.$emit("toggle-select-all",{items:this.internalCurrentItems,value:t})},isSelectable(t){return!1!==(0,s.vO)(t,this.selectableKey)},isSelected(t){return!!this.selection[(0,s.vO)(t,this.itemKey)]||!1},select(t,e=!0,i=!0){if(!this.isSelectable(t))return;const n=this.singleSelect?{}:Object.assign({},this.selection),a=(0,s.vO)(t,this.itemKey);e?n[a]=t:delete n[a];const r=this.selectableItems.findIndex((t=>(0,s.vO)(t,this.itemKey)===a));if(-1===this.lastEntry)this.lastEntry=r;else if(this.shiftKeyDown&&!this.singleSelect&&i){const t=(0,s.vO)(this.selectableItems[this.lastEntry],this.itemKey),e=Object.keys(this.selection).includes(String(t));this.multipleSelect(e,i,n,r)}if(this.lastEntry=r,this.singleSelect&&i){const t=Object.keys(this.selection),e=t.length&&(0,s.vO)(this.selection[t[0]],this.itemKey);e&&e!==a&&this.$emit("item-selected",{item:this.selection[e],value:!1})}this.selection=n,i&&this.$emit("item-selected",{item:t,value:e})},multipleSelect(t=!0,e=!0,i,n){const a=n<this.lastEntry?n:this.lastEntry,r=n<this.lastEntry?this.lastEntry:n;for(let o=a;o<=r;o++){const n=this.selectableItems[o],a=(0,s.vO)(n,this.itemKey);t?i[a]=n:delete i[a],e&&this.$emit("item-selected",{currentItem:n,value:t})}},isExpanded(t){return this.expansion[(0,s.vO)(t,this.itemKey)]||!1},expand(t,e=!0){const i=this.singleExpand?{}:Object.assign({},this.expansion),n=(0,s.vO)(t,this.itemKey);e?i[n]=!0:delete i[n],this.expansion=i,this.$emit("item-expanded",{item:t,value:e})},createItemProps(t,e){return{item:t,index:e,select:e=>this.select(t,e),isSelected:this.isSelected(t),expand:e=>this.expand(t,e),isExpanded:this.isExpanded(t),isMobile:this.isMobile}},genEmptyWrapper(t){return this.$createElement("div",t)},genEmpty(t,e){if(0===t&&this.loading){const t=this.$slots.loading||this.$vuetify.lang.t(this.loadingText);return this.genEmptyWrapper(t)}if(0===t){const t=this.$slots["no-data"]||this.$vuetify.lang.t(this.noDataText);return this.genEmptyWrapper(t)}if(0===e){const t=this.$slots["no-results"]||this.$vuetify.lang.t(this.noResultsText);return this.genEmptyWrapper(t)}return null},genItems(t){const e=this.genEmpty(t.originalItemsLength,t.pagination.itemsLength);return e?[e]:this.$scopedSlots.default?this.$scopedSlots.default({...t,isSelected:this.isSelected,select:this.select,isExpanded:this.isExpanded,isMobile:this.isMobile,expand:this.expand}):this.$scopedSlots.item?t.items.map(((t,e)=>this.$scopedSlots.item(this.createItemProps(t,e)))):[]},genFooter(t){if(this.hideDefaultFooter)return null;const e={props:{...this.sanitizedFooterProps,options:t.options,pagination:t.pagination},on:{"update:options":e=>t.updateOptions(e)}},i=(0,s.FT)("footer.",this.$scopedSlots);return this.$createElement(X,{scopedSlots:i,...e})},genDefaultScopedSlot(t){const e={...t,someItems:this.someItems,everyItem:this.everyItem,toggleSelectAll:this.toggleSelectAll};return this.$createElement("div",{staticClass:"v-data-iterator"},[(0,s.z9)(this,"header",e,!0),this.genItems(t),this.genFooter(t),(0,s.z9)(this,"footer",e,!0)])}},render(){return this.$createElement(a,{props:this.$props,on:{"update:options":(t,e)=>!(0,s.vZ)(t,e)&&this.$emit("update:options",t),"update:page":t=>this.$emit("update:page",t),"update:items-per-page":t=>this.$emit("update:items-per-page",t),"update:sort-by":t=>this.$emit("update:sort-by",t),"update:sort-desc":t=>this.$emit("update:sort-desc",t),"update:group-by":t=>this.$emit("update:group-by",t),"update:group-desc":t=>this.$emit("update:group-desc",t),pagination:(t,e)=>!(0,s.vZ)(t,e)&&this.$emit("pagination",t),"current-items":t=>{this.internalCurrentItems=t,this.$emit("current-items",t)},"page-count":t=>this.$emit("page-count",t)},scopedSlots:{default:this.genDefaultScopedSlot}})}}),Z=(0,r.Z)().extend({directives:{ripple:y.Z},props:{headers:{type:Array,default:()=>[]},options:{type:Object,default:()=>({page:1,itemsPerPage:10,sortBy:[],sortDesc:[],groupBy:[],groupDesc:[],multiSort:!1,mustSort:!1})},checkboxColor:String,sortIcon:{type:String,default:"$sort"},everyItem:Boolean,someItems:Boolean,showGroupBy:Boolean,singleSelect:Boolean,disableSort:Boolean},methods:{genSelectAll(){var t;const e={props:{value:this.everyItem,indeterminate:!this.everyItem&&this.someItems,color:null!==(t=this.checkboxColor)&&void 0!==t?t:""},on:{input:t=>this.$emit("toggle-select-all",t)}};return this.$scopedSlots["data-table-select"]?this.$scopedSlots["data-table-select"](e):this.$createElement(C,{staticClass:"v-data-table__checkbox",...e})},genSortIcon(){return this.$createElement(l.Z,{staticClass:"v-data-table-header__icon",props:{size:18}},[this.sortIcon])}}}),G=(0,r.Z)(Z).extend({name:"v-data-table-header-mobile",props:{sortByText:{type:String,default:"$vuetify.dataTable.sortBy"}},methods:{genSortChip(t){const e=[t.item.text],i=this.options.sortBy.findIndex((e=>e===t.item.value)),s=i>=0,n=this.options.sortDesc[i];return e.push(this.$createElement("div",{staticClass:"v-chip__close",class:{sortable:!0,active:s,asc:s&&!n,desc:s&&n}},[this.genSortIcon()])),this.$createElement(v,{staticClass:"sortable",on:{click:e=>{e.stopPropagation(),this.$emit("sort",t.item.value)}}},e)},genSortSelect(t){return this.$createElement($,{props:{label:this.$vuetify.lang.t(this.sortByText),items:t,hideDetails:!0,multiple:this.options.multiSort,value:this.options.multiSort?this.options.sortBy:this.options.sortBy[0],menuProps:{closeOnContentClick:!0}},on:{change:t=>this.$emit("sort",t)},scopedSlots:{selection:t=>this.genSortChip(t)}})}},render(t){const e=[],i=this.headers.find((t=>"data-table-select"===t.value));i&&!this.singleSelect&&e.push(this.$createElement("div",{class:["v-data-table-header-mobile__select",...(0,s.TI)(i.class)],attrs:{width:i.width}},[this.genSelectAll()]));const n=this.headers.filter((t=>!1!==t.sortable&&"data-table-select"!==t.value)).map((t=>({text:t.text,value:t.value})));!this.disableSort&&n.length&&e.push(this.genSortSelect(n));const a=e.length?t("th",[t("div",{staticClass:"v-data-table-header-mobile__wrapper"},e)]):void 0,r=t("tr",[a]);return t("thead",{staticClass:"v-data-table-header v-data-table-header-mobile"},[r])}}),j=(0,r.Z)(Z).extend({name:"v-data-table-header-desktop",methods:{genGroupByToggle(t){return this.$createElement("span",{on:{click:e=>{e.stopPropagation(),this.$emit("group",t.value)}}},["group"])},getAria(t,e){const i=t=>this.$vuetify.lang.t(`$vuetify.dataTable.ariaLabel.${t}`);let s="none",n=[i("sortNone"),i("activateAscending")];return t?(e?(s="descending",n=[i("sortDescending"),i(this.options.mustSort?"activateAscending":"activateNone")]):(s="ascending",n=[i("sortAscending"),i("activateDescending")]),{ariaSort:s,ariaLabel:n.join(" ")}):{ariaSort:s,ariaLabel:n.join(" ")}},genHeader(t){const e={attrs:{role:"columnheader",scope:"col","aria-label":t.text||""},style:{width:(0,s.kb)(t.width),minWidth:(0,s.kb)(t.width)},class:[`text-${t.align||"start"}`,...(0,s.TI)(t.class),t.divider&&"v-data-table__divider"],on:{}},i=[];if("data-table-select"===t.value&&!this.singleSelect)return this.$createElement("th",e,[this.genSelectAll()]);if(i.push(this.$scopedSlots.hasOwnProperty(t.value)?this.$scopedSlots[t.value]({header:t}):this.$createElement("span",[t.text])),!this.disableSort&&(t.sortable||!t.hasOwnProperty("sortable"))){e.on.click=()=>this.$emit("sort",t.value);const s=this.options.sortBy.findIndex((e=>e===t.value)),n=s>=0,a=this.options.sortDesc[s];e.class.push("sortable");const{ariaLabel:r,ariaSort:o}=this.getAria(n,a);e.attrs["aria-label"]+=`${t.text?": ":""}${r}`,e.attrs["aria-sort"]=o,n&&(e.class.push("active"),e.class.push(a?"desc":"asc")),"end"===t.align?i.unshift(this.genSortIcon()):i.push(this.genSortIcon()),this.options.multiSort&&n&&i.push(this.$createElement("span",{class:"v-data-table-header__sort-badge"},[String(s+1)]))}return this.showGroupBy&&!1!==t.groupable&&i.push(this.genGroupByToggle(t)),this.$createElement("th",e,i)}},render(){return this.$createElement("thead",{staticClass:"v-data-table-header"},[this.$createElement("tr",this.headers.map((t=>this.genHeader(t))))])}});function q(t){if(t.model&&t.on&&t.on.input)if(Array.isArray(t.on.input)){const e=t.on.input.indexOf(t.model.callback);e>-1&&t.on.input.splice(e,1)}else delete t.on.input}function U(t,e){const i=[];for(const s in t)t.hasOwnProperty(s)&&i.push(e("template",{slot:s},t[s]));return i}var K=n["default"].extend({name:"v-data-table-header",functional:!0,props:{...Z.options.props,mobile:Boolean},render(t,{props:e,data:i,slots:s}){q(i);const n=U(s(),t);return i=(0,k.ZP)(i,{props:e}),e.mobile?t(G,i,n):t(j,i,n)}});function Q(t){var e;return 1!==t.length||!["td","th"].includes(null===(e=t[0])||void 0===e?void 0:e.tag)}var J=n["default"].extend({name:"row",functional:!0,props:{headers:Array,index:Number,item:Object,rtl:Boolean},render(t,{props:e,slots:i,data:n}){const a=i(),r=e.headers.map((i=>{const r=[],o=(0,s.vO)(e.item,i.value),l=i.value,h=n.scopedSlots&&n.scopedSlots.hasOwnProperty(l)&&n.scopedSlots[l],c=a.hasOwnProperty(l)&&a[l];h?r.push(...(0,s.TI)(h({item:e.item,isMobile:!1,header:i,index:e.index,value:o}))):c?r.push(...(0,s.TI)(c)):r.push(null==o?o:String(o));const d=`text-${i.align||"start"}`;return Q(r)?t("td",{class:[d,i.cellClass,{"v-data-table__divider":i.divider}]},r):r}));return t("tr",n,r)}}),tt=n["default"].extend({name:"row-group",functional:!0,props:{value:{type:Boolean,default:!0},headerClass:{type:String,default:"v-row-group__header"},contentClass:String,summaryClass:{type:String,default:"v-row-group__summary"}},render(t,{slots:e,props:i}){const s=e(),n=[];return s["column.header"]?n.push(t("tr",{staticClass:i.headerClass},s["column.header"])):s["row.header"]&&n.push(...s["row.header"]),s["row.content"]&&i.value&&n.push(...s["row.content"]),s["column.summary"]?n.push(t("tr",{staticClass:i.summaryClass},s["column.summary"])):s["row.summary"]&&n.push(...s["row.summary"]),n}}),et=(0,r.Z)(d.Z).extend({name:"v-simple-table",props:{dense:Boolean,fixedHeader:Boolean,height:[Number,String]},computed:{classes(){return{"v-data-table--dense":this.dense,"v-data-table--fixed-height":!!this.height&&!this.fixedHeader,"v-data-table--fixed-header":this.fixedHeader,"v-data-table--has-top":!!this.$slots.top,"v-data-table--has-bottom":!!this.$slots.bottom,...this.themeClasses}}},methods:{genWrapper(){return this.$slots.wrapper||this.$createElement("div",{staticClass:"v-data-table__wrapper",style:{height:(0,s.kb)(this.height)}},[this.$createElement("table",this.$slots.default)])}},render(t){return t("div",{staticClass:"v-data-table",class:this.classes},[this.$slots.top,this.genWrapper(),this.$slots.bottom])}}),it=n["default"].extend({name:"row",functional:!0,props:{headers:Array,hideDefaultHeader:Boolean,index:Number,item:Object,rtl:Boolean},render(t,{props:e,slots:i,data:n}){const a=i(),r=e.headers.map((i=>{const r={"v-data-table__mobile-row":!0},o=[],l=(0,s.vO)(e.item,i.value),h=i.value,c=n.scopedSlots&&n.scopedSlots.hasOwnProperty(h)&&n.scopedSlots[h],d=a.hasOwnProperty(h)&&a[h];c?o.push(c({item:e.item,isMobile:!0,header:i,index:e.index,value:l})):d?o.push(d):o.push(null==l?l:String(l));const u=[t("div",{staticClass:"v-data-table__mobile-row__cell"},o)];return"dataTableSelect"===i.value||e.hideDefaultHeader||u.unshift(t("div",{staticClass:"v-data-table__mobile-row__header"},[i.text])),t("td",{class:r},u)}));return t("tr",{...n,staticClass:"v-data-table__mobile-table-row"},r)}}),st=i(9799);function nt(t,e,i){return n=>{const a=(0,s.vO)(t,n.value);return n.filter?n.filter(a,e,t):i(a,e,t)}}function at(t,e,i,n,a){return e="string"===typeof e?e.trim():null,t.filter((t=>{const r=i.every(nt(t,e,s.f9)),o=!e||n.some(nt(t,e,a));return r&&o}))}var rt=(0,r.Z)(V,st.Z).extend({name:"v-data-table",directives:{ripple:y.Z},props:{headers:{type:Array,default:()=>[]},showSelect:Boolean,checkboxColor:String,showExpand:Boolean,showGroupBy:Boolean,height:[Number,String],hideDefaultHeader:Boolean,caption:String,dense:Boolean,headerProps:Object,calculateWidths:Boolean,fixedHeader:Boolean,headersLength:Number,expandIcon:{type:String,default:"$expand"},customFilter:{type:Function,default:s.f9},itemClass:{type:[String,Function],default:()=>""},loaderHeight:{type:[Number,String],default:4}},data(){return{internalGroupBy:[],openCache:{},widths:[]}},computed:{computedHeaders(){if(!this.headers)return[];const t=this.headers.filter((t=>void 0===t.value||!this.internalGroupBy.find((e=>e===t.value)))),e={text:"",sortable:!1,width:"1px"};if(this.showSelect){const i=t.findIndex((t=>"data-table-select"===t.value));i<0?t.unshift({...e,value:"data-table-select"}):t.splice(i,1,{...e,...t[i]})}if(this.showExpand){const i=t.findIndex((t=>"data-table-expand"===t.value));i<0?t.unshift({...e,value:"data-table-expand"}):t.splice(i,1,{...e,...t[i]})}return t},colspanAttrs(){return this.isMobile?void 0:{colspan:this.headersLength||this.computedHeaders.length}},columnSorters(){return this.computedHeaders.reduce(((t,e)=>(e.sort&&(t[e.value]=e.sort),t)),{})},headersWithCustomFilters(){return this.headers.filter((t=>t.filter&&(!t.hasOwnProperty("filterable")||!0===t.filterable)))},headersWithoutCustomFilters(){return this.headers.filter((t=>!t.filter&&(!t.hasOwnProperty("filterable")||!0===t.filterable)))},sanitizedHeaderProps(){return(0,s.$x)(this.headerProps)},computedItemsPerPage(){const t=this.options&&this.options.itemsPerPage?this.options.itemsPerPage:this.itemsPerPage,e=this.sanitizedFooterProps.itemsPerPageOptions;if(e&&!e.find((e=>"number"===typeof e?e===t:e.value===t))){const t=e[0];return"object"===typeof t?t.value:t}return t},groupByText(){var t,e,i;return null!==(i=null===(e=null===(t=this.headers)||void 0===t?void 0:t.find((t=>{var e;return t.value===(null===(e=this.internalGroupBy)||void 0===e?void 0:e[0])})))||void 0===e?void 0:e.text)&&void 0!==i?i:""}},created(){const t=[["sort-icon","header-props.sort-icon"],["hide-headers","hide-default-header"],["select-all","show-select"]];t.forEach((([t,e])=>{this.$attrs.hasOwnProperty(t)&&(0,f.fK)(t,e,this)}))},mounted(){this.calculateWidths&&(window.addEventListener("resize",this.calcWidths),this.calcWidths())},beforeDestroy(){this.calculateWidths&&window.removeEventListener("resize",this.calcWidths)},methods:{calcWidths(){this.widths=Array.from(this.$el.querySelectorAll("th")).map((t=>t.clientWidth))},customFilterWithColumns(t,e){return at(t,e,this.headersWithCustomFilters,this.headersWithoutCustomFilters,this.customFilter)},customSortWithHeaders(t,e,i,s){return this.customSort(t,e,i,s,this.columnSorters)},createItemProps(t,e){const i=V.options.methods.createItemProps.call(this,t,e);return Object.assign(i,{headers:this.computedHeaders})},genCaption(t){return this.caption?[this.$createElement("caption",[this.caption])]:(0,s.z9)(this,"caption",t,!0)},genColgroup(t){return this.$createElement("colgroup",this.computedHeaders.map((t=>this.$createElement("col",{class:{divider:t.divider}}))))},genLoading(){const t=this.$createElement("th",{staticClass:"column",attrs:this.colspanAttrs},[this.genProgress()]),e=this.$createElement("tr",{staticClass:"v-data-table__progress"},[t]);return this.$createElement("thead",[e])},genHeaders(t){const e={props:{...this.sanitizedHeaderProps,headers:this.computedHeaders,options:t.options,mobile:this.isMobile,showGroupBy:this.showGroupBy,checkboxColor:this.checkboxColor,someItems:this.someItems,everyItem:this.everyItem,singleSelect:this.singleSelect,disableSort:this.disableSort},on:{sort:t.sort,group:t.group,"toggle-select-all":this.toggleSelectAll}},i=[(0,s.z9)(this,"header",{...e,isMobile:this.isMobile})];if(!this.hideDefaultHeader){const t=(0,s.FT)("header.",this.$scopedSlots);i.push(this.$createElement(K,{...e,scopedSlots:t}))}return this.loading&&i.push(this.genLoading()),i},genEmptyWrapper(t){return this.$createElement("tr",{staticClass:"v-data-table__empty-wrapper"},[this.$createElement("td",{attrs:this.colspanAttrs},t)])},genItems(t,e){const i=this.genEmpty(e.originalItemsLength,e.pagination.itemsLength);return i?[i]:e.groupedItems?this.genGroupedRows(e.groupedItems,e):this.genRows(t,e)},genGroupedRows(t,e){return t.map((t=>(this.openCache.hasOwnProperty(t.name)||this.$set(this.openCache,t.name,!0),this.$scopedSlots.group?this.$scopedSlots.group({group:t.name,options:e.options,isMobile:this.isMobile,items:t.items,headers:this.computedHeaders}):this.genDefaultGroupedRow(t.name,t.items,e))))},genDefaultGroupedRow(t,e,i){const s=!!this.openCache[t],n=[this.$createElement("template",{slot:"row.content"},this.genRows(e,i))],a=()=>this.$set(this.openCache,t,!this.openCache[t]),r=()=>i.updateOptions({groupBy:[],groupDesc:[]});if(this.$scopedSlots["group.header"])n.unshift(this.$createElement("template",{slot:"column.header"},[this.$scopedSlots["group.header"]({group:t,groupBy:i.options.groupBy,isMobile:this.isMobile,items:e,headers:this.computedHeaders,isOpen:s,toggle:a,remove:r})]));else{const e=this.$createElement(W.Z,{staticClass:"ma-0",props:{icon:!0,small:!0},on:{click:a}},[this.$createElement(l.Z,[s?"$minus":"$plus"])]),i=this.$createElement(W.Z,{staticClass:"ma-0",props:{icon:!0,small:!0},on:{click:r}},[this.$createElement(l.Z,["$close"])]),o=this.$createElement("td",{staticClass:"text-start",attrs:this.colspanAttrs},[e,`${this.groupByText}: ${t}`,i]);n.unshift(this.$createElement("template",{slot:"column.header"},[o]))}return this.$scopedSlots["group.summary"]&&n.push(this.$createElement("template",{slot:"column.summary"},[this.$scopedSlots["group.summary"]({group:t,groupBy:i.options.groupBy,isMobile:this.isMobile,items:e,headers:this.computedHeaders,isOpen:s,toggle:a})])),this.$createElement(tt,{key:t,props:{value:s}},n)},genRows(t,e){return this.$scopedSlots.item?this.genScopedRows(t,e):this.genDefaultRows(t,e)},genScopedRows(t,e){const i=[];for(let s=0;s<t.length;s++){const e=t[s];i.push(this.$scopedSlots.item({...this.createItemProps(e,s),isMobile:this.isMobile})),this.isExpanded(e)&&i.push(this.$scopedSlots["expanded-item"]({headers:this.computedHeaders,isMobile:this.isMobile,index:s,item:e}))}return i},genDefaultRows(t,e){return this.$scopedSlots["expanded-item"]?t.map(((t,e)=>this.genDefaultExpandedRow(t,e))):t.map(((t,e)=>this.genDefaultSimpleRow(t,e)))},genDefaultExpandedRow(t,e){const i=this.isExpanded(t),s={"v-data-table__expanded v-data-table__expanded__row":i},n=this.genDefaultSimpleRow(t,e,s),a=this.$createElement("tr",{staticClass:"v-data-table__expanded v-data-table__expanded__content"},[this.$scopedSlots["expanded-item"]({headers:this.computedHeaders,isMobile:this.isMobile,item:t})]);return this.$createElement(tt,{props:{value:i}},[this.$createElement("template",{slot:"row.header"},[n]),this.$createElement("template",{slot:"row.content"},[a])])},genDefaultSimpleRow(t,e,i={}){const n=(0,s.FT)("item.",this.$scopedSlots),a=this.createItemProps(t,e);if(this.showSelect){const e=n["data-table-select"];n["data-table-select"]=e?()=>e({...a,isMobile:this.isMobile}):()=>{var e;return this.$createElement(C,{staticClass:"v-data-table__checkbox",props:{value:a.isSelected,disabled:!this.isSelectable(t),color:null!==(e=this.checkboxColor)&&void 0!==e?e:""},on:{input:t=>a.select(t)}})}}if(this.showExpand){const t=n["data-table-expand"];n["data-table-expand"]=t?()=>t(a):()=>this.$createElement(l.Z,{staticClass:"v-data-table__expand-icon",class:{"v-data-table__expand-icon--active":a.isExpanded},on:{click:t=>{t.stopPropagation(),a.expand(!a.isExpanded)}}},[this.expandIcon])}return this.$createElement(this.isMobile?it:J,{key:(0,s.vO)(t,this.itemKey),class:(0,k.ze)({...i,"v-data-table__selected":a.isSelected},(0,s.qF)(t,this.itemClass)),props:{headers:this.computedHeaders,hideDefaultHeader:this.hideDefaultHeader,index:e,item:t,rtl:this.$vuetify.rtl},scopedSlots:n,on:{click:e=>this.$emit("click:row",t,a,e),contextmenu:t=>this.$emit("contextmenu:row",t,a),dblclick:t=>this.$emit("dblclick:row",t,a)}})},genBody(t){const e={...t,expand:this.expand,headers:this.computedHeaders,isExpanded:this.isExpanded,isMobile:this.isMobile,isSelected:this.isSelected,select:this.select};return this.$scopedSlots.body?this.$scopedSlots.body(e):this.$createElement("tbody",[(0,s.z9)(this,"body.prepend",e,!0),this.genItems(t.items,t),(0,s.z9)(this,"body.append",e,!0)])},genFoot(t){var e,i;return null===(i=(e=this.$scopedSlots).foot)||void 0===i?void 0:i.call(e,t)},genFooters(t){const e={props:{options:t.options,pagination:t.pagination,itemsPerPageText:"$vuetify.dataTable.itemsPerPageText",...this.sanitizedFooterProps},on:{"update:options":e=>t.updateOptions(e)},widths:this.widths,headers:this.computedHeaders},i=[(0,s.z9)(this,"footer",e,!0)];return this.hideDefaultFooter||i.push(this.$createElement(X,{...e,scopedSlots:(0,s.FT)("footer.",this.$scopedSlots)})),i},genDefaultScopedSlot(t){const e={height:this.height,fixedHeader:this.fixedHeader,dense:this.dense};return this.$createElement(et,{props:e,class:{"v-data-table--mobile":this.isMobile}},[this.proxySlot("top",(0,s.z9)(this,"top",{...t,isMobile:this.isMobile},!0)),this.genCaption(t),this.genColgroup(t),this.genHeaders(t),this.genBody(t),this.genFoot(t),this.proxySlot("bottom",this.genFooters(t))])},proxySlot(t,e){return this.$createElement("template",{slot:t},e)}},render(){return this.$createElement(a,{props:{...this.$props,customFilter:this.customFilterWithColumns,customSort:this.customSortWithHeaders,itemsPerPage:this.computedItemsPerPage},on:{"update:options":(t,e)=>{this.internalGroupBy=t.groupBy||[],!(0,s.vZ)(t,e)&&this.$emit("update:options",t)},"update:page":t=>this.$emit("update:page",t),"update:items-per-page":t=>this.$emit("update:items-per-page",t),"update:sort-by":t=>this.$emit("update:sort-by",t),"update:sort-desc":t=>this.$emit("update:sort-desc",t),"update:group-by":t=>this.$emit("update:group-by",t),"update:group-desc":t=>this.$emit("update:group-desc",t),pagination:(t,e)=>!(0,s.vZ)(t,e)&&this.$emit("pagination",t),"current-items":t=>{this.internalCurrentItems=t,this.$emit("current-items",t)},"page-count":t=>this.$emit("page-count",t)},scopedSlots:{default:this.genDefaultScopedSlot}})}})},3749:function(t,e,i){"use strict";i.d(e,{Z:function(){return f}});var s=i(9770),n=i(7561),a=i(4665),r=i(9556),o=i(8605),l=i(2893),h=i(2389),c=i(3664),d=i(5530),u=i(8219),p=i(8131);const g=(0,d.Z)(a.Z,r.Z,o.Z,l.Z,h.Z,n.Z);var f=g.extend({name:"v-dialog",directives:{ClickOutside:c.Z},props:{dark:Boolean,disabled:Boolean,fullscreen:Boolean,light:Boolean,maxWidth:[String,Number],noClickAnimation:Boolean,origin:{type:String,default:"center center"},persistent:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,transition:{type:[String,Boolean],default:"dialog-transition"},width:[String,Number]},data(){return{activatedBy:null,animate:!1,animateTimeout:-1,stackMinZIndex:200,previousActiveElement:null}},computed:{classes(){return{[`v-dialog ${this.contentClass}`.trim()]:!0,"v-dialog--active":this.isActive,"v-dialog--persistent":this.persistent,"v-dialog--fullscreen":this.fullscreen,"v-dialog--scrollable":this.scrollable,"v-dialog--animated":this.animate}},contentClasses(){return{"v-dialog__content":!0,"v-dialog__content--active":this.isActive}},hasActivator(){return Boolean(!!this.$slots.activator||!!this.$scopedSlots.activator)}},watch:{isActive(t){var e;t?(this.show(),this.hideScroll()):(this.removeOverlay(),this.unbind(),null===(e=this.previousActiveElement)||void 0===e||e.focus())},fullscreen(t){this.isActive&&(t?(this.hideScroll(),this.removeOverlay(!1)):(this.showScroll(),this.genOverlay()))}},created(){this.$attrs.hasOwnProperty("full-width")&&(0,u.Jk)("full-width",this)},beforeMount(){this.$nextTick((()=>{this.isBooted=this.isActive,this.isActive&&this.show()}))},beforeDestroy(){"undefined"!==typeof window&&this.unbind()},methods:{animateClick(){this.animate=!1,this.$nextTick((()=>{this.animate=!0,window.clearTimeout(this.animateTimeout),this.animateTimeout=window.setTimeout((()=>this.animate=!1),150)}))},closeConditional(t){const e=t.target;return!(this._isDestroyed||!this.isActive||this.$refs.content.contains(e)||this.overlay&&e&&!this.overlay.$el.contains(e))&&this.activeZIndex>=this.getMaxZIndex()},hideScroll(){this.fullscreen?document.documentElement.classList.add("overflow-y-hidden"):o.Z.options.methods.hideScroll.call(this)},show(){!this.fullscreen&&!this.hideOverlay&&this.genOverlay(),this.$nextTick((()=>{this.$nextTick((()=>{var t,e;(null===(t=this.$refs.dialog)||void 0===t?void 0:t.contains(document.activeElement))||(this.previousActiveElement=document.activeElement,null===(e=this.$refs.dialog)||void 0===e||e.focus()),this.bind()}))}))},bind(){window.addEventListener("focusin",this.onFocusin)},unbind(){window.removeEventListener("focusin",this.onFocusin)},onClickOutside(t){this.$emit("click:outside",t),this.persistent?this.noClickAnimation||this.animateClick():this.isActive=!1},onKeydown(t){if(t.keyCode===p.Do.esc&&!this.getOpenDependents().length)if(this.persistent)this.noClickAnimation||this.animateClick();else{this.isActive=!1;const t=this.getActivator();this.$nextTick((()=>t&&t.focus()))}this.$emit("keydown",t)},onFocusin(t){if(!t||!this.retainFocus)return;const e=t.target;if(e&&this.$refs.dialog&&![document,this.$refs.dialog].includes(e)&&!this.$refs.dialog.contains(e)&&this.activeZIndex>=this.getMaxZIndex()&&!this.getOpenDependentElements().some((t=>t.contains(e)))){const t=this.$refs.dialog.querySelectorAll('button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])'),e=[...t].find((t=>!t.hasAttribute("disabled")&&!t.matches('[tabindex="-1"]')));e&&e.focus()}},genContent(){return this.showLazyContent((()=>[this.$createElement(s.Z,{props:{root:!0,light:this.light,dark:this.dark}},[this.$createElement("div",{class:this.contentClasses,attrs:{role:"dialog","aria-modal":this.hideOverlay?void 0:"true",...this.getScopeIdAttrs()},on:{keydown:this.onKeydown},style:{zIndex:this.activeZIndex},ref:"content"},[this.genTransition()])])]))},genTransition(){const t=this.genInnerContent();return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,appear:!0}},[t]):t},genInnerContent(){const t={class:this.classes,attrs:{tabindex:this.isActive?0:void 0},ref:"dialog",directives:[{name:"click-outside",value:{handler:this.onClickOutside,closeConditional:this.closeConditional,include:this.getOpenDependentElements}},{name:"show",value:this.isActive}],style:{transformOrigin:this.origin}};return this.fullscreen||(t.style={...t.style,maxWidth:(0,p.kb)(this.maxWidth),width:(0,p.kb)(this.width)}),this.$createElement("div",t,this.getContentSlot())}},render(t){return t("div",{staticClass:"v-dialog__container",class:{"v-dialog__container--attached":""===this.attach||!0===this.attach||"attach"===this.attach}},[this.genActivator(),this.genContent()])}})},4557:function(t,e,i){"use strict";var s=i(1302),n=i(950),a=i(8131),r=i(5530);e["Z"]=(0,r.Z)((0,s.d)("expansionPanels","v-expansion-panel","v-expansion-panels"),(0,n.J)("expansionPanel",!0)).extend({name:"v-expansion-panel",props:{disabled:Boolean,readonly:Boolean},data(){return{content:null,header:null,nextIsActive:!1}},computed:{classes(){return{"v-expansion-panel--active":this.isActive,"v-expansion-panel--next-active":this.nextIsActive,"v-expansion-panel--disabled":this.isDisabled,...this.groupClasses}},isDisabled(){return this.expansionPanels.disabled||this.disabled},isReadonly(){return this.expansionPanels.readonly||this.readonly}},methods:{registerContent(t){this.content=t},unregisterContent(){this.content=null},registerHeader(t){this.header=t,t.$on("click",this.onClick)},unregisterHeader(){this.header=null},onClick(t){t.detail&&this.header.$el.blur(),this.$emit("click",t),this.isReadonly||this.isDisabled||this.toggle()},toggle(){this.$nextTick((()=>this.$emit("change")))}},render(t){return t("div",{staticClass:"v-expansion-panel",class:this.classes,attrs:{"aria-expanded":String(this.isActive)}},(0,a.z9)(this))}})},4694:function(t,e,i){"use strict";var s=i(6930),n=i(6986),a=i(5836),r=i(950),o=i(8131),l=i(5530);const h=(0,l.Z)(n.Z,a.Z,(0,r.f)("expansionPanel","v-expansion-panel-content","v-expansion-panel"));e["Z"]=h.extend().extend({name:"v-expansion-panel-content",data:()=>({isActive:!1}),computed:{parentIsActive(){return this.expansionPanel.isActive}},watch:{parentIsActive:{immediate:!0,handler(t,e){t&&(this.isBooted=!0),null==e?this.isActive=t:this.$nextTick((()=>this.isActive=t))}}},created(){this.expansionPanel.registerContent(this)},beforeDestroy(){this.expansionPanel.unregisterContent()},render(t){return t(s.Fx,this.showLazyContent((()=>[t("div",this.setBackgroundColor(this.color,{staticClass:"v-expansion-panel-content",directives:[{name:"show",value:this.isActive}]}),[t("div",{class:"v-expansion-panel-content__wrap"},(0,o.z9)(this))])])))}})},6131:function(t,e,i){"use strict";var s=i(6930),n=i(9524),a=i(5836),r=i(950),o=i(293),l=i(8131),h=i(5530);const c=(0,h.Z)(a.Z,(0,r.f)("expansionPanel","v-expansion-panel-header","v-expansion-panel"));e["Z"]=c.extend().extend({name:"v-expansion-panel-header",directives:{ripple:o.Z},props:{disableIconRotate:Boolean,expandIcon:{type:String,default:"$expand"},hideActions:Boolean,ripple:{type:[Boolean,Object],default:!1}},data:()=>({hasMousedown:!1}),computed:{classes(){return{"v-expansion-panel-header--active":this.isActive,"v-expansion-panel-header--mousedown":this.hasMousedown}},isActive(){return this.expansionPanel.isActive},isDisabled(){return this.expansionPanel.isDisabled},isReadonly(){return this.expansionPanel.isReadonly}},created(){this.expansionPanel.registerHeader(this)},beforeDestroy(){this.expansionPanel.unregisterHeader()},methods:{onClick(t){this.$emit("click",t)},genIcon(){const t=(0,l.z9)(this,"actions")||[this.$createElement(n.Z,this.expandIcon)];return this.$createElement(s.Z5,[this.$createElement("div",{staticClass:"v-expansion-panel-header__icon",class:{"v-expansion-panel-header__icon--disable-rotate":this.disableIconRotate},directives:[{name:"show",value:!this.isDisabled}]},t)])}},render(t){return t("button",this.setBackgroundColor(this.color,{staticClass:"v-expansion-panel-header",class:this.classes,attrs:{tabindex:this.isDisabled?-1:null,type:"button","aria-expanded":this.isActive},directives:[{name:"ripple",value:this.ripple}],on:{...this.$listeners,click:this.onClick,mousedown:()=>this.hasMousedown=!0,mouseup:()=>this.hasMousedown=!1}}),[(0,l.z9)(this,"default",{open:this.isActive},!0),this.hideActions||this.genIcon()])}})},5136:function(t,e,i){"use strict";i.d(e,{Z:function(){return a}});var s=i(1569),n=i(8219),a=s.y.extend({name:"v-expansion-panels",provide(){return{expansionPanels:this}},props:{accordion:Boolean,disabled:Boolean,flat:Boolean,hover:Boolean,focusable:Boolean,inset:Boolean,popout:Boolean,readonly:Boolean,tile:Boolean},computed:{classes(){return{...s.y.options.computed.classes.call(this),"v-expansion-panels":!0,"v-expansion-panels--accordion":this.accordion,"v-expansion-panels--flat":this.flat,"v-expansion-panels--hover":this.hover,"v-expansion-panels--focusable":this.focusable,"v-expansion-panels--inset":this.inset,"v-expansion-panels--popout":this.popout,"v-expansion-panels--tile":this.tile}}},created(){this.$attrs.hasOwnProperty("expand")&&(0,n.fK)("expand","multiple",this),Array.isArray(this.value)&&this.value.length>0&&"boolean"===typeof this.value[0]&&(0,n.fK)(':value="[true, false, true]"',':value="[0, 2]"',this)},methods:{updateItem(t,e){const i=this.getValue(t,e),s=this.getValue(t,e+1);t.isActive=this.toggleMethod(i),t.nextIsActive=this.toggleMethod(s)}}})},3240:function(t,e,i){"use strict";var s=i(5530),n=i(6141),a=i(950);e["Z"]=(0,s.Z)(n.Z,(0,a.J)("form")).extend({name:"v-form",provide(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(t){const e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput(t){const e=t=>t.$watch("hasError",(e=>{this.$set(this.errorBag,t._uid,e)}),{immediate:!0}),i={_uid:t._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?i.shouldValidate=t.$watch("shouldValidate",(s=>{s&&(this.errorBag.hasOwnProperty(t._uid)||(i.valid=e(t)))})):i.valid=e(t),i},validate(){return 0===this.inputs.filter((t=>!t.validate(!0))).length},reset(){this.inputs.forEach((t=>t.reset())),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout((()=>{this.errorBag={}}),0)},resetValidation(){this.inputs.forEach((t=>t.resetValidation())),this.resetErrorBag()},register(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister(t){const e=this.inputs.find((e=>e._uid===t._uid));if(!e)return;const i=this.watchers.find((t=>t._uid===e._uid));i&&(i.valid(),i.shouldValidate()),this.watchers=this.watchers.filter((t=>t._uid!==e._uid)),this.inputs=this.inputs.filter((t=>t._uid!==e._uid)),this.$delete(this.errorBag,e._uid)}},render(t){return t("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:t=>this.$emit("submit",t)}},this.$slots.default)}})},9657:function(t,e,i){"use strict";var s=i(1811),n=i(4552),a=i(5530),r=i(8219);e["Z"]=(0,a.Z)(s.Z,n.Z).extend({name:"v-hover",props:{disabled:{type:Boolean,default:!1},value:{type:Boolean,default:void 0}},methods:{onMouseEnter(){this.runDelay("open")},onMouseLeave(){this.runDelay("close")}},render(){if(!this.$scopedSlots.default&&void 0===this.value)return(0,r.Kd)("v-hover is missing a default scopedSlot or bound value",this),null;let t;return this.$scopedSlots.default&&(t=this.$scopedSlots.default({hover:this.isActive})),Array.isArray(t)&&1===t.length&&(t=t[0]),t&&!Array.isArray(t)&&t.tag?(this.disabled||(t.data=t.data||{},this._g(t.data,{mouseenter:this.onMouseEnter,mouseleave:this.onMouseLeave})),t):((0,r.Kd)("v-hover should only contain a single element",this),t)}})},2926:function(t,e,i){"use strict";i.d(e,{Z:function(){return m}});var s=i(9524),n=i(2980),a=i(5836),r=i(2066),o=i(5530),l=i(8131),h=(0,o.Z)(a.Z,r.Z).extend({name:"v-messages",props:{value:{type:Array,default:()=>[]}},methods:{genChildren(){return this.$createElement("transition-group",{staticClass:"v-messages__wrapper",attrs:{name:"message-transition",tag:"div"}},this.value.map(this.genMessage))},genMessage(t,e){return this.$createElement("div",{staticClass:"v-messages__message",key:e},(0,l.z9)(this,"default",{message:t,key:e})||[t])}},render(t){return t("div",this.setTextColor(this.color,{staticClass:"v-messages",class:this.themeClasses}),[this.genChildren()])}}),c=h,d=i(6141),u=i(371),p=i(7559);const g=(0,o.Z)(d.Z,u.Z);var f=g.extend().extend({name:"v-input",inheritAttrs:!1,props:{appendIcon:String,backgroundColor:{type:String,default:""},dense:Boolean,height:[Number,String],hideDetails:[Boolean,String],hideSpinButtons:Boolean,hint:String,id:String,label:String,loading:Boolean,persistentHint:Boolean,prependIcon:String,value:null},data(){return{lazyValue:this.value,hasMouseDown:!1}},computed:{classes(){return{"v-input--has-state":this.hasState,"v-input--hide-details":!this.showDetails,"v-input--is-label-active":this.isLabelActive,"v-input--is-dirty":this.isDirty,"v-input--is-disabled":this.isDisabled,"v-input--is-focused":this.isFocused,"v-input--is-loading":!1!==this.loading&&null!=this.loading,"v-input--is-readonly":this.isReadonly,"v-input--dense":this.dense,"v-input--hide-spin-buttons":this.hideSpinButtons,...this.themeClasses}},computedId(){return this.id||`input-${this._uid}`},hasDetails(){return this.messagesToDisplay.length>0},hasHint(){return!this.hasMessages&&!!this.hint&&(this.persistentHint||this.isFocused)},hasLabel(){return!(!this.$slots.label&&!this.label)},internalValue:{get(){return this.lazyValue},set(t){this.lazyValue=t,this.$emit(this.$_modelEvent,t)}},isDirty(){return!!this.lazyValue},isLabelActive(){return this.isDirty},messagesToDisplay(){return this.hasHint?[this.hint]:this.hasMessages?this.validations.map((t=>{if("string"===typeof t)return t;const e=t(this.internalValue);return"string"===typeof e?e:""})).filter((t=>""!==t)):[]},showDetails(){return!1===this.hideDetails||"auto"===this.hideDetails&&this.hasDetails}},watch:{value(t){this.lazyValue=t}},beforeCreate(){this.$_modelEvent=this.$options.model&&this.$options.model.event||"input"},methods:{genContent(){return[this.genPrependSlot(),this.genControl(),this.genAppendSlot()]},genControl(){return this.$createElement("div",{staticClass:"v-input__control",attrs:{title:this.attrs$.title}},[this.genInputSlot(),this.genMessages()])},genDefaultSlot(){return[this.genLabel(),this.$slots.default]},genIcon(t,e,i={}){const n=this[`${t}Icon`],a=`click:${(0,l.GL)(t)}`,r=!(!this.listeners$[a]&&!e),o=(0,p.ZP)({attrs:{"aria-label":r?(0,l.GL)(t).split("-")[0]+" icon":void 0,color:this.validationState,dark:this.dark,disabled:this.isDisabled,light:this.light,tabindex:"clear"===t?-1:void 0},on:r?{click:t=>{t.preventDefault(),t.stopPropagation(),this.$emit(a,t),e&&e(t)},mouseup:t=>{t.preventDefault(),t.stopPropagation()}}:void 0},i);return this.$createElement("div",{staticClass:"v-input__icon",class:t?`v-input__icon--${(0,l.GL)(t)}`:void 0},[this.$createElement(s.Z,o,n)])},genInputSlot(){return this.$createElement("div",this.setBackgroundColor(this.backgroundColor,{staticClass:"v-input__slot",style:{height:(0,l.kb)(this.height)},on:{click:this.onClick,mousedown:this.onMouseDown,mouseup:this.onMouseUp},ref:"input-slot"}),[this.genDefaultSlot()])},genLabel(){return this.hasLabel?this.$createElement(n.Z,{props:{color:this.validationState,dark:this.dark,disabled:this.isDisabled,focused:this.hasState,for:this.computedId,light:this.light}},this.$slots.label||this.label):null},genMessages(){return this.showDetails?this.$createElement(c,{props:{color:this.hasHint?"":this.validationState,dark:this.dark,light:this.light,value:this.messagesToDisplay},attrs:{role:this.hasMessages?"alert":null},scopedSlots:{default:t=>(0,l.z9)(this,"message",t)}}):null},genSlot(t,e,i){if(!i.length)return null;const s=`${t}-${e}`;return this.$createElement("div",{staticClass:`v-input__${s}`,ref:s},i)},genPrependSlot(){const t=[];return this.$slots.prepend?t.push(this.$slots.prepend):this.prependIcon&&t.push(this.genIcon("prepend")),this.genSlot("prepend","outer",t)},genAppendSlot(){const t=[];return this.$slots.append?t.push(this.$slots.append):this.appendIcon&&t.push(this.genIcon("append")),this.genSlot("append","outer",t)},onClick(t){this.$emit("click",t)},onMouseDown(t){this.hasMouseDown=!0,this.$emit("mousedown",t)},onMouseUp(t){this.hasMouseDown=!1,this.$emit("mouseup",t)}},render(t){return t("div",this.setTextColor(this.validationState,{staticClass:"v-input",class:this.classes}),this.genContent())}}),m=f},2980:function(t,e,i){"use strict";i.d(e,{Z:function(){return l}});var s=i(5836),n=i(2066),a=i(5530),r=i(8131),o=(0,a.Z)(n.Z).extend({name:"v-label",functional:!0,props:{absolute:Boolean,color:{type:String,default:"primary"},disabled:Boolean,focused:Boolean,for:String,left:{type:[Number,String],default:0},right:{type:[Number,String],default:"auto"},value:Boolean},render(t,e){const{children:i,listeners:a,props:o}=e,l={staticClass:"v-label",class:{"v-label--active":o.value,"v-label--is-disabled":o.disabled,...(0,n.X)(e)},attrs:{for:o.for,"aria-hidden":!o.for},on:a,style:{left:(0,r.kb)(o.left),right:(0,r.kb)(o.right),position:o.absolute?"absolute":"relative"},ref:"label"};return t("label",s.Z.options.methods.setTextColor(o.focused&&o.color,l),i)}}),l=o},3328:function(t,e,i){"use strict";i.d(e,{Z:function(){return k}});var s=i(9770),n=i(7561),a=i(1811),r=i(4665),o=i(2389),l=i(8747),h=i(9556),c=i(5530),d=i(8131);const u=(0,c.Z)(o.Z,(0,l.d)(["top","right","bottom","left","absolute"]),n.Z,h.Z);var p=u.extend().extend({name:"menuable",props:{allowOverflow:Boolean,light:Boolean,dark:Boolean,maxWidth:{type:[Number,String],default:"auto"},minWidth:[Number,String],nudgeBottom:{type:[Number,String],default:0},nudgeLeft:{type:[Number,String],default:0},nudgeRight:{type:[Number,String],default:0},nudgeTop:{type:[Number,String],default:0},nudgeWidth:{type:[Number,String],default:0},offsetOverflow:Boolean,positionX:{type:Number,default:null},positionY:{type:Number,default:null},zIndex:{type:[Number,String],default:null}},data:()=>({activatorNode:[],absoluteX:0,absoluteY:0,activatedBy:null,activatorFixed:!1,dimensions:{activator:{top:0,left:0,bottom:0,right:0,width:0,height:0,offsetTop:0,scrollHeight:0,offsetLeft:0},content:{top:0,left:0,bottom:0,right:0,width:0,height:0,offsetTop:0,scrollHeight:0}},relativeYOffset:0,hasJustFocused:!1,hasWindow:!1,inputActivator:!1,isContentActive:!1,pageWidth:0,pageYOffset:0,stackClass:"v-menu__content--active",stackMinZIndex:6}),computed:{computedLeft(){const t=this.dimensions.activator,e=this.dimensions.content,i=(!1!==this.attach?t.offsetLeft:t.left)||0,s=Math.max(t.width,e.width);let n=0;if(n+=i,(this.left||this.$vuetify.rtl&&!this.right)&&(n-=s-t.width),this.offsetX){const e=isNaN(Number(this.maxWidth))?t.width:Math.min(t.width,Number(this.maxWidth));n+=this.left?-e:t.width}return this.nudgeLeft&&(n-=parseInt(this.nudgeLeft)),this.nudgeRight&&(n+=parseInt(this.nudgeRight)),n},computedTop(){const t=this.dimensions.activator,e=this.dimensions.content;let i=0;return this.top&&(i+=t.height-e.height),!1!==this.attach?i+=t.offsetTop:i+=t.top+this.pageYOffset,this.offsetY&&(i+=this.top?-t.height:t.height),this.nudgeTop&&(i-=parseInt(this.nudgeTop)),this.nudgeBottom&&(i+=parseInt(this.nudgeBottom)),i},hasActivator(){return!!this.$slots.activator||!!this.$scopedSlots.activator||!!this.activator||!!this.inputActivator},absoluteYOffset(){return this.pageYOffset-this.relativeYOffset}},watch:{disabled(t){t&&this.callDeactivate()},isActive(t){this.disabled||(t?this.callActivate():this.callDeactivate())},positionX:"updateDimensions",positionY:"updateDimensions"},beforeMount(){this.hasWindow="undefined"!==typeof window,this.hasWindow&&window.addEventListener("resize",this.updateDimensions,!1)},beforeDestroy(){this.hasWindow&&window.removeEventListener("resize",this.updateDimensions,!1)},methods:{absolutePosition(){return{offsetTop:this.positionY||this.absoluteY,offsetLeft:this.positionX||this.absoluteX,scrollHeight:0,top:this.positionY||this.absoluteY,bottom:this.positionY||this.absoluteY,left:this.positionX||this.absoluteX,right:this.positionX||this.absoluteX,height:0,width:0}},activate(){},calcLeft(t){return(0,d.kb)(!1!==this.attach?this.computedLeft:this.calcXOverflow(this.computedLeft,t))},calcTop(){return(0,d.kb)(!1!==this.attach?this.computedTop:this.calcYOverflow(this.computedTop))},calcXOverflow(t,e){const i=t+e-this.pageWidth+12;return t=(!this.left||this.right)&&i>0?Math.max(t-i,0):Math.max(t,12),t+this.getOffsetLeft()},calcYOverflow(t){const e=this.getInnerHeight(),i=this.absoluteYOffset+e,s=this.dimensions.activator,n=this.dimensions.content.height,a=t+n,r=i<a;return r&&this.offsetOverflow&&s.top>n?t=this.pageYOffset+(s.top-n):r&&!this.allowOverflow?t=i-n-12:t<this.absoluteYOffset&&!this.allowOverflow&&(t=this.absoluteYOffset+12),t<12?12:t},callActivate(){this.hasWindow&&this.activate()},callDeactivate(){this.isContentActive=!1,this.deactivate()},checkForPageYOffset(){this.hasWindow&&(this.pageYOffset=this.activatorFixed?0:this.getOffsetTop())},checkActivatorFixed(){if(!1!==this.attach)return void(this.activatorFixed=!1);let t=this.getActivator();while(t){if("fixed"===window.getComputedStyle(t).position)return void(this.activatorFixed=!0);t=t.offsetParent}this.activatorFixed=!1},deactivate(){},genActivatorListeners(){const t=n.Z.options.methods.genActivatorListeners.call(this),e=t.click;return e&&(t.click=t=>{this.openOnClick&&e&&e(t),this.absoluteX=t.clientX,this.absoluteY=t.clientY}),t},getInnerHeight(){return this.hasWindow?window.innerHeight||document.documentElement.clientHeight:0},getOffsetLeft(){return this.hasWindow?window.pageXOffset||document.documentElement.scrollLeft:0},getOffsetTop(){return this.hasWindow?window.pageYOffset||document.documentElement.scrollTop:0},getRoundedBoundedClientRect(t){const e=t.getBoundingClientRect();return{top:Math.round(e.top),left:Math.round(e.left),bottom:Math.round(e.bottom),right:Math.round(e.right),width:Math.round(e.width),height:Math.round(e.height)}},measure(t){if(!t||!this.hasWindow)return null;const e=this.getRoundedBoundedClientRect(t);if(!1!==this.attach){const i=window.getComputedStyle(t);e.left=parseInt(i.marginLeft),e.top=parseInt(i.marginTop)}return e},sneakPeek(t){requestAnimationFrame((()=>{const e=this.$refs.content;e&&"none"===e.style.display?(e.style.display="inline-block",t(),e.style.display="none"):t()}))},startTransition(){return new Promise((t=>requestAnimationFrame((()=>{this.isContentActive=this.hasJustFocused=this.isActive,t()}))))},updateDimensions(){this.hasWindow="undefined"!==typeof window,this.checkActivatorFixed(),this.checkForPageYOffset(),this.pageWidth=document.documentElement.clientWidth;const t={activator:{...this.dimensions.activator},content:{...this.dimensions.content}};if(!this.hasActivator||this.absolute)t.activator=this.absolutePosition();else{const e=this.getActivator();if(!e)return;t.activator=this.measure(e),t.activator.offsetLeft=e.offsetLeft,!1!==this.attach?t.activator.offsetTop=e.offsetTop:t.activator.offsetTop=0}this.sneakPeek((()=>{if(this.$refs.content){if(this.$refs.content.offsetParent){const e=this.getRoundedBoundedClientRect(this.$refs.content.offsetParent);this.relativeYOffset=window.pageYOffset+e.top,t.activator.top-=this.relativeYOffset,t.activator.left-=window.pageXOffset+e.left}t.content=this.measure(this.$refs.content)}this.dimensions=t}))}}}),g=i(2893),f=i(5357),m=i(2066),v=i(3664),b=i(7293),x=i(8219),y=i(1922);const w=(0,c.Z)(r.Z,a.Z,g.Z,f.Z,m.Z,p);var k=w.extend({name:"v-menu",directives:{ClickOutside:v.Z,Resize:b.Z},provide(){return{isInMenu:!0,theme:this.theme}},props:{auto:Boolean,closeOnClick:{type:Boolean,default:!0},closeOnContentClick:{type:Boolean,default:!0},disabled:Boolean,disableKeys:Boolean,maxHeight:{type:[Number,String],default:"auto"},offsetX:Boolean,offsetY:Boolean,openOnHover:Boolean,origin:{type:String,default:"top left"},transition:{type:[Boolean,String],default:"v-menu-transition"}},data(){return{calculatedTopAuto:0,defaultOffset:8,hasJustFocused:!1,listIndex:-1,resizeTimeout:0,selectedIndex:null,tiles:[]}},computed:{activeTile(){return this.tiles[this.listIndex]},calculatedLeft(){const t=Math.max(this.dimensions.content.width,parseFloat(this.calculatedMinWidth));return this.auto?(0,d.kb)(this.calcXOverflow(this.calcLeftAuto(),t))||"0":this.calcLeft(t)||"0"},calculatedMaxHeight(){const t=this.auto?"200px":(0,d.kb)(this.maxHeight);return t||"0"},calculatedMaxWidth(){return(0,d.kb)(this.maxWidth)||"0"},calculatedMinWidth(){if(this.minWidth)return(0,d.kb)(this.minWidth)||"0";const t=Math.min(this.dimensions.activator.width+Number(this.nudgeWidth)+(this.auto?16:0),Math.max(this.pageWidth-24,0)),e=isNaN(parseInt(this.calculatedMaxWidth))?t:parseInt(this.calculatedMaxWidth);return(0,d.kb)(Math.min(e,t))||"0"},calculatedTop(){const t=this.auto?(0,d.kb)(this.calcYOverflow(this.calculatedTopAuto)):this.calcTop();return t||"0"},hasClickableTiles(){return Boolean(this.tiles.find((t=>t.tabIndex>-1)))},styles(){return{maxHeight:this.calculatedMaxHeight,minWidth:this.calculatedMinWidth,maxWidth:this.calculatedMaxWidth,top:this.calculatedTop,left:this.calculatedLeft,transformOrigin:this.origin,zIndex:this.zIndex||this.activeZIndex}}},watch:{isActive(t){t||(this.listIndex=-1)},isContentActive(t){this.hasJustFocused=t},listIndex(t,e){if(t in this.tiles){const e=this.tiles[t];e.classList.add("v-list-item--highlighted");const i=this.$refs.content.scrollTop,s=this.$refs.content.clientHeight;i>e.offsetTop-8?(0,y.Z)(e.offsetTop-e.clientHeight,{appOffset:!1,duration:300,container:this.$refs.content}):i+s<e.offsetTop+e.clientHeight+8&&(0,y.Z)(e.offsetTop-s+2*e.clientHeight,{appOffset:!1,duration:300,container:this.$refs.content})}e in this.tiles&&this.tiles[e].classList.remove("v-list-item--highlighted")}},created(){this.$attrs.hasOwnProperty("full-width")&&(0,x.Jk)("full-width",this)},mounted(){this.isActive&&this.callActivate()},methods:{activate(){this.updateDimensions(),requestAnimationFrame((()=>{this.startTransition().then((()=>{this.$refs.content&&(this.calculatedTopAuto=this.calcTopAuto(),this.auto&&(this.$refs.content.scrollTop=this.calcScrollPosition()))}))}))},calcScrollPosition(){const t=this.$refs.content,e=t.querySelector(".v-list-item--active"),i=t.scrollHeight-t.offsetHeight;return e?Math.min(i,Math.max(0,e.offsetTop-t.offsetHeight/2+e.offsetHeight/2)):t.scrollTop},calcLeftAuto(){return parseInt(this.dimensions.activator.left-2*this.defaultOffset)},calcTopAuto(){const t=this.$refs.content,e=t.querySelector(".v-list-item--active");if(e||(this.selectedIndex=null),this.offsetY||!e)return this.computedTop;this.selectedIndex=Array.from(this.tiles).indexOf(e);const i=e.offsetTop-this.calcScrollPosition(),s=t.querySelector(".v-list-item").offsetTop;return this.computedTop-i-s-1},changeListIndex(t){if(this.getTiles(),this.isActive&&this.hasClickableTiles)if(t.keyCode!==d.Do.tab){if(t.keyCode===d.Do.down)this.nextTile();else if(t.keyCode===d.Do.up)this.prevTile();else if(t.keyCode===d.Do.end)this.lastTile();else if(t.keyCode===d.Do.home)this.firstTile();else{if(t.keyCode!==d.Do.enter||-1===this.listIndex)return;this.tiles[this.listIndex].click()}t.preventDefault()}else this.isActive=!1},closeConditional(t){const e=t.target;return this.isActive&&!this._isDestroyed&&this.closeOnClick&&!this.$refs.content.contains(e)},genActivatorAttributes(){const t=n.Z.options.methods.genActivatorAttributes.call(this);return this.activeTile&&this.activeTile.id?{...t,"aria-activedescendant":this.activeTile.id}:t},genActivatorListeners(){const t=p.options.methods.genActivatorListeners.call(this);return this.disableKeys||(t.keydown=this.onKeyDown),t},genTransition(){const t=this.genContent();return this.transition?this.$createElement("transition",{props:{name:this.transition}},[t]):t},genDirectives(){const t=[{name:"show",value:this.isContentActive}];return!this.openOnHover&&this.closeOnClick&&t.push({name:"click-outside",value:{handler:()=>{this.isActive=!1},closeConditional:this.closeConditional,include:()=>[this.$el,...this.getOpenDependentElements()]}}),t},genContent(){const t={attrs:{...this.getScopeIdAttrs(),role:"role"in this.$attrs?this.$attrs.role:"menu"},staticClass:"v-menu__content",class:{...this.rootThemeClasses,...this.roundedClasses,"v-menu__content--auto":this.auto,"v-menu__content--fixed":this.activatorFixed,menuable__content__active:this.isActive,[this.contentClass.trim()]:!0},style:this.styles,directives:this.genDirectives(),ref:"content",on:{click:t=>{const e=t.target;e.getAttribute("disabled")||this.closeOnContentClick&&(this.isActive=!1)},keydown:this.onKeyDown}};return this.$listeners.scroll&&(t.on=t.on||{},t.on.scroll=this.$listeners.scroll),!this.disabled&&this.openOnHover&&(t.on=t.on||{},t.on.mouseenter=this.mouseEnterHandler),this.openOnHover&&(t.on=t.on||{},t.on.mouseleave=this.mouseLeaveHandler),this.$createElement("div",t,this.getContentSlot())},getTiles(){this.$refs.content&&(this.tiles=Array.from(this.$refs.content.querySelectorAll(".v-list-item, .v-divider, .v-subheader")))},mouseEnterHandler(){this.runDelay("open",(()=>{this.hasJustFocused||(this.hasJustFocused=!0)}))},mouseLeaveHandler(t){this.runDelay("close",(()=>{var e;(null===(e=this.$refs.content)||void 0===e?void 0:e.contains(t.relatedTarget))||requestAnimationFrame((()=>{this.isActive=!1,this.callDeactivate()}))}))},nextTile(){const t=this.tiles[this.listIndex+1];if(!t){if(!this.tiles.length)return;return this.listIndex=-1,void this.nextTile()}this.listIndex++,-1===t.tabIndex&&this.nextTile()},prevTile(){const t=this.tiles[this.listIndex-1];if(!t){if(!this.tiles.length)return;return this.listIndex=this.tiles.length,void this.prevTile()}this.listIndex--,-1===t.tabIndex&&this.prevTile()},lastTile(){const t=this.tiles[this.tiles.length-1];t&&(this.listIndex=this.tiles.length-1,-1===t.tabIndex&&this.prevTile())},firstTile(){const t=this.tiles[0];t&&(this.listIndex=0,-1===t.tabIndex&&this.nextTile())},onKeyDown(t){if(t.keyCode===d.Do.esc){setTimeout((()=>{this.isActive=!1}));const t=this.getActivator();this.$nextTick((()=>t&&t.focus()))}else!this.isActive&&[d.Do.up,d.Do.down].includes(t.keyCode)&&(this.isActive=!0);this.$nextTick((()=>this.changeListIndex(t)))},onResize(){this.isActive&&(this.$refs.content.offsetWidth,this.updateDimensions(),clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(this.updateDimensions,100))}},render(t){const e={staticClass:"v-menu",class:{"v-menu--attached":""===this.attach||!0===this.attach||"attach"===this.attach},directives:[{arg:"500",name:"resize",value:this.onResize}]};return t("div",e,[!this.activator&&this.genActivator(),this.showLazyContent((()=>[this.$createElement(s.Z,{props:{root:!0,light:this.light,dark:this.dark}},[this.genTransition()])]))])}})},756:function(t,e,i){"use strict";var s=i(1302),n=i(9367),a=i(2066),r=i(8131),o=i(5530);const l=(0,o.Z)(n.Z,(0,s.d)("tabsBar"),a.Z);e["Z"]=l.extend().extend().extend({name:"v-tab",props:{ripple:{type:[Boolean,Object],default:!0}},data:()=>({proxyClass:"v-tab--active"}),computed:{classes(){return{"v-tab":!0,...n.Z.options.computed.classes.call(this),"v-tab--disabled":this.disabled,...this.groupClasses}},value(){let t=this.to||this.href;if(null==t)return t;if(this.$router&&this.to===Object(this.to)){const e=this.$router.resolve(this.to,this.$route,this.append);t=e.href}return t.replace("#","")}},methods:{click(t){this.disabled?t.preventDefault():(this.href&&this.href.indexOf("#")>-1&&t.preventDefault(),t.detail&&this.$el.blur(),this.$emit("click",t),this.to||this.toggle())},toggle(){this.isActive&&(this.tabsBar.mandatory||this.to)||this.$emit("change")}},render(t){const{tag:e,data:i}=this.generateRouteLink();return i.attrs={...i.attrs,"aria-selected":String(this.isActive),role:"tab",tabindex:this.disabled?-1:0},i.on={...i.on,keydown:t=>{t.keyCode===r.Do.enter&&this.click(t),this.$emit("keydown",t)}},t(e,i,this.$slots.default)}})},6975:function(t,e,i){"use strict";i.d(e,{Z:function(){return c}});var s=i(6986),n=i(1302),a=i(2706),r=i(8131),o=i(5530);const l=(0,o.Z)(s.Z,(0,n.d)("windowGroup","v-window-item","v-window"));var h=l.extend().extend().extend({name:"v-window-item",directives:{Touch:a.Z},props:{disabled:Boolean,reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},value:{required:!1}},data(){return{isActive:!1,inTransition:!1}},computed:{classes(){return this.groupClasses},computedTransition(){return this.windowGroup.internalReverse?"undefined"!==typeof this.reverseTransition?this.reverseTransition||"":this.windowGroup.computedTransition:"undefined"!==typeof this.transition?this.transition||"":this.windowGroup.computedTransition}},methods:{genDefaultSlot(){return this.$slots.default},genWindowItem(){return this.$createElement("div",{staticClass:"v-window-item",class:this.classes,directives:[{name:"show",value:this.isActive}],on:this.$listeners},this.genDefaultSlot())},onAfterTransition(){this.inTransition&&(this.inTransition=!1,this.windowGroup.transitionCount>0&&(this.windowGroup.transitionCount--,0===this.windowGroup.transitionCount&&(this.windowGroup.transitionHeight=void 0)))},onBeforeTransition(){this.inTransition||(this.inTransition=!0,0===this.windowGroup.transitionCount&&(this.windowGroup.transitionHeight=(0,r.kb)(this.windowGroup.$el.clientHeight)),this.windowGroup.transitionCount++)},onTransitionCancelled(){this.onAfterTransition()},onEnter(t){this.inTransition&&this.$nextTick((()=>{this.computedTransition&&this.inTransition&&(this.windowGroup.transitionHeight=(0,r.kb)(t.clientHeight))}))}},render(t){return t("transition",{props:{name:this.computedTransition},on:{beforeEnter:this.onBeforeTransition,afterEnter:this.onAfterTransition,enterCancelled:this.onTransitionCancelled,beforeLeave:this.onBeforeTransition,afterLeave:this.onAfterTransition,leaveCancelled:this.onTransitionCancelled,enter:this.onEnter}},this.showLazyContent((()=>[this.genWindowItem()])))}}),c=h.extend({name:"v-tab-item",props:{id:String},methods:{genWindowItem(){const t=h.options.methods.genWindowItem.call(this);return t.data.domProps=t.data.domProps||{},t.data.domProps.id=this.id||this.value,t}}})},6899:function(t,e,i){"use strict";i.d(e,{Z:function(){return _}});var s=i(9524),n=i(6930),a=i(1569),r=i(9989),o=i(7293),l=i(2706),h=i(5530),c=i(8131);function d(t){const e=.501,i=Math.abs(t);return Math.sign(t)*(i/((1/e-2)*(1-i)+1))}function u(t,e,i,s){const n=t.clientWidth,a=i?e.content-t.offsetLeft-n:t.offsetLeft;i&&(s=-s);const r=e.wrapper+s,o=n+a,l=.4*n;return a<=s?s=Math.max(a-l,0):r<=o&&(s=Math.min(s-(r-o-l),e.content-e.wrapper)),i?-s:s}function p(t,e,i){const{offsetLeft:s,clientWidth:n}=t;if(i){const t=e.content-s-n/2-e.wrapper/2;return-Math.min(e.content-e.wrapper,Math.max(0,t))}{const t=s+n/2-e.wrapper/2;return Math.min(e.content-e.wrapper,Math.max(0,t))}}const g=(0,h.Z)(a.y,r.Z).extend({name:"base-slide-group",directives:{Resize:o.Z,Touch:l.Z},props:{activeClass:{type:String,default:"v-slide-item--active"},centerActive:Boolean,nextIcon:{type:String,default:"$next"},prevIcon:{type:String,default:"$prev"},showArrows:{type:[Boolean,String],validator:t=>"boolean"===typeof t||["always","desktop","mobile"].includes(t)}},data:()=>({isOverflowing:!1,resizeTimeout:0,startX:0,isSwipingHorizontal:!1,isSwiping:!1,scrollOffset:0,widths:{content:0,wrapper:0}}),computed:{canTouch(){return"undefined"!==typeof window},__cachedNext(){return this.genTransition("next")},__cachedPrev(){return this.genTransition("prev")},classes(){return{...a.y.options.computed.classes.call(this),"v-slide-group":!0,"v-slide-group--has-affixes":this.hasAffixes,"v-slide-group--is-overflowing":this.isOverflowing}},hasAffixes(){switch(this.showArrows){case"always":return!0;case"desktop":return!this.isMobile;case!0:return this.isOverflowing||Math.abs(this.scrollOffset)>0;case"mobile":return this.isMobile||this.isOverflowing||Math.abs(this.scrollOffset)>0;default:return!this.isMobile&&(this.isOverflowing||Math.abs(this.scrollOffset)>0)}},hasNext(){if(!this.hasAffixes)return!1;const{content:t,wrapper:e}=this.widths;return t>Math.abs(this.scrollOffset)+e},hasPrev(){return this.hasAffixes&&0!==this.scrollOffset}},watch:{internalValue:"setWidths",isOverflowing:"setWidths",scrollOffset(t){this.$vuetify.rtl&&(t=-t);let e=t<=0?d(-t):t>this.widths.content-this.widths.wrapper?-(this.widths.content-this.widths.wrapper)+d(this.widths.content-this.widths.wrapper-t):-t;this.$vuetify.rtl&&(e=-e),this.$refs.content.style.transform=`translateX(${e}px)`}},mounted(){if("undefined"!==typeof ResizeObserver){const t=new ResizeObserver((()=>{this.onResize()}));t.observe(this.$el),t.observe(this.$refs.content),this.$on("hook:destroyed",(()=>{t.disconnect()}))}else{let t=0;this.$on("hook:beforeUpdate",(()=>{var e;t=((null===(e=this.$refs.content)||void 0===e?void 0:e.children)||[]).length})),this.$on("hook:updated",(()=>{var e;t!==((null===(e=this.$refs.content)||void 0===e?void 0:e.children)||[]).length&&this.setWidths()}))}},methods:{onScroll(){this.$refs.wrapper.scrollLeft=0},onFocusin(t){if(this.isOverflowing)for(const e of(0,c.iZ)(t))for(const t of this.items)if(t.$el===e)return void(this.scrollOffset=u(t.$el,this.widths,this.$vuetify.rtl,this.scrollOffset))},genNext(){const t=this.$scopedSlots.next?this.$scopedSlots.next({}):this.$slots.next||this.__cachedNext;return this.$createElement("div",{staticClass:"v-slide-group__next",class:{"v-slide-group__next--disabled":!this.hasNext},on:{click:()=>this.onAffixClick("next")},key:"next"},[t])},genContent(){return this.$createElement("div",{staticClass:"v-slide-group__content",ref:"content",on:{focusin:this.onFocusin}},this.$slots.default)},genData(){return{class:this.classes,directives:[{name:"resize",value:this.onResize}]}},genIcon(t){let e=t;this.$vuetify.rtl&&"prev"===t?e="next":this.$vuetify.rtl&&"next"===t&&(e="prev");const i=`${t[0].toUpperCase()}${t.slice(1)}`,n=this[`has${i}`];return this.showArrows||n?this.$createElement(s.Z,{props:{disabled:!n}},this[`${e}Icon`]):null},genPrev(){const t=this.$scopedSlots.prev?this.$scopedSlots.prev({}):this.$slots.prev||this.__cachedPrev;return this.$createElement("div",{staticClass:"v-slide-group__prev",class:{"v-slide-group__prev--disabled":!this.hasPrev},on:{click:()=>this.onAffixClick("prev")},key:"prev"},[t])},genTransition(t){return this.$createElement(n.Z5,[this.genIcon(t)])},genWrapper(){return this.$createElement("div",{staticClass:"v-slide-group__wrapper",directives:[{name:"touch",value:{start:t=>this.overflowCheck(t,this.onTouchStart),move:t=>this.overflowCheck(t,this.onTouchMove),end:t=>this.overflowCheck(t,this.onTouchEnd)}}],ref:"wrapper",on:{scroll:this.onScroll}},[this.genContent()])},calculateNewOffset(t,e,i,s){const n=i?-1:1,a=n*s+("prev"===t?-1:1)*e.wrapper;return n*Math.max(Math.min(a,e.content-e.wrapper),0)},onAffixClick(t){this.$emit(`click:${t}`),this.scrollTo(t)},onResize(){this._isDestroyed||this.setWidths()},onTouchStart(t){const{content:e}=this.$refs;this.startX=this.scrollOffset+t.touchstartX,e.style.setProperty("transition","none"),e.style.setProperty("willChange","transform")},onTouchMove(t){if(this.canTouch){if(!this.isSwiping){const e=t.touchmoveX-t.touchstartX,i=t.touchmoveY-t.touchstartY;this.isSwipingHorizontal=Math.abs(e)>Math.abs(i),this.isSwiping=!0}this.isSwipingHorizontal&&(this.scrollOffset=this.startX-t.touchmoveX,document.documentElement.style.overflowY="hidden")}},onTouchEnd(){if(!this.canTouch)return;const{content:t,wrapper:e}=this.$refs,i=t.clientWidth-e.clientWidth;t.style.setProperty("transition",null),t.style.setProperty("willChange",null),this.$vuetify.rtl?this.scrollOffset>0||!this.isOverflowing?this.scrollOffset=0:this.scrollOffset<=-i&&(this.scrollOffset=-i):this.scrollOffset<0||!this.isOverflowing?this.scrollOffset=0:this.scrollOffset>=i&&(this.scrollOffset=i),this.isSwiping=!1,document.documentElement.style.removeProperty("overflow-y")},overflowCheck(t,e){t.stopPropagation(),this.isOverflowing&&e(t)},scrollIntoView(){if(!this.selectedItem&&this.items.length){const t=this.items[this.items.length-1].$el.getBoundingClientRect(),e=this.$refs.wrapper.getBoundingClientRect();(this.$vuetify.rtl&&e.right<t.right||!this.$vuetify.rtl&&e.left>t.left)&&this.scrollTo("prev")}this.selectedItem&&(0===this.selectedIndex||!this.centerActive&&!this.isOverflowing?this.scrollOffset=0:this.centerActive?this.scrollOffset=p(this.selectedItem.$el,this.widths,this.$vuetify.rtl):this.isOverflowing&&(this.scrollOffset=u(this.selectedItem.$el,this.widths,this.$vuetify.rtl,this.scrollOffset)))},scrollTo(t){this.scrollOffset=this.calculateNewOffset(t,{content:this.$refs.content?this.$refs.content.clientWidth:0,wrapper:this.$refs.wrapper?this.$refs.wrapper.clientWidth:0},this.$vuetify.rtl,this.scrollOffset)},setWidths(){window.requestAnimationFrame((()=>{if(this._isDestroyed)return;const{content:t,wrapper:e}=this.$refs;this.widths={content:t?t.clientWidth:0,wrapper:e?e.clientWidth:0},this.isOverflowing=this.widths.wrapper+1<this.widths.content,this.scrollIntoView()}))}},render(t){return t("div",this.genData(),[this.genPrev(),this.genWrapper(),this.genNext()])}});g.extend({name:"v-slide-group",provide(){return{slideGroup:this}}});var f=i(2066),m=i(8191),v=(0,h.Z)(g,m.Z,f.Z).extend({name:"v-tabs-bar",provide(){return{tabsBar:this}},computed:{classes(){return{...g.options.computed.classes.call(this),"v-tabs-bar":!0,"v-tabs-bar--is-mobile":this.isMobile,"v-tabs-bar--show-arrows":this.showArrows,...this.themeClasses}}},watch:{items:"callSlider",internalValue:"callSlider",$route:"onRouteChange"},methods:{callSlider(){this.isBooted&&this.$emit("call:slider")},genContent(){const t=g.options.methods.genContent.call(this);return t.data=t.data||{},t.data.staticClass+=" v-tabs-bar__content",t},onRouteChange(t,e){if(this.mandatory)return;const i=this.items,s=t.path,n=e.path;let a=!1,r=!1;for(const o of i)if(o.to===n?r=!0:o.to===s&&(a=!0),a&&r)break;!a&&r&&(this.internalValue=void 0)}},render(t){const e=g.options.render.call(this,t);return e.data.attrs={role:"tablist"},e}}),b=i(8205),x=a.y.extend({name:"v-window",directives:{Touch:l.Z},provide(){return{windowGroup:this}},props:{activeClass:{type:String,default:"v-window-item--active"},continuous:Boolean,mandatory:{type:Boolean,default:!0},nextIcon:{type:[Boolean,String],default:"$next"},prevIcon:{type:[Boolean,String],default:"$prev"},reverse:Boolean,showArrows:Boolean,showArrowsOnHover:Boolean,touch:Object,touchless:Boolean,value:{required:!1},vertical:Boolean},data(){return{changedByDelimiters:!1,internalHeight:void 0,transitionHeight:void 0,transitionCount:0,isBooted:!1,isReverse:!1}},computed:{isActive(){return this.transitionCount>0},classes(){return{...a.y.options.computed.classes.call(this),"v-window--show-arrows-on-hover":this.showArrowsOnHover}},computedTransition(){if(!this.isBooted)return"";const t=this.vertical?"y":"x",e=this.internalReverse?!this.isReverse:this.isReverse,i=e?"-reverse":"";return`v-window-${t}${i}-transition`},hasActiveItems(){return Boolean(this.items.find((t=>!t.disabled)))},hasNext(){return this.continuous||this.internalIndex<this.items.length-1},hasPrev(){return this.continuous||this.internalIndex>0},internalIndex(){return this.items.findIndex(((t,e)=>this.internalValue===this.getValue(t,e)))},internalReverse(){return this.$vuetify.rtl?!this.reverse:this.reverse}},watch:{internalIndex(t,e){this.isReverse=this.updateReverse(t,e)}},mounted(){window.requestAnimationFrame((()=>this.isBooted=!0))},methods:{genDefaultSlot(){return this.$slots.default},genContainer(){const t=[this.genDefaultSlot()];return this.showArrows&&t.push(this.genControlIcons()),this.$createElement("div",{staticClass:"v-window__container",class:{"v-window__container--is-active":this.isActive},style:{height:this.internalHeight||this.transitionHeight}},t)},genIcon(t,e,i){var n,a,r;const o={click:t=>{t.stopPropagation(),this.changedByDelimiters=!0,i()}},l={"aria-label":this.$vuetify.lang.t(`$vuetify.carousel.${t}`)},h=null!==(r=null===(a=(n=this.$scopedSlots)[t])||void 0===a?void 0:a.call(n,{on:o,attrs:l}))&&void 0!==r?r:[this.$createElement(b.Z,{props:{icon:!0},attrs:l,on:o},[this.$createElement(s.Z,{props:{large:!0}},e)])];return this.$createElement("div",{staticClass:`v-window__${t}`},h)},genControlIcons(){const t=[],e=this.$vuetify.rtl?this.nextIcon:this.prevIcon;if(this.hasPrev&&e&&"string"===typeof e){const i=this.genIcon("prev",e,this.prev);i&&t.push(i)}const i=this.$vuetify.rtl?this.prevIcon:this.nextIcon;if(this.hasNext&&i&&"string"===typeof i){const e=this.genIcon("next",i,this.next);e&&t.push(e)}return t},getNextIndex(t){const e=(t+1)%this.items.length,i=this.items[e];return i.disabled?this.getNextIndex(e):e},getPrevIndex(t){const e=(t+this.items.length-1)%this.items.length,i=this.items[e];return i.disabled?this.getPrevIndex(e):e},next(){if(!this.hasActiveItems||!this.hasNext)return;const t=this.getNextIndex(this.internalIndex),e=this.items[t];this.internalValue=this.getValue(e,t)},prev(){if(!this.hasActiveItems||!this.hasPrev)return;const t=this.getPrevIndex(this.internalIndex),e=this.items[t];this.internalValue=this.getValue(e,t)},updateReverse(t,e){const i=this.items.length,s=i-1;return i<=2?t<e:t===s&&0===e||(0!==t||e!==s)&&t<e}},render(t){const e={staticClass:"v-window",class:this.classes,directives:[]};if(!this.touchless){const t=this.touch||{left:()=>{this.$vuetify.rtl?this.prev():this.next()},right:()=>{this.$vuetify.rtl?this.next():this.prev()},end:t=>{t.stopPropagation()},start:t=>{t.stopPropagation()}};e.directives.push({name:"touch",value:t})}return t("div",e,[this.genContainer()])}}),y=x.extend({name:"v-tabs-items",props:{mandatory:{type:Boolean,default:!1}},computed:{classes(){return{...x.options.computed.classes.call(this),"v-tabs-items":!0}},isDark(){return this.rootIsDark}},methods:{getValue(t,e){return t.id||a.y.options.methods.getValue.call(this,t,e)}}}),w=i(5836),k=(0,h.Z)(w.Z).extend({name:"v-tabs-slider",render(t){return t("div",this.setBackgroundColor(this.color,{staticClass:"v-tabs-slider"}))}}),C=i(7779);const S=(0,h.Z)(w.Z,C.Z,f.Z);var _=S.extend().extend({name:"v-tabs",directives:{Resize:o.Z},props:{activeClass:{type:String,default:""},alignWithTitle:Boolean,backgroundColor:String,centerActive:Boolean,centered:Boolean,fixedTabs:Boolean,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,iconsAndText:Boolean,mobileBreakpoint:[String,Number],nextIcon:{type:String,default:"$next"},optional:Boolean,prevIcon:{type:String,default:"$prev"},right:Boolean,showArrows:[Boolean,String],sliderColor:String,sliderSize:{type:[Number,String],default:2},vertical:Boolean},data(){return{resizeTimeout:0,slider:{height:null,left:null,right:null,top:null,width:null},transitionTime:300}},computed:{classes(){return{"v-tabs--align-with-title":this.alignWithTitle,"v-tabs--centered":this.centered,"v-tabs--fixed-tabs":this.fixedTabs,"v-tabs--grow":this.grow,"v-tabs--icons-and-text":this.iconsAndText,"v-tabs--right":this.right,"v-tabs--vertical":this.vertical,...this.themeClasses}},isReversed(){return this.$vuetify.rtl&&this.vertical},sliderStyles(){return{height:(0,c.kb)(this.slider.height),left:this.isReversed?void 0:(0,c.kb)(this.slider.left),right:this.isReversed?(0,c.kb)(this.slider.right):void 0,top:this.vertical?(0,c.kb)(this.slider.top):void 0,transition:null!=this.slider.left?null:"none",width:(0,c.kb)(this.slider.width)}},computedColor(){return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"}},watch:{alignWithTitle:"callSlider",centered:"callSlider",centerActive:"callSlider",fixedTabs:"callSlider",grow:"callSlider",iconsAndText:"callSlider",right:"callSlider",showArrows:"callSlider",vertical:"callSlider","$vuetify.application.left":"onResize","$vuetify.application.right":"onResize","$vuetify.rtl":"onResize"},mounted(){if("undefined"!==typeof ResizeObserver){const t=new ResizeObserver((()=>{this.onResize()}));t.observe(this.$el),this.$on("hook:destroyed",(()=>{t.disconnect()}))}this.$nextTick((()=>{window.setTimeout(this.callSlider,30)}))},methods:{callSlider(){return!this.hideSlider&&this.$refs.items&&this.$refs.items.selectedItems.length?(this.$nextTick((()=>{const t=this.$refs.items.selectedItems[0];if(!t||!t.$el)return this.slider.width=0,void(this.slider.left=0);const e=t.$el;this.slider={height:this.vertical?e.scrollHeight:Number(this.sliderSize),left:this.vertical?0:e.offsetLeft,right:this.vertical?0:e.offsetLeft+e.offsetWidth,top:e.offsetTop,width:this.vertical?Number(this.sliderSize):e.scrollWidth}})),!0):(this.slider.width=0,!1)},genBar(t,e){const i={style:{height:(0,c.kb)(this.height)},props:{activeClass:this.activeClass,centerActive:this.centerActive,dark:this.dark,light:this.light,mandatory:!this.optional,mobileBreakpoint:this.mobileBreakpoint,nextIcon:this.nextIcon,prevIcon:this.prevIcon,showArrows:this.showArrows,value:this.internalValue},on:{"call:slider":this.callSlider,change:t=>{this.internalValue=t}},ref:"items"};return this.setTextColor(this.computedColor,i),this.setBackgroundColor(this.backgroundColor,i),this.$createElement(v,i,[this.genSlider(e),t])},genItems(t,e){return t||(e.length?this.$createElement(y,{props:{value:this.internalValue},on:{change:t=>{this.internalValue=t}}},e):null)},genSlider(t){return this.hideSlider?null:(t||(t=this.$createElement(k,{props:{color:this.sliderColor}})),this.$createElement("div",{staticClass:"v-tabs-slider-wrapper",style:this.sliderStyles},[t]))},onResize(){this._isDestroyed||(clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(this.callSlider,0))},parseNodes(){let t=null,e=null;const i=[],s=[],n=this.$slots.default||[],a=n.length;for(let r=0;r<a;r++){const a=n[r];if(a.componentOptions)switch(a.componentOptions.Ctor.options.name){case"v-tabs-slider":e=a;break;case"v-tabs-items":t=a;break;case"v-tab-item":i.push(a);break;default:s.push(a)}else s.push(a)}return{tab:s,slider:e,items:t,item:i}}},render(t){const{tab:e,slider:i,items:s,item:n}=this.parseNodes();return t("div",{staticClass:"v-tabs",class:this.classes,directives:[{name:"resize",modifiers:{quiet:!0},value:this.onResize}]},[this.genBar(e,i),this.genItems(s,n)])}})},9007:function(t,e,i){"use strict";i.d(e,{Z:function(){return w}});i(2838);var s=i(2926),n=i(2066),a=i(5530),r=(0,a.Z)(n.Z).extend({name:"v-counter",functional:!0,props:{value:{type:[Number,String],default:""},max:[Number,String]},render(t,e){const{props:i}=e,s=parseInt(i.max,10),a=parseInt(i.value,10),r=s?`${a} / ${s}`:String(i.value),o=s&&a>s;return t("div",{staticClass:"v-counter",class:{"error--text":o,...(0,n.X)(e)}},r)}}),o=r,l=i(2980),h=i(7006),c=i(8219),d=i(144);function u(t){return d["default"].extend({name:"intersectable",data:()=>({isIntersecting:!1}),mounted(){h.Z.inserted(this.$el,{name:"intersect",value:this.onObserve},this.$vnode)},destroyed(){h.Z.unbind(this.$el,{name:"intersect",value:this.onObserve},this.$vnode)},methods:{onObserve(e,i,s){if(this.isIntersecting=s,s)for(let n=0,a=t.onVisible.length;n<a;n++){const e=this[t.onVisible[n]];"function"!==typeof e?(0,c.Kd)(t.onVisible[n]+" method is not available on the instance but referenced in intersectable mixin options"):e()}}}})}var p=i(9799),g=i(371),f=i(7293),m=i(293),v=i(3118),b=i(8131);const x=(0,a.Z)(s.Z,u({onVisible:["onResize","tryAutofocus"]}),p.Z),y=["color","file","time","date","datetime-local","week","month"];var w=x.extend().extend({name:"v-text-field",directives:{resize:f.Z,ripple:m.Z},inheritAttrs:!1,props:{appendOuterIcon:String,autofocus:Boolean,clearable:Boolean,clearIcon:{type:String,default:"$clear"},counter:[Boolean,Number,String],counterValue:Function,filled:Boolean,flat:Boolean,fullWidth:Boolean,label:String,outlined:Boolean,placeholder:String,prefix:String,prependInnerIcon:String,persistentPlaceholder:Boolean,reverse:Boolean,rounded:Boolean,shaped:Boolean,singleLine:Boolean,solo:Boolean,soloInverted:Boolean,suffix:String,type:{type:String,default:"text"}},data:()=>({badInput:!1,labelWidth:0,prefixWidth:0,prependWidth:0,initialValue:null,isBooted:!1,isClearing:!1}),computed:{classes(){return{...s.Z.options.computed.classes.call(this),"v-text-field":!0,"v-text-field--full-width":this.fullWidth,"v-text-field--prefix":this.prefix,"v-text-field--single-line":this.isSingle,"v-text-field--solo":this.isSolo,"v-text-field--solo-inverted":this.soloInverted,"v-text-field--solo-flat":this.flat,"v-text-field--filled":this.filled,"v-text-field--is-booted":this.isBooted,"v-text-field--enclosed":this.isEnclosed,"v-text-field--reverse":this.reverse,"v-text-field--outlined":this.outlined,"v-text-field--placeholder":this.placeholder,"v-text-field--rounded":this.rounded,"v-text-field--shaped":this.shaped}},computedColor(){const t=g.Z.options.computed.computedColor.call(this);return this.soloInverted&&this.isFocused?this.color||"primary":t},computedCounterValue(){return"function"===typeof this.counterValue?this.counterValue(this.internalValue):[...(this.internalValue||"").toString()].length},hasCounter(){return!1!==this.counter&&null!=this.counter},hasDetails(){return s.Z.options.computed.hasDetails.call(this)||this.hasCounter},internalValue:{get(){return this.lazyValue},set(t){this.lazyValue=t,this.$emit("input",this.lazyValue)}},isDirty(){var t;return(null===(t=this.lazyValue)||void 0===t?void 0:t.toString().length)>0||this.badInput},isEnclosed(){return this.filled||this.isSolo||this.outlined},isLabelActive(){return this.isDirty||y.includes(this.type)},isSingle(){return this.isSolo||this.singleLine||this.fullWidth||this.filled&&!this.hasLabel},isSolo(){return this.solo||this.soloInverted},labelPosition(){let t=this.prefix&&!this.labelValue?this.prefixWidth:0;return this.labelValue&&this.prependWidth&&(t-=this.prependWidth),this.$vuetify.rtl===this.reverse?{left:t,right:"auto"}:{left:"auto",right:t}},showLabel(){return this.hasLabel&&!(this.isSingle&&this.labelValue)},labelValue(){return this.isFocused||this.isLabelActive||this.persistentPlaceholder}},watch:{outlined:"setLabelWidth",label(){this.$nextTick(this.setLabelWidth)},prefix(){this.$nextTick(this.setPrefixWidth)},isFocused:"updateValue",value(t){this.lazyValue=t}},created(){this.$attrs.hasOwnProperty("box")&&(0,c.fK)("box","filled",this),this.$attrs.hasOwnProperty("browser-autocomplete")&&(0,c.fK)("browser-autocomplete","autocomplete",this),this.shaped&&!(this.filled||this.outlined||this.isSolo)&&(0,c.Kd)("shaped should be used with either filled or outlined",this)},mounted(){this.$watch((()=>this.labelValue),this.setLabelWidth),this.autofocus&&this.tryAutofocus(),requestAnimationFrame((()=>{this.isBooted=!0,requestAnimationFrame((()=>{this.isIntersecting||this.onResize()}))}))},methods:{focus(){this.onFocus()},blur(t){window.requestAnimationFrame((()=>{this.$refs.input&&this.$refs.input.blur()}))},clearableCallback(){this.$refs.input&&this.$refs.input.focus(),this.$nextTick((()=>this.internalValue=null))},genAppendSlot(){const t=[];return this.$slots["append-outer"]?t.push(this.$slots["append-outer"]):this.appendOuterIcon&&t.push(this.genIcon("appendOuter")),this.genSlot("append","outer",t)},genPrependInnerSlot(){const t=[];return this.$slots["prepend-inner"]?t.push(this.$slots["prepend-inner"]):this.prependInnerIcon&&t.push(this.genIcon("prependInner")),this.genSlot("prepend","inner",t)},genIconSlot(){const t=[];return this.$slots.append?t.push(this.$slots.append):this.appendIcon&&t.push(this.genIcon("append")),this.genSlot("append","inner",t)},genInputSlot(){const t=s.Z.options.methods.genInputSlot.call(this),e=this.genPrependInnerSlot();return e&&(t.children=t.children||[],t.children.unshift(e)),t},genClearIcon(){return this.clearable?this.isDirty?this.genSlot("append","inner",[this.genIcon("clear",this.clearableCallback)]):this.genSlot("append","inner",[this.$createElement("div")]):null},genCounter(){var t,e,i;if(!this.hasCounter)return null;const s=!0===this.counter?this.attrs$.maxlength:this.counter,n={dark:this.dark,light:this.light,max:s,value:this.computedCounterValue};return null!==(i=null===(e=(t=this.$scopedSlots).counter)||void 0===e?void 0:e.call(t,{props:n}))&&void 0!==i?i:this.$createElement(o,{props:n})},genControl(){return s.Z.options.methods.genControl.call(this)},genDefaultSlot(){return[this.genFieldset(),this.genTextFieldSlot(),this.genClearIcon(),this.genIconSlot(),this.genProgress()]},genFieldset(){return this.outlined?this.$createElement("fieldset",{attrs:{"aria-hidden":!0}},[this.genLegend()]):null},genLabel(){if(!this.showLabel)return null;const t={props:{absolute:!0,color:this.validationState,dark:this.dark,disabled:this.isDisabled,focused:!this.isSingle&&(this.isFocused||!!this.validationState),for:this.computedId,left:this.labelPosition.left,light:this.light,right:this.labelPosition.right,value:this.labelValue}};return this.$createElement(l.Z,t,this.$slots.label||this.label)},genLegend(){const t=this.singleLine||!this.labelValue&&!this.isDirty?0:this.labelWidth,e=this.$createElement("span",{domProps:{innerHTML:"&#8203;"},staticClass:"notranslate"});return this.$createElement("legend",{style:{width:this.isSingle?void 0:(0,b.kb)(t)}},[e])},genInput(){const t=Object.assign({},this.listeners$);delete t.change;const{title:e,...i}=this.attrs$;return this.$createElement("input",{style:{},domProps:{value:"number"===this.type&&Object.is(this.lazyValue,-0)?"-0":this.lazyValue},attrs:{...i,autofocus:this.autofocus,disabled:this.isDisabled,id:this.computedId,placeholder:this.persistentPlaceholder||this.isFocused||!this.hasLabel?this.placeholder:void 0,readonly:this.isReadonly,type:this.type},on:Object.assign(t,{blur:this.onBlur,input:this.onInput,focus:this.onFocus,keydown:this.onKeyDown}),ref:"input",directives:[{name:"resize",modifiers:{quiet:!0},value:this.onResize}]})},genMessages(){if(!this.showDetails)return null;const t=s.Z.options.methods.genMessages.call(this),e=this.genCounter();return this.$createElement("div",{staticClass:"v-text-field__details"},[t,e])},genTextFieldSlot(){return this.$createElement("div",{staticClass:"v-text-field__slot"},[this.genLabel(),this.prefix?this.genAffix("prefix"):null,this.genInput(),this.suffix?this.genAffix("suffix"):null])},genAffix(t){return this.$createElement("div",{class:`v-text-field__${t}`,ref:t},this[t])},onBlur(t){this.isFocused=!1,t&&this.$nextTick((()=>this.$emit("blur",t)))},onClick(){this.isFocused||this.isDisabled||!this.$refs.input||this.$refs.input.focus()},onFocus(t){if(!this.$refs.input)return;const e=(0,v.e)(this.$el);return e?e.activeElement!==this.$refs.input?this.$refs.input.focus():void(this.isFocused||(this.isFocused=!0,t&&this.$emit("focus",t))):void 0},onInput(t){const e=t.target;this.internalValue=e.value,this.badInput=e.validity&&e.validity.badInput},onKeyDown(t){t.keyCode===b.Do.enter&&this.lazyValue!==this.initialValue&&(this.initialValue=this.lazyValue,this.$emit("change",this.initialValue)),this.$emit("keydown",t)},onMouseDown(t){t.target!==this.$refs.input&&(t.preventDefault(),t.stopPropagation()),s.Z.options.methods.onMouseDown.call(this,t)},onMouseUp(t){this.hasMouseDown&&this.focus(),s.Z.options.methods.onMouseUp.call(this,t)},setLabelWidth(){this.outlined&&(this.labelWidth=this.$refs.label?Math.min(.75*this.$refs.label.scrollWidth+6,this.$el.offsetWidth-24):0)},setPrefixWidth(){this.$refs.prefix&&(this.prefixWidth=this.$refs.prefix.offsetWidth)},setPrependWidth(){this.outlined&&this.$refs["prepend-inner"]&&(this.prependWidth=this.$refs["prepend-inner"].offsetWidth)},tryAutofocus(){if(!this.autofocus||"undefined"===typeof document||!this.$refs.input)return!1;const t=(0,v.e)(this.$el);return!(!t||t.activeElement===this.$refs.input)&&(this.$refs.input.focus(),!0)},updateValue(t){this.hasColor=t,t?this.initialValue=this.lazyValue:this.initialValue!==this.lazyValue&&this.$emit("change",this.lazyValue)},onResize(){this.setLabelWidth(),this.setPrefixWidth(),this.setPrependWidth()}}})},2379:function(t,e,i){"use strict";i.d(e,{Z:function(){return r}});var s=i(9007),n=i(5530);const a=(0,n.Z)(s.Z);var r=a.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:t=>!isNaN(parseFloat(t))},rows:{type:[Number,String],default:5,validator:t=>!isNaN(parseInt(t,10))}},computed:{classes(){return{"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle,...s.Z.options.computed.classes.call(this)}},noResizeHandle(){return this.noResize||this.autoGrow}},watch:{autoGrow(t){this.$nextTick((()=>{var e;t?this.calculateInputHeight():null===(e=this.$refs.input)||void 0===e||e.style.removeProperty("height")}))},lazyValue(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted(){setTimeout((()=>{this.autoGrow&&this.calculateInputHeight()}),0)},methods:{calculateInputHeight(){const t=this.$refs.input;if(!t)return;t.style.height="0";const e=t.scrollHeight,i=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(i,e)+"px"},genInput(){const t=s.Z.options.methods.genInput.call(this);return t.tag="textarea",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput(t){s.Z.options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}})},9770:function(t,e,i){"use strict";var s=i(2066);e["Z"]=s.Z.extend({name:"v-theme-provider",props:{root:Boolean},computed:{isDark(){return this.root?this.rootIsDark:s.Z.options.computed.isDark.call(this)}},render(){return this.$slots.default&&this.$slots.default.find((t=>!t.isComment&&" "!==t.text))}})},7561:function(t,e,i){"use strict";var s=i(1811),n=i(4552),a=i(5530),r=i(8131),o=i(8219);const l=(0,a.Z)(s.Z,n.Z);e["Z"]=l.extend({name:"activatable",props:{activator:{default:null,validator:t=>["string","object"].includes(typeof t)},disabled:Boolean,internalActivator:Boolean,openOnClick:{type:Boolean,default:!0},openOnHover:Boolean,openOnFocus:Boolean},data:()=>({activatorElement:null,activatorNode:[],events:["click","mouseenter","mouseleave","focus"],listeners:{}}),watch:{activator:"resetActivator",openOnFocus:"resetActivator",openOnHover:"resetActivator"},mounted(){const t=(0,r.sp)(this,"activator",!0);t&&["v-slot","normal"].includes(t)&&(0,o.N6)('The activator slot must be bound, try \'<template v-slot:activator="{ on }"><v-btn v-on="on">\'',this),this.addActivatorEvents()},beforeDestroy(){this.removeActivatorEvents()},methods:{addActivatorEvents(){if(!this.activator||this.disabled||!this.getActivator())return;this.listeners=this.genActivatorListeners();const t=Object.keys(this.listeners);for(const e of t)this.getActivator().addEventListener(e,this.listeners[e])},genActivator(){const t=(0,r.z9)(this,"activator",Object.assign(this.getValueProxy(),{on:this.genActivatorListeners(),attrs:this.genActivatorAttributes()}))||[];return this.activatorNode=t,t},genActivatorAttributes(){return{role:this.openOnClick&&!this.openOnHover?"button":void 0,"aria-haspopup":!0,"aria-expanded":String(this.isActive)}},genActivatorListeners(){if(this.disabled)return{};const t={};return this.openOnHover?(t.mouseenter=t=>{this.getActivator(t),this.runDelay("open")},t.mouseleave=t=>{this.getActivator(t),this.runDelay("close")}):this.openOnClick&&(t.click=t=>{const e=this.getActivator(t);e&&e.focus(),t.stopPropagation(),this.isActive=!this.isActive}),this.openOnFocus&&(t.focus=t=>{this.getActivator(t),t.stopPropagation(),this.isActive=!this.isActive}),t},getActivator(t){if(this.activatorElement)return this.activatorElement;let e=null;if(this.activator){const t=this.internalActivator?this.$el:document;e="string"===typeof this.activator?t.querySelector(this.activator):this.activator.$el?this.activator.$el:this.activator}else if(1===this.activatorNode.length||this.activatorNode.length&&!t){const t=this.activatorNode[0].componentInstance;e=t&&t.$options.mixins&&t.$options.mixins.some((t=>t.options&&["activatable","menuable"].includes(t.options.name)))?t.getActivator():this.activatorNode[0].elm}else t&&(e=t.currentTarget||t.target);return this.activatorElement=(null===e||void 0===e?void 0:e.nodeType)===Node.ELEMENT_NODE?e:null,this.activatorElement},getContentSlot(){return(0,r.z9)(this,"default",this.getValueProxy(),!0)},getValueProxy(){const t=this;return{get value(){return t.isActive},set value(e){t.isActive=e}}},removeActivatorEvents(){if(!this.activator||!this.activatorElement)return;const t=Object.keys(this.listeners);for(const e of t)this.activatorElement.removeEventListener(e,this.listeners[e]);this.listeners={}},resetActivator(){this.removeActivatorEvents(),this.activatorElement=null,this.getActivator(),this.addActivatorEvents()}}})},1811:function(t,e,i){"use strict";var s=i(144);e["Z"]=s["default"].extend().extend({name:"delayable",props:{openDelay:{type:[Number,String],default:0},closeDelay:{type:[Number,String],default:0}},data:()=>({openTimeout:void 0,closeTimeout:void 0}),methods:{clearDelay(){clearTimeout(this.openTimeout),clearTimeout(this.closeTimeout)},runDelay(t,e){this.clearDelay();const i=parseInt(this[`${t}Delay`],10);this[`${t}Timeout`]=setTimeout(e||(()=>{this.isActive={open:!0,close:!1}[t]}),i)}}})},9556:function(t,e,i){"use strict";var s=i(6986),n=i(8131),a=i(5530),r=i(8219);function o(t){const e=typeof t;return"boolean"===e||"string"===e||t.nodeType===Node.ELEMENT_NODE}function l(t){t.forEach((t=>{t.elm&&t.elm.parentNode&&t.elm.parentNode.removeChild(t.elm)}))}e["Z"]=(0,a.Z)(s.Z).extend({name:"detachable",props:{attach:{default:!1,validator:o},contentClass:{type:String,default:""}},data:()=>({activatorNode:null,hasDetached:!1}),watch:{attach(){this.hasDetached=!1,this.initDetach()},hasContent(){this.$nextTick(this.initDetach)}},beforeMount(){this.$nextTick((()=>{if(this.activatorNode){const t=Array.isArray(this.activatorNode)?this.activatorNode:[this.activatorNode];t.forEach((t=>{if(!t.elm)return;if(!this.$el.parentNode)return;const e=this.$el===this.$el.parentNode.firstChild?this.$el:this.$el.nextSibling;this.$el.parentNode.insertBefore(t.elm,e)}))}}))},mounted(){this.hasContent&&this.initDetach()},deactivated(){this.isActive=!1},beforeDestroy(){this.$refs.content&&this.$refs.content.parentNode&&this.$refs.content.parentNode.removeChild(this.$refs.content)},destroyed(){if(this.activatorNode){const t=Array.isArray(this.activatorNode)?this.activatorNode:[this.activatorNode];if(this.$el.isConnected){const e=new MutationObserver((i=>{i.some((t=>Array.from(t.removedNodes).includes(this.$el)))&&(e.disconnect(),l(t))}));e.observe(this.$el.parentNode,{subtree:!1,childList:!0})}else l(t)}},methods:{getScopeIdAttrs(){const t=(0,n.vO)(this.$vnode,"context.$options._scopeId");return t&&{[t]:""}},initDetach(){if(this._isDestroyed||!this.$refs.content||this.hasDetached||""===this.attach||!0===this.attach||"attach"===this.attach)return;let t;t=!1===this.attach?document.querySelector("[data-app]"):"string"===typeof this.attach?document.querySelector(this.attach):this.attach,t?(t.appendChild(this.$refs.content),this.hasDetached=!0):(0,r.Kd)(`Unable to locate target ${this.attach||"[data-app]"}`,this)}}})},2893:function(t,e,i){"use strict";var s=i(144);e["Z"]=s["default"].extend({name:"returnable",props:{returnValue:null},data:()=>({isActive:!1,originalValue:null}),watch:{isActive(t){t?this.originalValue=this.returnValue:this.$emit("update:return-value",this.originalValue)}},methods:{save(t){this.originalValue=t,setTimeout((()=>{this.isActive=!1}))}}})},2389:function(t,e,i){"use strict";var s=i(144),n=i(8131);e["Z"]=s["default"].extend().extend({name:"stackable",data(){return{stackElement:null,stackExclude:null,stackMinZIndex:0,isActive:!1}},computed:{activeZIndex(){if("undefined"===typeof window)return 0;const t=this.stackElement||this.$refs.content,e=this.isActive?this.getMaxZIndex(this.stackExclude||[t])+2:(0,n.KK)(t);return null==e?e:parseInt(e)}},methods:{getMaxZIndex(t=[]){const e=this.$el,i=[this.stackMinZIndex,(0,n.KK)(e)],s=[...document.getElementsByClassName("v-menu__content--active"),...document.getElementsByClassName("v-dialog__content--active")];for(let a=0;a<s.length;a++)t.includes(s[a])||i.push((0,n.KK)(s[a]));return Math.max(...i)}}})},371:function(t,e,i){"use strict";var s=i(5836),n=i(2066),a=i(950),r=i(8131),o=i(8219),l=i(5530);const h=(0,l.Z)(s.Z,(0,a.f)("form"),n.Z);e["Z"]=h.extend({name:"validatable",props:{disabled:Boolean,error:Boolean,errorCount:{type:[Number,String],default:1},errorMessages:{type:[String,Array],default:()=>[]},messages:{type:[String,Array],default:()=>[]},readonly:Boolean,rules:{type:Array,default:()=>[]},success:Boolean,successMessages:{type:[String,Array],default:()=>[]},validateOnBlur:Boolean,value:{required:!1}},data(){return{errorBucket:[],hasColor:!1,hasFocused:!1,hasInput:!1,isFocused:!1,isResetting:!1,lazyValue:this.value,valid:!1}},computed:{computedColor(){if(!this.isDisabled)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"},hasError(){return this.internalErrorMessages.length>0||this.errorBucket.length>0||this.error},hasSuccess(){return this.internalSuccessMessages.length>0||this.success},externalError(){return this.internalErrorMessages.length>0||this.error},hasMessages(){return this.validationTarget.length>0},hasState(){return!this.isDisabled&&(this.hasSuccess||this.shouldValidate&&this.hasError)},internalErrorMessages(){return this.genInternalMessages(this.errorMessages)},internalMessages(){return this.genInternalMessages(this.messages)},internalSuccessMessages(){return this.genInternalMessages(this.successMessages)},internalValue:{get(){return this.lazyValue},set(t){this.lazyValue=t,this.$emit("input",t)}},isDisabled(){return this.disabled||!!this.form&&this.form.disabled},isInteractive(){return!this.isDisabled&&!this.isReadonly},isReadonly(){return this.readonly||!!this.form&&this.form.readonly},shouldValidate(){return!!this.externalError||!this.isResetting&&(this.validateOnBlur?this.hasFocused&&!this.isFocused:this.hasInput||this.hasFocused)},validations(){return this.validationTarget.slice(0,Number(this.errorCount))},validationState(){if(!this.isDisabled)return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":this.hasColor?this.computedColor:void 0},validationTarget(){return this.internalErrorMessages.length>0?this.internalErrorMessages:this.successMessages&&this.successMessages.length>0?this.internalSuccessMessages:this.messages&&this.messages.length>0?this.internalMessages:this.shouldValidate?this.errorBucket:[]}},watch:{rules:{handler(t,e){(0,r.vZ)(t,e)||this.validate()},deep:!0},internalValue(){this.hasInput=!0,this.validateOnBlur||this.$nextTick(this.validate)},isFocused(t){t||this.isDisabled||(this.hasFocused=!0,this.validateOnBlur&&this.$nextTick(this.validate))},isResetting(){setTimeout((()=>{this.hasInput=!1,this.hasFocused=!1,this.isResetting=!1,this.validate()}),0)},hasError(t){this.shouldValidate&&this.$emit("update:error",t)},value(t){this.lazyValue=t}},beforeMount(){this.validate()},created(){this.form&&this.form.register(this)},beforeDestroy(){this.form&&this.form.unregister(this)},methods:{genInternalMessages(t){return t?Array.isArray(t)?t:[t]:[]},reset(){this.isResetting=!0,this.internalValue=Array.isArray(this.internalValue)?[]:null},resetValidation(){this.isResetting=!0},validate(t=!1,e){const i=[];e=e||this.internalValue,t&&(this.hasInput=this.hasFocused=!0);for(let s=0;s<this.rules.length;s++){const t=this.rules[s],n="function"===typeof t?t(e):t;!1===n||"string"===typeof n?i.push(n||""):"boolean"!==typeof n&&(0,o.N6)(`Rules should return a string or boolean, received '${typeof n}' instead`,this)}return this.errorBucket=i,this.valid=0===i.length,this.valid}}})},7456:function(t,e,i){"use strict";i.d(e,{Jn:function(){return ft},qX:function(){return dt},Xd:function(){return ct},Mq:function(){return vt},ZF:function(){return mt},KN:function(){return bt}});var s=i(8463),n=i(3333),a=i(4444);const r=(t,e)=>e.some((e=>t instanceof e));let o,l;function h(){return o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function c(){return l||(l=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const d=new WeakMap,u=new WeakMap,p=new WeakMap,g=new WeakMap,f=new WeakMap;function m(t){const e=new Promise(((e,i)=>{const s=()=>{t.removeEventListener("success",n),t.removeEventListener("error",a)},n=()=>{e(k(t.result)),s()},a=()=>{i(t.error),s()};t.addEventListener("success",n),t.addEventListener("error",a)}));return e.then((e=>{e instanceof IDBCursor&&d.set(e,t)})).catch((()=>{})),f.set(e,t),e}function v(t){if(u.has(t))return;const e=new Promise(((e,i)=>{const s=()=>{t.removeEventListener("complete",n),t.removeEventListener("error",a),t.removeEventListener("abort",a)},n=()=>{e(),s()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",n),t.addEventListener("error",a),t.addEventListener("abort",a)}));u.set(t,e)}let b={get(t,e,i){if(t instanceof IDBTransaction){if("done"===e)return u.get(t);if("objectStoreNames"===e)return t.objectStoreNames||p.get(t);if("store"===e)return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return k(t[e])},set(t,e,i){return t[e]=i,!0},has(t,e){return t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t}};function x(t){b=t(b)}function y(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?c().includes(t)?function(...e){return t.apply(C(this),e),k(d.get(this))}:function(...e){return k(t.apply(C(this),e))}:function(e,...i){const s=t.call(C(this),e,...i);return p.set(s,e.sort?e.sort():[e]),k(s)}}function w(t){return"function"===typeof t?y(t):(t instanceof IDBTransaction&&v(t),r(t,h())?new Proxy(t,b):t)}function k(t){if(t instanceof IDBRequest)return m(t);if(g.has(t))return g.get(t);const e=w(t);return e!==t&&(g.set(t,e),f.set(e,t)),e}const C=t=>f.get(t);function S(t,e,{blocked:i,upgrade:s,blocking:n,terminated:a}={}){const r=indexedDB.open(t,e),o=k(r);return s&&r.addEventListener("upgradeneeded",(t=>{s(k(r.result),t.oldVersion,t.newVersion,k(r.transaction))})),i&&r.addEventListener("blocked",(()=>i())),o.then((t=>{a&&t.addEventListener("close",(()=>a())),n&&t.addEventListener("versionchange",(()=>n()))})).catch((()=>{})),o}const _=["get","getKey","getAll","getAllKeys","count"],A=["put","add","delete","clear"],I=new Map;function P(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!==typeof e)return;if(I.get(e))return I.get(e);const i=e.replace(/FromIndex$/,""),s=e!==i,n=A.includes(i);if(!(i in(s?IDBIndex:IDBObjectStore).prototype)||!n&&!_.includes(i))return;const a=async function(t,...e){const a=this.transaction(t,n?"readwrite":"readonly");let r=a.store;return s&&(r=r.index(e.shift())),(await Promise.all([r[i](...e),n&&a.done]))[0]};return I.set(e,a),a}x((t=>({...t,get:(e,i,s)=>P(e,i)||t.get(e,i,s),has:(e,i)=>!!P(e,i)||t.has(e,i)})));
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class T{constructor(t){this.container=t}getPlatformInfoString(){const t=this.container.getProviders();return t.map((t=>{if(E(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}function E(t){const e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}const L="@firebase/app",M="0.9.0",O=new n.Yd("@firebase/app"),D="@firebase/app-compat",R="@firebase/analytics-compat",N="@firebase/analytics",z="@firebase/app-check-compat",F="@firebase/app-check",B="@firebase/auth",H="@firebase/auth-compat",$="@firebase/database",W="@firebase/database-compat",X="@firebase/functions",Y="@firebase/functions-compat",V="@firebase/installations",Z="@firebase/installations-compat",G="@firebase/messaging",j="@firebase/messaging-compat",q="@firebase/performance",U="@firebase/performance-compat",K="@firebase/remote-config",Q="@firebase/remote-config-compat",J="@firebase/storage",tt="@firebase/storage-compat",et="@firebase/firestore",it="@firebase/firestore-compat",st="firebase",nt="9.15.0",at="[DEFAULT]",rt={[L]:"fire-core",[D]:"fire-core-compat",[N]:"fire-analytics",[R]:"fire-analytics-compat",[F]:"fire-app-check",[z]:"fire-app-check-compat",[B]:"fire-auth",[H]:"fire-auth-compat",[$]:"fire-rtdb",[W]:"fire-rtdb-compat",[X]:"fire-fn",[Y]:"fire-fn-compat",[V]:"fire-iid",[Z]:"fire-iid-compat",[G]:"fire-fcm",[j]:"fire-fcm-compat",[q]:"fire-perf",[U]:"fire-perf-compat",[K]:"fire-rc",[Q]:"fire-rc-compat",[J]:"fire-gcs",[tt]:"fire-gcs-compat",[et]:"fire-fst",[it]:"fire-fst-compat","fire-js":"fire-js",[st]:"fire-js-all"},ot=new Map,lt=new Map;function ht(t,e){try{t.container.addComponent(e)}catch(i){O.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,i)}}function ct(t){const e=t.name;if(lt.has(e))return O.debug(`There were multiple attempts to register component ${e}.`),!1;lt.set(e,t);for(const i of ot.values())ht(i,t);return!0}function dt(t,e){const i=t.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),t.container.getProvider(e)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const ut={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},pt=new a.LL("app","Firebase",ut);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class gt{constructor(t,e,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new s.wA("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw pt.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ft=nt;function mt(t,e={}){let i=t;if("object"!==typeof e){const t=e;e={name:t}}const n=Object.assign({name:at,automaticDataCollectionEnabled:!1},e),r=n.name;if("string"!==typeof r||!r)throw pt.create("bad-app-name",{appName:String(r)});if(i||(i=(0,a.aH)()),!i)throw pt.create("no-options");const o=ot.get(r);if(o){if((0,a.vZ)(i,o.options)&&(0,a.vZ)(n,o.config))return o;throw pt.create("duplicate-app",{appName:r})}const l=new s.H0(r);for(const s of lt.values())l.addComponent(s);const h=new gt(i,n,l);return ot.set(r,h),h}function vt(t=at){const e=ot.get(t);if(!e&&t===at)return mt();if(!e)throw pt.create("no-app",{appName:t});return e}function bt(t,e,i){var n;let a=null!==(n=rt[t])&&void 0!==n?n:t;i&&(a+=`-${i}`);const r=a.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const t=[`Unable to register library "${a}" with version "${e}":`];return r&&t.push(`library name "${a}" contains illegal characters (whitespace or "/")`),r&&o&&t.push("and"),o&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void O.warn(t.join(" "))}ct(new s.wA(`${a}-version`,(()=>({library:a,version:e})),"VERSION"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const xt="firebase-heartbeat-database",yt=1,wt="firebase-heartbeat-store";let kt=null;function Ct(){return kt||(kt=S(xt,yt,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(wt)}}}).catch((t=>{throw pt.create("idb-open",{originalErrorMessage:t.message})}))),kt}async function St(t){try{const e=await Ct();return e.transaction(wt).objectStore(wt).get(At(t))}catch(e){if(e instanceof a.ZR)O.warn(e.message);else{const t=pt.create("idb-get",{originalErrorMessage:null===e||void 0===e?void 0:e.message});O.warn(t.message)}}}async function _t(t,e){try{const i=await Ct(),s=i.transaction(wt,"readwrite"),n=s.objectStore(wt);return await n.put(e,At(t)),s.done}catch(i){if(i instanceof a.ZR)O.warn(i.message);else{const t=pt.create("idb-set",{originalErrorMessage:null===i||void 0===i?void 0:i.message});O.warn(t.message)}}}function At(t){return`${t.name}!${t.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const It=1024,Pt=2592e6;class Tt{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Mt(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){const t=this.container.getProvider("platform-logger").getImmediate(),e=t.getPlatformInfoString(),i=Et();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==i&&!this._heartbeatsCache.heartbeats.some((t=>t.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf(),i=Date.now();return i-e<=Pt})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const t=Et(),{heartbeatsToSend:e,unsentEntries:i}=Lt(this._heartbeatsCache.heartbeats),s=(0,a.L)(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Et(){const t=new Date;return t.toISOString().substring(0,10)}function Lt(t,e=It){const i=[];let s=t.slice();for(const n of t){const t=i.find((t=>t.agent===n.agent));if(t){if(t.dates.push(n.date),Ot(i)>e){t.dates.pop();break}}else if(i.push({agent:n.agent,dates:[n.date]}),Ot(i)>e){i.pop();break}s=s.slice(1)}return{heartbeatsToSend:i,unsentEntries:s}}class Mt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,a.hl)()&&(0,a.eu)().then((()=>!0)).catch((()=>!1))}async read(){const t=await this._canUseIndexedDBPromise;if(t){const t=await St(this.app);return t||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;const i=await this._canUseIndexedDBPromise;if(i){const i=await this.read();return _t(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;const i=await this._canUseIndexedDBPromise;if(i){const i=await this.read();return _t(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}}}function Ot(t){return(0,a.L)(JSON.stringify({version:2,heartbeats:t})).length}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(t){ct(new s.wA("platform-logger",(t=>new T(t)),"PRIVATE")),ct(new s.wA("heartbeat",(t=>new Tt(t)),"PRIVATE")),bt(L,M,t),bt(L,M,"esm2017"),bt("fire-js","")}Dt("")},8463:function(t,e,i){"use strict";i.d(e,{H0:function(){return h},wA:function(){return n}});var s=i(4444);class n{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new s.BH;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:e});i&&t.resolve(i)}catch(i){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const i=this.normalizeInstanceIdentifier(null===t||void 0===t?void 0:t.identifier),s=null!==(e=null===t||void 0===t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(s)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(n){if(s)return null;throw n}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(l(t))try{this.getOrInitializeService({instanceIdentifier:a})}catch(e){}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:s});i.resolve(t)}catch(e){}}}}clearInstance(t=a){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=a){return this.instances.has(t)}getOptions(t=a){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[n,a]of this.instancesDeferred.entries()){const t=this.normalizeInstanceIdentifier(n);i===t&&a.resolve(s)}return s}onInit(t,e){var i;const s=this.normalizeInstanceIdentifier(e),n=null!==(i=this.onInitCallbacks.get(s))&&void 0!==i?i:new Set;n.add(t),this.onInitCallbacks.set(s,n);const a=this.instances.get(s);return a&&t(a,s),()=>{n.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const n of i)try{n(t,e)}catch(s){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:o(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch(s){}return i||null}normalizeInstanceIdentifier(t=a){return this.component?this.component.multipleInstances?t:a:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function o(t){return t===a?void 0:t}function l(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){const e=this.getProvider(t.name);e.isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new r(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}},3333:function(t,e,i){"use strict";i.d(e,{Yd:function(){return h},in:function(){return n}});
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const s=[];var n;(function(t){t[t["DEBUG"]=0]="DEBUG",t[t["VERBOSE"]=1]="VERBOSE",t[t["INFO"]=2]="INFO",t[t["WARN"]=3]="WARN",t[t["ERROR"]=4]="ERROR",t[t["SILENT"]=5]="SILENT"})(n||(n={}));const a={debug:n.DEBUG,verbose:n.VERBOSE,info:n.INFO,warn:n.WARN,error:n.ERROR,silent:n.SILENT},r=n.INFO,o={[n.DEBUG]:"log",[n.VERBOSE]:"log",[n.INFO]:"info",[n.WARN]:"warn",[n.ERROR]:"error"},l=(t,e,...i)=>{if(e<t.logLevel)return;const s=(new Date).toISOString(),n=o[e];if(!n)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[n](`[${s}]  ${t.name}:`,...i)};class h{constructor(t){this.name=t,this._logLevel=r,this._logHandler=l,this._userLogHandler=null,s.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in n))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"===typeof t?a[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,n.DEBUG,...t),this._logHandler(this,n.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,n.VERBOSE,...t),this._logHandler(this,n.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,n.INFO,...t),this._logHandler(this,n.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,n.WARN,...t),this._logHandler(this,n.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,n.ERROR,...t),this._logHandler(this,n.ERROR,...t)}}},3977:function(t,e,i){"use strict";i.d(e,{ZF:function(){return s.ZF}});var s=i(7456),n="firebase",a="9.15.0";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
(0,s.KN)(n,a,"app")},9355:function(t,e,i){"use strict";i.d(e,{N8:function(){return Za}});var s=i(7456),n=i(8463),a=i(4444),r=i(3333);const o="@firebase/database",l="0.14.0";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let h="";function c(t){h=t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,a.Wl)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,a.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,a.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p=function(t){try{if("undefined"!==typeof window&&"undefined"!==typeof window[t]){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new d(e)}}catch(e){}return new u},g=p("localStorage"),f=p("sessionStorage"),m=new r.Yd("@firebase/database"),v=function(){let t=1;return function(){return t++}}(),b=function(t){const e=(0,a.dS)(t),i=new a.gQ;i.update(e);const s=i.digest();return a.US.encodeByteArray(s)},x=function(...t){let e="";for(let i=0;i<t.length;i++){const s=t[i];Array.isArray(s)||s&&"object"===typeof s&&"number"===typeof s.length?e+=x.apply(null,s):e+="object"===typeof s?(0,a.Wl)(s):s,e+=" "}return e};let y=null,w=!0;const k=function(t,e){(0,a.hu)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(m.logLevel=r["in"].VERBOSE,y=m.log.bind(m),e&&f.set("logging_enabled",!0)):"function"===typeof t?y=t:(y=null,f.remove("logging_enabled"))},C=function(...t){if(!0===w&&(w=!1,null===y&&!0===f.get("logging_enabled")&&k(!0)),y){const e=x.apply(null,t);y(e)}},S=function(t){return function(...e){C(t,...e)}},_=function(...t){const e="FIREBASE INTERNAL ERROR: "+x(...t);m.error(e)},A=function(...t){const e=`FIREBASE FATAL ERROR: ${x(...t)}`;throw m.error(e),new Error(e)},I=function(...t){const e="FIREBASE WARNING: "+x(...t);m.warn(e)},P=function(){"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&I("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},T=function(t){return"number"===typeof t&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},E=function(t){if((0,a.Yr)()||"complete"===document.readyState)t();else{let e=!1;const i=function(){document.body?e||(e=!0,t()):setTimeout(i,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&i()})),window.attachEvent("onload",i))}},L="[MIN_NAME]",M="[MAX_NAME]",O=function(t,e){if(t===e)return 0;if(t===L||e===M)return-1;if(e===L||t===M)return 1;{const i=V(t),s=V(e);return null!==i?null!==s?i-s===0?t.length-e.length:i-s:-1:null!==s?1:t<e?-1:1}},D=function(t,e){return t===e?0:t<e?-1:1},R=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+(0,a.Wl)(e))},N=function(t){if("object"!==typeof t||null===t)return(0,a.Wl)(t);const e=[];for(const s in t)e.push(s);e.sort();let i="{";for(let s=0;s<e.length;s++)0!==s&&(i+=","),i+=(0,a.Wl)(e[s]),i+=":",i+=N(t[e[s]]);return i+="}",i},z=function(t,e){const i=t.length;if(i<=e)return[t];const s=[];for(let n=0;n<i;n+=e)n+e>i?s.push(t.substring(n,i)):s.push(t.substring(n,n+e));return s};function F(t,e){for(const i in t)t.hasOwnProperty(i)&&e(i,t[i])}const B=function(t){(0,a.hu)(!T(t),"Invalid JSON number");const e=11,i=52,s=(1<<e-1)-1;let n,r,o,l,h;0===t?(r=0,o=0,n=1/t===-1/0?1:0):(n=t<0,t=Math.abs(t),t>=Math.pow(2,1-s)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),s),r=l+s,o=Math.round(t*Math.pow(2,i-l)-Math.pow(2,i))):(r=0,o=Math.round(t/Math.pow(2,1-s-i))));const c=[];for(h=i;h;h-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(h=e;h;h-=1)c.push(r%2?1:0),r=Math.floor(r/2);c.push(n?1:0),c.reverse();const d=c.join("");let u="";for(h=0;h<64;h+=8){let t=parseInt(d.substr(h,8),2).toString(16);1===t.length&&(t="0"+t),u+=t}return u.toLowerCase()},H=function(){return!("object"!==typeof window||!window["chrome"]||!window["chrome"]["extension"]||/^chrome/.test(window.location.href))},$=function(){return"object"===typeof Windows&&"object"===typeof Windows.UI};const W=new RegExp("^-?(0*)\\d{1,10}$"),X=-2147483648,Y=2147483647,V=function(t){if(W.test(t)){const e=Number(t);if(e>=X&&e<=Y)return e}return null},Z=function(t){try{t()}catch(e){setTimeout((()=>{const t=e.stack||"";throw I("Exception was thrown by user callback.",t),e}),Math.floor(0))}},G=function(){const t="object"===typeof window&&window["navigator"]&&window["navigator"]["userAgent"]||"";return t.search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},j=function(t,e){const i=setTimeout(t,e);return"number"===typeof i&&"undefined"!==typeof Deno&&Deno["unrefTimer"]?Deno.unrefTimer(i):"object"===typeof i&&i["unref"]&&i["unref"](),i};
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class q{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=null===e||void 0===e?void 0:e.getImmediate({optional:!0}),this.appCheck||null===e||void 0===e||e.get().then((t=>this.appCheck=t))}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise(((e,i)=>{setTimeout((()=>{this.appCheck?this.getToken(t).then(e,i):e(null)}),0)}))}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then((e=>e.addTokenListener(t)))}notifyForInvalidToken(){I(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit((t=>this.auth_=t))}getToken(t){return this.auth_?this.auth_.getToken(t).catch((t=>t&&"auth/token-not-initialized"===t.code?(C("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t))):new Promise(((e,i)=>{setTimeout((()=>{this.auth_?this.getToken(t).then(e,i):e(null)}),0)}))}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then((e=>e.addAuthTokenListener(t)))}removeTokenChangeListener(t){this.authProvider_.get().then((e=>e.removeAuthTokenListener(t)))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',I(t)}}class K{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}K.OWNER="owner";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Q="5",J="v",tt="s",et="r",it="f",st=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,nt="ls",at="p",rt="ac",ot="websocket",lt="long_polling";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ht{constructor(t,e,i,s,n=!1,a="",r=!1){this.secure=e,this.namespace=i,this.webSocketOnly=s,this.nodeAdmin=n,this.persistenceKey=a,this.includeNamespaceInQueryParams=r,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=g.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&g.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${e}`}}function ct(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function dt(t,e,i){let s;if((0,a.hu)("string"===typeof e,"typeof type must == string"),(0,a.hu)("object"===typeof i,"typeof params must == object"),e===ot)s=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==lt)throw new Error("Unknown connection type: "+e);s=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}ct(t)&&(i["ns"]=t.namespace);const n=[];return F(i,((t,e)=>{n.push(t+"="+e)})),s+n.join("&")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,a.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,a.p$)(this.counters_)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pt={},gt={};function ft(t){const e=t.toString();return pt[e]||(pt[e]=new ut),pt[e]}function mt(t,e){const i=t.toString();return gt[i]||(gt[i]=e()),gt[i]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){this.pendingResponses[t]=e;while(this.pendingResponses[this.currentResponseNum]){const t=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let e=0;e<t.length;++e)t[e]&&Z((()=>{this.onMessage_(t[e])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bt="start",xt="close",yt="pLPCommand",wt="pRTLPCB",kt="id",Ct="pw",St="ser",_t="cb",At="seg",It="ts",Pt="d",Tt="dframe",Et=1870,Lt=30,Mt=Et-Lt,Ot=25e3,Dt=3e4;class Rt{constructor(t,e,i,s,n,a,r){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=s,this.authToken=n,this.transportSessionId=a,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=S(t),this.stats_=ft(e),this.urlFn=t=>(this.appCheckToken&&(t[rt]=this.appCheckToken),dt(e,lt,t))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new vt(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(Dt)),E((()=>{if(this.isClosed_)return;this.scriptTagHolder=new Nt(((...t)=>{const[e,i,s,n,a]=t;if(this.incrementIncomingBytes_(t),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,e===bt)this.id=i,this.password=s;else{if(e!==xt)throw new Error("Unrecognized command received: "+e);i?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(i,(()=>{this.onClosed_()}))):this.onClosed_()}}),((...t)=>{const[e,i]=t;this.incrementIncomingBytes_(t),this.myPacketOrderer.handleResponse(e,i)}),(()=>{this.onClosed_()}),this.urlFn);const t={};t[bt]="t",t[St]=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(t[_t]=this.scriptTagHolder.uniqueCallbackIdentifier),t[J]=Q,this.transportSessionId&&(t[tt]=this.transportSessionId),this.lastSessionId&&(t[nt]=this.lastSessionId),this.applicationId&&(t[at]=this.applicationId),this.appCheckToken&&(t[rt]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&st.test(location.hostname)&&(t[et]=it);const e=this.urlFn(t);this.log_("Connecting via long-poll to "+e),this.scriptTagHolder.addTag(e,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Rt.forceAllow_=!0}static forceDisallow(){Rt.forceDisallow_=!0}static isAvailable(){return!(0,a.Yr)()&&(!!Rt.forceAllow_||!Rt.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!H()&&!$())}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,a.Wl)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=(0,a.h$)(e),s=z(i,Mt);for(let n=0;n<s.length;n++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[n]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,a.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={};i[Tt]="t",i[kt]=t,i[Ct]=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,a.Wl)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class Nt{constructor(t,e,i,s){if(this.onDisconnect=i,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,a.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=v(),window[yt+this.uniqueCallbackIdentifier]=t,window[wt+this.uniqueCallbackIdentifier]=e,this.myIFrame=Nt.createIFrame_();let i="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)){const t=document.domain;i='<script>document.domain="'+t+'";<\/script>'}const s="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(n){C("frame writing exception"),n.stack&&C(n.stack),C(n)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{const e=t.contentWindow.document;e||C("No IE domain setting required")}catch(e){const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){this.myID=t,this.myPW=e,this.alive=!0;while(this.newRequest_());}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[kt]=this.myID,t[Ct]=this.myPW,t[St]=this.currentSerial;let e=this.urlFn(t),i="",s=0;while(this.pendingSegs.length>0){const t=this.pendingSegs[0];if(!(t.d.length+Lt+i.length<=Et))break;{const t=this.pendingSegs.shift();i=i+"&"+At+s+"="+t.seg+"&"+It+s+"="+t.ts+"&"+Pt+s+"="+t.d,s++}}return e+=i,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},s=setTimeout(i,Math.floor(Ot)),n=()=>{clearTimeout(s),i()};this.addTag(t,n)}addTag(t,e){(0,a.Yr)()?this.doNodeLongPoll(t,e):setTimeout((()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const t=i.readyState;t&&"loaded"!==t&&"complete"!==t||(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{C("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch(i){}}),Math.floor(1))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt=16384,Ft=45e3;let Bt=null;"undefined"!==typeof MozWebSocket?Bt=MozWebSocket:"undefined"!==typeof WebSocket&&(Bt=WebSocket);class Ht{constructor(t,e,i,s,n,a,r){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=n,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=S(this.connId),this.stats_=ft(e),this.connURL=Ht.connectionURL_(e,a,r,s,i),this.nodeAdmin=e.nodeAdmin}static connectionURL_(t,e,i,s,n){const r={};return r[J]=Q,!(0,a.Yr)()&&"undefined"!==typeof location&&location.hostname&&st.test(location.hostname)&&(r[et]=it),e&&(r[tt]=e),i&&(r[nt]=i),s&&(r[rt]=s),n&&(r[at]=n),dt(t,ot,r)}open(t,e){this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,g.set("previous_websocket_failure",!0);try{let t;if((0,a.Yr)()){const e=this.nodeAdmin?"AdminNode":"Node";t={headers:{"User-Agent":`Firebase/${Q}/${h}/${process.platform}/${e}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(t.headers["Authorization"]=`Bearer ${this.authToken}`),this.appCheckToken&&(t.headers["X-Firebase-AppCheck"]=this.appCheckToken);const i={NODE_ENV:"production",BASE_URL:"/CS6131/"},s=0===this.connURL.indexOf("wss://")?i["HTTPS_PROXY"]||i["https_proxy"]:i["HTTP_PROXY"]||i["http_proxy"];s&&(t["proxy"]={origin:s})}this.mySock=new Bt(this.connURL,[],t)}catch(i){this.log_("Error instantiating WebSocket.");const t=i.message||i.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=t=>{this.handleIncomingFrame(t)},this.mySock.onerror=t=>{this.log_("WebSocket error.  Closing connection.");const e=t.message||t.data;e&&this.log_(e),this.onClosed_()}}start(){}static forceDisallow(){Ht.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const e=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(e);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==Bt&&!Ht.forceDisallow_}static previouslyFailed(){return g.isInMemoryStorage||!0===g.get("previous_websocket_failure")}markConnectionHealthy(){g.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const e=(0,a.cI)(t);this.onMessage(e)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,a.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const e=t["data"];if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{const t=this.extractFrameCount_(e);null!==t&&this.appendFrame_(t)}}send(t){this.resetKeepAlive();const e=(0,a.Wl)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=z(e,zt);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(Ft))}sendString_(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ht.responsesRequiredToBeHealthy=2,Ht.healthyTimeout=3e4;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class $t{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Rt,Ht]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const e=Ht&&Ht["isAvailable"]();let i=e&&!Ht.previouslyFailed();if(t.webSocketOnly&&(e||I("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Ht];else{const t=this.transports_=[];for(const e of $t.ALL_TRANSPORTS)e&&e["isAvailable"]()&&t.push(e);$t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}$t.globalTransportInitialized_=!1;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Wt=6e4,Xt=5e3,Yt=10240,Vt=102400,Zt="t",Gt="d",jt="s",qt="r",Ut="e",Kt="o",Qt="a",Jt="n",te="p",ee="h";class ie{constructor(t,e,i,s,n,a,r,o,l,h){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=s,this.authToken_=n,this.onMessage_=a,this.onReady_=r,this.onDisconnect_=o,this.onKill_=l,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=S("c:"+this.id+":"),this.transportManager_=new $t(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t["responsesRequiredToBeHealthy"]||0;const e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(e,i)}),Math.floor(0));const s=t["healthyTimeout"]||0;s>0&&(this.healthyTimeout_=j((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Vt?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Yt?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){const e={t:"d",d:t};this.sendData_(e)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(Zt in t){const e=t[Zt];e===Qt?this.upgradeIfSecondaryHealthy_():e===qt?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):e===Kt&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=R("t",t),i=R("d",t);if("c"===e)this.onSecondaryControl_(i);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:te,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Qt,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Jt,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=R("t",t),i=R("d",t);"c"===e?this.onControl_(i):"d"===e&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=R(Zt,t);if(Gt in t){const i=t[Gt];if(e===ee)this.onHandshake_(i);else if(e===Jt){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let t=0;t<this.pendingDataMessages.length;++t)this.onDataMessage_(this.pendingDataMessages[t]);this.pendingDataMessages=[],this.tryCleanupConnection()}else e===jt?this.onConnectionShutdown_(i):e===qt?this.onReset_(i):e===Ut?_("Server Error: "+i):e===Kt?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):_("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,i=t.v,s=t.h;this.sessionId=t.s,this.repoInfo_.host=s,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),Q!==i&&I("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t["responsesRequiredToBeHealthy"]||0;const e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),j((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(Wt))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):j((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(Xt))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:te,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(g.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{put(t,e,i,s){}merge(t,e,i,s){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,a.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let t=0;t<i.length;t++)i[t].callback.apply(i[t].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});const s=this.getInitialEvent(t);s&&e.apply(i,s)}off(t,e,i){this.validateEventType_(t);const s=this.listeners_[t]||[];for(let n=0;n<s.length;n++)if(s[n].callback===e&&(!i||i===s[n].context))return void s.splice(n,1)}validateEventType_(t){(0,a.hu)(this.allowedEvents_.find((e=>e===t)),"Unknown event: "+t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae extends ne{constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||(0,a.uI)()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new ae}getInitialEvent(t){return(0,a.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re=32,oe=768;class le{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let e=0;for(let t=0;t<this.pieces_.length;t++)this.pieces_[t].length>0&&(this.pieces_[e]=this.pieces_[t],e++);this.pieces_.length=e,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function he(){return new le("")}function ce(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function de(t){return t.pieces_.length-t.pieceNum_}function ue(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new le(t.pieces_,e)}function pe(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function ge(t){let e="";for(let i=t.pieceNum_;i<t.pieces_.length;i++)""!==t.pieces_[i]&&(e+="/"+encodeURIComponent(String(t.pieces_[i])));return e||"/"}function fe(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function me(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let i=t.pieceNum_;i<t.pieces_.length-1;i++)e.push(t.pieces_[i]);return new le(e,0)}function ve(t,e){const i=[];for(let s=t.pieceNum_;s<t.pieces_.length;s++)i.push(t.pieces_[s]);if(e instanceof le)for(let s=e.pieceNum_;s<e.pieces_.length;s++)i.push(e.pieces_[s]);else{const t=e.split("/");for(let e=0;e<t.length;e++)t[e].length>0&&i.push(t[e])}return new le(i,0)}function be(t){return t.pieceNum_>=t.pieces_.length}function xe(t,e){const i=ce(t),s=ce(e);if(null===i)return e;if(i===s)return xe(ue(t),ue(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function ye(t,e){if(de(t)!==de(e))return!1;for(let i=t.pieceNum_,s=e.pieceNum_;i<=t.pieces_.length;i++,s++)if(t.pieces_[i]!==e.pieces_[s])return!1;return!0}function we(t,e){let i=t.pieceNum_,s=e.pieceNum_;if(de(t)>de(e))return!1;while(i<t.pieces_.length){if(t.pieces_[i]!==e.pieces_[s])return!1;++i,++s}return!0}class ke{constructor(t,e){this.errorPrefix_=e,this.parts_=fe(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,a.ug)(this.parts_[i]);_e(this)}}function Ce(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=(0,a.ug)(e),_e(t)}function Se(t){const e=t.parts_.pop();t.byteLength_-=(0,a.ug)(e),t.parts_.length>0&&(t.byteLength_-=1)}function _e(t){if(t.byteLength_>oe)throw new Error(t.errorPrefix_+"has a key path longer than "+oe+" bytes ("+t.byteLength_+").");if(t.parts_.length>re)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+re+") or object contains a cycle "+Ae(t))}function Ae(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie extends ne{constructor(){let t,e;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document["hidden"]?(e="visibilitychange",t="hidden"):"undefined"!==typeof document["mozHidden"]?(e="mozvisibilitychange",t="mozHidden"):"undefined"!==typeof document["msHidden"]?(e="msvisibilitychange",t="msHidden"):"undefined"!==typeof document["webkitHidden"]&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,(()=>{const e=!document[t];e!==this.visible_&&(this.visible_=e,this.trigger("visible",e))}),!1)}static getInstance(){return new Ie}getInitialEvent(t){return(0,a.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pe=1e3,Te=3e5,Ee=3e4,Le=1.3,Me=3e4,Oe="server_kill",De=3;class Re extends se{constructor(t,e,i,s,n,r,o,l){if(super(),this.repoInfo_=t,this.applicationId_=e,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=o,this.authOverride_=l,this.id=Re.nextPersistentConnectionId_++,this.log_=S("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Pe,this.maxReconnectDelay_=Te,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!(0,a.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ie.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&ae.getInstance().on("online",this.onOnline_,this)}sendRequest(t,e,i){const s=++this.requestNumber_,n={r:s,a:t,b:e};this.log_((0,a.Wl)(n)),(0,a.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(n),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const e=new a.BH,i={p:t._path.toString(),q:t._queryObject},s={action:"g",request:i,onComplete:t=>{const i=t["d"];"ok"===t["s"]?e.resolve(i):e.reject(i)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const n=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(n),e.promise}listen(t,e,i,s){this.initConnection_();const n=t._queryIdentifier,r=t._path.toString();this.log_("Listen called for "+r+" "+n),this.listens.has(r)||this.listens.set(r,new Map),(0,a.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,a.hu)(!this.listens.get(r).has(n),"listen() called twice for same path/queryId.");const o={onComplete:s,hashFn:e,query:t,tag:i};this.listens.get(r).set(n,o),this.connected_&&this.sendListen_(o)}sendGet_(t){const e=this.outstandingGets_[t];this.sendRequest("g",e.request,(i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),e.onComplete&&e.onComplete(i)}))}sendListen_(t){const e=t.query,i=e._path.toString(),s=e._queryIdentifier;this.log_("Listen on "+i+" for "+s);const n={p:i},a="q";t.tag&&(n["q"]=e._queryObject,n["t"]=t.tag),n["h"]=t.hashFn(),this.sendRequest(a,n,(n=>{const a=n["d"],r=n["s"];Re.warnOnListenWarnings_(a,e);const o=this.listens.get(i)&&this.listens.get(i).get(s);o===t&&(this.log_("listen response",n),"ok"!==r&&this.removeListen_(i,s),t.onComplete&&t.onComplete(r,a))}))}static warnOnListenWarnings_(t,e){if(t&&"object"===typeof t&&(0,a.r3)(t,"w")){const i=(0,a.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const t='".indexOn": "'+e._queryParams.getIndex().toString()+'"',i=e._path.toString();I(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${t} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){const e=t&&40===t.length;(e||(0,a.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Ee)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,e=(0,a.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i["noauth"]=!0:"object"===typeof this.authOverride_&&(i["authvar"]=this.authOverride_),this.sendRequest(e,i,(e=>{const i=e["s"],s=e["d"]||"error";this.authToken_===t&&("ok"===i?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,s))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(t=>{const e=t["s"],i=t["d"]||"error";"ok"===e?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(e,i)}))}unlisten(t,e){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,a.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");const n=this.removeListen_(i,s);n&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,e)}sendUnlisten_(t,e,i,s){this.log_("Unlisten on "+t+" for "+e);const n={p:t},a="n";s&&(n["q"]=i,n["t"]=s),this.sendRequest(a,n)}onDisconnectPut(t,e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:i})}onDisconnectMerge(t,e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:i})}onDisconnectCancel(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})}sendOnDisconnect_(t,e,i,s){const n={p:e,d:i};this.log_("onDisconnect "+t,n),this.sendRequest(t,n,(t=>{s&&setTimeout((()=>{s(t["s"],t["d"])}),Math.floor(0))}))}put(t,e,i,s){this.putInternal("p",t,e,i,s)}merge(t,e,i,s){this.putInternal("m",t,e,i,s)}putInternal(t,e,i,s,n){this.initConnection_();const a={p:e,d:i};void 0!==n&&(a["h"]=n),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++;const r=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(r):this.log_("Buffering put: "+e)}sendPut_(t){const e=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(e,i,(i=>{this.log_(e+" response",i),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(i["s"],i["d"])}))}reportStats(t){if(this.connected_){const e={c:t};this.log_("reportStats",e),this.sendRequest("s",e,(t=>{const e=t["s"];if("ok"!==e){const e=t["d"];this.log_("reportStats","Error sending stats: "+e)}}))}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,a.Wl)(t));const e=t["r"],i=this.requestCBHash_[e];i&&(delete this.requestCBHash_[e],i(t["b"]))}else{if("error"in t)throw"A server-side error has occurred: "+t["error"];"a"in t&&this.onDataPush_(t["a"],t["b"])}}onDataPush_(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e["p"],e["d"],!1,e["t"]):"m"===t?this.onDataUpdate_(e["p"],e["d"],!0,e["t"]):"c"===t?this.onListenRevoked_(e["p"],e["q"]):"ac"===t?this.onAuthRevoked_(e["s"],e["d"]):"apc"===t?this.onAppCheckRevoked_(e["s"],e["d"]):"sd"===t?this.onSecurityDebugPacket_(e):_("Unrecognized action received from server: "+(0,a.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,a.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Pe,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Pe,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){const t=(new Date).getTime()-this.lastConnectionEstablishedTime_;t>Me&&(this.reconnectDelay_=Pe),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Le)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),e=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Re.nextConnectionId_++,n=this.lastSessionId;let r=!1,o=null;const l=function(){o?o.close():(r=!0,i())},h=function(t){(0,a.hu)(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(t)};this.realtime_={close:l,sendRequest:h};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[a,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);r?C("getToken() completed but was canceled"):(C("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=l&&l.token,o=new ie(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,e,i,(t=>{I(t+" ("+this.repoInfo_.toString()+")"),this.interrupt(Oe)}),n))}catch(_){this.log_("Failed to get token: "+_),r||(this.repoInfo_.nodeAdmin&&I(_),l())}}}interrupt(t){C("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){C("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,a.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Pe,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,e){let i;i=e?e.map((t=>N(t))).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,e){const i=new le(t).toString();let s;if(this.listens.has(i)){const t=this.listens.get(i);s=t.get(e),t.delete(e),0===t.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,e){C("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=De&&(this.reconnectDelay_=Ee,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,e){C("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=De&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t["msg"].replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const e of t.values())this.sendListen_(e);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);while(this.onDisconnectRequestQueue_.length){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let e="js";(0,a.Yr)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+h.replace(/\./g,"-")]=1,(0,a.uI)()?t["framework.cordova"]=1:(0,a.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=ae.getInstance().currentlyOnline();return(0,a.xb)(this.interruptReasons_)&&t}}Re.nextPersistentConnectionId_=0,Re.nextConnectionId_=0;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ne{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new Ne(t,e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const i=new Ne(L,t),s=new Ne(L,e);return 0!==this.compare(i,s)}minPost(){return Ne.MIN}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fe;class Be extends ze{static get __EMPTY_NODE(){return Fe}static set __EMPTY_NODE(t){Fe=t}compare(t,e){return O(t.name,e.name)}isDefinedOn(t){throw(0,a.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return Ne.MIN}maxPost(){return new Ne(M,Fe)}makePost(t,e){return(0,a.hu)("string"===typeof t,"KeyIndex indexValue must always be a string."),new Ne(t,Fe)}toString(){return".key"}}const He=new Be;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(t,e,i,s,n=null){this.isReverse_=s,this.resultGenerator_=n,this.nodeStack_=[];let a=1;while(!t.isEmpty())if(a=e?i(t.key,e):1,s&&(a*=-1),a<0)t=this.isReverse_?t.left:t.right;else{if(0===a){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_){e=e.left;while(!e.isEmpty())this.nodeStack_.push(e),e=e.right}else{e=e.right;while(!e.isEmpty())this.nodeStack_.push(e),e=e.left}return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class We{constructor(t,e,i,s,n){this.key=t,this.value=e,this.color=null!=i?i:We.RED,this.left=null!=s?s:Ye.EMPTY_NODE,this.right=null!=n?n:Ye.EMPTY_NODE}copy(t,e,i,s,n){return new We(null!=t?t:this.key,null!=e?e:this.value,null!=i?i:this.color,null!=s?s:this.left,null!=n?n:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let s=this;const n=i(t,s.key);return s=n<0?s.copy(null,null,null,s.left.insert(t,e,i),null):0===n?s.copy(null,e,null,null,null):s.copy(null,null,null,null,s.right.insert(t,e,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ye.EMPTY_NODE;let t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,e){let i,s;if(i=this,e(t,i.key)<0)i.left.isEmpty()||i.left.isRed_()||i.left.left.isRed_()||(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),i.right.isEmpty()||i.right.isRed_()||i.right.left.isRed_()||(i=i.moveRedRight_()),0===e(t,i.key)){if(i.right.isEmpty())return Ye.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,We.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,We.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}We.RED=!0,We.BLACK=!1;class Xe{copy(t,e,i,s,n){return this}insert(t,e,i){return new We(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Ye{constructor(t,e=Ye.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new Ye(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,We.BLACK,null,null))}remove(t){return new Ye(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,We.BLACK,null,null))}get(t){let e,i=this.root_;while(!i.isEmpty()){if(e=this.comparator_(t,i.key),0===e)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,s=null;while(!i.isEmpty()){if(e=this.comparator_(t,i.key),0===e){if(i.left.isEmpty())return s?s.key:null;i=i.left;while(!i.right.isEmpty())i=i.right;return i.key}e<0?i=i.left:e>0&&(s=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new $e(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new $e(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new $e(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new $e(this.root_,null,this.comparator_,!0,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ve(t,e){return O(t.name,e.name)}function Ze(t,e){return O(t,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ge;function je(t){Ge=t}Ye.EMPTY_NODE=new Xe;const qe=function(t){return"number"===typeof t?"number:"+B(t):"string:"+t},Ue=function(t){if(t.isLeafNode()){const e=t.val();(0,a.hu)("string"===typeof e||"number"===typeof e||"object"===typeof e&&(0,a.r3)(e,".sv"),"Priority must be a string or number.")}else(0,a.hu)(t===Ge||t.isEmpty(),"priority of unexpected type.");(0,a.hu)(t===Ge||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let Ke,Qe,Je;class ti{constructor(t,e=ti.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=e,this.lazyHash_=null,(0,a.hu)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Ue(this.priorityNode_)}static set __childrenNodeConstructor(t){Ke=t}static get __childrenNodeConstructor(){return Ke}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new ti(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:ti.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return be(t)?this:".priority"===ce(t)?this.priorityNode_:ti.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,e){return null}updateImmediateChild(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:ti.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)}updateChild(t,e){const i=ce(t);return null===i?e:e.isEmpty()&&".priority"!==i?this:((0,a.hu)(".priority"!==i||1===de(t),".priority must be the last token in a path"),this.updateImmediateChild(i,ti.__childrenNodeConstructor.EMPTY_NODE.updateChild(ue(t),e)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,e){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+qe(this.priorityNode_.val())+":");const e=typeof this.value_;t+=e+":",t+="number"===e?B(this.value_):this.value_,this.lazyHash_=b(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===ti.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof ti.__childrenNodeConstructor?-1:((0,a.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const e=typeof t.value_,i=typeof this.value_,s=ti.VALUE_TYPE_ORDER.indexOf(e),n=ti.VALUE_TYPE_ORDER.indexOf(i);return(0,a.hu)(s>=0,"Unknown leaf type: "+e),(0,a.hu)(n>=0,"Unknown leaf type: "+i),s===n?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:n-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1}}function ei(t){Qe=t}function ii(t){Je=t}ti.VALUE_TYPE_ORDER=["object","boolean","number","string"];class si extends ze{compare(t,e){const i=t.node.getPriority(),s=e.node.getPriority(),n=i.compareTo(s);return 0===n?O(t.name,e.name):n}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return Ne.MIN}maxPost(){return new Ne(M,new ti("[PRIORITY-POST]",Je))}makePost(t,e){const i=Qe(t);return new Ne(e,new ti("[PRIORITY-POST]",i))}toString(){return".priority"}}const ni=new si,ai=Math.log(2);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(t){const e=t=>parseInt(Math.log(t)/ai,10),i=t=>parseInt(Array(t+1).join("1"),2);this.count=e(t+1),this.current_=this.count-1;const s=i(this.count);this.bits_=t+1&s}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const oi=function(t,e,i,s){t.sort(e);const n=function(e,s){const a=s-e;let r,o;if(0===a)return null;if(1===a)return r=t[e],o=i?i(r):r,new We(o,r.node,We.BLACK,null,null);{const l=parseInt(a/2,10)+e,h=n(e,l),c=n(l+1,s);return r=t[l],o=i?i(r):r,new We(o,r.node,We.BLACK,h,c)}},a=function(e){let s=null,a=null,r=t.length;const o=function(e,s){const a=r-e,o=r;r-=e;const h=n(a+1,o),c=t[a],d=i?i(c):c;l(new We(d,c.node,s,null,h))},l=function(t){s?(s.left=t,s=t):(a=t,s=t)};for(let t=0;t<e.count;++t){const i=e.nextBitIsOne(),s=Math.pow(2,e.count-(t+1));i?o(s,We.BLACK):(o(s,We.BLACK),o(s,We.RED))}return a},r=new ri(t.length),o=a(r);return new Ye(s||e,o)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let li;const hi={};class ci{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,a.hu)(hi&&ni,"ChildrenNode.ts has not been loaded"),li=li||new ci({".priority":hi},{".priority":ni}),li}get(t){const e=(0,a.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Ye?e:null}hasIndex(t){return(0,a.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,a.hu)(t!==He,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let s=!1;const n=e.getIterator(Ne.Wrap);let r,o=n.getNext();while(o)s=s||t.isDefinedOn(o.node),i.push(o),o=n.getNext();r=s?oi(i,t.getCompare()):hi;const l=t.toString(),h=Object.assign({},this.indexSet_);h[l]=t;const c=Object.assign({},this.indexes_);return c[l]=r,new ci(c,h)}addToIndexes(t,e){const i=(0,a.UI)(this.indexes_,((i,s)=>{const n=(0,a.DV)(this.indexSet_,s);if((0,a.hu)(n,"Missing index implementation for "+s),i===hi){if(n.isDefinedOn(t.node)){const i=[],s=e.getIterator(Ne.Wrap);let a=s.getNext();while(a)a.name!==t.name&&i.push(a),a=s.getNext();return i.push(t),oi(i,n.getCompare())}return hi}{const s=e.get(t.name);let n=i;return s&&(n=n.remove(new Ne(t.name,s))),n.insert(t,t.node)}}));return new ci(i,this.indexSet_)}removeFromIndexes(t,e){const i=(0,a.UI)(this.indexes_,(i=>{if(i===hi)return i;{const s=e.get(t.name);return s?i.remove(new Ne(t.name,s)):i}}));return new ci(i,this.indexSet_)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let di;class ui{constructor(t,e,i){this.children_=t,this.priorityNode_=e,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Ue(this.priorityNode_),this.children_.isEmpty()&&(0,a.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return di||(di=new ui(new Ye(Ze),null,ci.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||di}updatePriority(t){return this.children_.isEmpty()?this:new ui(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const e=this.children_.get(t);return null===e?di:e}}getChild(t){const e=ce(t);return null===e?this:this.getImmediateChild(e).getChild(ue(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,e){if((0,a.hu)(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);{const i=new Ne(t,e);let s,n;e.isEmpty()?(s=this.children_.remove(t),n=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,e),n=this.indexMap_.addToIndexes(i,this.children_));const a=s.isEmpty()?di:this.priorityNode_;return new ui(s,a,n)}}updateChild(t,e){const i=ce(t);if(null===i)return e;{(0,a.hu)(".priority"!==ce(t)||1===de(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(ue(t),e);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const e={};let i=0,s=0,n=!0;if(this.forEachChild(ni,((a,r)=>{e[a]=r.val(t),i++,n&&ui.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):n=!1})),!t&&n&&s<2*i){const t=[];for(const i in e)t[i]=e[i];return t}return t&&!this.getPriority().isEmpty()&&(e[".priority"]=this.getPriority().val()),e}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+qe(this.getPriority().val())+":"),this.forEachChild(ni,((e,i)=>{const s=i.hash();""!==s&&(t+=":"+e+":"+s)})),this.lazyHash_=""===t?"":b(t)}return this.lazyHash_}getPredecessorChildName(t,e,i){const s=this.resolveIndex_(i);if(s){const i=s.getPredecessorKey(new Ne(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const e=this.resolveIndex_(t);if(e){const t=e.minKey();return t&&t.name}return this.children_.minKey()}getFirstChild(t){const e=this.getFirstChildName(t);return e?new Ne(e,this.children_.get(e)):null}getLastChildName(t){const e=this.resolveIndex_(t);if(e){const t=e.maxKey();return t&&t.name}return this.children_.maxKey()}getLastChild(t){const e=this.getLastChildName(t);return e?new Ne(e,this.children_.get(e)):null}forEachChild(t,e){const i=this.resolveIndex_(t);return i?i.inorderTraversal((t=>e(t.name,t.node))):this.children_.inorderTraversal(e)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,e){const i=this.resolveIndex_(e);if(i)return i.getIteratorFrom(t,(t=>t));{const i=this.children_.getIteratorFrom(t.name,Ne.Wrap);let s=i.peek();while(null!=s&&e.compare(s,t)<0)i.getNext(),s=i.peek();return i}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,e){const i=this.resolveIndex_(e);if(i)return i.getReverseIteratorFrom(t,(t=>t));{const i=this.children_.getReverseIteratorFrom(t.name,Ne.Wrap);let s=i.peek();while(null!=s&&e.compare(s,t)>0)i.getNext(),s=i.peek();return i}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===gi?-1:0}withIndex(t){if(t===He||this.indexMap_.hasIndex(t))return this;{const e=this.indexMap_.addIndex(t,this.children_);return new ui(this.children_,this.priorityNode_,e)}}isIndexed(t){return t===He||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){const t=this.getIterator(ni),i=e.getIterator(ni);let s=t.getNext(),n=i.getNext();while(s&&n){if(s.name!==n.name||!s.node.equals(n.node))return!1;s=t.getNext(),n=i.getNext()}return null===s&&null===n}return!1}return!1}}resolveIndex_(t){return t===He?null:this.indexMap_.get(t.toString())}}ui.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class pi extends ui{constructor(){super(new Ye(Ze),ui.EMPTY_NODE,ci.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return ui.EMPTY_NODE}isEmpty(){return!1}}const gi=new pi;Object.defineProperties(Ne,{MIN:{value:new Ne(L,ui.EMPTY_NODE)},MAX:{value:new Ne(M,gi)}}),Be.__EMPTY_NODE=ui.EMPTY_NODE,ti.__childrenNodeConstructor=ui,je(gi),ii(gi);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const fi=!0;function mi(t,e=null){if(null===t)return ui.EMPTY_NODE;if("object"===typeof t&&".priority"in t&&(e=t[".priority"]),(0,a.hu)(null===e||"string"===typeof e||"number"===typeof e||"object"===typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"===typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!==typeof t||".sv"in t){const i=t;return new ti(i,mi(e))}if(t instanceof Array||!fi){let i=ui.EMPTY_NODE;return F(t,((e,s)=>{if((0,a.r3)(t,e)&&"."!==e.substring(0,1)){const t=mi(s);!t.isLeafNode()&&t.isEmpty()||(i=i.updateImmediateChild(e,t))}})),i.updatePriority(mi(e))}{const i=[];let s=!1;const n=t;if(F(n,((t,e)=>{if("."!==t.substring(0,1)){const n=mi(e);n.isEmpty()||(s=s||!n.getPriority().isEmpty(),i.push(new Ne(t,n)))}})),0===i.length)return ui.EMPTY_NODE;const a=oi(i,Ve,(t=>t.name),Ze);if(s){const t=oi(i,ni.getCompare());return new ui(a,mi(e),new ci({".priority":t},{".priority":ni}))}return new ui(a,mi(e),ci.Default)}}ei(mi);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class vi extends ze{constructor(t){super(),this.indexPath_=t,(0,a.hu)(!be(t)&&".priority"!==ce(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const i=this.extractChild(t.node),s=this.extractChild(e.node),n=i.compareTo(s);return 0===n?O(t.name,e.name):n}makePost(t,e){const i=mi(t),s=ui.EMPTY_NODE.updateChild(this.indexPath_,i);return new Ne(e,s)}maxPost(){const t=ui.EMPTY_NODE.updateChild(this.indexPath_,gi);return new Ne(M,t)}toString(){return fe(this.indexPath_,0).join("/")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi extends ze{compare(t,e){const i=t.node.compareTo(e.node);return 0===i?O(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return Ne.MIN}maxPost(){return Ne.MAX}makePost(t,e){const i=mi(t);return new Ne(e,i)}toString(){return".value"}}const xi=new bi;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(t){return{type:"value",snapshotNode:t}}function wi(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ki(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Ci(t,e,i){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:i}}function Si(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class _i{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ni}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,a.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,a.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:L}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,a.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,a.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:M}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,a.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ni}copy(){const t=new _i;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function Ai(t){const e={};if(t.isDefault())return e;let i;if(t.index_===ni?i="$priority":t.index_===xi?i="$value":t.index_===He?i="$key":((0,a.hu)(t.index_ instanceof vi,"Unrecognized index type!"),i=t.index_.toString()),e["orderBy"]=(0,a.Wl)(i),t.startSet_){const i=t.startAfterSet_?"startAfter":"startAt";e[i]=(0,a.Wl)(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+(0,a.Wl)(t.indexStartName_))}if(t.endSet_){const i=t.endBeforeSet_?"endBefore":"endAt";e[i]=(0,a.Wl)(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+(0,a.Wl)(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e["limitToFirst"]=t.limit_:e["limitToLast"]=t.limit_),e}function Ii(t){const e={};if(t.startSet_&&(e["sp"]=t.indexStartValue_,t.startNameSet_&&(e["sn"]=t.indexStartName_),e["sin"]=!t.startAfterSet_),t.endSet_&&(e["ep"]=t.indexEndValue_,t.endNameSet_&&(e["en"]=t.indexEndName_),e["ein"]=!t.endBeforeSet_),t.limitSet_){e["l"]=t.limit_;let i=t.viewFrom_;""===i&&(i=t.isViewFromLeft()?"l":"r"),e["vf"]=i}return t.index_!==ni&&(e["i"]=t.index_.toString()),e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi extends se{constructor(t,e,i,s){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=s,this.log_=S("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,a.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,i,s){const n=t._path.toString();this.log_("Listen called for "+n+" "+t._queryIdentifier);const r=Pi.getListenId_(t,i),o={};this.listens_[r]=o;const l=Ai(t._queryParams);this.restRequest_(n+".json",l,((t,e)=>{let l=e;if(404===t&&(l=null,t=null),null===t&&this.onDataUpdate_(n,l,!1,i),(0,a.DV)(this.listens_,r)===o){let e;e=t?401===t?"permission_denied":"rest_error:"+t:"ok",s(e,null)}}))}unlisten(t,e){const i=Pi.getListenId_(t,e);delete this.listens_[i]}get(t){const e=Ai(t._queryParams),i=t._path.toString(),s=new a.BH;return this.restRequest_(i+".json",e,((t,e)=>{let n=e;404===t&&(n=null,t=null),null===t?(this.onDataUpdate_(i,n,!1,null),s.resolve(n)):s.reject(new Error(n))})),s.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e["format"]="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((([s,n])=>{s&&s.accessToken&&(e["auth"]=s.accessToken),n&&n.token&&(e["ac"]=n.token);const r=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,a.xO)(e);this.log_("Sending REST request for "+r);const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(i&&4===o.readyState){this.log_("REST Response for "+r+" received. status:",o.status,"response:",o.responseText);let e=null;if(o.status>=200&&o.status<300){try{e=(0,a.cI)(o.responseText)}catch(t){I("Failed to parse JSON response for "+r+": "+o.responseText)}i(null,e)}else 401!==o.status&&404!==o.status&&I("Got unsuccessful REST response for "+r+" Status: "+o.status),i(o.status);i=null}},o.open("GET",r,!0),o.send()}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(){this.rootNode_=ui.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(){return{value:null,children:new Map}}function Li(t,e,i){if(be(e))t.value=i,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,i);else{const s=ce(e);t.children.has(s)||t.children.set(s,Ei());const n=t.children.get(s);e=ue(e),Li(n,e,i)}}function Mi(t,e,i){null!==t.value?i(e,t.value):Oi(t,((t,s)=>{const n=new le(e.toString()+"/"+t);Mi(s,n,i)}))}function Oi(t,e){t.children.forEach(((t,i)=>{e(i,t)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&F(this.last_,((t,i)=>{e[t]=e[t]-i})),this.last_=t,e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri=1e4,Ni=3e4,zi=3e5;class Fi{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Di(t);const i=Ri+(Ni-Ri)*Math.random();j(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),e={};let i=!1;F(t,((t,s)=>{s>0&&(0,a.r3)(this.statsToReport_,t)&&(e[t]=s,i=!0)})),i&&this.server_.reportStats(e),j(this.reportStats_.bind(this),Math.floor(2*Math.random()*zi))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bi;function Hi(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function $i(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Wi(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(t){t[t["OVERWRITE"]=0]="OVERWRITE",t[t["MERGE"]=1]="MERGE",t[t["ACK_USER_WRITE"]=2]="ACK_USER_WRITE",t[t["LISTEN_COMPLETE"]=3]="LISTEN_COMPLETE"})(Bi||(Bi={}));class Xi{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=Bi.ACK_USER_WRITE,this.source=Hi()}operationForChild(t){if(be(this.path)){if(null!=this.affectedTree.value)return(0,a.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new le(t));return new Xi(he(),e,this.revert)}}return(0,a.hu)(ce(this.path)===t,"operationForChild called for unrelated child."),new Xi(ue(this.path),this.affectedTree,this.revert)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Yi{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=Bi.OVERWRITE}operationForChild(t){return be(this.path)?new Yi(this.source,he(),this.snap.getImmediateChild(t)):new Yi(this.source,ue(this.path),this.snap)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=Bi.MERGE}operationForChild(t){if(be(this.path)){const e=this.children.subtree(new le(t));return e.isEmpty()?null:e.value?new Yi(this.source,he(),e.value):new Vi(this.source,he(),e)}return(0,a.hu)(ce(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Vi(this.source,ue(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(be(t))return this.isFullyInitialized()&&!this.filtered_;const e=ce(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gi(t,e,i,s){const n=[],a=[];return e.forEach((e=>{"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&a.push(Si(e.childName,e.snapshotNode))})),ji(t,n,"child_removed",e,s,i),ji(t,n,"child_added",e,s,i),ji(t,n,"child_moved",a,s,i),ji(t,n,"child_changed",e,s,i),ji(t,n,"value",e,s,i),n}function ji(t,e,i,s,n,a){const r=s.filter((t=>t.type===i));r.sort(((e,i)=>Ui(t,e,i))),r.forEach((i=>{const s=qi(t,i,a);n.forEach((n=>{n.respondsTo(i.type)&&e.push(n.createEvent(s,t.query_))}))}))}function qi(t,e,i){return"value"===e.type||"child_removed"===e.type||(e.prevName=i.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Ui(t,e,i){if(null==e.childName||null==i.childName)throw(0,a.g5)("Should only compare child_ events.");const s=new Ne(e.childName,e.snapshotNode),n=new Ne(i.childName,i.snapshotNode);return t.index_.compare(s,n)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(t,e){return{eventCache:t,serverCache:e}}function Qi(t,e,i,s){return Ki(new Zi(e,i,s),t.serverCache)}function Ji(t,e,i,s){return Ki(t.eventCache,new Zi(e,i,s))}function ts(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function es(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let is;const ss=()=>(is||(is=new Ye(D)),is);class ns{constructor(t,e=ss()){this.value=t,this.children=e}static fromObject(t){let e=new ns(null);return F(t,((t,i)=>{e=e.set(new le(t),i)})),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:he(),value:this.value};if(be(t))return null;{const i=ce(t),s=this.children.get(i);if(null!==s){const n=s.findRootMostMatchingPathAndValue(ue(t),e);if(null!=n){const t=ve(new le(i),n.path);return{path:t,value:n.value}}return null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,(()=>!0))}subtree(t){if(be(t))return this;{const e=ce(t),i=this.children.get(e);return null!==i?i.subtree(ue(t)):new ns(null)}}set(t,e){if(be(t))return new ns(e,this.children);{const i=ce(t),s=this.children.get(i)||new ns(null),n=s.set(ue(t),e),a=this.children.insert(i,n);return new ns(this.value,a)}}remove(t){if(be(t))return this.children.isEmpty()?new ns(null):new ns(null,this.children);{const e=ce(t),i=this.children.get(e);if(i){const s=i.remove(ue(t));let n;return n=s.isEmpty()?this.children.remove(e):this.children.insert(e,s),null===this.value&&n.isEmpty()?new ns(null):new ns(this.value,n)}return this}}get(t){if(be(t))return this.value;{const e=ce(t),i=this.children.get(e);return i?i.get(ue(t)):null}}setTree(t,e){if(be(t))return e;{const i=ce(t),s=this.children.get(i)||new ns(null),n=s.setTree(ue(t),e);let a;return a=n.isEmpty()?this.children.remove(i):this.children.insert(i,n),new ns(this.value,a)}}fold(t){return this.fold_(he(),t)}fold_(t,e){const i={};return this.children.inorderTraversal(((s,n)=>{i[s]=n.fold_(ve(t,s),e)})),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,he(),e)}findOnPath_(t,e,i){const s=!!this.value&&i(e,this.value);if(s)return s;if(be(t))return null;{const s=ce(t),n=this.children.get(s);return n?n.findOnPath_(ue(t),ve(e,s),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,he(),e)}foreachOnPath_(t,e,i){if(be(t))return this;{this.value&&i(e,this.value);const s=ce(t),n=this.children.get(s);return n?n.foreachOnPath_(ue(t),ve(e,s),i):new ns(null)}}foreach(t){this.foreach_(he(),t)}foreach_(t,e){this.children.inorderTraversal(((i,s)=>{s.foreach_(ve(t,i),e)})),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal(((e,i)=>{i.value&&t(e,i.value)}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(t){this.writeTree_=t}static empty(){return new as(new ns(null))}}function rs(t,e,i){if(be(e))return new as(new ns(i));{const s=t.writeTree_.findRootMostValueAndPath(e);if(null!=s){const n=s.path;let a=s.value;const r=xe(n,e);return a=a.updateChild(r,i),new as(t.writeTree_.set(n,a))}{const s=new ns(i),n=t.writeTree_.setTree(e,s);return new as(n)}}}function os(t,e,i){let s=t;return F(i,((t,i)=>{s=rs(s,ve(e,t),i)})),s}function ls(t,e){if(be(e))return as.empty();{const i=t.writeTree_.setTree(e,new ns(null));return new as(i)}}function hs(t,e){return null!=cs(t,e)}function cs(t,e){const i=t.writeTree_.findRootMostValueAndPath(e);return null!=i?t.writeTree_.get(i.path).getChild(xe(i.path,e)):null}function ds(t){const e=[],i=t.writeTree_.value;return null!=i?i.isLeafNode()||i.forEachChild(ni,((t,i)=>{e.push(new Ne(t,i))})):t.writeTree_.children.inorderTraversal(((t,i)=>{null!=i.value&&e.push(new Ne(t,i.value))})),e}function us(t,e){if(be(e))return t;{const i=cs(t,e);return new as(null!=i?new ns(i):t.writeTree_.subtree(e))}}function ps(t){return t.writeTree_.isEmpty()}function gs(t,e){return fs(he(),t.writeTree_,e)}function fs(t,e,i){if(null!=e.value)return i.updateChild(t,e.value);{let s=null;return e.children.inorderTraversal(((e,n)=>{".priority"===e?((0,a.hu)(null!==n.value,"Priority writes must always be leaf nodes"),s=n.value):i=fs(ve(t,e),n,i)})),i.getChild(t).isEmpty()||null===s||(i=i.updateChild(ve(t,".priority"),s)),i}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ms(t,e){return Fs(e,t)}function vs(t,e,i,s,n){(0,a.hu)(s>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===n&&(n=!0),t.allWrites.push({path:e,snap:i,writeId:s,visible:n}),n&&(t.visibleWrites=rs(t.visibleWrites,e,i)),t.lastWriteId=s}function bs(t,e){for(let i=0;i<t.allWrites.length;i++){const s=t.allWrites[i];if(s.writeId===e)return s}return null}function xs(t,e){const i=t.allWrites.findIndex((t=>t.writeId===e));(0,a.hu)(i>=0,"removeWrite called with nonexistent writeId.");const s=t.allWrites[i];t.allWrites.splice(i,1);let n=s.visible,r=!1,o=t.allWrites.length-1;while(n&&o>=0){const e=t.allWrites[o];e.visible&&(o>=i&&ys(e,s.path)?n=!1:we(s.path,e.path)&&(r=!0)),o--}if(n){if(r)return ws(t),!0;if(s.snap)t.visibleWrites=ls(t.visibleWrites,s.path);else{const e=s.children;F(e,(e=>{t.visibleWrites=ls(t.visibleWrites,ve(s.path,e))}))}return!0}return!1}function ys(t,e){if(t.snap)return we(t.path,e);for(const i in t.children)if(t.children.hasOwnProperty(i)&&we(ve(t.path,i),e))return!0;return!1}function ws(t){t.visibleWrites=Cs(t.allWrites,ks,he()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function ks(t){return t.visible}function Cs(t,e,i){let s=as.empty();for(let n=0;n<t.length;++n){const r=t[n];if(e(r)){const t=r.path;let e;if(r.snap)we(i,t)?(e=xe(i,t),s=rs(s,e,r.snap)):we(t,i)&&(e=xe(t,i),s=rs(s,he(),r.snap.getChild(e)));else{if(!r.children)throw(0,a.g5)("WriteRecord should have .snap or .children");if(we(i,t))e=xe(i,t),s=os(s,e,r.children);else if(we(t,i))if(e=xe(t,i),be(e))s=os(s,he(),r.children);else{const t=(0,a.DV)(r.children,ce(e));if(t){const i=t.getChild(ue(e));s=rs(s,he(),i)}}}}}return s}function Ss(t,e,i,s,n){if(s||n){const a=us(t.visibleWrites,e);if(!n&&ps(a))return i;if(n||null!=i||hs(a,he())){const a=function(t){return(t.visible||n)&&(!s||!~s.indexOf(t.writeId))&&(we(t.path,e)||we(e,t.path))},r=Cs(t.allWrites,a,e),o=i||ui.EMPTY_NODE;return gs(r,o)}return null}{const s=cs(t.visibleWrites,e);if(null!=s)return s;{const s=us(t.visibleWrites,e);if(ps(s))return i;if(null!=i||hs(s,he())){const t=i||ui.EMPTY_NODE;return gs(s,t)}return null}}}function _s(t,e,i){let s=ui.EMPTY_NODE;const n=cs(t.visibleWrites,e);if(n)return n.isLeafNode()||n.forEachChild(ni,((t,e)=>{s=s.updateImmediateChild(t,e)})),s;if(i){const n=us(t.visibleWrites,e);return i.forEachChild(ni,((t,e)=>{const i=gs(us(n,new le(t)),e);s=s.updateImmediateChild(t,i)})),ds(n).forEach((t=>{s=s.updateImmediateChild(t.name,t.node)})),s}{const i=us(t.visibleWrites,e);return ds(i).forEach((t=>{s=s.updateImmediateChild(t.name,t.node)})),s}}function As(t,e,i,s,n){(0,a.hu)(s||n,"Either existingEventSnap or existingServerSnap must exist");const r=ve(e,i);if(hs(t.visibleWrites,r))return null;{const e=us(t.visibleWrites,r);return ps(e)?n.getChild(i):gs(e,n.getChild(i))}}function Is(t,e,i,s){const n=ve(e,i),a=cs(t.visibleWrites,n);if(null!=a)return a;if(s.isCompleteForChild(i)){const e=us(t.visibleWrites,n);return gs(e,s.getNode().getImmediateChild(i))}return null}function Ps(t,e){return cs(t.visibleWrites,e)}function Ts(t,e,i,s,n,a,r){let o;const l=us(t.visibleWrites,e),h=cs(l,he());if(null!=h)o=h;else{if(null==i)return[];o=gs(l,i)}if(o=o.withIndex(r),o.isEmpty()||o.isLeafNode())return[];{const t=[],e=r.getCompare(),i=a?o.getReverseIteratorFrom(s,r):o.getIteratorFrom(s,r);let l=i.getNext();while(l&&t.length<n)0!==e(l,s)&&t.push(l),l=i.getNext();return t}}function Es(){return{visibleWrites:as.empty(),allWrites:[],lastWriteId:-1}}function Ls(t,e,i,s){return Ss(t.writeTree,t.treePath,e,i,s)}function Ms(t,e){return _s(t.writeTree,t.treePath,e)}function Os(t,e,i,s){return As(t.writeTree,t.treePath,e,i,s)}function Ds(t,e){return Ps(t.writeTree,ve(t.treePath,e))}function Rs(t,e,i,s,n,a){return Ts(t.writeTree,t.treePath,e,i,s,n,a)}function Ns(t,e,i){return Is(t.writeTree,t.treePath,e,i)}function zs(t,e){return Fs(ve(t.treePath,e),t.writeTree)}function Fs(t,e){return{treePath:t,writeTree:e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,i=t.childName;(0,a.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,a.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const s=this.changeMap.get(i);if(s){const n=s.type;if("child_added"===e&&"child_removed"===n)this.changeMap.set(i,Ci(i,t.snapshotNode,s.snapshotNode));else if("child_removed"===e&&"child_added"===n)this.changeMap.delete(i);else if("child_removed"===e&&"child_changed"===n)this.changeMap.set(i,ki(i,s.oldSnap));else if("child_changed"===e&&"child_added"===n)this.changeMap.set(i,wi(i,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==n)throw(0,a.g5)("Illegal combination of changes: "+t+" occurred after "+s);this.changeMap.set(i,Ci(i,t.snapshotNode,s.oldSnap))}}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}}const $s=new Hs;class Ws{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const e=null!=this.optCompleteServerCache_?new Zi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ns(this.writes_,t,e)}}getChildAfterChild(t,e,i){const s=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:es(this.viewCache_),n=Rs(this.writes_,s,e,1,i,t);return 0===n.length?null:n[0]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xs(t,e){(0,a.hu)(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),(0,a.hu)(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Ys(t,e,i,s,n){const r=new Bs;let o,l;if(i.type===Bi.OVERWRITE){const h=i;h.source.fromUser?o=js(t,e,h.path,h.snap,s,n,r):((0,a.hu)(h.source.fromServer,"Unknown source."),l=h.source.tagged||e.serverCache.isFiltered()&&!be(h.path),o=Gs(t,e,h.path,h.snap,s,n,l,r))}else if(i.type===Bi.MERGE){const h=i;h.source.fromUser?o=Us(t,e,h.path,h.children,s,n,r):((0,a.hu)(h.source.fromServer,"Unknown source."),l=h.source.tagged||e.serverCache.isFiltered(),o=Qs(t,e,h.path,h.children,s,n,l,r))}else if(i.type===Bi.ACK_USER_WRITE){const a=i;o=a.revert?en(t,e,a.path,s,n,r):Js(t,e,a.path,a.affectedTree,s,n,r)}else{if(i.type!==Bi.LISTEN_COMPLETE)throw(0,a.g5)("Unknown operation type: "+i.type);o=tn(t,e,i.path,s,r)}const h=r.getChanges();return Vs(e,o,h),{viewCache:o,changes:h}}function Vs(t,e,i){const s=e.eventCache;if(s.isFullyInitialized()){const n=s.getNode().isLeafNode()||s.getNode().isEmpty(),a=ts(t);(i.length>0||!t.eventCache.isFullyInitialized()||n&&!s.getNode().equals(a)||!s.getNode().getPriority().equals(a.getPriority()))&&i.push(yi(ts(e)))}}function Zs(t,e,i,s,n,r){const o=e.eventCache;if(null!=Ds(s,i))return e;{let l,h;if(be(i))if((0,a.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const i=es(e),n=i instanceof ui?i:ui.EMPTY_NODE,a=Ms(s,n);l=t.filter.updateFullNode(e.eventCache.getNode(),a,r)}else{const i=Ls(s,es(e));l=t.filter.updateFullNode(e.eventCache.getNode(),i,r)}else{const c=ce(i);if(".priority"===c){(0,a.hu)(1===de(i),"Can't have a priority with additional path components");const n=o.getNode();h=e.serverCache.getNode();const r=Os(s,i,n,h);l=null!=r?t.filter.updatePriority(n,r):o.getNode()}else{const a=ue(i);let d;if(o.isCompleteForChild(c)){h=e.serverCache.getNode();const t=Os(s,i,o.getNode(),h);d=null!=t?o.getNode().getImmediateChild(c).updateChild(a,t):o.getNode().getImmediateChild(c)}else d=Ns(s,c,e.serverCache);l=null!=d?t.filter.updateChild(o.getNode(),c,d,a,n,r):o.getNode()}}return Qi(e,l,o.isFullyInitialized()||be(i),t.filter.filtersNodes())}}function Gs(t,e,i,s,n,a,r,o){const l=e.serverCache;let h;const c=r?t.filter:t.filter.getIndexedFilter();if(be(i))h=c.updateFullNode(l.getNode(),s,null);else if(c.filtersNodes()&&!l.isFiltered()){const t=l.getNode().updateChild(i,s);h=c.updateFullNode(l.getNode(),t,null)}else{const t=ce(i);if(!l.isCompleteForPath(i)&&de(i)>1)return e;const n=ue(i),a=l.getNode().getImmediateChild(t),r=a.updateChild(n,s);h=".priority"===t?c.updatePriority(l.getNode(),r):c.updateChild(l.getNode(),t,r,n,$s,null)}const d=Ji(e,h,l.isFullyInitialized()||be(i),c.filtersNodes()),u=new Ws(n,d,a);return Zs(t,d,i,n,u,o)}function js(t,e,i,s,n,a,r){const o=e.eventCache;let l,h;const c=new Ws(n,e,a);if(be(i))h=t.filter.updateFullNode(e.eventCache.getNode(),s,r),l=Qi(e,h,!0,t.filter.filtersNodes());else{const n=ce(i);if(".priority"===n)h=t.filter.updatePriority(e.eventCache.getNode(),s),l=Qi(e,h,o.isFullyInitialized(),o.isFiltered());else{const a=ue(i),h=o.getNode().getImmediateChild(n);let d;if(be(a))d=s;else{const t=c.getCompleteChild(n);d=null!=t?".priority"===pe(a)&&t.getChild(me(a)).isEmpty()?t:t.updateChild(a,s):ui.EMPTY_NODE}if(h.equals(d))l=e;else{const i=t.filter.updateChild(o.getNode(),n,d,a,c,r);l=Qi(e,i,o.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function qs(t,e){return t.eventCache.isCompleteForChild(e)}function Us(t,e,i,s,n,a,r){let o=e;return s.foreach(((s,l)=>{const h=ve(i,s);qs(e,ce(h))&&(o=js(t,o,h,l,n,a,r))})),s.foreach(((s,l)=>{const h=ve(i,s);qs(e,ce(h))||(o=js(t,o,h,l,n,a,r))})),o}function Ks(t,e,i){return i.foreach(((t,i)=>{e=e.updateChild(t,i)})),e}function Qs(t,e,i,s,n,a,r,o){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l,h=e;l=be(i)?s:new ns(null).setTree(i,s);const c=e.serverCache.getNode();return l.children.inorderTraversal(((i,s)=>{if(c.hasChild(i)){const l=e.serverCache.getNode().getImmediateChild(i),c=Ks(t,l,s);h=Gs(t,h,new le(i),c,n,a,r,o)}})),l.children.inorderTraversal(((i,s)=>{const l=!e.serverCache.isCompleteForChild(i)&&null===s.value;if(!c.hasChild(i)&&!l){const l=e.serverCache.getNode().getImmediateChild(i),c=Ks(t,l,s);h=Gs(t,h,new le(i),c,n,a,r,o)}})),h}function Js(t,e,i,s,n,a,r){if(null!=Ds(n,i))return e;const o=e.serverCache.isFiltered(),l=e.serverCache;if(null!=s.value){if(be(i)&&l.isFullyInitialized()||l.isCompleteForPath(i))return Gs(t,e,i,l.getNode().getChild(i),n,a,o,r);if(be(i)){let s=new ns(null);return l.getNode().forEachChild(He,((t,e)=>{s=s.set(new le(t),e)})),Qs(t,e,i,s,n,a,o,r)}return e}{let h=new ns(null);return s.foreach(((t,e)=>{const s=ve(i,t);l.isCompleteForPath(s)&&(h=h.set(t,l.getNode().getChild(s)))})),Qs(t,e,i,h,n,a,o,r)}}function tn(t,e,i,s,n){const a=e.serverCache,r=Ji(e,a.getNode(),a.isFullyInitialized()||be(i),a.isFiltered());return Zs(t,r,i,s,$s,n)}function en(t,e,i,s,n,r){let o;if(null!=Ds(s,i))return e;{const l=new Ws(s,e,n),h=e.eventCache.getNode();let c;if(be(i)||".priority"===ce(i)){let i;if(e.serverCache.isFullyInitialized())i=Ls(s,es(e));else{const t=e.serverCache.getNode();(0,a.hu)(t instanceof ui,"serverChildren would be complete if leaf node"),i=Ms(s,t)}c=t.filter.updateFullNode(h,i,r)}else{const n=ce(i);let a=Ns(s,n,e.serverCache);null==a&&e.serverCache.isCompleteForChild(n)&&(a=h.getImmediateChild(n)),c=null!=a?t.filter.updateChild(h,n,a,ue(i),l,r):e.eventCache.getNode().hasChild(n)?t.filter.updateChild(h,n,ui.EMPTY_NODE,ue(i),l,r):h,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Ls(s,es(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,r)))}return o=e.serverCache.isFullyInitialized()||null!=Ds(s,he()),Qi(e,c,o,t.filter.filtersNodes())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(t,e){const i=es(t.viewCache_);return i&&(t.query._queryParams.loadsAllData()||!be(e)&&!i.getImmediateChild(ce(e)).isEmpty())?i.getChild(e):null}function nn(t,e,i,s){e.type===Bi.MERGE&&null!==e.source.queryId&&((0,a.hu)(es(t.viewCache_),"We should always have a full cache before handling merges"),(0,a.hu)(ts(t.viewCache_),"Missing event cache, even though we have a server cache"));const n=t.viewCache_,r=Ys(t.processor_,n,e,i,s);return Xs(t.processor_,r.viewCache),(0,a.hu)(r.viewCache.serverCache.isFullyInitialized()||!n.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=r.viewCache,an(t,r.changes,r.viewCache.eventCache.getNode(),null)}function an(t,e,i,s){const n=s?[s]:t.eventRegistrations_;return Gi(t.eventGenerator_,e,i,n)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rn,on;function ln(t){(0,a.hu)(!rn,"__referenceConstructor has already been defined"),rn=t}function hn(t,e,i,s){const n=e.source.queryId;if(null!==n){const r=t.views.get(n);return(0,a.hu)(null!=r,"SyncTree gave us an op for an invalid query."),nn(r,e,i,s)}{let n=[];for(const a of t.views.values())n=n.concat(nn(a,e,i,s));return n}}function cn(t,e){let i=null;for(const s of t.views.values())i=i||sn(s,e);return i}function dn(t){(0,a.hu)(!on,"__referenceConstructor has already been defined"),on=t}class un{constructor(t){this.listenProvider_=t,this.syncPointTree_=new ns(null),this.pendingWriteTree_=Es(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function pn(t,e,i,s,n){return vs(t.pendingWriteTree_,e,i,s,n),n?yn(t,new Yi(Hi(),e,i)):[]}function gn(t,e,i=!1){const s=bs(t.pendingWriteTree_,e),n=xs(t.pendingWriteTree_,e);if(n){let e=new ns(null);return null!=s.snap?e=e.set(he(),!0):F(s.children,(t=>{e=e.set(new le(t),!0)})),yn(t,new Xi(s.path,e,i))}return[]}function fn(t,e,i){return yn(t,new Yi($i(),e,i))}function mn(t,e,i){const s=ns.fromObject(i);return yn(t,new Vi($i(),e,s))}function vn(t,e,i,s){const n=Cn(t,s);if(null!=n){const s=Sn(n),a=s.path,r=s.queryId,o=xe(a,e),l=new Yi(Wi(r),o,i);return _n(t,a,l)}return[]}function bn(t,e,i,s){const n=Cn(t,s);if(n){const s=Sn(n),a=s.path,r=s.queryId,o=xe(a,e),l=ns.fromObject(i),h=new Vi(Wi(r),o,l);return _n(t,a,h)}return[]}function xn(t,e,i){const s=!0,n=t.pendingWriteTree_,a=t.syncPointTree_.findOnPath(e,((t,i)=>{const s=xe(t,e),n=cn(i,s);if(n)return n}));return Ss(n,e,a,i,s)}function yn(t,e){return wn(e,t.syncPointTree_,null,ms(t.pendingWriteTree_,he()))}function wn(t,e,i,s){if(be(t.path))return kn(t,e,i,s);{const n=e.get(he());null==i&&null!=n&&(i=cn(n,he()));let a=[];const r=ce(t.path),o=t.operationForChild(r),l=e.children.get(r);if(l&&o){const t=i?i.getImmediateChild(r):null,e=zs(s,r);a=a.concat(wn(o,l,t,e))}return n&&(a=a.concat(hn(n,t,s,i))),a}}function kn(t,e,i,s){const n=e.get(he());null==i&&null!=n&&(i=cn(n,he()));let a=[];return e.children.inorderTraversal(((e,n)=>{const r=i?i.getImmediateChild(e):null,o=zs(s,e),l=t.operationForChild(e);l&&(a=a.concat(kn(l,n,r,o)))})),n&&(a=a.concat(hn(n,t,s,i))),a}function Cn(t,e){return t.tagToQueryMap.get(e)}function Sn(t){const e=t.indexOf("$");return(0,a.hu)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new le(t.substr(0,e))}}function _n(t,e,i){const s=t.syncPointTree_.get(e);(0,a.hu)(s,"Missing sync point for query tag that we're tracking");const n=ms(t.pendingWriteTree_,e);return hn(s,i,n,null)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class An{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new An(e)}node(){return this.node_}}class In{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=ve(this.path_,t);return new In(this.syncTree_,e)}node(){return xn(this.syncTree_,this.path_)}}const Pn=function(t){return t=t||{},t["timestamp"]=t["timestamp"]||(new Date).getTime(),t},Tn=function(t,e,i){return t&&"object"===typeof t?((0,a.hu)(".sv"in t,"Unexpected leaf node or priority contents"),"string"===typeof t[".sv"]?En(t[".sv"],e,i):"object"===typeof t[".sv"]?Ln(t[".sv"],e):void(0,a.hu)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},En=function(t,e,i){switch(t){case"timestamp":return i["timestamp"];default:(0,a.hu)(!1,"Unexpected server value: "+t)}},Ln=function(t,e,i){t.hasOwnProperty("increment")||(0,a.hu)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const s=t["increment"];"number"!==typeof s&&(0,a.hu)(!1,"Unexpected increment value: "+s);const n=e.node();if((0,a.hu)(null!==n&&"undefined"!==typeof n,"Expected ChildrenNode.EMPTY_NODE for nulls"),!n.isLeafNode())return s;const r=n,o=r.getValue();return"number"!==typeof o?s:o+s},Mn=function(t,e,i,s){return Dn(e,new In(i,t),s)},On=function(t,e,i){return Dn(t,new An(e),i)};function Dn(t,e,i){const s=t.getPriority().val(),n=Tn(s,e.getImmediateChild(".priority"),i);let a;if(t.isLeafNode()){const s=t,a=Tn(s.getValue(),e,i);return a!==s.getValue()||n!==s.getPriority().val()?new ti(a,mi(n)):t}{const s=t;return a=s,n!==s.getPriority().val()&&(a=a.updatePriority(new ti(n))),s.forEachChild(ni,((t,s)=>{const n=Dn(s,e.getImmediateChild(t),i);n!==s&&(a=a.updateImmediateChild(t,n))})),a}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}}function Nn(t,e){let i=e instanceof le?e:new le(e),s=t,n=ce(i);while(null!==n){const t=(0,a.DV)(s.node.children,n)||{children:{},childCount:0};s=new Rn(n,s,t),i=ue(i),n=ce(i)}return s}function zn(t){return t.node.value}function Fn(t,e){t.node.value=e,Vn(t)}function Bn(t){return t.node.childCount>0}function Hn(t){return void 0===zn(t)&&!Bn(t)}function $n(t,e){F(t.node.children,((i,s)=>{e(new Rn(i,t,s))}))}function Wn(t,e,i,s){i&&!s&&e(t),$n(t,(t=>{Wn(t,e,!0,s)})),i&&s&&e(t)}function Xn(t,e,i){let s=i?t:t.parent;while(null!==s){if(e(s))return!0;s=s.parent}return!1}function Yn(t){return new le(null===t.parent?t.name:Yn(t.parent)+"/"+t.name)}function Vn(t){null!==t.parent&&Zn(t.parent,t.name,t)}function Zn(t,e,i){const s=Hn(i),n=(0,a.r3)(t.node.children,e);s&&n?(delete t.node.children[e],t.node.childCount--,Vn(t)):s||n||(t.node.children[e]=i.node,t.node.childCount++,Vn(t))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gn=/[\[\].#$\/\u0000-\u001F\u007F]/,jn=/[\[\].#$\u0000-\u001F\u007F]/,qn=10485760,Un=function(t){return"string"===typeof t&&0!==t.length&&!Gn.test(t)},Kn=function(t){return"string"===typeof t&&0!==t.length&&!jn.test(t)},Qn=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Kn(t)},Jn=function(t,e,i){const s=i instanceof le?new ke(i,t):i;if(void 0===e)throw new Error(t+"contains undefined "+Ae(s));if("function"===typeof e)throw new Error(t+"contains a function "+Ae(s)+" with contents = "+e.toString());if(T(e))throw new Error(t+"contains "+e.toString()+" "+Ae(s));if("string"===typeof e&&e.length>qn/3&&(0,a.ug)(e)>qn)throw new Error(t+"contains a string greater than "+qn+" utf8 bytes "+Ae(s)+" ('"+e.substring(0,50)+"...')");if(e&&"object"===typeof e){let i=!1,n=!1;if(F(e,((e,a)=>{if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(n=!0,!Un(e)))throw new Error(t+" contains an invalid key ("+e+") "+Ae(s)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');Ce(s,e),Jn(t,a,s),Se(s)})),i&&n)throw new Error(t+' contains ".value" child '+Ae(s)+" in addition to actual children.")}},ta=function(t,e){const i=e.path.toString();if("string"!==typeof e.repoInfo.host||0===e.repoInfo.host.length||!Un(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==i.length&&!Qn(i))throw new Error((0,a.gK)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ea{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ia(t,e){let i=null;for(let s=0;s<e.length;s++){const n=e[s],a=n.getPath();null===i||ye(a,i.path)||(t.eventLists_.push(i),i=null),null===i&&(i={events:[],path:a}),i.events.push(n)}i&&t.eventLists_.push(i)}function sa(t,e,i){ia(t,i),na(t,(t=>we(t,e)||we(e,t)))}function na(t,e){t.recursionDepth_++;let i=!0;for(let s=0;s<t.eventLists_.length;s++){const n=t.eventLists_[s];if(n){const a=n.path;e(a)?(aa(t.eventLists_[s]),t.eventLists_[s]=null):i=!1}}i&&(t.eventLists_=[]),t.recursionDepth_--}function aa(t){for(let e=0;e<t.events.length;e++){const i=t.events[e];if(null!==i){t.events[e]=null;const s=i.getEventRunner();y&&C("event: "+i.toString()),Z(s)}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra="repo_interrupt",oa=25;class la{constructor(t,e,i,s){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ea,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ei(),this.transactionQueueTree_=new Rn,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function ha(t,e,i){if(t.stats_=ft(t.repoInfo_),t.forceRestClient_||G())t.server_=new Pi(t.repoInfo_,((e,i,s,n)=>{ua(t,e,i,s,n)}),t.authTokenProvider_,t.appCheckProvider_),setTimeout((()=>pa(t,!0)),0);else{if("undefined"!==typeof i&&null!==i){if("object"!==typeof i)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,a.Wl)(i)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new Re(t.repoInfo_,e,((e,i,s,n)=>{ua(t,e,i,s,n)}),(e=>{pa(t,e)}),(e=>{ga(t,e)}),t.authTokenProvider_,t.appCheckProvider_,i),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener((e=>{t.server_.refreshAuthToken(e)})),t.appCheckProvider_.addTokenChangeListener((e=>{t.server_.refreshAppCheckToken(e.token)})),t.statsReporter_=mt(t.repoInfo_,(()=>new Fi(t.stats_,t.server_))),t.infoData_=new Ti,t.infoSyncTree_=new un({startListening:(e,i,s,n)=>{let a=[];const r=t.infoData_.getNode(e._path);return r.isEmpty()||(a=fn(t.infoSyncTree_,e._path,r),setTimeout((()=>{n("ok")}),0)),a},stopListening:()=>{}}),fa(t,"connected",!1),t.serverSyncTree_=new un({startListening:(e,i,s,n)=>(t.server_.listen(e,s,i,((i,s)=>{const a=n(i,s);sa(t.eventQueue_,e._path,a)})),[]),stopListening:(e,i)=>{t.server_.unlisten(e,i)}})}function ca(t){const e=t.infoData_.getNode(new le(".info/serverTimeOffset")),i=e.val()||0;return(new Date).getTime()+i}function da(t){return Pn({timestamp:ca(t)})}function ua(t,e,i,s,n){t.dataUpdateCount++;const r=new le(e);i=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,i):i;let o=[];if(n)if(s){const e=(0,a.UI)(i,(t=>mi(t)));o=bn(t.serverSyncTree_,r,e,n)}else{const e=mi(i);o=vn(t.serverSyncTree_,r,e,n)}else if(s){const e=(0,a.UI)(i,(t=>mi(t)));o=mn(t.serverSyncTree_,r,e)}else{const e=mi(i);o=fn(t.serverSyncTree_,r,e)}let l=r;o.length>0&&(l=Ca(t,r)),sa(t.eventQueue_,l,o)}function pa(t,e){fa(t,"connected",e),!1===e&&va(t)}function ga(t,e){F(e,((e,i)=>{fa(t,e,i)}))}function fa(t,e,i){const s=new le("/.info/"+e),n=mi(i);t.infoData_.updateSnapshot(s,n);const a=fn(t.infoSyncTree_,s,n);sa(t.eventQueue_,s,a)}function ma(t){return t.nextWriteId_++}function va(t){xa(t,"onDisconnectEvents");const e=da(t),i=Ei();Mi(t.onDisconnect_,he(),((s,n)=>{const a=Mn(s,n,t.serverSyncTree_,e);Li(i,s,a)}));let s=[];Mi(i,he(),((e,i)=>{s=s.concat(fn(t.serverSyncTree_,e,i));const n=Ta(t,e);Ca(t,n)})),t.onDisconnect_=Ei(),sa(t.eventQueue_,he(),s)}function ba(t){t.persistentConnection_&&t.persistentConnection_.interrupt(ra)}function xa(t,...e){let i="";t.persistentConnection_&&(i=t.persistentConnection_.id+":"),C(i,...e)}function ya(t,e,i){return xn(t.serverSyncTree_,e,i)||ui.EMPTY_NODE}function wa(t,e=t.transactionQueueTree_){if(e||Pa(t,e),zn(e)){const i=Aa(t,e);(0,a.hu)(i.length>0,"Sending zero length transaction queue");const s=i.every((t=>0===t.status));s&&ka(t,Yn(e),i)}else Bn(e)&&$n(e,(e=>{wa(t,e)}))}function ka(t,e,i){const s=i.map((t=>t.currentWriteId)),n=ya(t,e,s);let r=n;const o=n.hash();for(let c=0;c<i.length;c++){const t=i[c];(0,a.hu)(0===t.status,"tryToSendTransactionQueue_: items in queue should all be run."),t.status=1,t.retryCount++;const s=xe(e,t.path);r=r.updateChild(s,t.currentOutputSnapshotRaw)}const l=r.val(!0),h=e;t.server_.put(h.toString(),l,(s=>{xa(t,"transaction put response",{path:h.toString(),status:s});let n=[];if("ok"===s){const s=[];for(let e=0;e<i.length;e++)i[e].status=2,n=n.concat(gn(t.serverSyncTree_,i[e].currentWriteId)),i[e].onComplete&&s.push((()=>i[e].onComplete(null,!0,i[e].currentOutputSnapshotResolved))),i[e].unwatcher();Pa(t,Nn(t.transactionQueueTree_,e)),wa(t,t.transactionQueueTree_),sa(t.eventQueue_,e,n);for(let t=0;t<s.length;t++)Z(s[t])}else{if("datastale"===s)for(let t=0;t<i.length;t++)3===i[t].status?i[t].status=4:i[t].status=0;else{I("transaction at "+h.toString()+" failed: "+s);for(let t=0;t<i.length;t++)i[t].status=4,i[t].abortReason=s}Ca(t,e)}}),o)}function Ca(t,e){const i=_a(t,e),s=Yn(i),n=Aa(t,i);return Sa(t,n,s),s}function Sa(t,e,i){if(0===e.length)return;const s=[];let n=[];const r=e.filter((t=>0===t.status)),o=r.map((t=>t.currentWriteId));for(let l=0;l<e.length;l++){const r=e[l],h=xe(i,r.path);let c,d=!1;if((0,a.hu)(null!==h,"rerunTransactionsUnderNode_: relativePath should not be null."),4===r.status)d=!0,c=r.abortReason,n=n.concat(gn(t.serverSyncTree_,r.currentWriteId,!0));else if(0===r.status)if(r.retryCount>=oa)d=!0,c="maxretry",n=n.concat(gn(t.serverSyncTree_,r.currentWriteId,!0));else{const i=ya(t,r.path,o);r.currentInputSnapshot=i;const s=e[l].update(i.val());if(void 0!==s){Jn("transaction failed: Data returned ",s,r.path);let e=mi(s);const l="object"===typeof s&&null!=s&&(0,a.r3)(s,".priority");l||(e=e.updatePriority(i.getPriority()));const h=r.currentWriteId,c=da(t),d=On(e,i,c);r.currentOutputSnapshotRaw=e,r.currentOutputSnapshotResolved=d,r.currentWriteId=ma(t),o.splice(o.indexOf(h),1),n=n.concat(pn(t.serverSyncTree_,r.path,d,r.currentWriteId,r.applyLocally)),n=n.concat(gn(t.serverSyncTree_,h,!0))}else d=!0,c="nodata",n=n.concat(gn(t.serverSyncTree_,r.currentWriteId,!0))}sa(t.eventQueue_,i,n),n=[],d&&(e[l].status=2,function(t){setTimeout(t,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&("nodata"===c?s.push((()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot))):s.push((()=>e[l].onComplete(new Error(c),!1,null)))))}Pa(t,t.transactionQueueTree_);for(let a=0;a<s.length;a++)Z(s[a]);wa(t,t.transactionQueueTree_)}function _a(t,e){let i,s=t.transactionQueueTree_;i=ce(e);while(null!==i&&void 0===zn(s))s=Nn(s,i),e=ue(e),i=ce(e);return s}function Aa(t,e){const i=[];return Ia(t,e,i),i.sort(((t,e)=>t.order-e.order)),i}function Ia(t,e,i){const s=zn(e);if(s)for(let n=0;n<s.length;n++)i.push(s[n]);$n(e,(e=>{Ia(t,e,i)}))}function Pa(t,e){const i=zn(e);if(i){let t=0;for(let e=0;e<i.length;e++)2!==i[e].status&&(i[t]=i[e],t++);i.length=t,Fn(e,i.length>0?i:void 0)}$n(e,(e=>{Pa(t,e)}))}function Ta(t,e){const i=Yn(_a(t,e)),s=Nn(t.transactionQueueTree_,e);return Xn(s,(e=>{Ea(t,e)})),Ea(t,s),Wn(s,(e=>{Ea(t,e)})),i}function Ea(t,e){const i=zn(e);if(i){const s=[];let n=[],r=-1;for(let e=0;e<i.length;e++)3===i[e].status||(1===i[e].status?((0,a.hu)(r===e-1,"All SENT items should be at beginning of queue."),r=e,i[e].status=3,i[e].abortReason="set"):((0,a.hu)(0===i[e].status,"Unexpected transaction status in abort"),i[e].unwatcher(),n=n.concat(gn(t.serverSyncTree_,i[e].currentWriteId,!0)),i[e].onComplete&&s.push(i[e].onComplete.bind(null,new Error("set"),!1,null))));-1===r?Fn(e,void 0):i.length=r+1,sa(t.eventQueue_,Yn(e),n);for(let t=0;t<s.length;t++)Z(s[t])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function La(t){let e="";const i=t.split("/");for(let n=0;n<i.length;n++)if(i[n].length>0){let t=i[n];try{t=decodeURIComponent(t.replace(/\+/g," "))}catch(s){}e+="/"+t}return e}function Ma(t){const e={};"?"===t.charAt(0)&&(t=t.substring(1));for(const i of t.split("&")){if(0===i.length)continue;const s=i.split("=");2===s.length?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):I(`Invalid query segment '${i}' in query '${t}'`)}return e}const Oa=function(t,e){const i=Da(t),s=i.namespace;"firebase.com"===i.domain&&A(i.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),s&&"undefined"!==s||"localhost"===i.domain||A("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),i.secure||P();const n="ws"===i.scheme||"wss"===i.scheme;return{repoInfo:new ht(i.host,i.secure,s,n,e,"",s!==i.subdomain),path:new le(i.pathString)}},Da=function(t){let e="",i="",s="",n="",a="",r=!0,o="https",l=443;if("string"===typeof t){let h=t.indexOf("//");h>=0&&(o=t.substring(0,h-1),t=t.substring(h+2));let c=t.indexOf("/");-1===c&&(c=t.length);let d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(c,d)),c<d&&(n=La(t.substring(c,d)));const u=Ma(t.substring(Math.min(t.length,d)));h=e.indexOf(":"),h>=0?(r="https"===o||"wss"===o,l=parseInt(e.substring(h+1),10)):h=e.length;const p=e.slice(0,h);if("localhost"===p.toLowerCase())i="localhost";else if(p.split(".").length<=2)i=p;else{const t=e.indexOf(".");s=e.substring(0,t).toLowerCase(),i=e.substring(t+1),a=s}"ns"in u&&(a=u["ns"])}return{host:e,port:l,domain:i,subdomain:s,secure:r,scheme:o,pathString:n,namespace:a}},Ra="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";(function(){let t=0;const e=[]})();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Na{constructor(t,e,i,s){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=s}get key(){return be(this._path)?null:pe(this._path)}get ref(){return new za(this._repo,this._path)}get _queryIdentifier(){const t=Ii(this._queryParams),e=N(t);return"{}"===e?"default":e}get _queryObject(){return Ii(this._queryParams)}isEqual(t){if(t=(0,a.m9)(t),!(t instanceof Na))return!1;const e=this._repo===t._repo,i=ye(this._path,t._path),s=this._queryIdentifier===t._queryIdentifier;return e&&i&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+ge(this._path)}}class za extends Na{constructor(t,e){super(t,e,new _i,!1)}get parent(){const t=me(this._path);return null===t?null:new za(this._repo,t)}get root(){let t=this;while(null!==t.parent)t=t.parent;return t}}ln(za),dn(za);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Fa="FIREBASE_DATABASE_EMULATOR_HOST",Ba={};let Ha=!1;function $a(t,e,i,s){t.repoInfo_=new ht(`${e}:${i}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),s&&(t.authTokenProvider_=s)}function Wa(t,e,i,s,n){let a=s||t.options.databaseURL;void 0===a&&(t.options.projectId||A("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),C("Using default host for project ",t.options.projectId),a=`${t.options.projectId}-default-rtdb.firebaseio.com`);let r,o,l=Oa(a,n),h=l.repoInfo;"undefined"!==typeof process&&(o={NODE_ENV:"production",BASE_URL:"/CS6131/"}[Fa]),o?(r=!0,a=`http://${o}?ns=${h.namespace}`,l=Oa(a,n),h=l.repoInfo):r=!l.repoInfo.secure;const c=n&&r?new K(K.OWNER):new U(t.name,t.options,e);ta("Invalid Firebase Database URL",l),be(l.path)||A("Database URL must point to the root of a Firebase Database (not including a child path).");const d=Ya(h,t,c,new q(t.name,i));return new Va(d,t)}function Xa(t,e){const i=Ba[e];i&&i[t.key]===t||A(`Database ${e}(${t.repoInfo_}) has already been deleted.`),ba(t),delete i[t.key]}function Ya(t,e,i,s){let n=Ba[e.name];n||(n={},Ba[e.name]=n);let a=n[t.toURLString()];return a&&A("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new la(t,Ha,i,s),n[t.toURLString()]=a,a}class Va{constructor(t,e){this._repoInternal=t,this.app=e,this["type"]="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(ha(this._repoInternal,this.app.options.appId,this.app.options["databaseAuthVariableOverride"]),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new za(this._repo,he())),this._rootInternal}_delete(){return null!==this._rootInternal&&(Xa(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&A("Cannot call "+t+" on a deleted database.")}}function Za(t=(0,s.Mq)(),e){const i=(0,s.qX)(t,"database").getImmediate({identifier:e}),n=(0,a.P0)("database");return n&&Ga(i,...n),i}function Ga(t,e,i,s={}){t=(0,a.m9)(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&A("Cannot call useEmulator() after instance has already been initialized.");const n=t._repoInternal;let r;if(n.repoInfo_.nodeAdmin)s.mockUserToken&&A('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),r=new K(K.OWNER);else if(s.mockUserToken){const e="string"===typeof s.mockUserToken?s.mockUserToken:(0,a.Sg)(s.mockUserToken,t.app.options.projectId);r=new K(e)}$a(n,e,i,r)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ja(t){c(s.Jn),(0,s.Xd)(new n.wA("database",((t,{instanceIdentifier:e})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),n=t.getProvider("app-check-internal");return Wa(i,s,n,e)}),"PUBLIC").setMultipleInstances(!0)),(0,s.KN)(o,l,t),(0,s.KN)(o,l,"esm2017")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Re.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Re.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};ja()}}]);
//# sourceMappingURL=about.85891e96.js.map